<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>dev RSS - Tab Atkins</title>
    <link>https://www.xanthir.com/</link>
    <description>Tab Atkins RSS 피드</description>
    <lastBuildDate>Sat, 21 Feb 2026 16:08:51 GMT</lastBuildDate>
    <item>
      <title>Houserules in my D&amp;amp;D Games, Part 2</title>
      <link>http://www.xanthir.com/b5P00</link>
      <guid>http://www.xanthir.com/b5P00</guid>
      <pubDate>Mon, 23 Jan 2023 23:58:37 GMT</pubDate>
      <content:encoded>&lt;p&gt;&lt;a href=&quot;http://www.xanthir.com/b57U0&quot; title=&quot;&quot;&gt;A few years back&lt;/a&gt; I laid out some houserules I was planning to use for an upcoming D&amp;amp;D campaign. That campaign finished up, and I&apos;m thinking about running another, so I&apos;ve spent some time thinking over what I liked and disliked with what I did, and what I&apos;d tweak further.&lt;p&gt;I&apos;ll start with my current plans, then go over my evaluations and reasoning later.&lt;h2&gt;Carried Over From Last Time&lt;/h2&gt;&lt;p&gt;First, Flexibility, Unearthed Arcana, and The Wagon are still in play from my previous post. &lt;h3&gt;Justification&lt;/h3&gt;&lt;p&gt;The first two are just good sense. We didn&apos;t actually &lt;i&gt;use&lt;/i&gt; The Wagon much, but that&apos;s fine, it just means mundane items didn&apos;t end up mattering much, and we didn&apos;t need to worry about them. Overall low impact and good for players.&lt;h2&gt;New Rest System&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;Short rests take 10 minutes, and are otherwise unchanged.&lt;li&gt;&quot;Field rests&quot; are an 8-hour rest (generally sleeping) when you&apos;re in a dangerous/stressful place (aka out on an adventure). They&apos;re identical to short rests, except you also regain HP equal to your level (without having to spend hit dice), and let you regain &lt;i&gt;one&lt;/i&gt; spell slot or &lt;i&gt;one&lt;/i&gt; use of a long-rest ability.&lt;li&gt;Long rests are as normal, but can only be taken in a safe place where you can properly relax, like a safe inn in a town where you don&apos;t have any reason to fear attack. &quot;Magic camping&quot; like Leomund&apos;s Tiny Hut or Rope Trick don&apos;t count; they give field rests.&lt;/ul&gt;&lt;h3&gt;Justification&lt;/h3&gt;&lt;p&gt;Still trying to find the right balance of how people &lt;i&gt;actually&lt;/i&gt; play (1-2 encounters a day, usually) versus how the rules &lt;i&gt;assume&lt;/i&gt; people play (5-8 encounters a day), which is just &lt;i&gt;nonsense&lt;/i&gt;; real-world play effectively gives long-rest classes (aka spellcasters) a massive buff since they can unload all their resources in most battles.&lt;p&gt;Making short rests shorter just makes them easier to squeeze in, narratively, without significantly impacting how often they can be used. It&apos;s actually totally fine for people to short rest between every battle, honestly, if they can swing it, and overusing a &quot;shorter&quot; short rest is better than &lt;i&gt;not&lt;/i&gt; using short rests at all because pausing the action for an hour is hard to justify.&lt;p&gt;Previously my long rests were a downtime activity, aka several days of rest between adventures. This just proved narratively binding, bc I couldn&apos;t give my players a long rest where an adventure &lt;i&gt;did&lt;/i&gt; expect them to receive one. Limiting to &quot;safety and relaxation&quot; gives a lot more flexibility while still avoiding the major problem of &quot;fully rested between every encounter on the road&quot; that I was trying to fix.&lt;p&gt;Field rest is me simplifying my previous rest and HP rules. First, using the Wizard&apos;s spell-recovery mechanic just turned out to be a little too complex for people who weren&apos;t actively playing wizards; switching to a short and sweet &quot;regain one slot&quot; should hopefully fix that up. It then chains nicely with &quot;or one long-rest ability use&quot;. The power level of this regained thing can vary wildly, but I&apos;m okay with that. Really I just want to give players &lt;i&gt;some&lt;/i&gt; ability to recover from a harsh fight that drained more resources than expected, besides abandoning the dungeon or whatever. Hopefully this hits well.&lt;h2&gt;Group Initiative + Init Rewards&lt;/h2&gt;&lt;p&gt;When combat starts, all players roll initiative against the enemy&apos;s leader (or any appropriate enemy). If at least half win the opposed roll, the party gets first turn; otherwise enemies do. All party members (or all enemies) can act in any order during their turn.&lt;p&gt;Additionally, any player who wins their initiative roll gets to apply advantage or disadvantage to &lt;i&gt;all&lt;/i&gt; rolls during their first round, whether the party won or lost the group roll.&lt;h3&gt;Justification&lt;/h3&gt;&lt;p&gt;Fast/slow initiative was &lt;i&gt;okay&lt;/i&gt;, but ended up with a few problems. Always letting players go first had a larger impact than I&apos;d hoped, and took a lot of tension out of the start of combat - you were always guaranteed you could get set up on that first turn (barring a legit Surprise). Also, the decision of fast vs slow caused a little more analysis-paralysis than I anticipated. Overall, it was just slightly too much downside for not quite enough benefit. &lt;p&gt;Group initiative is still a hit, tho. The flexibility is great in setting up combos, and it&apos;s just plain easier than the slog of calling out initiatives and figuring out order.&lt;p&gt;Also, fast/slow made the Init stat &lt;i&gt;completely&lt;/i&gt; irrelevant, but there&apos;s &lt;i&gt;just enough&lt;/i&gt; stuff that interacts with it in the rules that this was a little annoying. Bringing it back in approximately its normal role just means less edits.&lt;p&gt;But also, Init in RAW is &lt;i&gt;pretty much&lt;/i&gt; irrelevant. All a high Init does is &lt;i&gt;slightly&lt;/i&gt; predispose you to get your first action before an enemy&apos;s first action, but after that first round it has zero effect, and the variability of the d20 combined with how often you roll it (much less than attacks/saves) means in practice it had no real noticeable effect.&lt;p&gt;Changing it to a group roll with a pass/fail condition rather than individually graded should help a lot with this. You don&apos;t feel bad when the -1 Init heavy-armor fighter rolls higher than you; everyone who succeeds gets the same benefit, and helps the entire group. And when your +4 bonus &lt;i&gt;does&lt;/i&gt; roll high (as it&apos;ls do 25% more often than the -1), you&apos;ll get a &lt;i&gt;noticeable&lt;/i&gt; benefit out of it rather than just a trivial scheduling benefit.&lt;h2&gt;Attacks and Cantrips Auto-Hit, + Damage Crits&lt;/h2&gt;&lt;p&gt;The biggest change so far: if you take the Attack action, or cast a cantrip, you hit automatically. (Or if a cantrip uses a saving throw, the enemy fails automatically.)&lt;p&gt;Additional effects on the attack (like a saving throw from a Battlemaster technique) are still rolled as normal. Non-Attack actions and levelled spells also roll as normal.&lt;p&gt;Instead of crits from rolling 20s, damage dice from an auto-hit explode: any die that rolls max gets rolled again, adding to the result, and this can happen multiple times. This applies to &lt;i&gt;all&lt;/i&gt; dice from the attack, including things like Smite or Sneak Attack.&lt;p&gt;When something additional happens on a crit (orc ability, sword of sharpness, etc), it now triggers if the weapon&apos;s damage dice sum to 15 or more (after exploding). This does &lt;i&gt;not&lt;/i&gt; include stat bonuses, additional dice, etc., just the core weapon&apos;s die. (This is subject to change.)&lt;p&gt;The Champion&apos;s ability to crit on 19-20 becomes that your dice now explode on one additional number - d4 crits on 3 or 4, d12 on 11 or 12, etc. (This is &lt;i&gt;definitely&lt;/i&gt; subject to change, I don&apos;t think I&apos;m happy with &lt;a href=&quot;https://tinyurl.com/3e23rrzw&quot; title=&quot;&quot;&gt;its results&lt;/a&gt;.)&lt;h3&gt;Justification&lt;/h3&gt;&lt;p&gt;A regular complaint from players, especially melee-ers, is that it feels very bad to have a &quot;wasted&quot; turn when your attacks all whiff - especially before 5th level when you&apos;ve only got one attack, but it continues to happen a good amount of the time at higher levels too. Spellcasters are often hitting multiple people, and dealing half damage even when they fail, so they always feel like they&apos;re &quot;contributing&quot;, but too often a melee class can feel like they did &lt;i&gt;nothing&lt;/i&gt; in a round due to bad rolls.&lt;p&gt;So hey, let&apos;s fix that. The bread and butter of melee classes Just Works now. Not only can you &lt;i&gt;always&lt;/i&gt; contribute at least &lt;i&gt;some&lt;/i&gt; damage, but your crits feel a bit better too (always sucks to roll a crit and then, like, roll a 1 and a 2 on the damage dice). This also effectively buffs these classes&apos; damage output by 50%-100% relative to spellcasters, which is just as much a good thing here as it is in the Rest rules.&lt;p&gt;(Cantrips fall into the same &quot;feel bad&quot; camp - when you&apos;re spending your turn being conservative with a cantrip rather than using a spell slot, it feels just as bad when you miss that and feel like you did nothing for the round.)&lt;p&gt;I&apos;ll compensate for the buffs on the DM side by putting a little extra HP on monsters, which is extremely easy for me to do on the fly.&lt;p&gt;The only &lt;i&gt;real&lt;/i&gt; problem for me is that exploding-dice massively favor 2d4/2d6 weapons over their 1d8/1d12 equivalents. The math &lt;i&gt;already&lt;/i&gt; favors them slightly in the normal rules (2d6 averages 7 damage, while 1d12 averages 6.5), but the gulf widens even more here. I&apos;ll see how I feel about this in practice; I know most players don&apos;t spend time writing a dice-simulation library to run numbers on these sorts of things, so probably it&apos;ll just not matter to them. ^_^</content:encoded>
    </item>
    <item>
      <title>Best Potionomics Deck I&apos;ve Found</title>
      <link>http://www.xanthir.com/b5N40</link>
      <guid>http://www.xanthir.com/b5N40</guid>
      <pubDate>Mon, 28 Nov 2022 17:09:04 GMT</pubDate>
      <content:encoded>&lt;p&gt;&lt;a href=&quot;https://potionomics.com/&quot; title=&quot;&quot;&gt;Potionomics&lt;/a&gt; is a really fun game I&apos;ve been following for a while, that just recently finally released. You play a potion-maker, crafting and selling potions, sending heroes out on adventures (buffed by your potions) to gather rare potion ingredients, and befriend and romance a bunch of adorable NPCs. I love it! The writing is so good!&lt;p&gt;Anyway, a big part of the mechanics is &lt;i&gt;selling&lt;/i&gt; your potions, or promoting them to a judge during the potion competitions. This is done with a very fun little card-battling subsystem, where you deal &quot;interest&quot; to the customer to raise your potion&apos;s price, avoid using up all of their &quot;patience&quot;, and they deal &quot;stress&quot; back to you in return.&lt;p&gt;Your starting deck sucks, and you get better cards from befriending NPCs. After some experimentation and &lt;a href=&quot;https://re-actor.net/potionomics-infinity-deck-potionomics-is-perfectly-balanced/&quot; title=&quot;&quot;&gt;reading&lt;/a&gt;, I think I have hit on the optimal deck, tho. It&apos;s based on Chorus, card draw, and cost reduction, and can &lt;i&gt;almost always&lt;/i&gt; fully max a customer&apos;s interest by turn 2 or 3 at the latest, while keeping your stress minimal.&lt;h2&gt;Basic Deck&lt;/h2&gt;&lt;p&gt;You can swap some cards for better ones later, but these are required to get the deck working. It can be fully built on Day 21 at the earliest, just after you recruit Corsac and have his first card.&lt;ul&gt;&lt;li&gt;Xid Rank 6, for Jingle, Chorus, Improv, and Rhythm&lt;li&gt;Saffron Rank 5, for Meditate and Deep Connection&lt;li&gt;Quinn Rank 5, for Press The Attack and Pressure&lt;li&gt;Baptiste Rank 1, for Captivate&lt;li&gt;Corsac Rank 1, for Ferocity of the Squirrel&lt;li&gt;Owl Rank 2, for Scheme and Two Is Better Than One&lt;/ul&gt;&lt;p&gt;The decklist is:&lt;ul&gt;&lt;li&gt;Jingle x2&lt;li&gt;Chorus x4&lt;li&gt;Improv x2&lt;li&gt;Rhythm x2&lt;li&gt;Meditate x2&lt;li&gt;Deep Connection x1&lt;li&gt;Press The Attack x1&lt;li&gt;Pressure x1&lt;li&gt;Captivate x1&lt;li&gt;Ferocity of the Squirrel x1&lt;li&gt;Scheme x2&lt;li&gt;Two Is Better Than One x1&lt;/ul&gt;&lt;h2&gt;Deck Strategy&lt;/h2&gt;&lt;p&gt;The powerhouse of this Deck is Chorus - you&apos;ll play it 5-6 times per negotiation. All your card draw is to enable you to draw more Choruses. Improv and Scheme are your major card draw; Quinn&apos;s draw cards are last-ditch but can occasionally save your negotiation.&lt;p&gt;Ferocity is very important for the additional interest - you&apos;ll play 10-15 cards per negotiation, so this is worth 20-30 extra interest &lt;i&gt;for free&lt;/i&gt;, as much as an additional Chorus! And remember that the effect lasts &lt;i&gt;the entire haggle session&lt;/i&gt;, carrying over to later customers, so you don&apos;t need to cast it again (unless you have patience to spare or it&apos;s free, to get the 2 interest from playing a card).&lt;p&gt;Two Is Better Than One is used to clone Improv and Chorus two or three times each. Remember that the cloned cards &lt;i&gt;also&lt;/i&gt; last &lt;i&gt;the entire haggle session&lt;/i&gt;, so some early plays will improve your deck for all later customers. If you&apos;ve filled up on Improv/Chorus or just don&apos;t have them in your hand, feel free to clone Jingle or Captivate, or Meditate if your stress is getting worrisome. Don&apos;t clone too much, tho - you don&apos;t want your deck hitting more than 27 or 28 cards total or it&apos;ll choke up your draws.&lt;p&gt;Jingle is a surprise key card - not only will it reduce Scheme or Rhythm to 0 cost, but it can actually reduce 1 or 0-cost cards to &lt;i&gt;negative&lt;/i&gt; cost, making them &lt;i&gt;add&lt;/i&gt; patience to the customer!  (You&apos;ll see this in the UI as something like &quot;--2&quot;, meaning it&apos;s adding 2 patience.) In other words, it&apos;s equivalent to a non-opener Captivate, or if Rhythm is active, to an opener Captivate!&lt;p&gt;Rhythm is important for kicking the deck into long-combo mode on turn 2 or 3, as it makes most of your deck free. If you have a Rhythm in your hand, it can be useful to play it and any Choruses you&apos;re holding, then just end your turn immediately - your next turn will be &lt;i&gt;far&lt;/i&gt; more productive instead. Just make sure you&apos;ll have 2 or 3 patience at the start of your next turn, so you can play a Scheme.&lt;p&gt;Captivate&apos;s use is obvious, and Deep Connection is similar. You don&apos;t &lt;i&gt;always&lt;/i&gt; need to cast Deep Connection, but burning thru a hand for the free Ferocity interest and making it all back from Deep Connection can be very useful.&lt;p&gt;Finally, managing stress is very important - you need all the cards you draw to keep this deck going, so having them replaced by Stress Cards can kill a negotiation. (Plus they prevent you from using Deep Connection!) Play Meditate whenever you can, and prefer ending a negotiation early if the customer is threatening to send you past 10% stress. That 10-20% stress interval is the Danger Zone, as even mildly unlucky RNG can suddenly put three or more stress cards in your hand and bump your stress even higher.&lt;h2&gt;Perfected Deck&lt;/h2&gt;&lt;p&gt;Making the deck perfect just requires spending more time with Saffron (you were gonna do that anyway for her coupons).&lt;p&gt;At rank 7, you earn Regulated Breathing, which should immediately replace Meditate. Like Ferocity, this buff lasts &lt;i&gt;the entire haggle session&lt;/i&gt;; unlike Ferocity, it &lt;i&gt;stacks&lt;/i&gt; every time you play it, so by the third or fourth customer you can bump the effect enough to be reducing your stress by 6+ each turn, keeping you at 0% no matter what the opponent does and ensuring you &lt;i&gt;never&lt;/i&gt; draw a stress card unless the opponent specifically forces it.&lt;p&gt;At rank 9, you earn Serenity of Mind, which should immediately replace Scheme. You&apos;re &lt;i&gt;always&lt;/i&gt; keeping your stress below 20% - at this point, it&apos;s almost always at 0% - so this is a strict upgrade, and a &lt;i&gt;massive&lt;/i&gt; one at that.&lt;h2&gt;Alternative Deck&lt;/h2&gt;&lt;p&gt;You can get a reasonably-functioning version of this deck going during the second week, if you&apos;re quick to raise Xid and Saffron, and spend some time with Muktuk as well.&lt;ul&gt;&lt;li&gt;Use Build Rapport (Baptiste rank 2) instead of Two Is Better Than One - Sympathy can offset the lack of additional Choruses.&lt;li&gt;Use Bravado (Muktuk rank 5) instead of Ferocity - it&apos;s more powerful (3 interest per card) but only lasts two turns.&lt;li&gt;Swap one or both of your Meditates for Guided Thought - less stress reduction, but keeps the interest pressure going.&lt;li&gt;Use a second Captivate instead of Deep Connection, if you haven&apos;t gotten Saffron to rank 5 yet for the card.&lt;/ul&gt;&lt;p&gt;Unfortunately Xid&apos;s Rhythm (rank 6) is pretty core to making the deck pop off, so boosting her relationship as quickly as possible with gifts and hang-outs should be a top priority.</content:encoded>
    </item>
    <item>
      <title>Roll.js, an Exact Dice-Simulation Library</title>
      <link>http://www.xanthir.com/b5LG0</link>
      <guid>http://www.xanthir.com/b5LG0</guid>
      <pubDate>Fri, 12 Aug 2022 16:53:25 GMT</pubDate>
      <content:encoded>
        &lt;p&gt;Are you the sort of person who likes to play around with RPG or boardgame mechanics? Have you ever looked at some dice-based mechanic and wondered just what the outcome chances really were, but instead just gave up, rolled a couple of times, and relied on vibes? Have you tried using &lt;a href=&quot;https://anydice.com&quot; title=&quot;&quot;&gt;AnyDice.com&lt;/a&gt; but gave up when you saw you&apos;d have to learn a funky DSL to do anything non-trivial? Do you know JavaScript?&lt;p&gt;If you answered yes to some of those questions, I&apos;ve got a new library for you! &lt;a href=&quot;https://github.com/tabatkins/roll/&quot; title=&quot;&quot;&gt;Roll.js&lt;/a&gt; is an &lt;i&gt;exact-results&lt;/i&gt; dice-simulation library - it doesn&apos;t do simulations of the &quot;repeat 10k times and report the average&quot;, it tracks every outcome with its precise chance of occurring (up to floating-point accuracy, at least).&lt;p&gt;The &lt;a href=&quot;https://github.com/tabatkins/roll/&quot; title=&quot;&quot;&gt;README&lt;/a&gt; explains the library itself, and there&apos;s a &lt;a href=&quot;https://tabatkins.github.io/roll/&quot; title=&quot;&quot;&gt;playground tool&lt;/a&gt; that&apos;ll let you write code against it immediately and even share the results with others! There are several bits of example code in the README, and several more in the playground (click the ? in the upper-right).&lt;p&gt;For example, a simple &quot;d20 with advantage&quot; roll is:&lt;pre class=&apos;code&apos;&gt;Roll.d20.advantage()&lt;/pre&gt;&lt;p&gt;&lt;a href=&quot;https://tabatkins.github.io/roll/#Roll.d20.advantage()&quot;&gt;(playground link)&lt;/a&gt;&lt;p&gt;Want to know average damage of a greatsword after Great Weapon Master is applied (re-roll 1s and 2s, a single time)?&lt;pre class=&apos;code&apos;&gt;Roll.nd(2, 6).replace(x=&amp;gt; x &amp;lt;= 2, Roll.d6).sum();&lt;/pre&gt;&lt;p&gt;&lt;a href=&quot;https://tabatkins.github.io/roll/#Roll.nd(2%2C%206).replace(x%3D%3E%20x%20%3C%3D%202%2C%20Roll.d6).sum()%3B&quot;&gt;(playground link)&lt;/a&gt;&lt;p&gt;Wanna build a d5 out of a d6 by rerolling 6s until they stop coming up, as long as it takes?&lt;pre class=&apos;code&apos;&gt;// &amp;quot;reroll()&amp;quot; calls map on its returned Roll
        // results again, until things stabilize.
        Roll.d6.reroll({
        map: x=&amp;gt; (x == 6) ? Roll.d6 : x
        });&lt;/pre&gt;&lt;p&gt;&lt;a href=&quot;https://tabatkins.github.io/roll/#%2F%2F%20%22reroll()%22%20calls%20map%20on%20its%20returned%20Roll%20%0A%2F%2F%20results%20again%2C%20until%20things%20stabilize.%0ARoll.d6.reroll(%7B%0A%20%20map%3A%20x%3D%3E%20(x%20%3D%3D%206)%20%3F%20Roll.d6%20%3A%20x%0A%7D)%3B&quot;&gt;(playground link)&lt;/a&gt;&lt;p&gt;Wanna do something complicated, like figure out what the chances are of dying/stabilizing/reviving from a D&amp;amp;D death save?&lt;pre class=&apos;code&apos;&gt;Roll.d20.reroll({
        summarize(roll, oldSummary={}) {
        return {
        successes:(roll&amp;gt;=10?1:0) + (oldSummary.successes || 0),
        failures:(roll&amp;lt;10?1:0) + (roll==1?1:0) + (oldSummary.failures || 0),
        nat20: (roll==20),
        toString() { return `${this.successes}/${this.failures}/${this.nat20}`; },
        }
        },
        map(summary) {
        if(summary.nat20) return &amp;quot;revive&amp;quot;;
        if(summary.successes &amp;gt;= 3) return &amp;quot;stabilize&amp;quot;;
        if(summary.failures &amp;gt;= 3) return &amp;quot;die&amp;quot;;
        return Roll.d20;
        }
        })&lt;/pre&gt;&lt;p&gt;&lt;a href=&quot;https://tabatkins.github.io/roll/#Roll.d20.reroll(%7B%0A%09summarize(roll%2C%20oldSummary%3D%7B%7D)%20%7B%0A%09%09return%20%7B%0A%09%09%09successes%3A(roll%3E%3D10%3F1%3A0)%20%2B%20(oldSummary.successes%20%7C%7C%200)%2C%0A%09%09%09failures%3A(roll%3C10%3F1%3A0)%20%2B%20(roll%3D%3D1%3F1%3A0)%20%2B%20(oldSummary.failures%20%7C%7C%200)%2C%0A%09%09%09nat20%3A%20(roll%3D%3D20)%2C%0A%09%09%09toString()%20%7B%20return%20%60%24%7Bthis.successes%7D%2F%24%7Bthis.failures%7D%2F%24%7Bthis.nat20%7D%60%3B%20%7D%2C%0A%09%09%7D%0A%09%7D%2C%0A%09map(summary)%20%7B%0A%09%09if(summary.nat20)%20return%20%22revive%22%3B%0A%09%09if(summary.successes%20%3E%3D%203)%20return%20%22stabilize%22%3B%0A%09%09if(summary.failures%20%3E%3D%203)%20return%20%22die%22%3B%0A%09%09return%20Roll.d20%3B%0A%09%7D%0A%7D)&quot;&gt;(playground link)&lt;/a&gt;&lt;hr&gt;&lt;p&gt;Point is, this library can do &lt;i&gt;a lot&lt;/i&gt; of stuff, pretty easily, and you can use the JS you already know to do arbitrarily complicated stuff with it. I originally wrote it because I was fed up rewriting simulation code every time my brother and I were thinking about D&amp;amp;D homebrew, and in particular when I wrote some code to test out an alternate death-save mechanic it was getting too complicated; I figured I could just do it right, once, and (after several days of swearing at infinite-looping reroll code) I was correct!&lt;p&gt;At the moment the convenience functions (like &lt;code&gt;.advantage()&lt;/code&gt;) are pretty biased towards D&amp;amp;D 5e usage, but I&apos;m happy to add more for other dice systems. If you have any you&apos;d like to see, let me know in a comment!
      </content:encoded>
    </item>
    <item>
      <title>How To: Correctly Test for Python&apos;s Version</title>
      <link>http://www.xanthir.com/b5HL0</link>
      <guid>http://www.xanthir.com/b5HL0</guid>
      <pubDate>Thu, 17 Feb 2022 21:24:10 GMT</pubDate>
      <content:encoded>&lt;p&gt;Python has four obvious built-in ways to retrieve its current version. If your software has a minimum version requirement, you&apos;ll use one of these methods to test whether the Python currently running your code is a high-enough version to do so successfully.&lt;p&gt;Three of these ways are worthless, actively-harmful traps. If you read nothing else, read this: use &lt;code&gt;sys.version_info&lt;/code&gt;.&lt;p&gt;The four ways are:&lt;ul&gt;&lt;li&gt;&lt;code&gt;sys.version_info&lt;/code&gt; is the good way, returning a tuple of numbers, one for each component of the version&lt;li&gt;&lt;code&gt;sys.version&lt;/code&gt; is a terrible way, returning a string containing the full version identifier&lt;li&gt;&lt;code&gt;platform.python_version()&lt;/code&gt; is another terrible way, also returning a string&lt;li&gt;&lt;code&gt;platform.python_version_tuple()&lt;/code&gt; is a final and especially terrible way, returning A TUPLE OF GODDAM STRINGS FOR THE COMPONENTS&lt;/ul&gt;&lt;h2&gt;Deets&lt;/h2&gt;&lt;p&gt;&lt;code&gt;sys.version_info&lt;/code&gt; returns a tuple of numeric components. Well, it returns a namedtuple, but same deal. If I convert it to a plain tuple, on my system I get:&lt;pre class=&apos;code&apos;&gt;(3, 7, 12, &apos;final&apos;, 0)&lt;/pre&gt;&lt;p&gt;Tuples in Python have nice sorting behavior; they&apos;ll compare against other tuples element-wise, with missing items considered as coming before present items.  This means that if I write &lt;code&gt;sys.version_info &amp;gt;= (3, 7)&lt;/code&gt;, it&apos;ll be true - the &lt;code&gt;3&lt;/code&gt; and &lt;code&gt;7&lt;/code&gt; match, then the remaining components in &lt;code&gt;sys.version&lt;/code&gt; mean it&apos;s slightly greater than the &lt;code&gt;(3, 7)&lt;/code&gt; literal.&lt;p&gt;Importantly, because this uses element-wise comparison and the elements are (mostly) numbers, it won&apos;t fail for stupid reasons, like version 3.10 coming out. If you compare &lt;code&gt;(3, 10) &amp;gt;= (3, 7)&lt;/code&gt; it correctly returns &lt;code&gt;True&lt;/code&gt;, because 10 is greater than 7.&lt;hr&gt;&lt;p&gt;&lt;code&gt;platform.python_version_tuple()&lt;/code&gt; also returns a tuple of components, but each component is a string. Currently on my system it returns &lt;code&gt;(&apos;3&apos;, &apos;7&apos;, &apos;12&apos;)&lt;/code&gt;.&lt;p&gt;If you compare it with a literal tuple, like &lt;code&gt;platform.python_version_tuple() &amp;gt;= (&apos;3&apos;, &apos;7&apos;)&lt;/code&gt; (note that you have to write the literal with strings, or else it&apos;ll error), it&apos;ll appear to work - you&apos;ll get back True. If the function returns &lt;code&gt;(&apos;3&apos;, &apos;6&apos;)&lt;/code&gt; or &lt;code&gt;(&apos;3&apos;, &apos;8&apos;)&lt;/code&gt; it also appears to do the right thing, returning &lt;code&gt;False&lt;/code&gt; and &lt;code&gt;True&lt;/code&gt; respectively. Bump it to &lt;code&gt;(&apos;3&apos;, &apos;9&apos;)&lt;/code&gt; and it&apos;s still &lt;code&gt;True&lt;/code&gt;, as expected. But advance to &lt;code&gt;(&apos;3&apos;, &apos;10&apos;)&lt;/code&gt; and it suddenly returns &lt;code&gt;False&lt;/code&gt;, indicating that version 3.10 is less than version 3.7.&lt;p&gt;This is because string-wise comparison is not the same as numerical comparison. Strings compare letter-by-letter, and &quot;1&quot; (the first letter of &quot;10&quot;) is indeed less than &quot;7&quot;, and so fails the &lt;code&gt;&amp;gt;=&lt;/code&gt; check.&lt;p&gt;This is a very easy mistake for end-users to make. It&apos;s an unforgiveable mistake for Python, the language, to make. Returning a tuple, indicating it&apos;s been parsed, but filling that tuple with strings when they know the components are numeric and will be used as if they were numbers, is just absolute clown-shoes behavior.&lt;hr&gt;&lt;p&gt;&lt;code&gt;sys.version&lt;/code&gt; and &lt;code&gt;platform.python_version()&lt;/code&gt; just straight up return strings. Once again, naive comparison seems to work: on my system &lt;code&gt;sys.version&lt;/code&gt; returns &lt;code&gt;&apos;3.7.12 (default, Nov 11 2021, 11:50:43) \n[GCC 10.3.0]&apos;&lt;/code&gt;, and if you run &lt;code&gt;sys.version &amp;gt;= &apos;3.7&apos;&lt;/code&gt;, it returns &lt;code&gt;True&lt;/code&gt; as expected.&lt;p&gt;Both of these fail when the version is 3.10, in the exact same way as &lt;code&gt;platform.python_version_tuple()&lt;/code&gt;.&lt;h2&gt;Conclusion&lt;/h2&gt;&lt;p&gt;Always, always, &lt;b&gt;ALWAYS&lt;/b&gt; use &lt;code&gt;sys.version_info&lt;/code&gt; to get the current Python version, for any purpose. Anything else &lt;i&gt;will&lt;/i&gt; break your code for stupid reasons.</content:encoded>
    </item>
    <item>
      <title>Imposing Names On The Earth</title>
      <link>http://www.xanthir.com/b5HH0</link>
      <guid>http://www.xanthir.com/b5HH0</guid>
      <pubDate>Mon, 14 Feb 2022 23:18:27 GMT</pubDate>
      <content:encoded>&lt;p&gt;I recently used &lt;a href=&quot;https://what3words.com&quot; title=&quot;&quot;&gt;What3Words&lt;/a&gt; to give a friend my house&apos;s location, since our entire neighborhood is only distinguished by the second address line, and Google Maps doesn&apos;t actually know any of them. W3W can redirect to Maps with a lat/long which works correctly for directions.&lt;p&gt;Afterwards, I spent part of the weekend thinking, as one does, about the tradeoffs of the two major &quot;make every part of Earth addressable&quot; efforts: What3Words and &lt;a href=&quot;https://en.wikipedia.org/wiki/Open_Location_Code&quot; title=&quot;&quot;&gt;Google&apos;s PlusCodes&lt;/a&gt;.&lt;p&gt;The two made some very interesting tradeoff decisions differently, and I&apos;m not sure which I like better!&lt;h2&gt;What3Words&lt;/h2&gt;&lt;p&gt;W3W divides the world up into ~3m squares, and assigns each a 3-word name. For example, I am at this very moment sitting at my office desk, located in the square named &lt;a href=&quot;https://what3words.com/jukebox.slang.leaned&quot; title=&quot;&quot;&gt;///jukebox.slang.leaned&lt;/a&gt;. You can pop that triplet at the end of &quot;what3words.com/&quot; and find my precise location.&lt;p&gt;The assignment algorithm is proprietary (that&apos;s how they make money), but it&apos;s designed to (a) make more populated areas use shorter words, and (b) make nearby areas have no relationship to each other.&lt;p&gt;That is, there is absolutely no relationship between the name of one square and the name of the next square over; they&apos;re effectively random.&lt;p&gt;The intentional benefit of this is that if you get the name slightly wrong, you&apos;ll get the address WAY wrong, and will hopefully notice that the directions to your friends house shouldn&apos;t be directing you to another country. No &quot;near misses&quot; just putting you on a nearby street.&lt;p&gt;Obvious downside is the same, tho - errors will get the address &lt;i&gt;way&lt;/i&gt; wrong, rather than nearly correct. It also means you can&apos;t generalize to larger areas; there&apos;s no concept of resolution larger (or smaller) than the 3m base square.&lt;p&gt;So you can&apos;t give an approximate location, only a fairly precise one. That said, on the scale that most ordinary people want, that&apos;s fine; we already have meaningful spatial demarcations that serve that purpose well (town/city names, plus maybe directional words or neighborhoods).&lt;p&gt;While the first version of W3W specifically used English words, they&apos;ve since produced a large number of localized versions, so people can share addresses in their own language. They all use the same grid, so you can provide your location in multiple languages if you&apos;re expecting to serve a multilingual community.&lt;h2&gt;PlusCodes&lt;/h2&gt;&lt;p&gt;They&apos;re literally just a more usable way to express lat/long coordinates. Rather than base-10 (useful for math) they use base-20 (useful for memorization/communication), and interweave the digits so you get more precise in both dimensions as you go along.&lt;p&gt;That is, the first and second chars of a plus code are the high-order lat &lt;i&gt;and&lt;/i&gt; long, naming a 20 degree square slice of the Earth. The third and fourth narrow that down to a 1 degree square (roughly 60 miles).  Fifth and six cut it to a .05 degree square (roughly 3 miles). Etc. This goes on for 10 digits at which point they switch to a different scheme that goes digit-by-digit, but the details don&apos;t super matter.&lt;p&gt;Between the 8th and 9th digit you use a + to break it up visually, like 6PH57VP3+PR. You can also drop the first four digits if you have a city name or similar, like &quot;7VP3+PR6 Singapore&quot;, giving you an easier-to-remember 7-digit name for an approximately 3m square area.&lt;p&gt;Benefits here are &lt;ul&gt;&lt;li&gt;easy to compute, obviously, since it&apos;s just lat/long expressed in base 20 and interwoven. The encoding/decoding algos can be done from scratch in a hundred lines or less of code. No need to contract out decoding to a 3rd-party company.&lt;li&gt;the precision can be scaled up or down trivially by adding or removing digits. (If you remove digits before the +, you replace them with 0, which isn&apos;t otherwise a valid digit in a pluscode.) So you can indicate large areas (so long as they&apos;re  reasonably approximated by the slice boundaries), or even much smaller, more precise areas.&lt;li&gt;if you forget, or just leave off, the last bit of the code, you&apos;ll still end up close by. Like, a neighborhood can generally be located without any digits past the +.&lt;/ul&gt;&lt;p&gt;Big downside is that getting anything &lt;i&gt;but&lt;/i&gt; the very end wrong can make the address quite wrong without it necessarily &lt;i&gt;looking&lt;/i&gt; wrong. In other words, errors in the pluscode translate to vastly different scales of errors in the final location, depending on where the error occurs. The most obvious errors (pointing to an entirely wrong part of the world) generally aren&apos;t even possible since those digits are usually omitted in favor of specifying a city instead, so your errors will often still give a location that &lt;i&gt;looks&lt;/i&gt; reasonable at first glance, but might be next door, next neighborhood over, or next &lt;i&gt;city&lt;/i&gt; over.&lt;p&gt;Another downside is the code spends the same amount of entropy on each location no matter how populated or middle-of-the-ocean it is. The one nod to this is being able to shorten the standard code from 11 digits to 7+city name (effectively giving human-friendly names to the 4-digit-prefix blocks), but past that there&apos;s no distinction between &quot;populated city&quot; and &quot;wilderness&quot;, which W3W does distinguish between.&lt;h2&gt;Both Are Cool&lt;/h2&gt;&lt;p&gt;So there&apos;s several tradeoffs on either, several of which place the two on directly opposed sides. I dunno which I like best! Maybe both are great! I think that maybe they&apos;re best for different use-cases. &lt;p&gt;I think W3W does end up slightly better for human-relevant locations, such as in cities. The &quot;any error is obviously way wrong&quot; behavior seems like a benefit to me over the &quot;error ranges from very slightly to very extremely wrong, depending on where it occurs&quot; behavior of PlusCodes. And I like that populated areas are favored with shorter, more common, easier-to-spell words. (Compare my location I stated above, ///jukebox.slang.leaned, with an ocean square just a mile or so off the coast near me, ///virtuously.daylight.facsimiles.)&lt;p&gt;Also, when you &lt;i&gt;are&lt;/i&gt; naming a larger area, like your house (rather than a very specific area like your front door) you have a goodly number of choices to pick from, and can choose one that&apos;s particularly memorable or appropriate. For example, I have about 20 squares covering my house, and chose a nice tech-related one (which I won&apos;t share, since my address isn&apos;t easy-accessible public knowledge and I&apos;d prefer to keep it that way if I can) that happens to land roughly in the middle of my living room.&lt;p&gt;On the other hand, scientific use-cases seems to better served by PlusCodes. The variable slice sizes you can name means you can address many different use-cases, like naming ranges or geographic areas, as well as very precise locations, and can get more precise than the 3m square too, just by appending more digits. The names also all look generically similar, rather than having the potential for humor, which can be both good and bad in professional settings. (The 20-character set used by PlusCodes was chosen both to reduce the chance of mistyping/mishearing them, &lt;i&gt;and&lt;/i&gt; to minimize the chance of addresses being real words, rude or otherwise. For example, it&apos;s missing all the vowels.)&lt;p&gt;Anyway I just wanted to get some of these thoughts out, and to interest more people in either/both of these systems if they weren&apos;t already aware. If you read to this point, success!</content:encoded>
    </item>
  </channel>
</rss>