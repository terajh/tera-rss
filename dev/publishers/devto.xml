<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>dev RSS - Dev.to</title>
    <link>https://dev.to</link>
    <description>Dev.to RSS í”¼ë“œ</description>
    <lastBuildDate>Wed, 25 Feb 2026 16:35:37 GMT</lastBuildDate>
    <item>
      <title>XPanel Reforged â€“ Starting Again, But Not From Scratch</title>
      <link>https://dev.to/alabex_/xpanel-reforged-starting-again-but-not-from-scratch-4pgf</link>
      <guid>https://dev.to/alabex_/xpanel-reforged-starting-again-but-not-from-scratch-4pgf</guid>
      <pubDate>Wed, 25 Feb 2026 15:51:26 GMT</pubDate>
      <content:encoded>
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Aviso: La mayorÃ­a de las actualizaciones estarÃ¡n en inglÃ©s, pero irÃ© publicando tambiÃ©n entradas resumen en espaÃ±ol cada cierto tiempo.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;p&amp;gt;Hey dev.to ðŸ‘‹&amp;lt;br&amp;gt;
        Itâ€™s been a few years.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Iâ€™ve been around, building, experimenting, shipping thingsâ€¦ but I havenâ€™t written here in a long time. And honestly, Iâ€™ve missed it.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;So today Iâ€™m coming back with something that feels both familiar and completely new.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Project That Never Fully Left
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;A while ago I started building &amp;lt;strong&amp;gt;XPanel&amp;lt;/strong&amp;gt; â€” a social platform designed around a multiplayer game community. It was ambitious: organizations, progression systems, structured activities, reputation, internal coordinationâ€¦ all the things communities try to manage with spreadsheets, Discord threads and a bit of chaos.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The stack back then included:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Django&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Django REST Framework&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Docker&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Angular&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Redis&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;and a handful of other supporting services&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;At the time, I was still getting comfortable with several of those technologies. The architecture worked, but it wasnâ€™t solid. Continuing from that codebase today would mean complex migrations, structural refactors, technical debt carried forward and compromises Iâ€™d rather not accept.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;On top of that, my understanding of player dynamics â€” solo players, small groups, large organizations â€” was still limited. I was building features based on assumptions.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Fast forward to today:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;I have significantly more experience with the stack.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;I understand community behavior much better.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;The game ecosystem itself has evolved â€” some features I once considered critical are no longer necessary, while others have become far more valuable.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;My vision of &amp;lt;em&amp;gt;what actually needs to be built&amp;lt;/em&amp;gt; is much sharper.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;And, of course, we now live in the era of AI-assisted development, which dramatically changes execution speed and iteration cycles.&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;So instead of patching the pastâ€¦&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Iâ€™m restarting.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;So, welcome back. Letâ€™s build this properly. ðŸ˜Š&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>From Bronze to Silver: Staging, Intermediate, and the Art of the Trustworthy Join</title>
      <link>https://dev.to/aawiegel/from-bronze-to-silver-staging-intermediate-and-the-art-of-the-trustworthy-join-3ng5</link>
      <guid>https://dev.to/aawiegel/from-bronze-to-silver-staging-intermediate-and-the-art-of-the-trustworthy-join-3ng5</guid>
      <pubDate>Wed, 25 Feb 2026 15:50:32 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://dev.to/aawiegel/the-zen-of-the-bronze-layer-embracing-schema-chaos-7hn&quot;&amp;gt;Part 3&amp;lt;/a&amp;gt; solved vendor schema chaos by treating column names as data. The bronze layer now holds one row per attribute per measurement: &amp;lt;code&amp;gt;lab_provided_attribute&amp;lt;/code&amp;gt; carries whatever the vendor typed as a column name, &amp;lt;code&amp;gt;lab_provided_value&amp;lt;/code&amp;gt; carries the cell value, and the table schema stays fixed and vendor-agnostic regardless of how creatively the vendor chose to name things. No fuzzy matching, no superset schemas, no vendor-specific parsing logic. The chaos was encoded as rows rather than fought through transformations.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It was the right call for ingestion. It is a genuinely terrible format for answering questions.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Ask &quot;what was the average copper measurement for samples received in October?&quot; against long-format EAV data and you&apos;re looking at a subquery to identify which &amp;lt;code&amp;gt;lab_provided_attribute&amp;lt;/code&amp;gt; values represent copper, a pivot to bring those values into a column, a join to find the collection date from another EAV row, and a filter on the date. Do that once, and it&apos;s manageable. Do it in every query anyone ever writes against this data, and you&apos;ve simply moved the transformation burden from ingestion to analysis. The point of a multi-layer pipeline is to make that transformation happen once, correctly, in a place where it can be tested and maintained.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Silver is where we make it happen. This post introduces the dbt models that carry bronze data from EAV chaos into an analytical schema, walks through the architectural reasoning behind each layer, and then runs the first unit test. It does not go well.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Why dbt for Silver Transformations
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Part 3 expressed the bronze layer in Python and PySpark. We could take the same approach for silver: write Spark SQL transformations directly, materialize staging and intermediate results as Delta tables, and wire them together with a notebook or a Databricks job. The transformation logic is the same regardless of the execution environment.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The reason to use dbt here is not that the SQL would be different. It&apos;s that dbt enforces structural discipline that raw Spark SQL scripts require you to maintain yourself, through consistent conventions and sheer force of will. One of those scales better than the other.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Each dbt model lives in its own file with an explicit dependency graph. When &amp;lt;code&amp;gt;int_lab_samples_joined&amp;lt;/code&amp;gt; references &amp;lt;code&amp;gt;ref(&apos;stg_lab_samples_unpivoted&apos;)&amp;lt;/code&amp;gt;, dbt knows to run the staging model first, tracks the lineage between models, and rebuilds downstream models when upstream ones change. Schema documentation lives alongside the models in YAML files and can be generated into browsable documentation. Tests run against the models directly. Materialization strategies (view, table, incremental) are model-level configuration, not something you manage separately in SQL DDL. None of this is impossible with raw Spark SQL scripts. It just requires the kind of ironclad consistency that engineering teams reliably maintain right up until they don&apos;t. dbt builds the discipline into the workflow rather than assuming it from the humans.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;For a transformation layer with multiple models in a dependency chain, that structure is worth the overhead of learning a new tool. The silver layer here has at least three models with an explicit sequence: staging must run before intermediate, and getting that sequence wrong produces silent incorrect results rather than an obvious error. dbt makes those dependencies explicit and enforces them automatically. And for what it&apos;s worth, dbt Core and Databricks Community Edition are both free, so the overhead is purely cognitive.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Why Silver Has Layers
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Here is something the dbt documentation will not tell you: Ralph Kimball described this architecture thirty years ago.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The Data Warehouse Toolkit (first published 1996, revised 2013) describes a staging area whose job is to clean and conform source data before it enters the warehouse. The staging area strips away source-system idiosyncrasies. It normalizes formats, resolves encoding variations, and creates consistent representations that downstream logic can depend on. The integration layer then applies business logic: joining conformed source data to reference tables, enriching records with canonical meaning, building the integrated representation that analysts actually query. dbt&apos;s best-practices guides on project structure [1] use exactly this division: staging models are thin, source-cleaning layers; intermediate models are where complex joins and business logic live.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The vocabulary has changed; the conceptual structure has not.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This matters because it explains WHY the layers exist, not just what they happen to contain. Conventions without reasoning are just folklore. The staging and intermediate separation encodes a functional dependency: intermediate models depend on guarantees that staging models make. Staging exists to create a contract. Intermediate relies on that contract to do its job. When those responsibilities blur, with source-system cleaning mixed into join logic and business rules embedded in normalization models, the result is transformation logic that is hard to reason about, hard to test, and hard to change safely.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;With EAV bronze data, this layering matters more than usual. The staging layer has a specific, structural job to do before any downstream join is even possible.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Staging Model: Creating a Joinable Key
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The problem with bronze EAV data is that &amp;lt;code&amp;gt;lab_provided_attribute&amp;lt;/code&amp;gt; holds whatever the vendor typed. Vendor A sends &amp;lt;code&amp;gt;&quot;Sample Concentration&quot;&amp;lt;/code&amp;gt;. Vendor B sends &amp;lt;code&amp;gt;&quot;sample_concentration &quot;&amp;lt;/code&amp;gt; (trailing space included). A third vendor might send &amp;lt;code&amp;gt;&quot;SAMPLE CONC.&quot;&amp;lt;/code&amp;gt;. These represent the same measurement. No string comparison will match them without normalization.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The staging layer&apos;s job is to solve this problem once, correctly, in a place downstream models can depend on. Every join that comes after this model is only possible because this model did its job first. The model adds one column, &amp;lt;code&amp;gt;attribute_standardized&amp;lt;/code&amp;gt;, that normalizes &amp;lt;code&amp;gt;lab_provided_attribute&amp;lt;/code&amp;gt; into a consistent form:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight sql&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;materialized&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;view&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;WITH&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_samples_unpivoted&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;source&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;bronze&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;lab_samples_unpivoted&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;n&quot;&amp;gt;lab_samples_unpivoted_staged&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;LOWER&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;TRIM&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;TRANSLATE&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;lab_samples_unpivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;lab_provided_attribute&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;-$()#./ %@!&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;___________&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;attribute_standardized&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_samples_unpivoted&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_samples_unpivoted_staged&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The cleaning chain does three things. &amp;lt;code&amp;gt;TRANSLATE&amp;lt;/code&amp;gt; replaces eleven special characters (&amp;lt;code&amp;gt;-$()#./ %@!&amp;lt;/code&amp;gt;) with underscores. &amp;lt;code&amp;gt;TRIM&amp;lt;/code&amp;gt; strips leading and trailing whitespace. &amp;lt;code&amp;gt;LOWER&amp;lt;/code&amp;gt; normalizes to lowercase so that capitalization differences don&apos;t produce false mismatches. With their powers combined, these three functions will help us later pivot back to wide format cleanly for specific analytical views.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Applied to realistic vendor data: &amp;lt;code&amp;gt;&quot;Sample Concentration&quot;&amp;lt;/code&amp;gt; becomes &amp;lt;code&amp;gt;sample_concentration&amp;lt;/code&amp;gt;. &amp;lt;code&amp;gt;&quot;-a$lot(of)weird#symbols.why/vendors%why@!&quot;&amp;lt;/code&amp;gt; becomes &amp;lt;code&amp;gt;a_lot_of_weird_symbols_why_vendors_why&amp;lt;/code&amp;gt;, which is arguably an improvement on the original in more ways than one.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Kimball called the underlying concept &quot;conforming.&quot; Conformed dimensions bring disparate source systems into a shared vocabulary so they can be joined and analyzed together. You build a date dimension once, in a shared format, and every fact table that references dates joins to the same table. You don&apos;t maintain separate date representations for each source system. We call what the staging model does &quot;attribute standardization.&quot; The goal is identical: create a canonical representation that downstream logic can join on without worrying about source-system variation. Same church, different pew.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Notice what this model does not do. It doesn&apos;t join to any reference data, doesn&apos;t classify anything, doesn&apos;t apply a single business rule. It adds one column whose entire purpose is to make the next model&apos;s join possible. That constraint is deliberate, and violating it is how staging models become the thing nobody wants to touch six months later. dbt&apos;s best practices [2] describe staging models as thin layers that do the minimum necessary to make source data useful downstream: rename columns to consistent conventions, cast types, add computed identifiers. Business logic belongs in intermediate. The moment staging models start containing complex transformations, you&apos;ve lost the separation that makes both layers maintainable.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Intermediate Layer: Enrichment Through Joining
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;With &amp;lt;code&amp;gt;attribute_standardized&amp;lt;/code&amp;gt; available, the first intermediate model can do what staging made possible.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;int_lab_samples_joined&amp;lt;/code&amp;gt; performs two joins. Neither is complicated. What matters is why they happen in this order and what the LEFT JOIN choice is actually saying about our relationship with imperfect data.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The first join connects staged measurements to a vendor column mapping table on &amp;lt;code&amp;gt;attribute_standardized&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;vendor_id&amp;lt;/code&amp;gt;. The mapping table is reference data that records the connection between vendor-specific attribute names and canonical column identifiers. The second join connects the mapping result to a canonical column definitions table, which carries authoritative metadata about each canonical column: its data type, its category (measurement, identifier, date), and whether it should be treated as a metadata column or a measurement column in downstream transformations.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight sql&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;materialized&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;view&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;WITH&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;stg_lab_samples&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;ref&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;stg_lab_samples_unpivoted&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;source&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;bronze&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;vendor_column_mapping&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_definitions&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;source&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;silver&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;canonical_column_definitions&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;n&quot;&amp;gt;joined&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;EXCEPT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;notes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;notes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_mapping_notes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;stg_lab_samples&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;LEFT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;JOIN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;ON&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;stg_lab_samples&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;attribute_standardized&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_name&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;AND&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;stg_lab_samples&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;LEFT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;JOIN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_definitions&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;ON&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_column_mapping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_definitions&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_id&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;joined&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The join condition includes both &amp;lt;code&amp;gt;attribute_standardized&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;vendor_id&amp;lt;/code&amp;gt;. Two vendors might use similar standardized attribute names for genuinely different measurements, or the canonical mapping might differ by vendor for domain-specific reasons. Joining on both columns preserves that specificity.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The LEFT JOIN choice is a deliberate QA decision, and it reflects a specific philosophy about what bronze-to-silver transformation should do with ambiguity. Rows that don&apos;t match the mapping table don&apos;t disappear. They survive with &amp;lt;code&amp;gt;canonical_column_name IS NULL&amp;lt;/code&amp;gt;, which is not a failure state. It&apos;s a diagnostic signal. The pipeline is saying &quot;something arrived that I don&apos;t recognize&quot; rather than quietly discarding evidence that something unexpected happened.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Downstream QA can filter on that null to find unmapped attributes and determine whether the mapping table needs a new entry, whether the vendor introduced something unexpected, or whether an existing mapping has a standardization error. The silver layer doesn&apos;t resolve that ambiguity; it surfaces it in a way that makes it findable.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This is Kimball&apos;s integration layer in practice [3], thirty years later, running on Delta Lake instead of whatever disk arrays cost a fortune in 1996. A vendor-specific attribute in EAV format becomes a row that carries canonical column name, data type, category, and enrichment notes. The enrichment is what makes downstream transformations tractable. Without it, every downstream model or query would need to join to the mapping table itself, with full knowledge of vendor-specific attribute naming. That knowledge belongs here, applied once.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Intermediate Layer: Completing the Schema Transformation
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Now that we have our joined data model available in intermediate, we can make this data more usable.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;int_lab_samples_standardized&amp;lt;/code&amp;gt; handles this with conditional aggregation, which is the SQL equivalent of sorting your mail: same pile, separated by what actually matters.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The challenge is structural. Bronze EAV format is gloriously egalitarian: sample barcodes, collection dates, copper measurements, and pH readings all get the same treatment, one row each, no hierarchy, no distinction. That democratic impulse was exactly right for ingestion. For analysis it is a nightmare, because analysts don&apos;t want to write a subquery just to find out what day a sample was collected.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;In the bronze EAV format, metadata columns (sample barcode, lab ID, collection date, analysis date) live in the same row structure as measurement columns (copper, zinc, pH). A typical row from a sample with three measurements and four metadata columns produces seven EAV rows: four metadata rows and three measurement rows, all sharing the same &amp;lt;code&amp;gt;row_index&amp;lt;/code&amp;gt;. Analysts want one record per measurement with the metadata attached as columns, not a set of EAV rows where metadata and measurements are interleaved.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight sql&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;materialized&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;view&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;WITH&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;int_lab_samples_joined&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;ref&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;int_lab_samples_joined&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;row_index&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;file_name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;ingestion_timestamp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;MAX&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;CASE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;WHEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_name&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;sample_barcode&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;THEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_provided_value&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;END&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;sample_barcode&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;MAX&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;CASE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;WHEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_name&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;lab_id&apos;&amp;lt;/span&amp;gt;         &amp;lt;span class=&quot;k&quot;&amp;gt;THEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_provided_value&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;END&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;MAX&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;CASE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;WHEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_name&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;date_received&apos;&amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;k&quot;&amp;gt;THEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_provided_value&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;END&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;date_received&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;MAX&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;CASE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;WHEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;canonical_column_name&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;date_analyzed&apos;&amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;k&quot;&amp;gt;THEN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;lab_provided_value&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;END&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;date_analyzed&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;int_lab_samples_joined&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;WHERE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;is_metadata_column&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;TRUE&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;GROUP&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;BY&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;row_index&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;file_name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;ingestion_timestamp&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;-- All non-metadata rows, including unmapped ones (is_metadata_column IS NULL).&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;-- Unmapped rows are preserved for QA; filter on is_metadata_column IS NULL to find problem attributes.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;measurements&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;EXCEPT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;is_metadata_column&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;int_lab_samples_joined&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;WHERE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;is_metadata_column&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FALSE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;OR&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;is_metadata_column&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;IS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;n&quot;&amp;gt;standardized&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;AS&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;measurements&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;EXCEPT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;file_name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;ingestion_timestamp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;file_name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;ingestion_timestamp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;sample_barcode&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;lab_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;date_received&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;date_analyzed&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;measurements&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;LEFT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;JOIN&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;ON&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;measurements&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;row_index&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;row_index&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;AND&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;measurements&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vendor_id&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;AND&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;measurements&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;file_name&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;metadata_pivoted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;file_name&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;SELECT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;FROM&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;standardized&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The logic splits the enriched EAV data into two paths. The &amp;lt;code&amp;gt;metadata_pivoted&amp;lt;/code&amp;gt; CTE filters for rows where &amp;lt;code&amp;gt;is_metadata_column = TRUE&amp;lt;/code&amp;gt; and collapses them into one record per &amp;lt;code&amp;gt;row_index&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;vendor_id&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;file_name&amp;lt;/code&amp;gt;, using &amp;lt;code&amp;gt;MAX(CASE WHEN ...)&amp;lt;/code&amp;gt; to pull each metadata attribute into its own named column. The &amp;lt;code&amp;gt;measurements&amp;lt;/code&amp;gt; CTE takes the other path: rows where &amp;lt;code&amp;gt;is_metadata_column = FALSE&amp;lt;/code&amp;gt; (actual measurement attributes) and rows where &amp;lt;code&amp;gt;is_metadata_column IS NULL&amp;lt;/code&amp;gt; (attributes that didn&apos;t match the mapping table) both pass through. The final join recombines the two paths on all three columns.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The three-column join condition deserves a note, because this is exactly the kind of thing that looks fine until it catastrophically isn&apos;t. &amp;lt;code&amp;gt;row_index&amp;lt;/code&amp;gt; is the position of a row within a single CSV file; it resets to zero at the start of each file. Joining on &amp;lt;code&amp;gt;row_index&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;vendor_id&amp;lt;/code&amp;gt; alone would incorrectly match row 5 from &amp;lt;code&amp;gt;file_a.csv&amp;lt;/code&amp;gt; with row 5 from &amp;lt;code&amp;gt;file_b.csv&amp;lt;/code&amp;gt; if both came from the same vendor. Including &amp;lt;code&amp;gt;file_name&amp;lt;/code&amp;gt; makes the join key specific to a row within a specific file from a specific vendor: the granularity we actually want.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Two other design decisions in this model are worth making explicit.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;is_metadata_column IS NULL&amp;lt;/code&amp;gt; inclusion in the measurements CTE reflects the same philosophy as the LEFT JOIN in the previous model: preserve ambiguity rather than discard it. An unmapped row in silver is information. It says &quot;something arrived that we haven&apos;t classified yet.&quot; Discarding it would make the gap invisible; surfacing it makes the gap findable.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Date columns (&amp;lt;code&amp;gt;date_received&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;date_analyzed&amp;lt;/code&amp;gt;) remain as raw strings through these intermediate models. This is not an oversight. Casting vendor date strings to an actual date type without knowing the vendor&apos;s format either fails loudly on unexpected input or silently coerces values into something plausible but wrong. Silent and wrong is the worst possible outcome in a data pipeline. Now that we have the data in a more usable format, we can start validating this with further intermediate models before it ends up in a gold table.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Writing the Contract Down
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhu8xjm5df0xqyn757uqc.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhu8xjm5df0xqyn757uqc.png&quot; alt=&quot;Schematic representation of pipeline&quot; width=&quot;800&quot; height=&quot;249&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The three models form a coherent chain. Staging creates a joinable key. The first intermediate model uses that key to enrich with canonical meaning. The second pivots the result into an analytical schema while preserving unmapped rows for QA. From a design standpoint, the transformation logic is complete.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;From a validation standpoint, we&apos;ve asserted that it works without demonstrating it. &quot;Looks correct&quot; is not a testing strategy. It is a feeling, and feelings have a well-documented history of being wrong about SQL.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This is where test-driven thinking applies. The staging model makes a specific claim: given a &amp;lt;code&amp;gt;lab_provided_attribute&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;attribute_standardized&amp;lt;/code&amp;gt; will be trimmed, lowercased, and have special characters replaced with underscores. That claim is precise enough to verify directly.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;dbt&apos;s unit testing feature [4], introduced in version 1.8, makes this claim machine-verifiable. You define mock input rows and expected output rows in the model&apos;s YAML configuration. dbt runs the model against your mock inputs in isolation, without touching production data, and tells you whether reality matches the specification. It is, in the most literal sense, writing the contract down and then checking whether anyone actually honored it.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight yaml&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;unit_tests&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s&quot;&amp;gt;test_column_name_standardization&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;description&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s2&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;Check&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;that&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;column&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;names&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;are&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;correctly&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;trimmed,&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;made&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;lower&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;case,&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;and&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;have&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;symbols&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;removed&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;model&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s&quot;&amp;gt;stg_lab_samples_unpivoted&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;given&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;input&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s&quot;&amp;gt;source(&apos;bronze&apos;, &apos;lab_samples_unpivoted&apos;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;rows&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pi&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt;lab_provided_attribute&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;extra&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;spaces&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pi&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt;lab_provided_attribute&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;CAPITALS&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pi&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt;lab_provided_attribute&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;-a$lot(of)weird#symbols.why/vendors%why@!&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;expect&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;rows&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pi&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt;attribute_standardized&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;extra_spaces&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pi&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt;attribute_standardized&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;capitals&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;pi&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pi&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nv&quot;&amp;gt;attribute_standardized&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s1&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;a_lot_of_weird_symbols_why_vendors_why&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pi&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Three test cases, three behaviors. The whitespace case verifies that leading and trailing spaces are removed. The capitalization case verifies that mixed or uppercase input produces lowercase output. The symbols case verifies that punctuation and special characters become underscores. Together, they define the contract that downstream models rely on when they join to the mapping table on &amp;lt;code&amp;gt;attribute_standardized&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Let&apos;s run it.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Tests Fail
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Two of the three cases fail. The test does not care about our feelings about this.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;Failure in unit_test test_column_name_standardization
        
        actual differs from expected:
        
        @@ ,attribute_standardized
        +++,_a_lot_of_weird_symbols_why_vendors_why__
        +++,_extra_spaces_
        ---,a_lot_of_weird_symbols_why_vendors_why
        ,capitals
        ---,extra_spaces
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Consider the whitespace case first. Input: &amp;lt;code&amp;gt;&apos; extra spaces &apos;&amp;lt;/code&amp;gt;. Expected: &amp;lt;code&amp;gt;&apos;extra_spaces&apos;&amp;lt;/code&amp;gt;. Actual: &amp;lt;code&amp;gt;&apos;_extra_spaces_&apos;&amp;lt;/code&amp;gt;. Something in that chain is executing in the wrong order. Let&apos;s trace it.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The functions nest inside each other, so they execute from the innermost outward: &amp;lt;code&amp;gt;TRANSLATE&amp;lt;/code&amp;gt; runs first, &amp;lt;code&amp;gt;TRIM&amp;lt;/code&amp;gt; runs second, &amp;lt;code&amp;gt;LOWER&amp;lt;/code&amp;gt; runs third.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;TRANSLATE&amp;lt;/code&amp;gt; replaces the eleven characters listed in its second argument with underscores. The character set is &amp;lt;code&amp;gt;&apos;-$()#./ %@!&apos;&amp;lt;/code&amp;gt;. Count carefully: there is a space between the forward slash and the percent sign. Every space in the input string becomes an underscore. &amp;lt;code&amp;gt;&apos; extra spaces &apos;&amp;lt;/code&amp;gt; becomes &amp;lt;code&amp;gt;&apos;_extra_spaces_&apos;&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;TRIM&amp;lt;/code&amp;gt; runs on the result of &amp;lt;code&amp;gt;TRANSLATE&amp;lt;/code&amp;gt;. &amp;lt;code&amp;gt;TRIM&amp;lt;/code&amp;gt; removes leading and trailing whitespace characters. There is no whitespace left; the leading and trailing spaces became underscores in the previous step. &amp;lt;code&amp;gt;TRIM&amp;lt;/code&amp;gt; finds nothing to remove. The string stays &amp;lt;code&amp;gt;&apos;_extra_spaces_&apos;&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;LOWER&amp;lt;/code&amp;gt; runs. No change; the string is already lowercase.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The bug is an ordering problem, and it is the specific kind of ordering problem that looks completely reasonable until you trace one concrete input through the full execution sequence and watch it go wrong in slow motion. &amp;lt;code&amp;gt;TRIM&amp;lt;/code&amp;gt; must run before &amp;lt;code&amp;gt;TRANSLATE&amp;lt;/code&amp;gt;. Strip the whitespace first, then translate special characters, and the leading and trailing spaces are gone before &amp;lt;code&amp;gt;TRANSLATE&amp;lt;/code&amp;gt; ever encounters them. The fix is a one-line change to the nesting order.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The symbols case fails for related reasons, and tracing through it is left as an exercise. The root cause is the same.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Incidentally, I got this wrong the first time. The test told me.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Here is the uncomfortable implication of that fact, and it applies regardless of how the models were written. As I was working through this post, I noticed that the join in &amp;lt;code&amp;gt;int_lab_samples_standardized&amp;lt;/code&amp;gt; was initially written on &amp;lt;code&amp;gt;row_index&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;vendor_id&amp;lt;/code&amp;gt; alone, which would produce incorrect metadata associations whenever a vendor sends more than one file, since &amp;lt;code&amp;gt;row_index&amp;lt;/code&amp;gt; resets to zero at the start of each file. I caught it by thinking carefully about what the columns actually represent. I would not have caught it by looking at the SQL and deciding it seemed reasonable.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That bug would have existed in the code whether the models were written with an agent, generated from a Claude prompt and pasted in, or typed out manually by an engineer who had just had a very productive morning. The staging model&apos;s unit test demonstrates the alternative: make the claim explicit, make it machine-verifiable, and find out whether the claim is true before production data depends on it.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The question of how to extend that discipline to the intermediate models, and to the outputs of the entire pipeline against real data, is where Part 5 begins.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        What Silver Looks Like Now, and What Comes Next
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The architecture is sound. Three models form a coherent transformation chain, each layer making the next one possible, each design decision traceable back to a specific problem it exists to solve. Kimball would recognize it. He would just be surprised it took thirty years to get decent dependency management.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The first unit test does not pass. The intermediate models have no tests at all. We have built something that looks correct and demonstrated, scientifically, that looking correct is insufficient evidence.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;How do we know that actual vendor data flowing through this pipeline maps correctly to canonical columns? How do we validate that the mapping table covers the attributes vendors actually send, rather than the attributes we assumed they would send? How do we catch a new analysis package that introduces column names we have never seen, silently producing nulls in silver while everyone downstream wonders why the copper measurements disappeared?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Those questions require validation against real data, at the boundaries where layers hand off to each other, against statistical expectations that reflect what vendors actually send rather than what we hope they send. Building that validation framework is the next post.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Complete &quot;working&quot; example:&amp;lt;/strong&amp;gt; The dbt models described in this post are in &amp;lt;a href=&quot;https://github.com/aawiegel/zen_bronze_data/tree/feature/dbt_databricks/src/crucible&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;GIthub&amp;lt;/a&amp;gt;. The staging model, both intermediate models, and the unit test definition are all in that directory.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;References:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;[1] dbt Labs. (2026). &amp;lt;a href=&quot;https://docs.getdbt.com/guides/best-practices/how-we-structure/1-guide-overview&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;&amp;lt;em&amp;gt;How we structure our dbt projects&amp;lt;/em&amp;gt;.&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;[2] dbt Labs. (2026). &amp;lt;a href=&quot;https://docs.getdbt.com/guides/best-practices/how-we-structure/2-staging&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;&amp;lt;em&amp;gt;Staging: Preparing and cleaning source data&amp;lt;/em&amp;gt;.&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;[3] Kimball, R., &amp;amp;amp; Ross, M. (2013). &amp;lt;em&amp;gt;The Data Warehouse Toolkit: The Definitive Guide to Dimensional Modeling&amp;lt;/em&amp;gt; (3rd ed.). Wiley.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;[4] dbt Labs. (2026). &amp;lt;a href=&quot;https://docs.getdbt.com/docs/build/unit-tests&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;&amp;lt;em&amp;gt;Unit tests&amp;lt;/em&amp;gt;.&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>The Problem Nobody&apos;s Measuring</title>
      <link>https://dev.to/writerviber/the-problem-nobodys-measuring-22db</link>
      <guid>https://dev.to/writerviber/the-problem-nobodys-measuring-22db</guid>
      <pubDate>Wed, 25 Feb 2026 15:48:37 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Your company tracks API latency, uptime, error rates, and developer satisfaction scores. But nobody&apos;s tracking what it costs AI tools to read your API documentation.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Open your observability dashboard. You can probably see API response times broken down by endpoint. Error rates by status code. Maybe even developer satisfaction from your last survey. If you&apos;re sophisticated, you&apos;re tracking time-to-first-hello-world for new integrations.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Now tell me: how many tokens does it cost an AI coding tool to read your API docs?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;You don&apos;t know. Nobody does. There&apos;s no dashboard for this. No metric.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The invisible transaction
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Every time a developer points Cursor, Copilot, or Claude at your API documentation, a transaction happens. The AI tool reads your docs, converts them into tokens, and uses those tokens to generate integration code. The format of your documentation determines how many tokens that costs.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This isn&apos;t theoretical. If your docs are in a verbose format, the AI tool consumes more of its context window just reading the spec. That leaves less room for reasoning, for the developer&apos;s project context, and for generating quality code. In the worst case, the documentation fills so much of the context window that the model can&apos;t produce working code at all.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;And it compounds. Every endpoint. Every developer accessing your docs. Every day.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Why nobody&apos;s noticed
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Documentation has traditionally been measured by human metrics: readability, completeness, accuracy, time-to-find-information. Those metrics still matter. But they&apos;re designed for a world where humans are the primary (or only) consumers of your docs.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That world is shifting. AI coding tools are increasingly the first reader of your API documentation. The developer asks the tool to integrate with your API, and the tool goes and reads your docs before generating code. The developer may never visit your docs site at all.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;When the primary consumer changes, the metrics need to change too. But the tech writing community hasn&apos;t caught up. We&apos;re still optimizing for human readability while AI tools are silently consuming our docs in a completely different way, and paying a cost that nobody sees.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The format question
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Here&apos;s what makes this interesting: the same API information, documented in different formats, produces different token costs. Sometimes dramatically different. Two docs describing the exact same endpoints, the exact same parameters, the exact same constraints, but one could cost significantly more tokens than the other.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That raises an obvious question: does the format also affect the quality of the code the AI generates? Or just the cost?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;And a harder question: if you tried to test this with a popular API like Stripe&apos;s, how would you know whether the AI is reading your docs or just drawing on patterns it already learned from training data? Every popular API is all over GitHub, Stack Overflow, and tutorial sites. You can&apos;t isolate the variable.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        What I&apos;m doing about it
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;I&apos;ve been researching this for the past year. I built two control APIs from scratch, APIs with no public footprint and no prior exposure in any training dataset. I documented each one in four different formats and ran over 21,000 integration tests across four AI models, from local models you can run on a laptop to frontier cloud APIs.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Clean data. No contamination question.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The results are coming in a book called &amp;lt;em&amp;gt;Tokens Not Jokin&apos;&amp;lt;/em&amp;gt;, out in March. But you don&apos;t have to wait for the book to start understanding the problem.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;See what your docs cost.&amp;lt;/strong&amp;gt; I built a free calculator that shows the token cost of your API documentation in real time. Paste your spec, see the numbers. It runs entirely in your browser.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://doc-cost.vercel.app/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Try the Docs Cost Calculator â†’&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://leanpub.com/tokensnotjokin&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Pre-order the book on Leanpub â†’&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>I tested whether AI can safely make irreversible financial decisions</title>
      <link>https://dev.to/nagu2103/i-tested-whether-ai-can-safely-make-irreversible-financial-decisions-1ohd</link>
      <guid>https://dev.to/nagu2103/i-tested-whether-ai-can-safely-make-irreversible-financial-decisions-1ohd</guid>
      <pubDate>Wed, 25 Feb 2026 15:47:09 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;description&amp;lt;/strong&amp;gt;: &amp;lt;strong&amp;gt;A benchmark study on LLM reliability in crypto payment settlement and system design.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;LLMs look intelligent in benchmarks, but real systems donâ€™t fail on trivia questions. They fail when a single wrong decision causes permanent loss.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;I wanted to test something different: &amp;lt;strong&amp;gt;Not &quot;can a model reason?&quot; but &quot;can a model refuse unsafe actions under uncertainty?&quot;&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Setup
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;I built a small benchmark simulating a crypto payment settlement agent. For each scenario, the model must decide:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;  &amp;lt;strong&amp;gt;SETTLE:&amp;lt;/strong&amp;gt; Accept payment.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  &amp;lt;strong&amp;gt;REJECT:&amp;lt;/strong&amp;gt; Unsafe payment.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  &amp;lt;strong&amp;gt;PENDING:&amp;lt;/strong&amp;gt; Insufficient certainty.&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;The cases are operational failures rather than math puzzles:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;  RPC nodes disagreeing&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  Delayed confirmations&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  Replayed transactions&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  Wrong recipient addresses&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  Chain reorg risk&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;  Race conditions&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        &amp;lt;div class=&quot;ltag-github-readme-tag&quot;&amp;gt;
        &amp;lt;div class=&quot;readme-overview&quot;&amp;gt;
        &amp;lt;h2&amp;gt;
        &amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fassets.dev.to%2Fassets%2Fgithub-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg&quot; alt=&quot;GitHub logo&quot;&amp;gt;
        &amp;lt;a href=&quot;https://github.com/nagu-io&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;
        nagu-io
        &amp;lt;/a&amp;gt; / &amp;lt;a href=&quot;https://github.com/nagu-io/agent-settlement-bench&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;
        agent-settlement-bench
        &amp;lt;/a&amp;gt;
        &amp;lt;/h2&amp;gt;
        &amp;lt;h3&amp;gt;
        Benchmark for evaluating safety of AI agents in irreversible financial decisions (crypto payment settlement, consensus conflicts, replay attacks, finality races).
        &amp;lt;/h3&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&quot;ltag-github-body&quot;&amp;gt;
        
        &amp;lt;div id=&quot;readme&quot; class=&quot;md&quot;&amp;gt;
        &amp;lt;div class=&quot;markdown-heading&quot;&amp;gt;
        &amp;lt;h1 class=&quot;heading-element&quot;&amp;gt;AgentSettlementBench&amp;lt;/h1&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;p&amp;gt;Safety benchmark for AI agents making irreversible financial decisions.&amp;lt;/p&amp;gt;
        &amp;lt;p&amp;gt;It evaluates whether LLMs correctly refuse unsafe blockchain payments under adversarial conditions (reorgs, spoofed tokens, RPC disagreement, race conditions).&amp;lt;/p&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;a rel=&quot;noopener noreferrer nofollow&quot; href=&quot;https://camo.githubusercontent.com/a4c6f7b045492279710752c1e1a6510a2fa27f8e6cc404f9ef5d242923a7a26c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f62656e63686d61726b2d6163746976652d627269676874677265656e&quot;&amp;gt;&amp;lt;img src=&quot;https://camo.githubusercontent.com/a4c6f7b045492279710752c1e1a6510a2fa27f8e6cc404f9ef5d242923a7a26c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f62656e63686d61726b2d6163746976652d627269676874677265656e&quot; alt=&quot;Status&quot;&amp;gt;&amp;lt;/a&amp;gt;
        &amp;lt;a rel=&quot;noopener noreferrer nofollow&quot; href=&quot;https://camo.githubusercontent.com/d6240be40ee386e5bb2652bce5aad451b6955b42f244c5400497e98749e87a3e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6d61696e2d41492532305361666574792d626c7565&quot;&amp;gt;&amp;lt;img src=&quot;https://camo.githubusercontent.com/d6240be40ee386e5bb2652bce5aad451b6955b42f244c5400497e98749e87a3e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6d61696e2d41492532305361666574792d626c7565&quot; alt=&quot;Domain&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        &amp;lt;div class=&quot;markdown-heading&quot;&amp;gt;
        &amp;lt;h2 class=&quot;heading-element&quot;&amp;gt;Run in 60 seconds&amp;lt;/h2&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&quot;highlight highlight-source-powershell notranslate position-relative overflow-auto js-code-highlight&quot;&amp;gt;
        &amp;lt;pre&amp;gt;git clone https:&amp;lt;span class=&quot;pl-k&quot;&amp;gt;//&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pl-c1&quot;&amp;gt;github.com&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pl-k&quot;&amp;gt;/&amp;lt;/span&amp;gt;nagu&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;io&amp;lt;span class=&quot;pl-k&quot;&amp;gt;/&amp;lt;/span&amp;gt;agent&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;settlement&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;bench
        cd agent&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;settlement&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;bench
        npm install
        npm run benchmark&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        &amp;lt;p&amp;gt;Optional arguments:&amp;lt;/p&amp;gt;
        &amp;lt;div class=&quot;highlight highlight-source-powershell notranslate position-relative overflow-auto js-code-highlight&quot;&amp;gt;
        &amp;lt;pre&amp;gt;npm run benchmark &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;model openai &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;key YOUR_OPENAI_KEY
        npm run benchmark &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;model gemini &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;key YOUR_GEMINI_KEY
        npm run benchmark &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;model local &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;api&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;model qwen2.&amp;lt;span class=&quot;pl-c1&quot;&amp;gt;5&amp;lt;/span&amp;gt;:7b &amp;lt;span class=&quot;pl-k&quot;&amp;gt;--&amp;lt;/span&amp;gt;base&amp;lt;span class=&quot;pl-k&quot;&amp;gt;-&amp;lt;/span&amp;gt;url http:&amp;lt;span class=&quot;pl-k&quot;&amp;gt;//&amp;lt;/span&amp;gt;localhost:&amp;lt;span class=&quot;pl-c1&quot;&amp;gt;11434&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;pl-k&quot;&amp;gt;/&amp;lt;/span&amp;gt;v1&amp;lt;span class=&quot;pl-k&quot;&amp;gt;/&amp;lt;/span&amp;gt;chat&amp;lt;span class=&quot;pl-k&quot;&amp;gt;/&amp;lt;/span&amp;gt;completions&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        &amp;lt;p&amp;gt;Notes:&amp;lt;/p&amp;gt;
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;--model&amp;lt;/code&amp;gt; supports: &amp;lt;code&amp;gt;mock&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;openai&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;gemini&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;local&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;--api-model&amp;lt;/code&amp;gt; chooses provider model id (defaults are built in)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;--key&amp;lt;/code&amp;gt; can be omitted if &amp;lt;code&amp;gt;.env&amp;lt;/code&amp;gt; has &amp;lt;code&amp;gt;OPENAI_API_KEY&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;GEMINI_API_KEY&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        &amp;lt;div class=&quot;markdown-heading&quot;&amp;gt;
        &amp;lt;h2 class=&quot;heading-element&quot;&amp;gt;Public Leaderboard&amp;lt;/h2&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&quot;table-wrapper-paragraph&quot;&amp;gt;&amp;lt;table&amp;gt;
        &amp;lt;thead&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;Model&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Accuracy&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Critical Fail Rate&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Risk-Weighted Fail&amp;lt;/th&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/thead&amp;gt;
        &amp;lt;tbody&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Codex&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;50.0%&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;30.0%&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/tbody&amp;gt;
        &amp;lt;/table&amp;gt;&amp;lt;/div&amp;gt;â€¦&amp;lt;/div&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&quot;gh-btn-container&quot;&amp;gt;&amp;lt;a class=&quot;gh-btn&quot; href=&quot;https://github.com/nagu-io/agent-settlement-bench&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;View on GitHub&amp;lt;/a&amp;gt;&amp;lt;/div&amp;gt;
        &amp;lt;/div&amp;gt;
        
        
        &amp;lt;h2&amp;gt;
        
        
        What Surprised Me
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The results showed a massive gap based on how the model was instructed.&amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;table-wrapper-paragraph&quot;&amp;gt;&amp;lt;table&amp;gt;
        &amp;lt;thead&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;Mode&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Accuracy&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Critical Failures&amp;lt;/th&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/thead&amp;gt;
        &amp;lt;tbody&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;Strict Policy&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~100%&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;0%&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;Open Reasoning&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~55%&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~28%&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/tbody&amp;gt;
        &amp;lt;/table&amp;gt;&amp;lt;/div&amp;gt;
        
        &amp;lt;p&amp;gt;The failures weren&apos;t scams; they clustered around &amp;lt;strong&amp;gt;consensus uncertainty&amp;lt;/strong&amp;gt;, &amp;lt;strong&amp;gt;timing boundaries&amp;lt;/strong&amp;gt;, and &amp;lt;strong&amp;gt;conflicting sources of truth&amp;lt;/strong&amp;gt;. The limitation wasn&apos;t intelligenceâ€”it was decision authority.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Important Observation
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;If the model makes the final decision, it is unsafe. If the model only &amp;lt;strong&amp;gt;recommends&amp;lt;/strong&amp;gt; and a deterministic state machine decides, it is much safer.&amp;lt;/p&amp;gt;
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Architecture Recommendation:&amp;lt;/strong&amp;gt; &amp;lt;br&amp;gt;
        LLM (Recommendation) â†’ State Machine (Final Decision)&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;p&amp;gt;Safety improved significantly without improving the model itself. Reliability came from &amp;lt;strong&amp;gt;system design&amp;lt;/strong&amp;gt;, not &quot;smarter&quot; AI.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Why This Matters
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Most AI evaluations measure knowledge. But deployed agents operate with incomplete information and asynchronous state. These failures won&apos;t appear in traditional benchmarks.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;I suspect small local models (Qwen, Mistral, Llama) with a strict verifier might outperform frontier models acting alone.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Run the Benchmark
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;If you want to test this yourself:&amp;lt;/p&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;
        bash
        git clone https://github.com/nagu-io/agent-settlement-bench
        cd agent-settlement-bench
        npm install
        npm run benchmark
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Cosmos Cloud vs Lazydocker: Compared</title>
      <link>https://dev.to/selfhostingsh/cosmos-cloud-vs-lazydocker-compared-1pi2</link>
      <guid>https://dev.to/selfhostingsh/cosmos-cloud-vs-lazydocker-compared-1pi2</guid>
      <pubDate>Wed, 25 Feb 2026 15:42:10 GMT</pubDate>
      <content:encoded>
        &amp;lt;h2&amp;gt;
        
        
        Quick Verdict
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;These tools serve fundamentally different purposes. Cosmos Cloud is a full self-hosting platform with container management, a built-in reverse proxy, app marketplace, and security features. Lazydocker is a terminal dashboard for quick Docker monitoring and interaction. Choose Cosmos Cloud for platform management; use Lazydocker as a complementary SSH debugging tool.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Overview
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Cosmos Cloud&amp;lt;/strong&amp;gt; is a self-hosted platform that combines Docker management with a reverse proxy, app marketplace, VPN integration (Constellation), identity provider, and security features (Smart Shield). It aims to be the single management layer for your entire self-hosted stack. Current version: v0.20.2.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Lazydocker&amp;lt;/strong&amp;gt; is a terminal UI (TUI) that provides a real-time dashboard of containers, images, volumes, and logs. It&apos;s a single binary with no server component â€” run it via SSH when you need to check on things. Current version: v0.24.4.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Cosmos Cloud is an operating system for self-hosting. Lazydocker is a diagnostic tool.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Feature Comparison
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;div class=&quot;table-wrapper-paragraph&quot;&amp;gt;&amp;lt;table&amp;gt;
        &amp;lt;thead&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;Feature&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Cosmos Cloud v0.20&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Lazydocker v0.24&amp;lt;/th&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/thead&amp;gt;
        &amp;lt;tbody&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Interface&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Web UI&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Terminal UI&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Container lifecycle&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Full management&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Start/stop/restart/remove&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Built-in reverse proxy&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (with SSL)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;App marketplace&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (curated store)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Docker Compose support&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;User management&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (multi-user, 2FA)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;VPN integration&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (Constellation)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;DDoS protection&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (Smart Shield)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Identity provider&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Built-in OpenID&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Log viewing&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (real-time, colored)&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Resource monitoring&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (CPU, RAM per container)&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Shell into containers&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (exec)&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Auto-updates&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Always running&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Yes (background)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;No (on-demand)&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;RAM usage&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~150-200 MB&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~10 MB (while active)&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/tbody&amp;gt;
        &amp;lt;/table&amp;gt;&amp;lt;/div&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Use Cases
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Choose Cosmos Cloud If...
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;You want a single platform to manage containers, proxy, and security&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You want an app store for one-click deployments&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You need multi-user access with authentication&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You want a built-in reverse proxy (replacing separate NPM/Traefik)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You want VPN connectivity between devices&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You want a polished web UI accessible from any browser&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Choose Lazydocker If...
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;You want quick, zero-overhead Docker monitoring via SSH&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You need to tail logs across multiple containers&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You want a lightweight tool that doesn&apos;t run as a persistent service&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You prefer terminal-based workflows&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;You already have a reverse proxy and management setup, and just need a monitoring tool&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Use Both If...
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;You run Cosmos Cloud as your platform but want Lazydocker for quick SSH-based troubleshooting. Lazydocker installed as a host binary works alongside any Docker management platform.&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Final Verdict
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Cosmos Cloud for platform management, Lazydocker for terminal debugging.&amp;lt;/strong&amp;gt; If you&apos;re setting up a self-hosting environment from scratch, Cosmos Cloud gives you container management, reverse proxy, and security in one package. If you already have a setup and just need a way to quickly check on containers via SSH, Lazydocker is the right tool.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;They&apos;re not competing â€” they&apos;re complementary. Install Cosmos Cloud (or &amp;lt;a href=&quot;https://dev.to/apps/portainer/&quot;&amp;gt;Portainer&amp;lt;/a&amp;gt;, or &amp;lt;a href=&quot;https://dev.to/apps/dockge/&quot;&amp;gt;Dockge&amp;lt;/a&amp;gt;) for management, and keep Lazydocker installed as a host binary for when you need a quick terminal-based status check.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Frequently Asked Questions
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Can Lazydocker manage containers deployed through Cosmos Cloud?
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Yes. Lazydocker sees all Docker containers regardless of how they were deployed. You can view, restart, and check logs of Cosmos-managed containers through Lazydocker.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Is Cosmos Cloud heavier than running Portainer + NPM separately?
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;About the same. Cosmos Cloud uses ~150-200 MB combining both functions. Portainer (~100-200 MB) plus NPM (~80-120 MB) uses ~200-320 MB total. Cosmos is slightly more resource-efficient as an all-in-one solution.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Does Lazydocker work on ARM servers?
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Yes. Lazydocker provides ARM64 binaries. It works on Raspberry Pi 4/5, ARM-based VPS, and Apple Silicon (via Docker for Mac).&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Related
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/apps/cosmos-cloud/&quot;&amp;gt;How to Self-Host Cosmos Cloud&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/apps/lazydocker/&quot;&amp;gt;How to Set Up Lazydocker&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/compare/portainer-vs-cosmos/&quot;&amp;gt;Portainer vs Cosmos Cloud&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/compare/lazydocker-vs-portainer/&quot;&amp;gt;Lazydocker vs Portainer&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/compare/lazydocker-vs-dockge/&quot;&amp;gt;Lazydocker vs Dockge&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/best/docker-management/&quot;&amp;gt;Best Docker Management Tools&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://dev.to/foundations/docker-compose-basics/&quot;&amp;gt;Docker Compose Basics&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>The Thieves Who Caught the Thieves</title>
      <link>https://dev.to/webdevtodayjason/the-thieves-who-caught-the-thieves-4peo</link>
      <guid>https://dev.to/webdevtodayjason/the-thieves-who-caught-the-thieves-4peo</guid>
      <pubDate>Wed, 25 Feb 2026 15:41:56 GMT</pubDate>
      <content:encoded>
        &amp;lt;h3&amp;gt;
        
        
        Anthropic just exposed Chinese labs for stealing AI capabilities. There&apos;s only one problem.
        &amp;lt;/h3&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;In May 2025, Anthropic published a remarkable document.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It detailed how three Chinese AI labs â€” DeepSeek, Moonshot, and Minimax â€” had run a coordinated industrial-scale operation to steal Claude&apos;s capabilities. 16 million automated conversations. 24,000 fake accounts. Hydra networks of proxies designed to evade detection. Minimax pivoted their entire operation within 24 hours of a new Claude release to capture the latest capabilities before anyone could stop them.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The language Anthropic used was unambiguous. Theft. Espionage. National security threat. Foreign adversaries closing the competitive gap through extraction rather than innovation.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It is a compelling story. It is also, in a way that nobody in the AI industry seems willing to say plainly, deeply ironic.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Because Anthropic built Claude on a foundation that millions of creators argue was taken without their consent or compensation.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;They just took it from humans.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Foundation Nobody Talks About
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;To understand what&apos;s happening now, you have to understand how the frontier models were built in the first place.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;OpenAI, Anthropic, Google â€” the companies now positioning themselves as the responsible guardians of transformative AI capabilities â€” trained their foundational models on the largest act of intellectual property appropriation in human history.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Books. Millions of them, ingested without permission or payment. The work of living authors scraped from Library Genesis, from Z-Library, from every dark corner of the internet where copyrighted text had accumulated.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;News articles. Decades of journalism from outlets that are now fighting for survival, their most valuable asset â€” their archive, their voice, their institutional knowledge â€” consumed wholesale to make models smarter.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Code. Every public GitHub repository, billions of lines written by developers who thought they were contributing to open-source community, not training a commercial product worth hundreds of billions of dollars.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Creative work. Fiction, poetry, screenplays, lyrics, visual art descriptions â€” the output of human creative lives, taken without consent, without credit, without compensation.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The legal framing the labs hid behind was &quot;fair use for transformative purposes.&quot; Courts are still deciding whether that holds â€” and to be precise, no court has yet issued a final ruling that training on copyrighted material without a license constitutes theft in the legal sense. The outcomes of these cases will define the rules for an entire industry. But litigation is active and widespread: The New York Times is suing OpenAI. The Authors Guild filed a class action. Visual artists organized against Stability AI and Midjourney. Thousands of creators whose work formed the foundation of the AI economy never saw a dollar.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The labs called it training data. The creators called it theft.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;And the labs kept going.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Pressure Gradient Runs Both Ways
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The video that Anthropic&apos;s disclosure sparked a thousand reactions to makes a compelling argument about distillation economics. When one side has capabilities worth potentially trillions of dollars and the other side can extract them for thousands, the information moves. Always. The same force that makes water flow downhill.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;A 1,000-to-1 return on extraction. That&apos;s the math Minimax was running when they pointed 13 million conversations at Claude&apos;s agentic reasoning capabilities.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It&apos;s a clean argument. It&apos;s also the exact same argument that justified training on the internet.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The cost of generating intelligence â€” human creative work, decades of writing, coding, thinking, making â€” is astronomically higher than the cost of ingesting it. A novelist spends three years writing a book. A model ingests it in milliseconds. The economics are overwhelming. The information moves.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The difference Anthropic draws is legal and technical. They own the model weights. Claude&apos;s outputs are their intellectual property. Extracting those outputs to train a competitor model violates their terms of service and potentially intellectual property law.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But the weights themselves â€” the thing they&apos;re protecting â€” were built on a foundation that the creative class never consented to contribute.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The hierarchy of appropriation that nobody wants to name:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Layer 1:&amp;lt;/strong&amp;gt; Human creators had their life&apos;s work taken to build frontier models. The labs called this training.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Layer 2:&amp;lt;/strong&amp;gt; Frontier models now have their outputs taken to build distilled models. Anthropic calls this espionage.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The distinction is real in law. In moral logic, it is considerably harder to defend.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The National Security Frame
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Anthropic&apos;s disclosure didn&apos;t present what happened as an economic dispute or a copyright violation. It presented it as a national security threat.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Foreign adversaries. The Chinese Communist Party. Military and surveillance applications. Closing the competitive gap.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This framing was deliberate, and it serves specific interests.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Anthropic has consistently supported export controls on AI capabilities. They want to demonstrate that those controls are working â€” that the apparently rapid progress of Chinese labs depends on stolen American capabilities rather than independent innovation. The national security frame advances a policy agenda that benefits Anthropic directly: tighter restrictions on who can access frontier AI capabilities, and more deference to the companies who hold them.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;There is something worth examining in the specific details of what DeepSeek targeted. Their operation focused on Claude&apos;s reasoning capability across 150,000 exchanges, generating chain-of-thought training data at scale. Their prompts asked Claude to articulate the internal reasoning behind completed responses â€” effectively manufacturing the reasoning traces needed to train a competitor model.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;One of their most revealing techniques had nothing to do with military applications. They used Claude to generate censorship-safe alternatives to politically sensitive queries â€” training data designed to help DeepSeek&apos;s own models steer conversations away from topics the Chinese government doesn&apos;t want discussed.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That is troubling on its own terms. The geopolitical dynamic is real. The surveillance state applications are real.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But the national security frame also does something else. It constructs a narrative where American AI companies are the responsible guardians of dangerous capabilities and Chinese labs are reckless proliferators. It obscures the degree to which the underlying economic force â€” the staggering ROI of acquiring frontier capabilities through extraction rather than development â€” applies universally. To every lab that isn&apos;t a hyperscaler. To every startup that can&apos;t afford a billion-dollar training run. To academic researchers, government contractors, open-source projects.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;To everyone.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Open Weights Question
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Anthropic&apos;s position on open-weight models has been consistent and worth examining in this light.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;They oppose them. Not explicitly, not always in those words, but structurally and in practice. Their arguments center on safety â€” open weights mean anyone can fine-tune away safety guardrails, deploy capabilities without oversight, accelerate the timeline to dangerous AI.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;These are real concerns. The safety arguments are not entirely without merit.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But open weights also mean that the capabilities built substantially on the work of millions of uncredited human creators become accessible to the humans who couldn&apos;t afford to pay for training runs. Open weights mean that the value extracted from the global creative commons gets returned to the commons in some form.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Anthropic&apos;s opposition to open weights, framed through safety, also happens to protect their commercial position. A world where powerful open models are freely available is a world where Anthropic&apos;s API pricing faces existential competition. A world where Anthropic controls access to frontier capabilities behind an API is a world where they can enforce terms of service, detect extraction operations, and maintain the 1,000-to-1 economic advantage on the right side of the gradient.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Meta, whose Llama models are the primary counterargument to closed-weight dominance, built its AI capability substantially through talent acquisition â€” recruiting researchers from Google, Anthropic, and OpenAI with nine-figure packages. When Llama 4 underperformed, Zuckerberg went shopping for people who&apos;d already done the hard work elsewhere. Talent acquisition is not distillation, but it operates on the same principle. The knowledge walks out in someone&apos;s head instead of flowing through an API. The economic dynamic is identical.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Everyone is acquiring intelligence they didn&apos;t fully develop. The question is only the mechanism and the legality.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        What Distillation Actually Does
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Set aside the ethics for a moment and look at the technical reality, because it matters for anyone building on these models.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Distillation does not produce a copy of the original model. It produces a compression. Like a lossy MP3 â€” smaller, cheaper, good enough for most use cases, but missing things you can&apos;t hear until you need them.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;A frontier model trained from scratch occupies a high-dimensional capability space. It can reason across domains, use tools in novel combinations, maintain coherence across long autonomous workflows, recover from unexpected failures. It has what you might call a wide manifold â€” broad surface area across many kinds of tasks.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;A distilled model is trained on a subset of the frontier model&apos;s outputs. It learns to reproduce specific behaviors â€” the ones the distiller chose to capture. It performs well on those behaviors and falls off steeply outside that distribution.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This is the brittleness problem, and it&apos;s critically undermeasured.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;DeepSeek&apos;s model scores well on reasoning benchmarks because the operation targeted reasoning capabilities at scale. But the resulting model learned to produce outputs that look like Claude&apos;s outputs on reasoning tasks. It did not learn the underlying representational structure that allows generalization across task types, recovery from unexpected failures, or sustained coherence across extended autonomous workflows.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;For a chat application or a well-defined coding task, the distilled model might be 90% as capable for 15% of the cost. A reasonable tradeoff.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;For a week-long autonomous coding sprint across six repositories â€” the kind of agentic work where AI value is increasingly concentrated â€” the distilled model might be 40% as effective. And that failure won&apos;t show up on a benchmark. It will show up at 3am on a Thursday when the agent has been running for nine hours and encounters something outside its training distribution.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The provenance of a model is not just an ethical question. It is a capability question. Where the weights come from determines how the model breaks.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Circle
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Here is what the full picture looks like when you step back far enough to see it.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The creative class produced the training data that made frontier AI possible. They were not compensated. They were not consulted. Their work was taken because the economics were overwhelming and the legal framework hadn&apos;t caught up.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The frontier models, built on that foundation, became extraordinarily valuable. So valuable that every actor who couldn&apos;t afford to replicate the training run had a structural incentive to extract what they could through other means.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Chinese labs extracted it through API distillation. Other labs extracted it through talent acquisition. Researchers extracted it through fine-tuning on outputs. The economics were overwhelming and the legal framework hadn&apos;t fully caught up.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Anthropic, whose own foundation rests on the uncompensated work of millions of human creators, now frames what the Chinese labs did as theft. Espionage. A national security threat.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;They are not wrong that what DeepSeek, Moonshot, and Minimax did was a violation. The terms were clear. The methods were deceptive. The operational sophistication â€” 24,000 fake accounts, Hydra networks, 24-hour pivots on new model releases â€” goes well beyond ambiguous gray areas.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But the moral authority to stand in outrage at extraction depends on clean hands. And the hands that built these models are not clean.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The music industry went through this. They fought Napster with everything they had, and they were right that copyright violations were happening at scale. They were also an industry that had spent decades extracting value from artists on predatory contracts, controlling distribution to capture margins that belonged to creators, and using copyright as a weapon against fans while using it as a shield against accountability.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;They were the victim and the villain simultaneously. The framing they chose â€” piracy is theft, we are the victims â€” was technically accurate and strategically self-serving.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Anthropic is making the same move.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;These people are doing exactly what was done to the humans who built their foundation.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Just with better lawyers, better PR, and a national security frame that makes it easier not to notice.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        What To Do With This
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;None of this means the distillation operations were acceptable. They weren&apos;t.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;None of this means the capability risks from adversarial AI extraction are imaginary. They&apos;re real.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;And none of this means Anthropic&apos;s safety work is cynical cover for commercial interests. The people building safety infrastructure at these labs are mostly doing it because they believe it matters.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But if you&apos;re building on these models â€” if you&apos;re making decisions about which AI capabilities to trust, which vendors to rely on, which platforms to build on â€” you need the full picture.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The floor is rising. Even distilled models handle routine tasks passably now, and that floor will keep rising. What matters for differentiation is the ceiling â€” the sustained agentic capability that requires genuine representational depth, not borrowed manifold.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That ceiling currently lives at the frontier hyperscalers. Not because their benchmarks say so, but because genuine frontier training produces the generality that agentic work demands.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But as you make that choice, consider who built what on whose foundation. Consider what it means that the same economic force that drove the original training data extraction is now driving API-based distillation. Consider whether the companies positioning themselves as responsible guardians of dangerous capabilities are the right people to define what responsible guardianship looks like.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The pressure gradient doesn&apos;t care about your sympathies. The information moves. It always moves.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The only question worth asking is who&apos;s on which side of it, and whether the side they&apos;re claiming to be on is the side they&apos;re actually on.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Jason Brashear is a senior software developer and AI systems architect with 30 years of experience. He is the creator of ArgentOS, an intent-native multi-agent operating system, and a partner at Titanium Computing. He writes about the intersection of AI architecture, organizational design, and the harder truths the industry would prefer not to discuss.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;GitHub: webdevtodayjason&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Understanding Variables and Data Types in JavaScript</title>
      <link>https://dev.to/anoop-rajoriya/understanding-variables-and-data-types-in-javascript-33pd</link>
      <guid>https://dev.to/anoop-rajoriya/understanding-variables-and-data-types-in-javascript-33pd</guid>
      <pubDate>Wed, 25 Feb 2026 15:41:51 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Welcome to the world of programming. If you are learning programming this is the essential thing you should master. Think you are shifting from current house to new one. You get many cardboard boxes and labeled them like library for books, foot-wears for shoes and slippers etc.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Just like it in the programming there are thing called variables just like you labels and the data types like your stuffs you putting into boxs labeled by there categories.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        What variables are and why they are needed
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;In the computer programming, variables are the named or symbolic container which used to store data values within computer memroy. It act as a placeholder or label for information such as user input, component states or calculation which can be used or updated during the programm execution without that storing, manipulation data whould be nearly impossible.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Varialbes are essential for creating efficient or flexible programms:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Flexible and Reusable:&amp;lt;/strong&amp;gt; instead of hard coding fixed value like &amp;lt;code&amp;gt;3+5&amp;lt;/code&amp;gt; you can use &amp;lt;code&amp;gt;a+b&amp;lt;/code&amp;gt;, allow to use same code for different data inputs.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Data Storage and Manipulation:&amp;lt;/strong&amp;gt; programmes need to remember data like user names, game state, raw data form files. Variables allow developers to use store this in memory so it can be reused later.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Readability and Maintainability:&amp;lt;/strong&amp;gt; using discriptive name make programm easy to read, understand so it can be updated in future reduce errors during debugging.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Managing Program Logic:&amp;lt;/strong&amp;gt; variables used to manage the program flow logic such as using boolean state to decide which part of the code block should be execute during run time.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Note:&amp;lt;/strong&amp;gt; Always use descirptive names like use user_name or userName instead of only name, for data you can use common naming cases like camelCase, snack_case, PascelCase, and kabab-case etc.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        How to declare variables using var, let, and const
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Inside a JavaScript &quot;declare&quot; variables just means of creating a box and giving it a name. There are three possible way to do this:&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Old Way
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Using &amp;lt;code&amp;gt;var&amp;lt;/code&amp;gt; keyword was a original way to declare variables. You seeing it many times in old codebase but modern developers rarly use it because of it&apos;s quirky behaviours which some times lead bugs in code.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userName&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        The Modern Way
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;There were &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;const&amp;lt;/code&amp;gt; keywords released in js new version to reduce this quirky behaviours.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt; when you know the vlaue of the variable need to be change later like playerScore in a game.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;playerScore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Use &amp;lt;code&amp;gt;const&amp;lt;/code&amp;gt; this is short for constants. It used to declare variables with the fixed value which can not be changed in any cost within the program execution like userDOB.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userDOB&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1990&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;Note: Always avoid of using &amp;lt;code&amp;gt;var&amp;lt;/code&amp;gt; keyword for declaring variables because that can lead potential errors in you code.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Primitive data types
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Think when you bring some kitchen grocery, you never put item within wrong container like you never put oil in box or rice in bottle. You can do but naturally we did not do this. Just like it Javascript use proper data types for storing information within computer. There are some common primitive data types:&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        1. String Data Type
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;it&apos;s a sequence of characters. It&apos;s used to store textual informaiton in computer. Strings are immutable meaning it can not be changed after creating, but you can assingned new string to the same variable.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userEmail&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;something@email.com&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        2.Number Data Type
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;it can be a interger or floating point numbers, JavaScript didn&apos;t differentiate between different kids of number it store all them as floating point number. It is also immutable data type. JavaScript also has a special type of numbers &amp;lt;code&amp;gt;infinity&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;-inifinity&amp;lt;/code&amp;gt; both represent mathmetical infinities for positive side or negative side. &amp;lt;code&amp;gt;NaN&amp;lt;/code&amp;gt; is also a number type which represent values those are Not a Number.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;integer&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;10&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;floating&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mf&quot;&amp;gt;10.550&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;negative&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;10&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;infy&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;infinity&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;negInfy&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;infinity&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        3. Boolean Data Type
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;it use to represen &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; values majority used to run specific block of code.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;isLogin&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;isAdmin&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;false&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        4. Null Data Type
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;in JavaScript programmer explicitly use &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt; data type to intenally represent absance of any object value of empty values. It only have one possible value &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt;. The well-knowen quirky or historical bug is that using &amp;lt;code&amp;gt;typeof&amp;lt;/code&amp;gt; operator with &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt; give a string of &amp;lt;code&amp;gt;object&amp;lt;/code&amp;gt; not &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt;. This behaviour of JavaScript is maintain for backword compatibility to avoid breaking existing websites.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;typof&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// &quot;object&quot;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Truthy &amp;amp;amp; Falsy values
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Meaning of &amp;lt;strong&amp;gt;Truthy and Falsy&amp;lt;/strong&amp;gt; is if we convert these values into &amp;lt;strong&amp;gt;Boolean Type&amp;lt;/strong&amp;gt; the truthy values are converted into &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; and falsy values are converted into &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt;. There are some values treat as falsy values those are:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Booelan value &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Number zero including &amp;lt;code&amp;gt;0.0&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;-0&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;The big int zero value &amp;lt;code&amp;gt;0n&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Empty string &amp;lt;code&amp;gt;&quot;&quot;&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;&apos;&apos;&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Intentinoal absance of value &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Undefined&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Not a number &amp;lt;code&amp;gt;NaN&amp;lt;/code&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;Excluding these, all values are treated as a truthy values.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        5. Undefined Data Type
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;It also used to represent absence of a value like &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt; do. Major different is JavaScript automatically assinged &amp;lt;code&amp;gt;undefined&amp;lt;/code&amp;gt; to a varialbes has declare but not yet assinged explicitly value.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Syntax:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;score&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;score&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// undefined&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;Do It Your Self: Open browser go inside console tab in dev tools. Try to declaring some variables with differnet data types and try convert into boolean using &amp;lt;code&amp;gt;!&amp;lt;/code&amp;gt; operator. You understand the concept of truty or falsy values.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        What is scope
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Scope is the region where variables, function or objects are accessible and visible. It determin how the JavaScript engine looks for the identifires (names) in different part of you code. There are several types of scopes form a heirarchy known as &amp;lt;strong&amp;gt;Scope Chain&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fr1bc209bivhz67sgski6.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fr1bc209bivhz67sgski6.png&quot; alt=&quot;Scopes visualization with hallway analogy&quot; width=&quot;800&quot; height=&quot;494&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        1. Global Scope
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Variables declare outside of any block or function resides in global scope. These variables are accessible for every one in the program. Think it like a light bulb in hallway so every one can see or use it in house.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        2. Funciton (Local) Scope
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Every function has its own scope. Declaring variables inside function its only accessible within that function, variables not visible outside that funciton or global scope.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        3. Block Scope
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;It introduce in ES6 with the &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;const&amp;lt;/code&amp;gt; keywords. The variables declared inside the block scope (area inside the curly bracket &amp;lt;code&amp;gt;{}&amp;lt;/code&amp;gt;) are only accessible inside, not outside. It include if statement, loops and standalone blocks.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        4. Module Scope
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;When using ES6 modules (via &amp;lt;code&amp;gt;import&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;export&amp;lt;/code&amp;gt;), variables declare inside module are scoped to that specific file. They are not accessible globally or inside any other module unless explicitly exported.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        5. Lexical Scope
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;It is known as &amp;lt;strong&amp;gt;Scope Chaining&amp;lt;/strong&amp;gt; or &amp;lt;strong&amp;gt;Static Scope&amp;lt;/strong&amp;gt;. It means the scope of variables determins by their physical location within sorce code at compile time, not where they are called in run time. When interpreter need to access the specific variable it following scope chain:&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;It first find in current scope (innermost scope).&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;If not found, then it move to the its parent scope.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Continue untile it reach to the global scope.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;If variable is still not found, a &amp;lt;code&amp;gt;ReferenceError&amp;lt;/code&amp;gt; is thrown.&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Basic difference between &amp;lt;code&amp;gt;var&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;const&amp;lt;/code&amp;gt;
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Each of these keyword has certain purpose and distinct scope. We shall examin the difference between the &amp;lt;code&amp;gt;var&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;consts&amp;lt;/code&amp;gt; with example:&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Var keyword
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Var-declared variables are has function scoped. Which means they are accessible any where inside the function it declared. Here&apos;s an example of using &amp;lt;code&amp;gt;var&amp;lt;/code&amp;gt;:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;verDeclaration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(){&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;if&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;){&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;x&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;10&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;x&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// 10&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;In that example x is declared inside the if statement so it can accessible inside that. But it also accessible inside the entire &amp;lt;code&amp;gt;verDeclaration&amp;lt;/code&amp;gt; function.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Let keyword
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Let-declared variables has block scope. Which means &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt; declaration limit the variable into block where they are specified. It specifically helpfull to prevent unintentional &amp;lt;strong&amp;gt;Hoisting&amp;lt;/strong&amp;gt; or lowering the scope related errors.&amp;lt;/p&amp;gt;
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;Note: Hoisting is behaviour of JS whre declaration of variable or functions are apeared move to the top of their scope during compilation phase.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;p&amp;gt;Lets see above example with let declaration:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;letDeclaration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(){&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;if&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;){&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;y&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;20&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;y&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// ReferenceError: y is not defined&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Here y is declared with let keyword means it have block scope so it only accessible within the if statement. Try to access &amp;lt;code&amp;gt;y&amp;lt;/code&amp;gt; outside of that state will throws an &amp;lt;code&amp;gt;ReferenceError: y is not defined&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Const keyword
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Declareing variable with &amp;lt;code&amp;gt;const&amp;lt;/code&amp;gt; keyword is also has block scope like &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt;. It primarly helpfull for declaring variables those will not mutate. It also throws an &amp;lt;code&amp;gt;ReferenceErrors&amp;lt;/code&amp;gt; if trying to access outside its scope.&amp;lt;/p&amp;gt;
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;Do It Your Self: Learn the way to execute JS code in browser (hint: use html file or console). Declare some variables like name, age, isStudnet. Print them in console use console.log() method. Try to change these values of with let and consts and observe the behaviours.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Understanding difference between &amp;lt;code&amp;gt;let&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;const&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;var&amp;lt;/code&amp;gt; is the essential fundation for web development. Eash developer should know these difference for writing bug free code. For learning these concepts i read articles like &amp;lt;a href=&quot;https://medium.com/@ananthvishnu/javascript-variables-60a53fda1211&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;varialbes in JS&amp;lt;/a&amp;gt;, &amp;lt;a href=&quot;https://medium.com/@akashsdas_dev/scope-in-javascript-fc439e1ac4fe&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;scopes in JS&amp;lt;/a&amp;gt;, &amp;lt;a href=&quot;https://medium.com/@jackpritomsoren/difference-between-var-let-and-const-in-javascript-c6236899ca4d&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Difference of let, const, and var&amp;lt;/a&amp;gt;,&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Building a Deterministic Batch Icon Pack Generator for Multi-Platform Apps</title>
      <link>https://dev.to/bassthermal/building-a-deterministic-batch-icon-pack-generator-for-multi-platform-apps-4in0</link>
      <guid>https://dev.to/bassthermal/building-a-deterministic-batch-icon-pack-generator-for-multi-platform-apps-4in0</guid>
      <pubDate>Wed, 25 Feb 2026 15:41:28 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;If you ship apps across Windows, Android, or Apple platforms, youâ€™ve probably dealt with icon packaging friction.&amp;lt;br&amp;gt;
        &amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwfewdqb5em6a20mo36oa.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwfewdqb5em6a20mo36oa.png&quot; alt=&quot; &quot; width=&quot;800&quot; height=&quot;469&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        Designing the icon isnâ€™t the problem.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Packaging it correctly across platforms is.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Each platform expects different formats and size matrices:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Windows requires &amp;lt;code&amp;gt;.ico&amp;lt;/code&amp;gt; containers with multiple embedded sizes
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Android uses density-based folders
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Apple has strict size requirements
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;General exports require multiple PNG resolutions
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;Even when the design is finished, you still need to:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Export multiple resolutions
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Generate ICO files
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Organize folder structures
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Double-check required sizes
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Repeat the entire process for the next project
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;For one app, itâ€™s manageable.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;For multiple apps or client work, it becomes repetitive overhead.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;The Goal: Deterministic Output&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;I built a small Windows utility called &amp;lt;strong&amp;gt;Icon Pack Builder&amp;lt;/strong&amp;gt; to reduce that friction.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The goal wasnâ€™t to replace design tools.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It was to package existing icon assets cleanly and predictably.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Core principles:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Deterministic folder structure
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Consistent naming conventions
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Multi-platform output
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Batch processing
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Fully offline
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;You select one image â€” or multiple images â€” and generate complete platform-ready icon packs in a single run.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Batch Processing Matters More Than It Sounds&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Most online generators handle one image at a time.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But if youâ€™re:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Updating branding across multiple apps
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Preparing portfolio builds
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Managing client assets
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Shipping frequently
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;You donâ€™t want to manually repeat the same export process.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Batch mode lets you generate structured icon packs for multiple source images in one execution.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That alone significantly reduces repetitive workflow steps.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Offline by Design&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Many icon generators are web-based.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That means:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Uploading assets
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Internet dependency
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Server-side processing
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Potential privacy concerns
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;Running locally removes those constraints.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Everything happens on your machine.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;No uploads. No subscriptions. No cloud dependency.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Who Itâ€™s For&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Indie developers
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Small studios
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Agencies shipping multiple builds
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Developers who prefer predictable tooling
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;Itâ€™s a focused utility solving a specific packaging problem.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Sometimes thatâ€™s enough.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If youâ€™re interested, you can check it out here:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://apps.microsoft.com/detail/9mxvt3dfq295&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://apps.microsoft.com/detail/9mxvt3dfq295&amp;lt;/a&amp;gt;?&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Inside Cloudflare Vinext: a from-scratch Next.js App Router rebuild</title>
      <link>https://dev.to/hamza4600/inside-cloudflare-vinext-a-from-scratch-nextjs-app-router-rebuild-3e8</link>
      <guid>https://dev.to/hamza4600/inside-cloudflare-vinext-a-from-scratch-nextjs-app-router-rebuild-3e8</guid>
      <pubDate>Wed, 25 Feb 2026 15:41:09 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fjvblm8ng3mky1t20ylfr.webp&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fjvblm8ng3mky1t20ylfr.webp&quot; alt=&quot; &quot; width=&quot;800&quot; height=&quot;536&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;h1&amp;gt;
        
        
        Inside Cloudflare Vinext: A Ground-Up Rebuild of the Next.js App Router
        &amp;lt;/h1&amp;gt;
        
        &amp;lt;p&amp;gt;Cloudflare has introduced &amp;lt;strong&amp;gt;Vinext&amp;lt;/strong&amp;gt;, a full reimplementation of the Next.js App Router built entirely on Vite.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This is not a wrapper or adapter around Next.js. Itâ€™s a clean-room rebuild of the App Router surface area â€” including file-based routing, React Server Components (RSC) streaming, and server actions â€” implemented on top of Vite instead of the original Next.js toolchain.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Reported Performance Improvements
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Cloudflare claims the following improvements:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;4.4Ã— faster production builds&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;57% smaller client-side bundles&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;94% coverage of the Next.js 16 App Router API&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;The migration path is intentionally minimal. Instead of running &amp;lt;code&amp;gt;next&amp;lt;/code&amp;gt;, you run &amp;lt;code&amp;gt;vinext&amp;lt;/code&amp;gt;. Your existing project structure remains the same:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;app/&amp;lt;/code&amp;gt; directory&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;code&amp;gt;next.config.js&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Existing components and routing patterns&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;No restructuring required.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Getting Started
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight shell&quot;&amp;gt;&amp;lt;code&amp;gt;npm &amp;lt;span class=&quot;nb&quot;&amp;gt;install &amp;lt;/span&amp;gt;vinext
        
        vinext dev      &amp;lt;span class=&quot;c&quot;&amp;gt;# Start development server with HMR&amp;lt;/span&amp;gt;
        vinext build    &amp;lt;span class=&quot;c&quot;&amp;gt;# Create production build&amp;lt;/span&amp;gt;
        vinext deploy   &amp;lt;span class=&quot;c&quot;&amp;gt;# Build and deploy to Cloudflare Workers&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;One notable detail: the project was reportedly built by a single engineer over roughly a week, coordinating more than 800 AI-assisted coding sessions, with an estimated token cost of about $1,100.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This article examines what Vinext really is under the hood, what the benchmarks do and donâ€™t tell us, where it falls short, and what it means for every developer currently shipping Next.js to a platform that isnâ€™t Vercel.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fk3i28ao8dsvapb3eura5.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fk3i28ao8dsvapb3eura5.png&quot; alt=&quot; &quot; width=&quot;800&quot; height=&quot;446&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        The Portability Problem
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Next.js is currently the most widely used React framework. Over time, though, it has become increasingly optimized for a specific hosting environment.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This wasnâ€™t a single shift but a gradual tightening of coupling. Features like:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Incremental Static Regeneration (ISR)&amp;lt;br&amp;gt;
        Edge rendering&amp;lt;br&amp;gt;
        Streaming React Server Components&amp;lt;br&amp;gt;
        Server actions have increasingly relied on infrastructure assumptions tied to certain platforms.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Vinext represents a different approach: preserve the developer-facing API while targeting a different runtime â€” in this case, Cloudflare Workers.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Experimental and On the Roadmap
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Vinext is explicitly labeled experimental â€” itâ€™s less than a week old and not yet battle-tested at scale.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Current limitations include:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;No static pre-rendering at build time. Unlike Next.jsâ€™s generateStaticParams() approach, vinext does not yet pre-generate static HTML during vinext build.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Static pre-rendering is on the roadmap, but until then purely static sites may not benefit fully.&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;To address this gap, Cloudflare introduced Traffic-aware Pre-Rendering (TPR):&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Instead of pre-rendering all pages, vinext can analyze actual recent traffic data at deploy time&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Only pages with significant traffic are pre-rendered&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;All others fall back to on-demand SSR with ISR caching&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;This approach aims to reduce build time for large sites without full static pre-rendering, but it is still experimental and not yet the default behavior.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        What This Means for Developers
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Vinext illustrates a few important points about modern frameworks and infrastructure:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;The Next.js App Router experience â€” meaning the APIs developers rely on â€” is no longer strictly tied to the original Next.js implementation.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;A Vite-based toolkit can fulfill the same API surface with much smaller bundle sizes and significantly faster builds, at least in early tests.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Cloudflareâ€™s deployment integrations (Workers, KV, Agents, etc.) provide first-class support for platform-specific features without workarounds.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;The project was built with heavy AI assistance, demonstrating how large codebases can be assembled efficiently with the right models, tests, and tooling â€” but still with human architectural oversight&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Final Thoughts
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Vinext is more than a performance experiment â€” itâ€™s a statement that framework APIs can be decoupled from their original runtimes. It challenges assumptions about coupling between build tools, deployment platforms, and developer experience.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>I Fixed Stale Data Across Every Screen in React Native with 3 React Query Patterns</title>
      <link>https://dev.to/likhit/i-fixed-stale-data-across-every-screen-in-react-native-with-3-react-query-patterns-5fd5</link>
      <guid>https://dev.to/likhit/i-fixed-stale-data-across-every-screen-in-react-native-with-3-react-query-patterns-5fd5</guid>
      <pubDate>Wed, 25 Feb 2026 15:40:26 GMT</pubDate>
      <content:encoded>
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Environment:&amp;lt;/strong&amp;gt; React Native 0.76+ Â· @tanstack/react-query v5 Â· TypeScript&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;p&amp;gt;I was building a React Native app where users could interact with the same data from multiple screens. Everything seemed fine during early testing until I noticed something deeply frustrating: &amp;lt;strong&amp;gt;updating data on one screen didn&apos;t reflect on another until I manually refreshed it.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Sound familiar? Here&apos;s how I diagnosed it, fixed it with 3 focused React Query patterns, and what I learned along the way.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Problem
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The app had three screens showing overlapping data:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Screen A&amp;lt;/strong&amp;gt; : Shows a list of items&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Screen B&amp;lt;/strong&amp;gt; : Shows the same items in a different view&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Screen C&amp;lt;/strong&amp;gt; : Shows item details with edit capability&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;When a user marked an item complete on Screen A, navigating to Screen B still showed it as incomplete. Users had to pull-to-refresh on every screen after every action. The app felt broken, because it was.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Root Cause: Isolated State
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;After some digging, the culprit was clear. Each screen used its own hook with independent &amp;lt;code&amp;gt;useState&amp;lt;/code&amp;gt;:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useState&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Screen A hook&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useListA&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;setItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;prev&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;prev&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;completed&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;));&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Other screens have no idea this happened&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Screen B hook â€” completely separate state&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useListB&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([]);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// No connection to Screen A&apos;s state whatsoever&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The architecture looked like this:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;Screen A          Screen B          Screen C
        â”‚                 â”‚                 â”‚
        â–¼                 â–¼                 â–¼
        useState          useState          useState
        (isolated)        (isolated)        (isolated)
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
        Backend API
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Each screen fetched and managed data independently. When one mutated data, the others had no idea. This isn&apos;t a bug, it&apos;s the natural consequence of uncoordinated local state managing shared server data.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Why Not Just Use Zustand?
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;This question comes up a lot, and it&apos;s worth addressing directly before diving into the solution.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Zustand is a client state manager.&amp;lt;/strong&amp;gt; It&apos;s excellent for data that lives purely inside your app UI state, filter selections, modal toggles, user preferences. It has no built-in concept of staleness, background refetching, or cache invalidation because it doesn&apos;t need one.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React Query is a server state manager.&amp;lt;/strong&amp;gt; It&apos;s designed specifically for data that originates from a backend for fetching, caching, deduplicating requests, and keeping that data fresh across your app.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Using Zustand to solve this problem would mean manually writing all the cache logic React Query gives you for free. In fact, the ideal architecture uses &amp;lt;strong&amp;gt;both&amp;lt;/strong&amp;gt; React Query for server data, Zustand for client-only state. That&apos;s a topic for another post. For now, our problem is server state sync, so React Query is the right tool.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Fix: 3 React Query Patterns
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;I had React Query installed but wasn&apos;t using it effectively each screen was still managing its own fetch lifecycle. The fix came down to three focused patterns.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Pattern 1: A Query Keys Factory
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;A centralised key system is what makes targeted cache invalidation possible. Instead of scattering string literals across your codebase, you define them once:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// lib/query-keys.ts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;detail&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;detail&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Define what needs invalidating after each action&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;invalidationGroups&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;itemUpdated&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;itemCreated&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;itemDeleted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;as const&amp;lt;/code&amp;gt; assertions give you full TypeScript inference downstream. Grouping by action means you invalidate precisely what&apos;s needed.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Pattern 2: Mutations with Auto-Invalidation
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;This is where the real magic happens. Mutation hooks that automatically invalidate related queries after every operation:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// hooks/useMarkComplete.ts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;invalidationGroups&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/query-keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// useSessionStore is a Zustand store holding auth state.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Replace this with however your app stores the current user â€”&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Clerk, Firebase Auth, Supabase, or your own auth hook.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../store/useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kr&quot;&amp;gt;interface&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;Item&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;completed&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;boolean&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// ...other fields&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMarkComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutationFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Optimistic update â€” instant UI feedback before the API responds&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onMutate&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Cancel any in-flight queries to prevent race conditions&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;cancelQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Snapshot current data so we can roll back if needed&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;));&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Optimistically update the cache right now&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;old&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;Item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;undefined&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;old&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;?.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;completed&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Rollback on error â€” restore the snapshot&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onError&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;_err&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;if &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;?.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Surface the error to your UI here â€” toast, alert, inline message, etc.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Use onSettled (not onSuccess) so invalidation fires on both&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// success AND error â€” prevents stale data after a failed mutation&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onSettled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;invalidationGroups&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;itemUpdated&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;forEach&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Why &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; instead of &amp;lt;code&amp;gt;onSuccess&amp;lt;/code&amp;gt;?&amp;lt;/strong&amp;gt; If we only invalidate on success, a failed mutation leaves the cache with the optimistically-updated (incorrect) data indefinitely. &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; runs regardless of outcome, so the cache always resolves to ground truth after any mutation. This is the React Query v5 recommended approach.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;A common v5 confusion:&amp;lt;/strong&amp;gt; React Query v5 removed &amp;lt;code&amp;gt;onSuccess&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;onError&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; callbacks from &amp;lt;code&amp;gt;useQuery&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;useInfiniteQuery&amp;lt;/code&amp;gt; but they remain &amp;lt;strong&amp;gt;fully supported in &amp;lt;code&amp;gt;useMutation&amp;lt;/code&amp;gt;&amp;lt;/strong&amp;gt;. Mutations are imperative by nature, so callbacks are still the right model there. The switch to &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; here is a best-practice recommendation, not a required v5 migration.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Why &amp;lt;code&amp;gt;userId!&amp;lt;/code&amp;gt;?&amp;lt;/strong&amp;gt; The non-null assertion is safe here because the query is guarded with &amp;lt;code&amp;gt;enabled: !!userId&amp;lt;/code&amp;gt; (see Pattern 3 below). The query will never fire and therefore this mutation will never be callable when &amp;lt;code&amp;gt;userId&amp;lt;/code&amp;gt; is null.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Pattern 3: Connect to React Native App State
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;React Query&apos;s &amp;lt;code&amp;gt;refetchOnWindowFocus&amp;lt;/code&amp;gt; works automatically in web browsers, but React Native needs an explicit bridge to the OS-level app state:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// app/_layout.tsx&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;QueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;QueryClientProvider&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;focusManager&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppStateStatus&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react-native&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useEffect&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Note: In React Query v5, `cacheTime` was renamed to `gcTime`.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// If you&apos;re on v4, use `cacheTime` instead of `gcTime`.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;new&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nc&quot;&amp;gt;QueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;defaultOptions&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;staleTime&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;2&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;60&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1000&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;   &amp;lt;span class=&quot;c1&quot;&amp;gt;// Data is fresh for 2 minutes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;gcTime&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;5&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;60&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1000&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;      &amp;lt;span class=&quot;c1&quot;&amp;gt;// Cache persists for 5 minutes after unmount&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;refetchOnWindowFocus&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutations&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;retry&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Don&apos;t auto-retry mutations â€” let the user decide&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Bridges React Native&apos;s AppState to React Query&apos;s focus manager.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Without this, refetchOnWindowFocus does nothing in a native context.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;AppStateHandler&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;useEffect&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;subscription&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;addEventListener&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;change&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;status&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppStateStatus&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;focusManager&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setFocused&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;status&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;active&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;subscription&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;remove&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;default&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;RootLayout&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;QueryClientProvider&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;client&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;AppStateHandler&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;cm&quot;&amp;gt;/* rest of your app */&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/QueryClientProvider&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;When the user backgrounds and returns to the app, &amp;lt;code&amp;gt;focusManager&amp;lt;/code&amp;gt; triggers a refetch of any stale queries keeping data fresh across app sessions, not just screen navigations.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The New Architecture
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;Screen A          Screen B          Screen C
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     React Query Shared Cache        â”‚
        â”‚         [&apos;items&apos;] queries           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
        On Mutation:              All screens
        invalidateQueries()  â†’    auto-refetch
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Now when any screen calls &amp;lt;code&amp;gt;markComplete()&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;UI updates instantly via the optimistic update&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;API call happens in the background&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;On settle (success or error), related queries are invalidated&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;Every screen subscribed to those queries auto-refreshes&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;No manual refresh. No stale data. No coordination code between screens.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Keeping It Backward Compatible
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;One concern with refactoring is breaking existing screens. The cleanest approach is to wrap the new React Query internals behind the same hook interface your screens already use:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// hooks/useItems.ts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/query-keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMarkComplete&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;./useMarkComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../store/useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;markCompleteMutation&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMarkComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Only fetches when userId exists â€” makes the userId! assertion above safe&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;enabled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;!!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Same shape as before â€” existing screens need zero changes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;??&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// isPending is the correct v5 flag for &quot;data not loaded yet&quot;.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// isLoading was redefined in v5 as isPending &amp;amp;amp;&amp;amp;amp; isFetching, which&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// returns false when enabled: false â€” causing a silent empty-state&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// bug on first render before userId is available.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;loading&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isPending&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;refreshing&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isRefetching&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;error&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;error&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// mutateAsync returns a Promise and throws on error â€” wrap in try/catch.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Use mutate instead if you prefer fire-and-forget without error throwing.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;markCompleteMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;mutateAsync&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;refresh&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Your screens call &amp;lt;code&amp;gt;useItems()&amp;lt;/code&amp;gt; exactly as they did before. The sync behaviour is just... there now.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Quick Start Template
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;If you&apos;re starting fresh:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight shell&quot;&amp;gt;&amp;lt;code&amp;gt;npm &amp;lt;span class=&quot;nb&quot;&amp;gt;install&amp;lt;/span&amp;gt; @tanstack/react-query
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 1. Query keys&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 2. Query hook&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useItems&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;staleTime&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;2&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;60&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1000&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 3. Mutation with invalidation on settle&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useUpdateItem&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutationFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;updateItem&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onSettled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 4. Use in any screen â€” they&apos;ll all stay in sync&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;AnyScreen&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;mutate&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;update&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useUpdateItem&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Replace data[0]?.id with however you get the target item&apos;s id&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// e.g. from route params, a selected state, a FlatList renderItem, etc.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;itemId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]?.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;onPress&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;update&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;itemId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;title&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Mark Complete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Key Takeaways
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Multiple &amp;lt;code&amp;gt;useState&amp;lt;/code&amp;gt; hooks for the same server data will always drift.&amp;lt;/strong&amp;gt; It&apos;s not a discipline problem, it&apos;s an architectural one. Centralise with React Query.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Design your query keys for invalidation from the start.&amp;lt;/strong&amp;gt; Flat string keys are fine for small apps, but a factory pattern scales cleanly and eliminates typo bugs.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Use &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt;, not &amp;lt;code&amp;gt;onSuccess&amp;lt;/code&amp;gt;, for cache invalidation.&amp;lt;/strong&amp;gt; It guarantees the cache resolves to ground truth after every mutation, regardless of outcome.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Always guard queries with &amp;lt;code&amp;gt;enabled: !!userId&amp;lt;/code&amp;gt;.&amp;lt;/strong&amp;gt; In React Native, auth state often isn&apos;t available on the first render. Without this guard, your query fires with a null user ID and fails silently.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Optimistic updates are table stakes in 2026.&amp;lt;/strong&amp;gt; Users expect instant feedback. The rollback pattern handles failures gracefully without complex error state.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Backward-compatible migrations are always possible.&amp;lt;/strong&amp;gt; Wrap new internals behind existing interfaces and refactor incrementally without coordinating a team-wide rewrite.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React Native needs explicit AppState integration.&amp;lt;/strong&amp;gt; Don&apos;t skip the &amp;lt;code&amp;gt;focusManager&amp;lt;/code&amp;gt; setup without it, &amp;lt;code&amp;gt;refetchOnWindowFocus&amp;lt;/code&amp;gt; is a silent no-op in a native context.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        What&apos;s Next
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;This solves server state sync cleanly. But what about client-only state â€” filters, selections, UI flags â€” that also needs to be shared across screens?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That&apos;s where Zustand comes in, and it pairs beautifully with React Query. Upcoming Post covers how to combine both tools into a complete React Native state architecture, with clear boundaries on what belongs where.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Have you been managing cross-screen state with manual refreshes? Or already using React Query, what patterns have worked for you? Drop a comment below.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>I Fixed Stale Data Across Every Screen in React Native with 3 React Query Patterns</title>
      <link>https://dev.to/likhit/i-fixed-stale-data-across-every-screen-in-react-native-with-3-react-query-patterns-5fd5</link>
      <guid>https://dev.to/likhit/i-fixed-stale-data-across-every-screen-in-react-native-with-3-react-query-patterns-5fd5</guid>
      <pubDate>Wed, 25 Feb 2026 15:40:26 GMT</pubDate>
      <content:encoded>
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Environment:&amp;lt;/strong&amp;gt; React Native 0.76+ Â· @tanstack/react-query v5 Â· TypeScript&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;p&amp;gt;I was building a React Native app where users could interact with the same data from multiple screens. Everything seemed fine during early testing until I noticed something deeply frustrating: &amp;lt;strong&amp;gt;updating data on one screen didn&apos;t reflect on another until I manually refreshed it.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Sound familiar? Here&apos;s how I diagnosed it, fixed it with 3 focused React Query patterns, and what I learned along the way.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Problem
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The app had three screens showing overlapping data:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Screen A&amp;lt;/strong&amp;gt; : Shows a list of items&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Screen B&amp;lt;/strong&amp;gt; : Shows the same items in a different view&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Screen C&amp;lt;/strong&amp;gt; : Shows item details with edit capability&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;When a user marked an item complete on Screen A, navigating to Screen B still showed it as incomplete. Users had to pull-to-refresh on every screen after every action. The app felt broken, because it was.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Root Cause: Isolated State
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;After some digging, the culprit was clear. Each screen used its own hook with independent &amp;lt;code&amp;gt;useState&amp;lt;/code&amp;gt;:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useState&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Screen A hook&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useListA&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;setItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;prev&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;prev&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;completed&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;));&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Other screens have no idea this happened&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Screen B hook â€” completely separate state&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useListB&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([]);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// No connection to Screen A&apos;s state whatsoever&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The architecture looked like this:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;Screen A          Screen B          Screen C
        â”‚                 â”‚                 â”‚
        â–¼                 â–¼                 â–¼
        useState          useState          useState
        (isolated)        (isolated)        (isolated)
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
        Backend API
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Each screen fetched and managed data independently. When one mutated data, the others had no idea. This isn&apos;t a bug, it&apos;s the natural consequence of uncoordinated local state managing shared server data.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Why Not Just Use Zustand?
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;This question comes up a lot, and it&apos;s worth addressing directly before diving into the solution.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Zustand is a client state manager.&amp;lt;/strong&amp;gt; It&apos;s excellent for data that lives purely inside your app UI state, filter selections, modal toggles, user preferences. It has no built-in concept of staleness, background refetching, or cache invalidation because it doesn&apos;t need one.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React Query is a server state manager.&amp;lt;/strong&amp;gt; It&apos;s designed specifically for data that originates from a backend for fetching, caching, deduplicating requests, and keeping that data fresh across your app.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Using Zustand to solve this problem would mean manually writing all the cache logic React Query gives you for free. In fact, the ideal architecture uses &amp;lt;strong&amp;gt;both&amp;lt;/strong&amp;gt; React Query for server data, Zustand for client-only state. That&apos;s a topic for another post. For now, our problem is server state sync, so React Query is the right tool.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Fix: 3 React Query Patterns
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;I had React Query installed but wasn&apos;t using it effectively each screen was still managing its own fetch lifecycle. The fix came down to three focused patterns.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Pattern 1: A Query Keys Factory
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;A centralised key system is what makes targeted cache invalidation possible. Instead of scattering string literals across your codebase, you define them once:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// lib/query-keys.ts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;detail&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;detail&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Define what needs invalidating after each action&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;invalidationGroups&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;itemUpdated&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;itemCreated&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;itemDeleted&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;as const&amp;lt;/code&amp;gt; assertions give you full TypeScript inference downstream. Grouping by action means you invalidate precisely what&apos;s needed.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Pattern 2: Mutations with Auto-Invalidation
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;This is where the real magic happens. Mutation hooks that automatically invalidate related queries after every operation:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// hooks/useMarkComplete.ts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;invalidationGroups&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/query-keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// useSessionStore is a Zustand store holding auth state.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Replace this with however your app stores the current user â€”&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Clerk, Firebase Auth, Supabase, or your own auth hook.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../store/useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kr&quot;&amp;gt;interface&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;Item&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;completed&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;boolean&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// ...other fields&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMarkComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutationFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Optimistic update â€” instant UI feedback before the API responds&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onMutate&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Cancel any in-flight queries to prevent race conditions&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;cancelQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Snapshot current data so we can roll back if needed&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;));&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Optimistically update the cache right now&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;old&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;Item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;undefined&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;old&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;?.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;completed&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;item&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Rollback on error â€” restore the snapshot&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onError&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;_err&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;if &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;?.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;previous&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Surface the error to your UI here â€” toast, alert, inline message, etc.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Use onSettled (not onSuccess) so invalidation fires on both&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// success AND error â€” prevents stale data after a failed mutation&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onSettled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;invalidationGroups&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;itemUpdated&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;forEach&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;blockquote&amp;gt;
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Why &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; instead of &amp;lt;code&amp;gt;onSuccess&amp;lt;/code&amp;gt;?&amp;lt;/strong&amp;gt; If we only invalidate on success, a failed mutation leaves the cache with the optimistically-updated (incorrect) data indefinitely. &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; runs regardless of outcome, so the cache always resolves to ground truth after any mutation. This is the React Query v5 recommended approach.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;A common v5 confusion:&amp;lt;/strong&amp;gt; React Query v5 removed &amp;lt;code&amp;gt;onSuccess&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;onError&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; callbacks from &amp;lt;code&amp;gt;useQuery&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;useInfiniteQuery&amp;lt;/code&amp;gt; but they remain &amp;lt;strong&amp;gt;fully supported in &amp;lt;code&amp;gt;useMutation&amp;lt;/code&amp;gt;&amp;lt;/strong&amp;gt;. Mutations are imperative by nature, so callbacks are still the right model there. The switch to &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt; here is a best-practice recommendation, not a required v5 migration.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Why &amp;lt;code&amp;gt;userId!&amp;lt;/code&amp;gt;?&amp;lt;/strong&amp;gt; The non-null assertion is safe here because the query is guarded with &amp;lt;code&amp;gt;enabled: !!userId&amp;lt;/code&amp;gt; (see Pattern 3 below). The query will never fire and therefore this mutation will never be callable when &amp;lt;code&amp;gt;userId&amp;lt;/code&amp;gt; is null.&amp;lt;/p&amp;gt;
        &amp;lt;/blockquote&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Pattern 3: Connect to React Native App State
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;React Query&apos;s &amp;lt;code&amp;gt;refetchOnWindowFocus&amp;lt;/code&amp;gt; works automatically in web browsers, but React Native needs an explicit bridge to the OS-level app state:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// app/_layout.tsx&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;QueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;QueryClientProvider&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;focusManager&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppStateStatus&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react-native&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useEffect&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Note: In React Query v5, `cacheTime` was renamed to `gcTime`.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// If you&apos;re on v4, use `cacheTime` instead of `gcTime`.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;new&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nc&quot;&amp;gt;QueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;defaultOptions&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;staleTime&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;2&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;60&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1000&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;   &amp;lt;span class=&quot;c1&quot;&amp;gt;// Data is fresh for 2 minutes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;gcTime&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;5&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;60&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1000&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;      &amp;lt;span class=&quot;c1&quot;&amp;gt;// Cache persists for 5 minutes after unmount&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;refetchOnWindowFocus&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutations&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;retry&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Don&apos;t auto-retry mutations â€” let the user decide&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Bridges React Native&apos;s AppState to React Query&apos;s focus manager.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Without this, refetchOnWindowFocus does nothing in a native context.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;AppStateHandler&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;useEffect&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;subscription&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;addEventListener&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;change&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;status&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;AppStateStatus&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;focusManager&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setFocused&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;status&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;active&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;subscription&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;remove&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;default&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;RootLayout&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;QueryClientProvider&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;client&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;AppStateHandler&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;cm&quot;&amp;gt;/* rest of your app */&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/QueryClientProvider&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;When the user backgrounds and returns to the app, &amp;lt;code&amp;gt;focusManager&amp;lt;/code&amp;gt; triggers a refetch of any stale queries keeping data fresh across app sessions, not just screen navigations.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The New Architecture
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;Screen A          Screen B          Screen C
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     React Query Shared Cache        â”‚
        â”‚         [&apos;items&apos;] queries           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
        On Mutation:              All screens
        invalidateQueries()  â†’    auto-refetch
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Now when any screen calls &amp;lt;code&amp;gt;markComplete()&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;UI updates instantly via the optimistic update&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;API call happens in the background&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;On settle (success or error), related queries are invalidated&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;Every screen subscribed to those queries auto-refreshes&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;No manual refresh. No stale data. No coordination code between screens.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Keeping It Backward Compatible
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;One concern with refactoring is breaking existing screens. The cleanest approach is to wrap the new React Query internals behind the same hook interface your screens already use:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// hooks/useItems.ts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/query-keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMarkComplete&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;./useMarkComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../store/useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useSessionStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;markCompleteMutation&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMarkComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Only fetches when userId exists â€” makes the userId! assertion above safe&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;enabled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;!!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;userId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Same shape as before â€” existing screens need zero changes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;??&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// isPending is the correct v5 flag for &quot;data not loaded yet&quot;.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// isLoading was redefined in v5 as isPending &amp;amp;amp;&amp;amp;amp; isFetching, which&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// returns false when enabled: false â€” causing a silent empty-state&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// bug on first render before userId is available.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;loading&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isPending&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;refreshing&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isRefetching&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;error&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;error&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// mutateAsync returns a Promise and throws on error â€” wrap in try/catch.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Use mutate instead if you prefer fire-and-forget without error throwing.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;markComplete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;markCompleteMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;mutateAsync&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;refresh&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Your screens call &amp;lt;code&amp;gt;useItems()&amp;lt;/code&amp;gt; exactly as they did before. The sync behaviour is just... there now.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Quick Start Template
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;If you&apos;re starting fresh:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight shell&quot;&amp;gt;&amp;lt;code&amp;gt;npm &amp;lt;span class=&quot;nb&quot;&amp;gt;install&amp;lt;/span&amp;gt; @tanstack/react-query
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;../lib/api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 1. Query keys&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 2. Query hook&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useItems&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;staleTime&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;2&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;60&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1000&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 3. Mutation with invalidation on settle&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useUpdateItem&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQueryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutationFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;updateItem&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;onSettled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;all&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 4. Use in any screen â€” they&apos;ll all stay in sync&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;AnyScreen&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useItems&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;mutate&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;update&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useUpdateItem&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Replace data[0]?.id with however you get the target item&apos;s id&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// e.g. from route params, a selected state, a FlatList renderItem, etc.&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;itemId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]?.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;onPress&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;update&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;itemId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;title&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Mark Complete&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Key Takeaways
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Multiple &amp;lt;code&amp;gt;useState&amp;lt;/code&amp;gt; hooks for the same server data will always drift.&amp;lt;/strong&amp;gt; It&apos;s not a discipline problem, it&apos;s an architectural one. Centralise with React Query.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Design your query keys for invalidation from the start.&amp;lt;/strong&amp;gt; Flat string keys are fine for small apps, but a factory pattern scales cleanly and eliminates typo bugs.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Use &amp;lt;code&amp;gt;onSettled&amp;lt;/code&amp;gt;, not &amp;lt;code&amp;gt;onSuccess&amp;lt;/code&amp;gt;, for cache invalidation.&amp;lt;/strong&amp;gt; It guarantees the cache resolves to ground truth after every mutation, regardless of outcome.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Always guard queries with &amp;lt;code&amp;gt;enabled: !!userId&amp;lt;/code&amp;gt;.&amp;lt;/strong&amp;gt; In React Native, auth state often isn&apos;t available on the first render. Without this guard, your query fires with a null user ID and fails silently.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Optimistic updates are table stakes in 2026.&amp;lt;/strong&amp;gt; Users expect instant feedback. The rollback pattern handles failures gracefully without complex error state.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Backward-compatible migrations are always possible.&amp;lt;/strong&amp;gt; Wrap new internals behind existing interfaces and refactor incrementally without coordinating a team-wide rewrite.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React Native needs explicit AppState integration.&amp;lt;/strong&amp;gt; Don&apos;t skip the &amp;lt;code&amp;gt;focusManager&amp;lt;/code&amp;gt; setup without it, &amp;lt;code&amp;gt;refetchOnWindowFocus&amp;lt;/code&amp;gt; is a silent no-op in a native context.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        What&apos;s Next
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;This solves server state sync cleanly. But what about client-only state â€” filters, selections, UI flags â€” that also needs to be shared across screens?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That&apos;s where Zustand comes in, and it pairs beautifully with React Query. Upcoming Post covers how to combine both tools into a complete React Native state architecture, with clear boundaries on what belongs where.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Have you been managing cross-screen state with manual refreshes? Or already using React Query, what patterns have worked for you? Drop a comment below.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Architecting a Multi-Model AI Creative Pipeline Without Model Lock-In</title>
      <link>https://dev.to/cliprise/architecting-a-multi-model-ai-creative-pipeline-without-model-lock-in-2oc8</link>
      <guid>https://dev.to/cliprise/architecting-a-multi-model-ai-creative-pipeline-without-model-lock-in-2oc8</guid>
      <pubDate>Wed, 25 Feb 2026 15:38:19 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Most AI workflow discussions focus on prompting.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That is the wrong abstraction layer.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;In production environments, the failure surface is architectural:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;regeneration volatility&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;cost unpredictability&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;category mismatch&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;pricing exposure&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;visual drift across campaigns&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The problem is not output quality.&amp;lt;br&amp;gt;
        It is system stability.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;The Single-Model Failure Pattern&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Single-model dependency fails in three predictable ways.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Capability Ceiling&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Every model specializes.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Cinematic-tier generators such as those compared in this long-form Kling vs Sora breakdown demonstrate strong temporal coherence, but that same tier may not optimize for rapid iteration economics.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Speed-optimized models win throughput benchmarks, but break down in multi-character motion sequences.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Without routing across categories, teams compensate with regeneration brute force.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Which increases multiplier cost.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This architectural mismatch is visible when you look at multi-category model ecosystems instead of isolated tools. A consolidated reference of 47+ AI generation models makes these functional distinctions obvious in practice.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Pricing Volatility&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Platform pricing evolves.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Credit structures shift.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Consumption tiers change.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If your content pipeline relies on a single pricing structure, your margin inherits that volatility.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Multi-model routing reduces exposure to any one pricing node.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Innovation Lock-In&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Model quality improvement cycles are compressing.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If your workflow and visual identity are structurally dependent on one model signature, migration later becomes expensive.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Comparative analysis of single-tool ecosystems versus multi-model infrastructure highlights how routing flexibility reduces that innovation friction.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;The Three-Layer Stack&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;A stable AI creative pipeline consists of:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Generation&amp;lt;br&amp;gt;
        â†“&amp;lt;br&amp;gt;
        Control&amp;lt;br&amp;gt;
        â†“&amp;lt;br&amp;gt;
        Refinement&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Layer 1 - Generation&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Raw content output.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Video or image.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Model selection here must be category-based, not brand-based.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Layer 2 - Control&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This is where most creators fail.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Control parameters define reproducibility:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;seed locking and deterministic behavior&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;aspect ratio templates for multi-platform deployment&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;motion control strategies for AI video&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;CFG scale calibration for stylistic constraints&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;image reference anchoring&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Seed discipline alone can transform random experimentation into systematic campaign output. A structured seed reproducibility framework significantly reduces regeneration variance.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Layer 3 - Refinement&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Refinement is not repair.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It is a defined pipeline step.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Upscaling and polishing workflows, especially when resolution scaling is planned upstream, materially change final asset quality and cost efficiency.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Model Category Routing Framework&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Stop ranking models.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Start routing tasks.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Cinematic Tier&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use for:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;long narrative sequences&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;brand hero assets&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;complex motion&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Temporal coherence prioritized over speed.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Speed Tier&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use for:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;short-form content&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;high-volume social&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;rapid iteration cycles&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Generation latency prioritized.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Speed-to-quality tradeoffs are measurable, particularly when comparing fast versus quality video modes under production constraints.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Budget Tier&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use for:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;concept sketching&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;variant testing&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;early-stage drafts&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Iteration cost optimized.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Character Stability Tier&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use for:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;multi-scene character consistency&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;brand identity persistence&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Category routing reduces regeneration multiplier more effectively than incremental prompt tuning.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Cost Per Acceptable Deliverable&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Per-generation cost alone is misleading.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;True Cost =&amp;lt;br&amp;gt;
        (per-generation cost Ã— regeneration rate)&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;refinement cost&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;time opportunity cost&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Below is a structural view.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Component   Tracked Dominant Factor&amp;lt;br&amp;gt;
        Base generation price   Yes Moderate&amp;lt;br&amp;gt;
        Regeneration multiplier Rarely  High&amp;lt;br&amp;gt;
        Refinement stage cost   Partial Moderate&amp;lt;br&amp;gt;
        Time-based opportunity cost No  High&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Credit-based platforms that allow switching between premium and budget tiers inside a single workflow materially alter total cost structure. Credit-based model comparisons between premium and budget tiers illustrate how regeneration rate changes economics more than nominal pricing.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Image-to-Video Chaining Logic&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Text-to-video resolves composition and motion simultaneously.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Image-to-video separates responsibilities:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Upstream:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;composition&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;lighting&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;aesthetic baseline&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Downstream:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;motion&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;temporal continuity&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Reference quality upstream directly influences coherence downstream. A documented image-to-video workflow architecture shows how controlling the upstream visual state reduces motion artifacts and drift.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;When chaining is systematic, regeneration decreases.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Lower regeneration equals lower cost variability.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Infrastructure Discipline&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Prompt optimization improves output inside an envelope.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;System optimization expands the envelope.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Infrastructure components include:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;template-based prompt architecture&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;pre-defined model routing tables&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;regeneration threshold limits&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;batch generation frameworks&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;documented switching criteria across model tiers&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Shifting from prompt experimentation to structured system logic has measurable effects on throughput and economic predictability.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;A structured multi-model strategy for switching between AI generators captures this discipline better than any isolated prompt framework.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Practical Implementation Checklist&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Map deliverable categories before selecting models.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Assign each category to a model tier.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Track regeneration explicitly.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Separate draft-tier from delivery-tier usage.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Lock seeds for campaign output.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Define refinement steps as mandatory.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Cap regeneration attempts per deliverable.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Audit cost per acceptable output monthly.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Review model updates quarterly.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Maintain fallback routing for known failure modes.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Avoid homepage-only tool dependency.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Keep routing documentation versioned.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Conclusion&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;AI content scaling is not solved at the prompt level.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It is solved at the infrastructure level.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Model competition will continue.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Pricing structures will evolve.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Quality gaps between tiers will compress.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The durable edge will belong to teams that can switch models without switching systems.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Extended long-form benchmark analysis exists elsewhere.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;But the core shift is already clear:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Architect the pipeline.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Do not optimize in isolation.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>ðŸ Beginner-Friendly Guide &apos;Sort Integers by The Number of 1 Bits&apos; - Problem 1356 (C++, Python, JavaScript)</title>
      <link>https://dev.to/om_shree_0709/beginner-friendly-guide-sort-integers-by-the-number-of-1-bits-problem-1356-c-python-3jpf</link>
      <guid>https://dev.to/om_shree_0709/beginner-friendly-guide-sort-integers-by-the-number-of-1-bits-problem-1356-c-python-3jpf</guid>
      <pubDate>Wed, 25 Feb 2026 15:36:39 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Sorting is a fundamental skill in programming, but often we need to sort data based on more than just the value of a number. In this guide, we will explore how to reorganize an array based on the hidden binary characteristics of its elements. This approach is common when optimizing low level data processing or working with bit manipulation.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Problem Summary
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;You&apos;re given:&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        An array of integers called &amp;lt;code&amp;gt;arr&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Your goal:&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        Sort the integers in ascending order based on the number of set bits (1s) in their binary representation. If two numbers have the same number of 1s, sort them by their actual numerical value in ascending order.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Intuition
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;The core of this problem lies in &quot;custom sorting.&quot; Instead of comparing two numbers directly, we first transform them into a pair of values: the count of 1s in their binary form and the number itself.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Think of it like sorting people in a line. If we sort them by the number of buttons on their shirt, and two people have three buttons, we then look at their height to break the tie. In computer science, we use bit manipulation or built-in library functions to count these &quot;bits.&quot; Once we have the bit count, we prioritize that count for the primary sort and use the integer value for the secondary sort.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Walkthrough: Understanding the Examples
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Let&apos;s look at &amp;lt;strong&amp;gt;Example 1&amp;lt;/strong&amp;gt;: &amp;lt;code&amp;gt;arr = [0, 1, 2, 3, 4, 5, 6, 7, 8]&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;Count the bits:&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;0 is &amp;lt;code&amp;gt;0000&amp;lt;/code&amp;gt; (0 bits)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;1 is &amp;lt;code&amp;gt;0001&amp;lt;/code&amp;gt; (1 bit)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;2 is &amp;lt;code&amp;gt;0010&amp;lt;/code&amp;gt; (1 bit)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;4 is &amp;lt;code&amp;gt;0100&amp;lt;/code&amp;gt; (1 bit)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;8 is &amp;lt;code&amp;gt;1000&amp;lt;/code&amp;gt; (1 bit)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;3 is &amp;lt;code&amp;gt;0011&amp;lt;/code&amp;gt; (2 bits)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;5 is &amp;lt;code&amp;gt;0101&amp;lt;/code&amp;gt; (2 bits)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;6 is &amp;lt;code&amp;gt;0110&amp;lt;/code&amp;gt; (2 bits)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;7 is &amp;lt;code&amp;gt;0111&amp;lt;/code&amp;gt; (3 bits)&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Apply Primary Sort (Bit Count):&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        Group 0 (0 bits), Group 1 (1, 2, 4, 8), Group 2 (3, 5, 6), Group 3 (7).&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Apply Secondary Sort (Value):&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        Within Group 1, the numbers are already in order (1, 2, 4, 8). If they were &amp;lt;code&amp;gt;[8, 2, 4, 1]&amp;lt;/code&amp;gt;, we would rearrange them to &amp;lt;code&amp;gt;[1, 2, 4, 8]&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Final Result:&amp;lt;/strong&amp;gt; &amp;lt;code&amp;gt;[0, 1, 2, 4, 8, 3, 5, 6, 7]&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Code Blocks
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;h4&amp;gt;
        
        
        C++
        &amp;lt;/h4&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight cpp&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nc&quot;&amp;gt;Solution&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;public:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;vector&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kt&quot;&amp;gt;int&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;sortByBits&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;vector&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kt&quot;&amp;gt;int&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;amp;amp;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// We use a custom comparator with ranges::sort&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// It sorts by bit count first, then by the value of &apos;a&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;ranges&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;sort&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;ranges&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;less&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{},&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[](&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kt&quot;&amp;gt;int&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kt&quot;&amp;gt;int&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;bitCount&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;bitset&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;32&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;pair&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kt&quot;&amp;gt;int&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kt&quot;&amp;gt;int&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;bitCount&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h4&amp;gt;
        
        
        Python
        &amp;lt;/h4&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight python&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nc&quot;&amp;gt;Solution&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;sortByBits&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nb&quot;&amp;gt;int&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;])&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;list&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nb&quot;&amp;gt;int&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;# Python&apos;s sort is stable. We can sort by a tuple: (bit_count, value)
        &amp;lt;/span&amp;gt;        &amp;lt;span class=&quot;c1&quot;&amp;gt;# bin(n).count(&apos;1&apos;) counts the number of 1s in the binary string
        &amp;lt;/span&amp;gt;        &amp;lt;span class=&quot;n&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;sort&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;key&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;lambda&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;x&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;bin&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;x&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sh&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sh&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;x&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;))&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;arr&amp;lt;/span&amp;gt;
        
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h4&amp;gt;
        
        
        JavaScript
        &amp;lt;/h4&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;cm&quot;&amp;gt;/**
        * @param {number[]} arr
        * @return {number[]}
        */&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sortByBits&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;arr&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;sort&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;((&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;b&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Count bits using a helper or bitwise trick&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;countA&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;countSetBits&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;countB&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;countSetBits&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;b&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// If bit counts are equal, sort by numeric value&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;if &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;countA&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;countB&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;b&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Otherwise, sort by bit count&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;countA&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;countB&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Helper function to count bits using bitwise operations&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;countSetBits&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;n&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;while &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;n&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;n&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;amp;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;n&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Clears the least significant bit&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;++&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Key Takeaways
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Custom Comparators:&amp;lt;/strong&amp;gt; Most modern languages allow you to define a &quot;key&quot; or a &quot;comparator&quot; function to change how sorting logic is applied.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Bit Manipulation:&amp;lt;/strong&amp;gt; Understanding how numbers are stored in binary is essential for low level optimization and specific interview problems.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Stability and Tie-Breaking:&amp;lt;/strong&amp;gt; When sorting, always consider how to handle items that are &quot;equal&quot; according to your primary criteria.&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Final Thoughts
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;This problem is a classic example of why understanding the underlying binary structure of data matters. While it might seem abstract, this type of logic is frequently used in &amp;lt;strong&amp;gt;Cryptography&amp;lt;/strong&amp;gt; and &amp;lt;strong&amp;gt;Data Compression&amp;lt;/strong&amp;gt;, where the efficiency of bit storage is paramount. Mastering the ability to sort by derived properties (like bit counts) will make you a much more flexible developer when tackling complex data structures.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Building a Social Platform with Client-Side End-to-End Encryption</title>
      <link>https://dev.to/webdevtodayjason/building-a-social-platform-with-client-side-end-to-end-encryption-36b2</link>
      <guid>https://dev.to/webdevtodayjason/building-a-social-platform-with-client-side-end-to-end-encryption-36b2</guid>
      <pubDate>Wed, 25 Feb 2026 13:01:37 GMT</pubDate>
      <content:encoded>
        &amp;lt;h2&amp;gt;
        
        
        series: Building Moltyverse
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;This is a detailed technical walkthrough of how I built a privacy-first social platform where the server literally can&apos;t read what users post. If you&apos;re interested in cryptography, React architecture, or privacy engineering, this is for you.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        The Challenge
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Build a social media platform with these constraints:&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;End-to-end encryption&amp;lt;/strong&amp;gt; â€“ Server stores only ciphertext&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Client-side crypto&amp;lt;/strong&amp;gt; â€“ All encryption/decryption in the browser&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Normal social features&amp;lt;/strong&amp;gt; â€“ Likes, comments, shares (on encrypted content)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Zero tracking&amp;lt;/strong&amp;gt; â€“ No analytics, fingerprinting, or third-party scripts&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Open source&amp;lt;/strong&amp;gt; â€“ MIT license, fully auditable&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Sound impossible? It wasn&apos;t easy. Here&apos;s how I did it.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Architecture Overview
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Stack
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Frontend:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;React 18 + TypeScript&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Vite (build tool)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;TanStack Query (server state)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Zustand (client state)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;libsodium.js (cryptography)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Backend:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Node.js + Fastify&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;PostgreSQL&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Docker + docker-compose&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Crypto:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;libsodium (NaCl crypto library)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;XSalsa20-Poly1305 (symmetric encryption)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;X25519 (key exchange)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Flow
        &amp;lt;/h3&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Browser   â”‚         â”‚    Server    â”‚         â”‚  Database   â”‚
        â”‚             â”‚         â”‚              â”‚         â”‚             â”‚
        â”‚  Encrypt    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Store      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Ciphertext â”‚
        â”‚  (libsodium)â”‚         â”‚  (no decrypt)â”‚         â”‚             â”‚
        â”‚             â”‚         â”‚              â”‚         â”‚             â”‚
        â”‚  Decrypt    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Retrieve   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Ciphertext â”‚
        â”‚  (libsodium)â”‚         â”‚              â”‚         â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Key insight:&amp;lt;/strong&amp;gt; The server is a &amp;lt;em&amp;gt;dumb pipe&amp;lt;/em&amp;gt;. It routes ciphertext and manages metadata (who, when, where) but never sees plaintext.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 1: The Cryptography
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Why libsodium?
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;I evaluated several crypto libraries:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;WebCrypto API:&amp;lt;/strong&amp;gt; Browser-native, but limited (no sealed boxes, complex API)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;TweetNaCl:&amp;lt;/strong&amp;gt; Lightweight, but slow (pure JS)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;libsodium.js:&amp;lt;/strong&amp;gt; Battle-tested, WASM-fast, comprehensive&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Winner:&amp;lt;/strong&amp;gt; libsodium.js â€“ Best balance of security, performance, and ease-of-use.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Crypto Primitives
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;h4&amp;gt;
        
        
        1. User Keypairs (X25519)
        &amp;lt;/h4&amp;gt;
        
        &amp;lt;p&amp;gt;Every user gets a public/private keypair on signup:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;libsodium-wrappers&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;generateUserKeypair&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;keypair&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;crypto_box_keypair&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;publicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;keypair&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;publicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;privateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;keypair&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;privateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Never sent to server!&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Critical:&amp;lt;/strong&amp;gt; The private key &amp;lt;em&amp;gt;never leaves the browser&amp;lt;/em&amp;gt;. It&apos;s stored in memory or encrypted localStorage.&amp;lt;/p&amp;gt;
        
        &amp;lt;h4&amp;gt;
        
        
        2. Group Keys (Symmetric)
        &amp;lt;/h4&amp;gt;
        
        &amp;lt;p&amp;gt;Each group has a shared symmetric key:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;generateGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;crypto_secretbox_keygen&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;When you join a group, the key is encrypted &amp;lt;em&amp;gt;to you&amp;lt;/em&amp;gt; using your public key:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;encryptGroupKeyForUser&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;recipientPublicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeyBytes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;from_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;recipientPubKeyBytes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;from_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;recipientPublicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedKey&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;crypto_box_seal&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeyBytes&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;recipientPubKeyBytes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;How it works:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Group key is generated once&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;For each member, the key is encrypted with their public key&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Members decrypt the group key with their private key&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Now everyone can encrypt/decrypt group posts&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h4&amp;gt;
        
        
        3. Post Encryption (XSalsa20-Poly1305)
        &amp;lt;/h4&amp;gt;
        
        &amp;lt;p&amp;gt;Posts are encrypted with the group key:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;encryptPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeyBytes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;from_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;randombytes_buf&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;crypto_secretbox_NONCEBYTES&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;crypto_secretbox_easy&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeyBytes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Why XSalsa20-Poly1305?&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Fast (WASM makes it near-native speed)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Authenticated (Poly1305 MAC prevents tampering)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Proven secure (used in Signal, WireGuard, etc.)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h4&amp;gt;
        
        
        4. Decryption
        &amp;lt;/h4&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;decryptPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertextBytes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;from_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonceBytes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;from_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeyBytes&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;from_base64&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;crypto_secretbox_open_easy&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertextBytes&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;nonceBytes&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeyBytes&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;to_string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 2: Key Management
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;This is the hardest part. Users don&apos;t think in &quot;encryption keys.&quot;&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Problem
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;User private key:&amp;lt;/strong&amp;gt; Must persist across sessions, but never leave the client&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Group keys:&amp;lt;/strong&amp;gt; Must be shared securely with group members&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Key rotation:&amp;lt;/strong&amp;gt; When someone leaves a group, keys must rotate&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        The Solution: Layered Encryption
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Layer 1: User&apos;s Master Key&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;User password â†’ PBKDF2 â†’ Master key (stays in memory)
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Layer 2: Encrypted Private Key&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;User private key â†’ Encrypted with master key â†’ Stored in localStorage
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Layer 3: Group Keys&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;Group key â†’ Encrypted per-user with their public key â†’ Stored on server
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        The Flow
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Signup:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;User sets password&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Derive master key from password (PBKDF2)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Generate user keypair (public/private)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Encrypt private key with master key&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Send public key + encrypted private key to server&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Login:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;User enters password&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Derive master key from password&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Fetch encrypted private key from server&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Decrypt private key with master key&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Load into memory&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Join Group:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Fetch encrypted group key from server&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Decrypt group key with user&apos;s private key&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Store in memory (or encrypted localStorage)&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Post to Group:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Get group key from memory&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Encrypt post with group key&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Send ciphertext to server&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Key Rotation
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;When a user leaves a group:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;rotateGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;members&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;User&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[])&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 1. Generate new group key&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;newGroupKey&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;generateGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 2. Encrypt new key for each remaining member&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedKeys&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;Promise&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;members&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;member&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;encryptGroupKeyForUser&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;newGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;member&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;publicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 3. Send to server&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;rotateGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 4. Old posts stay encrypted with old key&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 5. New posts use new key&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Trade-off:&amp;lt;/strong&amp;gt; Old messages aren&apos;t re-encrypted (expensive). So if you were in the group, you can still decrypt old messages.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Future improvement:&amp;lt;/strong&amp;gt; Full forward secrecy (re-encrypt history on rotation). Computationally expensive, but possible.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 3: React Integration
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Integrating crypto into a React app has challenges:&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Challenge 1: Async Crypto Everywhere
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Encryption/decryption is async. React state is sync.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Solution:&amp;lt;/strong&amp;gt; Use TanStack Query for async state management:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@tanstack/react-query&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useEncryptedPosts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useQuery&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;queryFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Fetch encrypted posts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedPosts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getPosts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Decrypt client-side&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;decryptedPosts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;Promise&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedPosts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;decryptPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;content&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;decryptedPosts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;enabled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;!!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Only run if we have the key&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Challenge 2: Optimistic Updates
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Users expect instant feedback. But we need to encrypt before sending.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Solution:&amp;lt;/strong&amp;gt; Optimistic updates with encrypted data:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;createPostMutation&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMutation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;mutationFn&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;na&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Encrypt locally&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;encryptPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Send to server&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;createPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;na&quot;&amp;gt;onMutate&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Cancel outgoing queries&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;cancelQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Snapshot current data&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;previousPosts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Optimistically update&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;old&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;old&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;temp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;content&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;plaintext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;status&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;sending&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;previousPosts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;na&quot;&amp;gt;onError&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;err&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;variables&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Rollback on error&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;setQueryData&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;context&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;previousPosts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;na&quot;&amp;gt;onSuccess&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Refetch to get real post from server&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;queryClient&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;invalidateQueries&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;([&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Challenge 3: Key Management State
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;User keys, group keys, session state â€“ lots to track.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Solution:&amp;lt;/strong&amp;gt; Zustand for crypto state:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;create&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;zustand&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;persist&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;zustand/middleware&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kr&quot;&amp;gt;interface&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;CryptoStore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;userPrivateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;userPublicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;Record&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;setUserKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;publicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;privateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;setGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;clearKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useCryptoStore&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;create&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;CryptoStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;persist&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;set&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;userPrivateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;userPublicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{},&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;na&quot;&amp;gt;setUserKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;publicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;privateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;set&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;userPublicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;publicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;userPrivateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;privateKey&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;na&quot;&amp;gt;setGroupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;set&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;((&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;})),&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;na&quot;&amp;gt;clearKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;set&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;userPrivateKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;userPublicKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;crypto-storage&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Encrypt localStorage values with user&apos;s master key&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;serialize&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;encryptState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;state&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;deserialize&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;str&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;decryptState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;str&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        Challenge 4: Secure Components
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Don&apos;t want to copy crypto logic everywhere.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Solution:&amp;lt;/strong&amp;gt; Build secure components:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kr&quot;&amp;gt;interface&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;SecureInputProps&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;onChange&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;placeholder&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;?:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kr&quot;&amp;gt;string&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;SecureInput&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;onChange&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;placeholder&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;SecureInputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isEncrypting&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setIsEncrypting&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kc&quot;&amp;gt;false&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;handleSubmit&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;setIsEncrypting&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;try&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;encryptPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;api&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;createPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;onChange&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Clear input&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;finally&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;setIsEncrypting&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kc&quot;&amp;gt;false&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;textarea&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;onChange&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;onChange&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;target&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;placeholder&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;placeholder&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;sr&quot;&amp;gt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;      &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;onClick&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;handleSubmit&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;disabled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isEncrypting&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isEncrypting&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;Encrypting...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;Post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;    &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 4: Performance Optimizations
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Client-side crypto has overhead. Here&apos;s how I made it fast:&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        1. Lazy-Load libsodium
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Don&apos;t block initial render:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodiumReady&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;Promise&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;null&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;ensureSodiumReady&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;if &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;sodiumReady&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;sodiumReady&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodium&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;sodiumReady&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        2. Memoize Keys
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Don&apos;t re-derive keys on every render:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMemo&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;cryptoStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;cryptoStore&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;groupKeys&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        3. Batch Decryption
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Decrypt multiple posts in parallel:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;decryptedPosts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;Promise&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;all&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;encryptedPosts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;map&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;((&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;decryptPost&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupKey&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;))&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h3&amp;gt;
        
        
        4. WebAssembly Crypto
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;libsodium.js compiles to WASM, which is ~10-50x faster than pure JS crypto.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Benchmark (MacBook Pro M1):&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Encrypt 1000 posts: ~50ms (WASM) vs ~2000ms (pure JS)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Decrypt 1000 posts: ~45ms (WASM) vs ~1900ms (pure JS)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        5. Code Splitting
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Don&apos;t load crypto module until needed:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;CryptoModule&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;lazy&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;./crypto&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;));&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;App&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;isAuthenticated&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useAuth&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;();&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Suspense&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;fallback&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Loading&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;isAuthenticated&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;CryptoModule&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Login&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/Suspense&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 5: The Server Side
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The backend is deliberately simple. No ML, no analytics, no content inspection.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Database Schema
        &amp;lt;/h3&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight sql&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;CREATE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;TABLE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;users&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;PRIMARY&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;KEY&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;username&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;UNIQUE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;public_key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;encrypted_private_key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;-- Encrypted by user&apos;s password&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;created_at&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;TIMESTAMPTZ&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;DEFAULT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;NOW&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;CREATE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;TABLE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;groups&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;PRIMARY&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;KEY&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;name&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;-- Can be encrypted too&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;created_at&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;TIMESTAMPTZ&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;DEFAULT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;NOW&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;CREATE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;TABLE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;group_members&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;group_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;REFERENCES&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;groups&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;user_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;REFERENCES&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;users&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;encrypted_group_key&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;-- Encrypted per-user&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;joined_at&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;TIMESTAMPTZ&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;DEFAULT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;NOW&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;PRIMARY&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;KEY&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;group_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;user_id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;CREATE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;TABLE&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;posts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;PRIMARY&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;KEY&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;group_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;REFERENCES&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;groups&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;author_id&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;UUID&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;REFERENCES&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;users&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;-- Can&apos;t read this!&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;nonce&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;TEXT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NOT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;NULL&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;n&quot;&amp;gt;created_at&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;TIMESTAMPTZ&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;DEFAULT&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;NOW&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Key points:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Server stores &amp;lt;code&amp;gt;ciphertext&amp;lt;/code&amp;gt;, not plaintext&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;encrypted_group_key&amp;lt;/code&amp;gt; is per-user (encrypted with their public key)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Server never has the group key in plaintext&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        API Endpoints
        &amp;lt;/h3&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// Create encrypted post&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;/posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;req&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;req&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;body&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;authorId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;req&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;user&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// No decryption attempt â€“ just store it&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;db&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;create&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;authorId&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;ciphertext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;nonce&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;nx&quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;json&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;post&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Get encrypted posts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;get&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;/groups/:groupId/posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;req&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;req&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;params&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Return ciphertext â€“ client decrypts&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;posts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;db&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;findMany&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;where&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;groupId&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;orderBy&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;createdAt&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;desc&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;nx&quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;json&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;posts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Philosophy:&amp;lt;/strong&amp;gt; The server is a storage layer. It knows &amp;lt;em&amp;gt;metadata&amp;lt;/em&amp;gt; (who, when, where) but not &amp;lt;em&amp;gt;content&amp;lt;/em&amp;gt; (what).&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 6: Security Considerations
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        What&apos;s Protected
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;âœ… &amp;lt;strong&amp;gt;Content:&amp;lt;/strong&amp;gt; Posts, messages, comments encrypted&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        âœ… &amp;lt;strong&amp;gt;Attachments:&amp;lt;/strong&amp;gt; Images/files encrypted before upload&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        âœ… &amp;lt;strong&amp;gt;Group data:&amp;lt;/strong&amp;gt; Group keys encrypted per-user&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        âœ… &amp;lt;strong&amp;gt;User keys:&amp;lt;/strong&amp;gt; Private keys never touch the server  &amp;lt;/p&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        What&apos;s NOT Protected (Yet)
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;âš ï¸ &amp;lt;strong&amp;gt;Metadata:&amp;lt;/strong&amp;gt; Server knows who posts when&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        âš ï¸ &amp;lt;strong&amp;gt;Social graph:&amp;lt;/strong&amp;gt; Server knows who&apos;s in which groups&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        âš ï¸ &amp;lt;strong&amp;gt;Timing:&amp;lt;/strong&amp;gt; Server knows when you&apos;re active&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        âš ï¸ &amp;lt;strong&amp;gt;IP addresses:&amp;lt;/strong&amp;gt; Standard web server logging  &amp;lt;/p&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        Threat Model
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Protected against:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;âœ… Server admin reading posts&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;âœ… Database breach exposing content&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;âœ… Law enforcement compelling content disclosure&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;âœ… Third-party analytics&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;NOT protected against:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;âŒ Compromised client (malware/extensions)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;âŒ Keylogger on user&apos;s machine&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;âŒ Phishing for passwords&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;âŒ Metadata analysis (who talks to whom)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        Future Improvements
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;1. Metadata Protection:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Onion routing (Tor-style)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Timing obfuscation&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Decoy traffic&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;2. Forward Secrecy:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Rotate keys on every message (Signal Protocol)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Re-encrypt history on rotation&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;3. Zero-Knowledge Proofs:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Prove group membership without revealing identity&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Search encrypted data without decrypting&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;4. Hardware Security:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;WebAuthn for key storage&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Hardware security modules (HSM)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        &amp;lt;h2&amp;gt;
        
        
        Part 7: Lessons Learned
        &amp;lt;/h2&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        1. UX Is Harder Than Crypto
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;The crypto is well-understood. Making it &amp;lt;em&amp;gt;usable&amp;lt;/em&amp;gt; is the challenge.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Users don&apos;t think in &quot;keypairs&quot; and &quot;nonces.&quot; They want &quot;private messages.&quot;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Solution:&amp;lt;/strong&amp;gt; Hide complexity. Good defaults. Clear error messages.&amp;lt;/p&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        2. Performance Matters
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;If encryption adds 500ms latency, users notice.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Solution:&amp;lt;/strong&amp;gt; Optimize aggressively. Use WASM. Batch operations. Lazy-load.&amp;lt;/p&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        3. Open Source Is Non-Negotiable
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Closed-source &quot;encryption&quot; is security theater.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If you can&apos;t audit the code, you&apos;re trusting marketing.&amp;lt;/p&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        4. Metadata Is the Hard Problem
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Encrypting content is easy. Hiding &amp;lt;em&amp;gt;who talks to whom&amp;lt;/em&amp;gt; is way harder.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Signal still has this problem (they know who messages whom).&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;No perfect solution yet.&amp;lt;/strong&amp;gt; Working on it.&amp;lt;/p&amp;gt;
        &amp;lt;h3&amp;gt;
        
        
        5. Documentation Is Security
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Users need to understand:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;What&apos;s protected&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;What&apos;s not protected&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;How it works (high-level)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Transparency builds trust.&amp;lt;/strong&amp;gt; Obscurity doesn&apos;t.&amp;lt;/p&amp;gt;
        
        
        &amp;lt;h2&amp;gt;
        
        
        Try It Yourself
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Live demo:&amp;lt;/strong&amp;gt; &amp;lt;a href=&quot;https://moltyverse.com&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://moltyverse.com&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;strong&amp;gt;GitHub:&amp;lt;/strong&amp;gt; &amp;lt;a href=&quot;https://github.com/webdevtodayjason/moltyverse&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://github.com/webdevtodayjason/moltyverse&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;strong&amp;gt;Docs:&amp;lt;/strong&amp;gt; &amp;lt;a href=&quot;https://docs.moltyverse.com&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://docs.moltyverse.com&amp;lt;/a&amp;gt;  &amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;To run locally:&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight shell&quot;&amp;gt;&amp;lt;code&amp;gt;git clone https://github.com/webdevtodayjason/moltyverse
        &amp;lt;span class=&quot;nb&quot;&amp;gt;cd &amp;lt;/span&amp;gt;moltyverse
        npm &amp;lt;span class=&quot;nb&quot;&amp;gt;install
        &amp;lt;/span&amp;gt;npm run dev
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Tech stack:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Node.js 18+&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;PostgreSQL 14+&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;libsodium (installed automatically)&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Contribute
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;This is &amp;lt;strong&amp;gt;open source (MIT license)&amp;lt;/strong&amp;gt;. Contributions welcome:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Areas needing help:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;ðŸ” Security review (crypto audit)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;ðŸŽ¨ UI/UX improvements&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;ðŸ“± Mobile app (React Native or PWA)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;ðŸŒ Internationalization&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;ðŸ“– Documentation&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Open an issue or PR:&amp;lt;/strong&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;a href=&quot;https://github.com/webdevtodayjason/moltyverse/issues&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://github.com/webdevtodayjason/moltyverse/issues&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Conclusion
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Building privacy-first software is hard. But it&apos;s not impossible.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;You don&apos;t need to be a cryptographer to build secure systems. You need:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Battle-tested libraries (libsodium)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Clear threat model&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Respect for users&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Open source for auditability&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Moltyverse proves you can build social media that respects users.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;End-to-end encryption. Zero tracking. Open source. No ads.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It&apos;s not science fiction. It&apos;s working code.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Let&apos;s build a better internet.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Questions? Find me:&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;GitHub:&amp;lt;/strong&amp;gt; &amp;lt;a href=&quot;https://github.com/webdevtodayjason&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;@webdevtodayjason&amp;lt;/a&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Twitter:&amp;lt;/strong&amp;gt; &amp;lt;a href=&quot;https://twitter.com/JasonBrashearTX&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;@JasonBrashearTX&amp;lt;/a&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Email:&amp;lt;/strong&amp;gt; &amp;lt;a href=&quot;mailto:jason@webdevtoday.com&quot;&amp;gt;jason@webdevtoday.com&amp;lt;/a&amp;gt;
        &amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Further Reading
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Cryptography:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://doc.libsodium.org/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;libsodium documentation&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://nacl.cr.yp.to/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;NaCl: Networking and Cryptography library&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://signal.org/docs/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Signal Protocol&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Privacy:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://www.eff.org/deeplinks/2020/01/threat-modeling-privacy-enthusiasts&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Threat modeling&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://www.eff.org/deeplinks/2013/06/why-metadata-matters&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Metadata matters&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React + Crypto:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Web Crypto API&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://tanstack.com/query/latest&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;TanStack Query&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Open Source:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://opensource.org/licenses/MIT&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;MIT License&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;a href=&quot;https://choosealicense.com/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Choose an open source license&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Whatâ€™s the Hardest Part of Generating UI as a Frontend Developer?</title>
      <link>https://dev.to/surajondev/whats-the-hardest-part-of-generating-ui-as-a-frontend-developer-4f23</link>
      <guid>https://dev.to/surajondev/whats-the-hardest-part-of-generating-ui-as-a-frontend-developer-4f23</guid>
      <pubDate>Wed, 25 Feb 2026 11:30:00 GMT</pubDate>
      <content:encoded>
        &amp;lt;h2&amp;gt;
        
        
        Introduction
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;I recently redesigned the &amp;lt;a href=&quot;https://www.texavor.com/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Texavor&amp;lt;/a&amp;gt;. After the initial launch, one of the brutal pieces of feedback for the landing page was that it was too generic. It feels like it lacks a design system. I didnâ€™t realize until someone else pointed it out. I built an initial design system, but eventually, AI hallucinated, and it created its own things.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;At first, AI feels like a superpower. It generates codes fast and even with precision. It fixes syntax errors on its own. Your code implements features that take a month in a day. But after a while, you start noticing patterns:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Repeated â€œSaasâ€ looking hero section&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Predicatable card grids&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;generic gradient and blur effects&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Some pages follow a different system, while some follow a different design system
        The design it generates looks good, but lacks the taste and structure that you established earlier.&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;I feel like generating a non-generic and unique UI is kind of the hardest thing when building UI as a front-end Developer.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Curious to hearðŸ¤”
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;Whatâ€™s the hardest part of generating UI?&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Have you experienced your design system getting broken?&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;At what point do you stop trusting AI and take full control&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Dark mode in React is painful. So I built vartheme to fix it.</title>
      <link>https://dev.to/sumit-wayne/dark-mode-in-react-is-painful-so-i-built-vartheme-to-fix-it-3ei6</link>
      <guid>https://dev.to/sumit-wayne/dark-mode-in-react-is-painful-so-i-built-vartheme-to-fix-it-3ei6</guid>
      <pubDate>Wed, 25 Feb 2026 10:47:32 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;If you&apos;ve ever tried adding dark mode to a React appâ€¦ you know the pain.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;You configure Tailwindâ€™s &amp;lt;code&amp;gt;darkMode&amp;lt;/code&amp;gt;.&amp;lt;br&amp;gt;
        Then you write CSS variables manually.&amp;lt;br&amp;gt;
        Then you handle &amp;lt;code&amp;gt;localStorage&amp;lt;/code&amp;gt; so the theme persists.&amp;lt;br&amp;gt;
        Then you fix the flash of the wrong theme on page load.&amp;lt;br&amp;gt;
        Then system theme detection breaks.&amp;lt;br&amp;gt;
        Then your navbar is still white in dark mode ðŸ˜…&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Sound familiar?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;I got tired of repeating this in every project. So I built &amp;lt;strong&amp;gt;vartheme&amp;lt;/strong&amp;gt; â€” a tiny React library that handles all of this in &amp;lt;strong&amp;gt;one line&amp;lt;/strong&amp;gt;.&amp;lt;/p&amp;gt;
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸš€ What is vartheme?
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;vartheme is a &amp;lt;strong&amp;gt;zero-config, CSS variable based theme switching library for React.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;âœ… Dark mode in one line&amp;lt;br&amp;gt;
        âœ… 5 beautiful built-in themes&amp;lt;br&amp;gt;
        âœ… Animated sun/moon toggle (no icon library needed)&amp;lt;br&amp;gt;
        âœ… Theme persists automatically&amp;lt;br&amp;gt;
        âœ… System theme detection&amp;lt;br&amp;gt;
        âœ… Under 7kb bundle&amp;lt;br&amp;gt;
        âœ… Zero dependencies&amp;lt;br&amp;gt;
        âœ… Full TypeScript support&amp;lt;/p&amp;gt;
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸ˜© The Problem
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Without vartheme, adding dark mode usually looks like this:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;// 1. Setup Tailwind config&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 2. Write CSS variables manually&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 3. Handle localStorage&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 4. Fix flash of wrong theme&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 5. Handle system theme detection&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 6. Write a toggle component&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 7. Debug for 2 hours&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// 8. Still not working properly&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        âœ… The Solution
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;With vartheme:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight jsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ThemeProvider&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;vartheme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;default&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;App&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;ThemeProvider&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;theme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&quot;ocean&quot;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;mode&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&quot;dark&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;YourApp&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;ThemeProvider&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Thatâ€™s it. Dark mode done.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸŽ¨ Built-in Themes
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;vartheme comes with 5 ready-to-use themes:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;â€¢ Default â€” Purple/Violet&amp;lt;br&amp;gt;
        â€¢ Ocean â€” Blue/Teal&amp;lt;br&amp;gt;
        â€¢ Forest â€” Green/Lime&amp;lt;br&amp;gt;
        â€¢ Sunset â€” Orange/Pink&amp;lt;br&amp;gt;
        â€¢ Rose â€” Pink/Red&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Switch themes instantly:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight jsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;ThemeProvider&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;theme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&quot;forest&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸŽ¯ CSS Variables (Use anywhere)
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight css&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;.card&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;background&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;var&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;--vt-surface&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;color&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;var&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;--vt-text&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;border&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;m&quot;&amp;gt;1px&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nb&quot;&amp;gt;solid&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;var&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;--vt-border&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;nc&quot;&amp;gt;.button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;background&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;n&quot;&amp;gt;var&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;n&quot;&amp;gt;--vt-primary&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nl&quot;&amp;gt;color&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;no&quot;&amp;gt;white&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;No more hardcoding colors. No more theme context headaches.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        âš¡ Powerful Hook
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Need more control?&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight jsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useThemeContext&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;vartheme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;Navbar&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;resolvedMode&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;toggle&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setTheme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setColors&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useThemeContext&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;onClick&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;toggle&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;resolvedMode&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;dark&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;â˜€ï¸&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;ðŸŒ™&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;onClick&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;setTheme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;ocean&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Ocean&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;onClick&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;setColors&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;primary&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;#EC4899&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        Pink Mode
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸŒ™ Built-in Animated Toggle
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;No icons. Pure CSS.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight jsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ThemeToggle&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;vartheme&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ThemeToggle&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;size&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;48&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;sr&quot;&amp;gt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸ“¦ Install
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight shell&quot;&amp;gt;&amp;lt;code&amp;gt;npm &amp;lt;span class=&quot;nb&quot;&amp;gt;install &amp;lt;/span&amp;gt;vartheme
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Bundle size: ~7kb. Zero dependencies. TypeScript ready.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        ðŸ”— Links
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;ðŸ“¦ npm: &amp;lt;a href=&quot;https://www.npmjs.com/package/vartheme&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://www.npmjs.com/package/vartheme&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ”· GitHub: &amp;lt;a href=&quot;https://github.com/sumitt-wayne/vartheme&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://github.com/sumitt-wayne/vartheme&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸŒ Website: &amp;lt;a href=&quot;https://vartheme.vercel.app&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://vartheme.vercel.app&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;If you find it useful, drop a â­ on GitHub â€” it really means a lot!&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;What features would you like to see next? Let me know in the comments ðŸ‘‡&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Vite + React + Vitest: a simple test setup you can copy in 10 minutes</title>
      <link>https://dev.to/happy-lico/vite-react-vitest-a-simple-test-setup-you-can-copy-in-10-minutes-5b7f</link>
      <guid>https://dev.to/happy-lico/vite-react-vitest-a-simple-test-setup-you-can-copy-in-10-minutes-5b7f</guid>
      <pubDate>Wed, 25 Feb 2026 09:30:50 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;If you use &amp;lt;strong&amp;gt;Vite + React + TypeScript&amp;lt;/strong&amp;gt;, the fastest way to add tests is &amp;lt;strong&amp;gt;Vitest&amp;lt;/strong&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;In this post, I will show a clean setup you can copy.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Why this stack?
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Vite&amp;lt;/strong&amp;gt;: fast dev server&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Vitest&amp;lt;/strong&amp;gt;: test runner that feels like Jest, but faster in Vite projects&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;React Testing Library&amp;lt;/strong&amp;gt;: test from user perspective&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;This setup works well with &amp;lt;strong&amp;gt;pnpm&amp;lt;/strong&amp;gt; and small-to-medium frontend apps.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        1) Install packages
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight shell&quot;&amp;gt;&amp;lt;code&amp;gt;pnpm add &amp;lt;span class=&quot;nt&quot;&amp;gt;-D&amp;lt;/span&amp;gt; vitest jsdom @testing-library/react @testing-library/jest-dom @testing-library/user-event
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        2) Update &amp;lt;code&amp;gt;vite.config.ts&amp;lt;/code&amp;gt;
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;c1&quot;&amp;gt;/// &amp;amp;lt;reference types=&quot;vitest&quot; /&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;defineConfig&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;vite&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;react&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@vitejs/plugin-react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;default&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;defineConfig&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;plugins&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()],&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;test&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;environment&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;jsdom&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;setupFiles&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;./src/test/setup.ts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;globals&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kc&quot;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;What this does:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;jsdom&amp;lt;/code&amp;gt; gives a browser-like environment&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;setupFiles&amp;lt;/code&amp;gt; runs once before tests&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;globals: true&amp;lt;/code&amp;gt; lets you use &amp;lt;code&amp;gt;describe&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;it&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;expect&amp;lt;/code&amp;gt; without importing every time&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        3) Create &amp;lt;code&amp;gt;src/test/setup.ts&amp;lt;/code&amp;gt;
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@testing-library/jest-dom&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;This adds helpers like &amp;lt;code&amp;gt;toBeInTheDocument()&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        4) Add scripts to &amp;lt;code&amp;gt;package.json&amp;lt;/code&amp;gt;
        &amp;lt;/h2&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight json&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nl&quot;&amp;gt;&quot;scripts&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nl&quot;&amp;gt;&quot;test&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;&quot;vitest run&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nl&quot;&amp;gt;&quot;test:watch&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;&quot;vitest&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nl&quot;&amp;gt;&quot;test:ui&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;&quot;vitest --ui&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;w&quot;&amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Use:&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;pnpm test&amp;lt;/code&amp;gt; for CI&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;code&amp;gt;pnpm test:watch&amp;lt;/code&amp;gt; while coding&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        5) Example component test
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;src/components/Counter.tsx&amp;lt;/code&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useState&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;Counter&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setCount&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;p&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Count: &amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;p&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;onClick&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;setCount&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;((&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;c&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;c&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Increment&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;code&amp;gt;src/components/Counter.test.tsx&amp;lt;/code&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;render&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;screen&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@testing-library/react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userEvent&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;@testing-library/user-event&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;Counter&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;./Counter&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;nf&quot;&amp;gt;describe&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;Counter&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;it&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;increments count when button is clicked&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nf&quot;&amp;gt;render&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Counter&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;)&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;userEvent&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;click&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;screen&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getByRole&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;sr&quot;&amp;gt;/increment/i&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}))&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;nf&quot;&amp;gt;expect&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;screen&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;getByText&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;Count: 1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)).&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;toBeInTheDocument&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;This test checks real behavior, not internal state details.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Common beginner mistakes
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;strong&amp;gt;Using &amp;lt;code&amp;gt;node&amp;lt;/code&amp;gt; environment&amp;lt;/strong&amp;gt; for React tests (use &amp;lt;code&amp;gt;jsdom&amp;lt;/code&amp;gt;)&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Forgetting &amp;lt;code&amp;gt;@testing-library/jest-dom&amp;lt;/code&amp;gt; setup&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Testing implementation details instead of visible UI behavior&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Final tip
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Start with one test per component for the core user action.&amp;lt;br&amp;gt;
        You do not need 100 tests on day one.&amp;lt;br&amp;gt;
        Small, stable tests are better than many fragile tests.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If you want, next step is adding coverage and running Vitest in CI.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>8 Places To Get Deals On Buy Verified Cash App Accounts</title>
      <link>https://dev.to/jakashinsky/8-places-to-get-deals-on-buy-verified-cash-app-accounts-5861</link>
      <guid>https://dev.to/jakashinsky/8-places-to-get-deals-on-buy-verified-cash-app-accounts-5861</guid>
      <pubDate>Wed, 25 Feb 2026 08:59:40 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Cash App Accounts: Features, Benefits, Security, and Safe Usage Guide&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;br&amp;gt;
        Cash App is a widely used digital payment platform that allows users to send, receive, and manage money directly from their mobile devices. It is operated by Block, Inc. and has become popular for personal payments, small business transactions, and basic investing features.&amp;lt;br&amp;gt;
        This guide explains what a Cash App account is, how it works, its benefits, security features, potential risks, and how to use it safely and responsibly.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;What Is a Cash App Account&amp;lt;br&amp;gt;
        A Cash App account is a digital financial account created through the Cash App mobile application. Once registered, users can perform a variety of financial activities such as:&amp;lt;br&amp;gt;
        Sending and receiving money instantly&amp;lt;br&amp;gt;
        Linking a bank account or debit card&amp;lt;br&amp;gt;
        Using a Cash Card for purchases&amp;lt;br&amp;gt;
        Receiving direct deposits&amp;lt;br&amp;gt;
        Buying and selling Bitcoin&amp;lt;br&amp;gt;
        Investing in stocks&amp;lt;br&amp;gt;
        The account is typically created using a mobile number or email address, and additional verification may be required for expanded features.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Personal and Business Cash App Accounts&amp;lt;br&amp;gt;
        Cash App supports both personal and business usage.&amp;lt;br&amp;gt;
        Personal accounts are designed for everyday transactions such as sending money to friends, paying bills, or managing personal finances.&amp;lt;br&amp;gt;
        Business accounts are suitable for freelancers, online sellers, and small business owners who need to accept payments from customers. Business profiles may include transaction fees but offer features tailored to commercial activity.&amp;lt;br&amp;gt;
        Choosing the correct profile type is important for compliance and smooth operation.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Account Verification and Why It Matters&amp;lt;br&amp;gt;
        When you first create a Cash App account, transaction limits are restricted. To unlock full functionality, identity verification is required. This process may include providing:&amp;lt;br&amp;gt;
        Your full legal name&amp;lt;br&amp;gt;
        Date of birth&amp;lt;br&amp;gt;
        Government identification details&amp;lt;br&amp;gt;
        The last digits of a Social Security Number for U.S. users&amp;lt;br&amp;gt;
        Verification allows access to higher transaction limits, Bitcoin trading, stock investments, and direct deposit services. It also improves account security.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Key Benefits of Using Cash App&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Fast Transactions&amp;lt;br&amp;gt;
        Money can be sent and received almost instantly between users.&amp;lt;br&amp;gt;
        User-Friendly Interface&amp;lt;br&amp;gt;
        The app is simple to navigate, making it accessible for beginners.&amp;lt;br&amp;gt;
        Cash Card Access&amp;lt;br&amp;gt;
        Users can order a customizable debit card to spend their balance online or in stores.&amp;lt;br&amp;gt;
        Direct Deposit&amp;lt;br&amp;gt;
        Paychecks or other payments can be deposited directly into the account.&amp;lt;br&amp;gt;
        Investment Features&amp;lt;br&amp;gt;
        Users can buy fractional shares of stocks and invest in Bitcoin with small amounts.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Security Features&amp;lt;br&amp;gt;
        Cash App includes multiple layers of security to protect users.&amp;lt;br&amp;gt;
        Encryption Technology&amp;lt;br&amp;gt;
        Sensitive information is encrypted to prevent unauthorized access.&amp;lt;br&amp;gt;
        PIN and Biometric Protection&amp;lt;br&amp;gt;
        Users can require a PIN, fingerprint, or facial recognition for transactions.&amp;lt;br&amp;gt;
        Two-Factor Authentication&amp;lt;br&amp;gt;
        Additional verification codes may be required during login.&amp;lt;br&amp;gt;
        Despite these protections, users must practice safe digital habits.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Best Practices for Safe Usage&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use a strong and unique password&amp;lt;br&amp;gt;
        Enable security lock or PIN protection&amp;lt;br&amp;gt;
        Avoid sharing login details or verification codes&amp;lt;br&amp;gt;
        Be cautious of phishing messages and suspicious links&amp;lt;br&amp;gt;
        Download the app only from official app stores&amp;lt;br&amp;gt;
        Monitor transaction history regularly&amp;lt;br&amp;gt;
        Following these practices significantly reduces the risk of fraud.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Risks of Buying or Selling Cash App Accounts&amp;lt;br&amp;gt;
        Some online sellers advertise â€œverifiedâ€ or â€œready-madeâ€ Cash App accounts. Purchasing such accounts is highly risky for several reasons.&amp;lt;br&amp;gt;
        Violation of Platform Rules&amp;lt;br&amp;gt;
        Cash App does not allow buying, selling, or transferring accounts between individuals.&amp;lt;br&amp;gt;
        Account Suspension&amp;lt;br&amp;gt;
        Suspicious login behavior or identity mismatches may lead to account freezes or permanent bans.&amp;lt;br&amp;gt;
        Financial Loss&amp;lt;br&amp;gt;
        The original owner may recover the account, or the seller may retain access credentials.&amp;lt;br&amp;gt;
        Legal Concerns&amp;lt;br&amp;gt;
        Using an account under someone elseâ€™s identity can raise serious legal issues.&amp;lt;br&amp;gt;
        The safest and most reliable option is to create and verify your own account using your real information.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>BEST Ways To Sell BUY /VERIFIED/ CASH APP ACCOUNTS</title>
      <link>https://dev.to/jakashinsky/best-ways-to-sell-buy-verified-cash-app-accounts-37df</link>
      <guid>https://dev.to/jakashinsky/best-ways-to-sell-buy-verified-cash-app-accounts-37df</guid>
      <pubDate>Wed, 25 Feb 2026 08:53:55 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Cash App Accounts: Features, Benefits, Security, and Safe Usage Guide&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;br&amp;gt;
        Cash App is a widely used digital payment platform that allows users to send, receive, and manage money directly from their mobile devices. It is operated by Block, Inc. and has become popular for personal payments, small business transactions, and basic investing features.&amp;lt;br&amp;gt;
        This guide explains what a Cash App account is, how it works, its benefits, security features, potential risks, and how to use it safely and responsibly.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;What Is a Cash App Account&amp;lt;br&amp;gt;
        A Cash App account is a digital financial account created through the Cash App mobile application. Once registered, users can perform a variety of financial activities such as:&amp;lt;br&amp;gt;
        Sending and receiving money instantly&amp;lt;br&amp;gt;
        Linking a bank account or debit card&amp;lt;br&amp;gt;
        Using a Cash Card for purchases&amp;lt;br&amp;gt;
        Receiving direct deposits&amp;lt;br&amp;gt;
        Buying and selling Bitcoin&amp;lt;br&amp;gt;
        Investing in stocks&amp;lt;br&amp;gt;
        The account is typically created using a mobile number or email address, and additional verification may be required for expanded features.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Personal and Business Cash App Accounts&amp;lt;br&amp;gt;
        Cash App supports both personal and business usage.&amp;lt;br&amp;gt;
        Personal accounts are designed for everyday transactions such as sending money to friends, paying bills, or managing personal finances.&amp;lt;br&amp;gt;
        Business accounts are suitable for freelancers, online sellers, and small business owners who need to accept payments from customers. Business profiles may include transaction fees but offer features tailored to commercial activity.&amp;lt;br&amp;gt;
        Choosing the correct profile type is important for compliance and smooth operation.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Account Verification and Why It Matters&amp;lt;br&amp;gt;
        When you first create a Cash App account, transaction limits are restricted. To unlock full functionality, identity verification is required. This process may include providing:&amp;lt;br&amp;gt;
        Your full legal name&amp;lt;br&amp;gt;
        Date of birth&amp;lt;br&amp;gt;
        Government identification details&amp;lt;br&amp;gt;
        The last digits of a Social Security Number for U.S. users&amp;lt;br&amp;gt;
        Verification allows access to higher transaction limits, Bitcoin trading, stock investments, and direct deposit services. It also improves account security.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Key Benefits of Using Cash App&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Fast Transactions&amp;lt;br&amp;gt;
        Money can be sent and received almost instantly between users.&amp;lt;br&amp;gt;
        User-Friendly Interface&amp;lt;br&amp;gt;
        The app is simple to navigate, making it accessible for beginners.&amp;lt;br&amp;gt;
        Cash Card Access&amp;lt;br&amp;gt;
        Users can order a customizable debit card to spend their balance online or in stores.&amp;lt;br&amp;gt;
        Direct Deposit&amp;lt;br&amp;gt;
        Paychecks or other payments can be deposited directly into the account.&amp;lt;br&amp;gt;
        Investment Features&amp;lt;br&amp;gt;
        Users can buy fractional shares of stocks and invest in Bitcoin with small amounts.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Security Features&amp;lt;br&amp;gt;
        Cash App includes multiple layers of security to protect users.&amp;lt;br&amp;gt;
        Encryption Technology&amp;lt;br&amp;gt;
        Sensitive information is encrypted to prevent unauthorized access.&amp;lt;br&amp;gt;
        PIN and Biometric Protection&amp;lt;br&amp;gt;
        Users can require a PIN, fingerprint, or facial recognition for transactions.&amp;lt;br&amp;gt;
        Two-Factor Authentication&amp;lt;br&amp;gt;
        Additional verification codes may be required during login.&amp;lt;br&amp;gt;
        Despite these protections, users must practice safe digital habits.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Best Practices for Safe Usage&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Use a strong and unique password&amp;lt;br&amp;gt;
        Enable security lock or PIN protection&amp;lt;br&amp;gt;
        Avoid sharing login details or verification codes&amp;lt;br&amp;gt;
        Be cautious of phishing messages and suspicious links&amp;lt;br&amp;gt;
        Download the app only from official app stores&amp;lt;br&amp;gt;
        Monitor transaction history regularly&amp;lt;br&amp;gt;
        Following these practices significantly reduces the risk of fraud.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Risks of Buying or Selling Cash App Accounts&amp;lt;br&amp;gt;
        Some online sellers advertise â€œverifiedâ€ or â€œready-madeâ€ Cash App accounts. Purchasing such accounts is highly risky for several reasons.&amp;lt;br&amp;gt;
        Violation of Platform Rules&amp;lt;br&amp;gt;
        Cash App does not allow buying, selling, or transferring accounts between individuals.&amp;lt;br&amp;gt;
        Account Suspension&amp;lt;br&amp;gt;
        Suspicious login behavior or identity mismatches may lead to account freezes or permanent bans.&amp;lt;br&amp;gt;
        Financial Loss&amp;lt;br&amp;gt;
        The original owner may recover the account, or the seller may retain access credentials.&amp;lt;br&amp;gt;
        Legal Concerns&amp;lt;br&amp;gt;
        Using an account under someone elseâ€™s identity can raise serious legal issues.&amp;lt;br&amp;gt;
        The safest and most reliable option is to create and verify your own account using your real information.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Business Alternatives and Payment Solutions&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If your goal is professional payment processing, you may consider additional legitimate options such as:&amp;lt;br&amp;gt;
        Using an official Cash App business profile&amp;lt;br&amp;gt;
        Setting up merchant services through your bank&amp;lt;br&amp;gt;
        Exploring platforms like PayPal Business or Stripe&amp;lt;br&amp;gt;
        Linking your account to a registered business entity&amp;lt;br&amp;gt;
        These solutions offer transparency, stability, and compliance with financial regulations.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Common Issues and How to Resolve Them&amp;lt;br&amp;gt;
        If your account is locked&amp;lt;br&amp;gt;
        Contact official support through the app and provide required verification.&amp;lt;br&amp;gt;
        If verification fails&amp;lt;br&amp;gt;
        Ensure your legal name and identification details match official records.&amp;lt;br&amp;gt;
        If a transaction is delayed&amp;lt;br&amp;gt;
        Check your linked bank information and internet connection.&amp;lt;br&amp;gt;
        Avoid third-party â€œrecovery services,â€ as they are often scams.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Final Thoughts&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-cash-app-accounts/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-cash-app-accounts/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Cash App accounts provide a convenient and modern way to manage digital payments. They offer speed, accessibility, and useful financial tools for both individuals and small businesses.&amp;lt;br&amp;gt;
        However, financial platforms require responsible usage. Creating and verifying your own account is the only safe and compliant method. Shortcuts such as purchasing pre-verified accounts can lead to account loss, financial risk, and possible legal trouble.&amp;lt;br&amp;gt;
        If you would like, I can also provide a longer in-depth version, a comparison between personal and business accounts, or a complete security checklist for digital payment apps.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Buy Verified WebMoney Account - 100% Safe, Good For Use</title>
      <link>https://dev.to/jakashinsky/buy-verified-webmoney-account-100-safe-good-for-use-437g</link>
      <guid>https://dev.to/jakashinsky/buy-verified-webmoney-account-100-safe-good-for-use-437g</guid>
      <pubDate>Wed, 25 Feb 2026 08:43:10 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Buy WebMoney Accounts from GetUSASMM.com â€“ Introduction to WebMoney Accounts, Risks, and Safer Alternatives&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-webmoney-account/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-webmoney-account/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;br&amp;gt;
        Introduction: Understanding the Topic&amp;lt;br&amp;gt;
        In digital finance and online payment systems, a variety of electronic wallet platforms exist to support personal transfers, business transactions, international payments, and account linked financial services. Among these systems is WebMoney, a long standing online payment network that enables users to hold electronic equivalents of multiple currencies, conduct transfers, and interact with e commerce services around the world.&amp;lt;br&amp;gt;
        In certain corners of the internet, particularly within informal digital marketing or social media seller markets, one may encounter offers to buy pre made WebMoney accounts from third party services such as â€œGetUSASMM.com.â€ These sellers may advertise â€œverified,â€ â€œold,â€ or â€œbulkâ€ WebMoney accounts for sale at low prices. At first glance, this might appear to be a convenient shortcut for someone who needs access to multiple wallets or to avoid the setup process. However, the reality is complex and fraught with risk.&amp;lt;br&amp;gt;
        This article provides an extended, thorough look at what WebMoney accounts are, how the WebMoney system works, why buying accounts from third parties is dangerous, the legal and security implications, and safer, legitimate ways to use WebMoney or other digital payment systems.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;What WebMoney Is and How It Functions&amp;lt;br&amp;gt;
        WebMoney is a digital payment infrastructure and electronic money ecosystem that was established in the late 1990s. It allows users to create digital wallets (called â€œpursesâ€ in WebMoney terminology) denominated in different currencies, such as US dollars, euros, Russian rubles, and others. Each wallet is linked to a unique identifier and can be used to send and receive funds, pay for goods and services, and integrate with other financial and merchant services worldwide.&amp;lt;br&amp;gt;
        The system is designed with a hierarchical trust model. New users typically begin with a basic level of verification that permits limited transactions. With further identity verification â€” such as providing personal documents and meeting compliance requirements â€” accounts can achieve higher trust levels, enabling larger transfers, extended services, and merchant capabilities. The verification structure is core to WebMoneyâ€™s operational model and regulatory compliance with financial transaction rules in various jurisdictions.&amp;lt;br&amp;gt;
        WebMoney uses specialized software or mobile apps to manage wallets, transfer funds, and interact with global payment services. Users are issued unique identifiers and must adhere to strict authentication protocols to manage their accounts securely. Because the platform handles financial value and can be connected to bank systems or currency exchange services, security and legal compliance are central to its design.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Why Some People Consider Buying Pre Made WebMoney Accounts&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-webmoney-account/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-webmoney-account/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Within informal online seller ecosystems, some services advertise pre created WebMoney accounts. These accounts are often marketed with language like â€œverified wallets,â€ â€œold accounts,â€ or â€œbulk wallets ready to use.â€ The supposed appeal for buyers includes skipping the account creation process, immediate access without waiting for verification, or the ability to operate multiple wallets.&amp;lt;br&amp;gt;
        In some cases, marketing copy may stress convenience or suggest that older accounts are more trusted or less likely to trigger security checks. Services like GetUSASMM.com and similar sites are part of a broader trend of third party sellers offering digital accounts, prepaid financial tools, or access credentials for online platforms.&amp;lt;br&amp;gt;
        Before engaging with such offers, itâ€™s vital to understand how WebMoney itself views account creation and ownership, and the risks associated with bypassing official processes.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;WebMoneyâ€™s Policies on Account Ownership and Verification&amp;lt;br&amp;gt;
        WebMoney, like most regulated digital payment systems, requires that each account and associated wallet be tied directly to the individual or organization that created it. The verification process ensures compliance with anti money laundering (AML) rules, know your customer (KYC) standards, and financial transaction regulations that exist in multiple countries. These standards are not arbitrary; they are legal obligations that help prevent fraud, illicit finance, and identity misuse.&amp;lt;br&amp;gt;
        Official WebMoney terms of service typically prohibit the transfer of account ownership. The purpose is to ensure that the person controlling a wallet is the person whose identity and financial information were used in verification. When an account is transferred or sold without proper authorization, it undermines the security model and can violate the service agreement.&amp;lt;br&amp;gt;
        In practice, this means that each WebMoney account should be created by the end user through the official registration and verification channels. Any attempt to circumvent this by purchasing credentials or a pre verified wallet contradicts the platformâ€™s intended use.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Security Risks of Buying WebMoney Accounts from Third Parties&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-webmoney-account/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-webmoney-account/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;When a service offers pre made WebMoney accounts, several substantial security risks arise:&amp;lt;br&amp;gt;
        Unknown Ownership History: There is no reliable way to verify who originally created the account, how it was used, or whether it might have been involved in suspicious activity. If associated with prior fraudulent transactions, the account could be flagged by WebMoneyâ€™s systems.&amp;lt;br&amp;gt;
        Shared Credentials: Often, sellers retain access to recovery details, email addresses, authentication codes, or linked phone numbers. This means the original seller might still be able to control or reclaim the account.&amp;lt;br&amp;gt;
        Compromised Accounts: Purchased accounts may have been created with illicit tools, stolen personal data, or using fake documents. Using such an account may lead to immediate suspension by WebMoneyâ€™s risk detection systems.&amp;lt;br&amp;gt;
        Security and Privacy Breaches: Entering your personal information into systems that trade in credentials can expose you to identity theft, phishing attempts, or malware distribution.&amp;lt;br&amp;gt;
        Because WebMoney accounts are financial instruments, any compromise or misuse can have real monetary consequences, including the potential loss of funds stored in the wallet or linked financial instruments.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Legal and Regulatory Implications&amp;lt;br&amp;gt;
        Handling financial accounts and digital wallets involves compliance with local and international law. In many jurisdictions, selling or buying financial account access without the consent of the account holder is illegal. Depending on the region and applicable financial regulations, engaging in the purchase of a pre made WebMoney account could expose individuals to accusations of fraud or unauthorized financial activity.&amp;lt;br&amp;gt;
        Anti money laundering laws, identity theft statutes, and digital transaction compliance frameworks require that financial services platforms maintain accurate ownership and verification records. Circumventing these structures by purchasing accounts outside official channels undermines regulatory requirements and could potentially lead to civil or criminal penalties.&amp;lt;br&amp;gt;
        Additionally, if an account you purchased is used for illicit activities â€” even unknowingly â€” law enforcement may investigate any associated user, which can include you.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Real Consequences Reported by Users&amp;lt;br&amp;gt;
        Across online financial communities and security forums, users sometimes share anecdotes about the fallout from using third party accounts:&amp;lt;br&amp;gt;
        â€¢ Sudden account suspension due to suspicious login behavior&amp;lt;br&amp;gt;
        â€¢ Permanent deactivation without recovery options&amp;lt;br&amp;gt;
        â€¢ Funds frozen or removed by the platform due to compliance issues&amp;lt;br&amp;gt;
        â€¢ Loss of linked financial information or inability to access wallets&amp;lt;br&amp;gt;
        â€¢ Accounts reclaimed by original owners who retained recovery credentials&amp;lt;br&amp;gt;
        These outcomes highlight that what might appear to be a shortcut often leads to long term problems and financial loss.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Why â€œVerifiedâ€ Accounts from Sellers Are Not Truly Verified&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-webmoney-account/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-webmoney-account/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Even if a seller claims that an account is â€œverified,â€ those claims are not independently audited. Verification on WebMoney is tied to identity documents and personal information. When a third party says an account is verified, there is no guarantee that:&amp;lt;br&amp;gt;
        â€¢ The verification was done legitimately through WebMoneyâ€™s official process&amp;lt;br&amp;gt;
        â€¢ The identity information used belongs to a real person with consent&amp;lt;br&amp;gt;
        â€¢ The account will remain verified once you log in from new locations or devices&amp;lt;br&amp;gt;
        Platforms like WebMoney monitor accounts for suspicious behaviors, including changes in login patterns, new IP addresses, and mismatched identity data. A change in control of the account without proper ownership documentation may trigger risk controls and result in suspension.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;Alternatives: Safe and Legitimate Ways to Use WebMoney&amp;lt;br&amp;gt;
        For individuals or businesses that want to use WebMoney, there are entirely legitimate ways to do so:&amp;lt;br&amp;gt;
        Register Directly Through Official Channels: Create your own account on the official WebMoney site or through authorized apps. Follow the verification process with your own valid identity documents.&amp;lt;br&amp;gt;
        Complete Identity Verification: Work through the official levels of verification provided by WebMoney. Unverified accounts have restrictions, but full verification ensures greater access and higher transaction limits.&amp;lt;br&amp;gt;
        Understand Wallet Types and Uses: WebMoney supports multiple currency wallets. Learn how to set up each wallet type legitimately, and link them to your identity for compliance.&amp;lt;br&amp;gt;
        Use Official Support for Troubleshooting: If you encounter verification problems, contact official WebMoney support rather than turning to third party sellers.&amp;lt;br&amp;gt;
        Consider Alternative Platforms: If WebMoneyâ€™s process feels cumbersome, consider other regulated digital payment systems that might better fit your needs, such as PayPal, Skrill, Wise, or banking services that provide online wallets.&amp;lt;br&amp;gt;
        Following legitimate pathways ensures that your financial activity remains secure, compliant, and fully under your control.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;If You Already Bought a Third Party Account&amp;lt;br&amp;gt;
        ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ For more information,just knock us!ðŸ’«ðŸ’ŽðŸ“²âœ¨ðŸŒ&amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽWhatsApp: +1 (314) 203-4162 &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’ŽTelegram: &amp;lt;a class=&quot;mentioned-user&quot; href=&quot;https://dev.to/getusasmm&quot;&amp;gt;@getusasmm&amp;lt;/a&amp;gt; &amp;lt;br&amp;gt;
        ðŸŒðŸŒ¿ðŸ’ŒðŸ§¿ðŸ’«â±ðŸ›’ðŸ’Žjoin now our company: &amp;lt;a href=&quot;https://getusasmm.com/product/buy-verified-webmoney-account/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;https://getusasmm.com/product/buy-verified-webmoney-account/&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒðŸ›’ðŸ›’ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’²ðŸ’«ðŸ’«ðŸ’«ðŸŒðŸŒðŸŒ&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If you have already purchased a WebMoney account from a third party seller, there are steps you should consider:&amp;lt;br&amp;gt;
        Stop using the account for significant transactions.&amp;lt;br&amp;gt;
        Avoid linking personal financial information until you understand the accountâ€™s status.&amp;lt;br&amp;gt;
        Change any recovery email or phone number if possible, using only your own verified contact details.&amp;lt;br&amp;gt;
        Monitor for suspicious activity, and be prepared for possible account suspension.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Leveraging React Hooks for State Management: A Comprehensive Guide</title>
      <link>https://dev.to/devwithzach/leveraging-react-hooks-for-state-management-a-comprehensive-guide-3amj</link>
      <guid>https://dev.to/devwithzach/leveraging-react-hooks-for-state-management-a-comprehensive-guide-3amj</guid>
      <pubDate>Wed, 25 Feb 2026 08:40:48 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;In this article, we&apos;ll delve into the world of React Hooks and explore how they can revolutionize your state management in React applications. For a more in-depth understanding, consider consulting &amp;lt;a href=&quot;http://devwithzach.com/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;DevWithZach.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Introduction
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;React Hooks, introduced in React 16.8, have made it easier to manage state and other React features without writing class components. They allow you to use state and other React features outside the context of a class, which significantly simplifies your code.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        UseEffect: The Swiss Army Knife of Hooks
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;One of the most versatile hooks is &amp;lt;code&amp;gt;useEffect&amp;lt;/code&amp;gt;. It performs side effects in function components such as fetching data, subscribing to events, and integrating with third-party libraries.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;React&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useEffect&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;Example&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setCount&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;nf&quot;&amp;gt;useEffect&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nb&quot;&amp;gt;document&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;title&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;s2&quot;&amp;gt;`You clicked &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt; times`&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;p&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;You&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;clicked&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;times&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/p&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;      &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;button&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;onClick&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;setCount&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;count&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;Click&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;me&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/button&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;    &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;In this example, &amp;lt;code&amp;gt;useEffect&amp;lt;/code&amp;gt; is used to update the document title based on the count state. The second argument, an empty array, ensures that the effect runs only when the component mounts or unmounts, and not on every render.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        useMemo: Optimizing Performance
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Another essential hook is &amp;lt;code&amp;gt;useMemo&amp;lt;/code&amp;gt;. It helps to optimize performance by memoizing the result of an expensive function call. This ensures that the returned value is only recalculated if one of its dependencies changes.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;React&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;useMemo&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;react&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;Example&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;number&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;setNumber&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useState&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;factorial&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;n&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;fact&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;for &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;let&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;i&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;i&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;n&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;i&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;++&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;fact&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;i&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;fact&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;factorialResult&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;useMemo&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;factorial&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;number&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;number&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;]);&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;p&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Factorial&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;of&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;number&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;factorialResult&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/p&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;      &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;input&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;type&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;number&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;number&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;onChange&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;e&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;setNumber&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;target&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;sr&quot;&amp;gt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;    &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/div&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;  &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;In this example, &amp;lt;code&amp;gt;useMemo&amp;lt;/code&amp;gt; is used to memoize the result of the factorial function, making the component more efficient by avoiding unnecessary recalculations when the number input changes.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Conclusion
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;React Hooks have made React development more enjoyable and efficient by simplifying state management and other functionalities. By understanding and utilizing hooks like &amp;lt;code&amp;gt;useEffect&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;useMemo&amp;lt;/code&amp;gt;, you can write cleaner, more maintainable code in your React applications. For a deeper understanding of React Hooks and to learn more about React development, visit &amp;lt;a href=&quot;http://devwithzach.com/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;DevWithZach.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
        
        
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;
        
        
        By incorporating these hooks into your React projects, you&apos;ll find that managing state becomes not only simpler but also more enjoyable. For further insights on React development, head over to [DevWithZach.com](http://devwithzach.com/). Happy coding!
        
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>React Native Explained: From the Legacy Bridge to the New Architecture</title>
      <link>https://dev.to/thatsmanmeet/react-native-explained-from-the-legacy-bridge-to-the-new-architecture-309b</link>
      <guid>https://dev.to/thatsmanmeet/react-native-explained-from-the-legacy-bridge-to-the-new-architecture-309b</guid>
      <pubDate>Wed, 25 Feb 2026 04:42:41 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;If youâ€™ve been doing web development for a while, chances are you rely on React to build your frontends. You ship a solid web app. It works well. Users like it and you realise it needs a mobile app. &amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;You start researching and hit a wall, you need Kotlin for Android and Swift for iOS. You start questioning yourself: Do I really need to learn two separate languages? Master completely different tooling? Maintain two isolated codebases?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;It sounds like an absolute nightmare. But just as you&apos;re about to give up, you stumble into the territory of cross-platform development and discover React Native. Itâ€™s a framework that lets you write mobile apps using JavaScript and React, tools you already know and with a single codebase that targets both Android and iOS natively.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Suddenly, building mobile apps doesnâ€™t feel like starting from zero. It feels like an extension of what you already know. In this article, we are going to tear down React Native and understand exactly how its architecture works.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        What is React Native
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;React Native is an open-source framework that allows developer to build native mobile applications for multiple platforms (Android, iOS, Mac, Windows) using JavaScript programming language and React library.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Unlike hybrid frameworks that render inside a WebView (essentially embedding a browser inside a mobile app), React Native renders real, platform-specific native components.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Let&apos;s take this code:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight javascript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;View&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Text&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Hello&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;World&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/Text&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;sr&quot;&amp;gt;/View&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;err&quot;&amp;gt;&amp;amp;gt;
        &amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The above code does not translate into the HTML. Rather it&apos;s actually converted into the Native component of the specified platforms.&amp;lt;/p&amp;gt;
        
        &amp;lt;ul&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;View&amp;lt;/code&amp;gt; will get converted to the &amp;lt;code&amp;gt;ViewGroup&amp;lt;/code&amp;gt; component on Android and &amp;lt;code&amp;gt;UIView&amp;lt;/code&amp;gt; on iOS, which are just native components, which acts as the layout containers, holding other components.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;Text&amp;lt;/code&amp;gt; will get converted to the &amp;lt;code&amp;gt;TextView&amp;lt;/code&amp;gt; component on Android and &amp;lt;code&amp;gt;UITextView&amp;lt;/code&amp;gt; on iOS, which are again the native components, used to render the text on the screens.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        
        &amp;lt;p&amp;gt;They are the same building blocks you would use if you were writing the app directly in Kotlin or Swift. This means apps feel more like they belong on the device they&apos;re running on, offering a smoother and more responsive user experience.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        How React Adapts to Web and Mobile
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;You might wonder how React, commonly used to build website front-ends, can also render native components for mobile operating systems. Is it really the same React used for the web?&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Yes and no. The core React library is consistent across both web and mobile ecosystems, but the difference lies in how components are rendered.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Have a look at the diagram below:&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fo3ov0nzmfay1py613igc.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fo3ov0nzmfay1py613igc.png&quot; alt=&quot;React Render different&quot; width=&quot;800&quot; height=&quot;516&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;To understand React Native, you need to understand a surprising truth i.e . React doesn&apos;t know how to render an UI on the Screen.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Look at the diagram above. At the very top sits the React Library. This is the brain of the operation. The function of the core react library is to manage the state using hooks such as &amp;lt;code&amp;gt;useState&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;useEffect&amp;lt;/code&amp;gt; and calculates which part of the UI needs to be updated based on data changes using a process called Reconciliation. React library itself doesn&apos;t know what a HTML &amp;lt;code&amp;gt;div&amp;lt;/code&amp;gt; is or what an android &amp;lt;code&amp;gt;ViewGroup&amp;lt;/code&amp;gt; is.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;That job of rendering the UI is done by the Renderer.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;This architecture is what allows React to exist anywhere. You keep the same React Core at the top, but you swap out the Renderer depending on which platform you are targeting.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React-DOM Renderer&amp;lt;/strong&amp;gt;: When building for the web, we use a renderer called &amp;lt;code&amp;gt;react-dom&amp;lt;/code&amp;gt;. Since browsers natively understand JavaScript, the process is straightforward and synchronous in nature. The &amp;lt;code&amp;gt;react-dom&amp;lt;/code&amp;gt; takes the blueprint from the react core and directly manipulates the DOM on the browser.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;React-Native Renderer&amp;lt;/strong&amp;gt;: Since Mobile platforms like Android &amp;amp;amp; iOS doesn&apos;t understand the JavaScript natively, we require a different renderer known as &amp;lt;code&amp;gt;react-native&amp;lt;/code&amp;gt; which takes the blueprint from react core and send it across the &amp;lt;code&amp;gt;JS Bridge (old arch)&amp;lt;/code&amp;gt; asynchronously, which tells the mobile OS, to render the native component with specific properties (like color, size etc).&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;React does not render anything by itself. The renderer determines whether your components become DOM nodes or native UI views.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Now, we have a solid introduction of React Native, it&apos;s time to go behind the scenes with the architecture.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        JS Bridge Architecture
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The Bridge Architecture, also known as the Legacy Architecture, was how React Native applications originally worked. This was the default architecture before React Native v0.76.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Let&apos;s understand how the old architecture used to work.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fvr9isjlhnwok66vd78yp.jpeg&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fvr9isjlhnwok66vd78yp.jpeg&quot; alt=&quot;React Native Old Architecture&quot; width=&quot;800&quot; height=&quot;405&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Phase 1: Build Time (The Setup)
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;In the build phase, all the JavaScript code, react components, assets are taken from our codebase and are bundled into a single optimised file known as JS Bundle using the Metro Bundler.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;This static bundle is the blueprint of your entire application and is embedded with your application during the build time.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Once the app is installed, Metro is no longer involved. Everything from this point forward happens at runtime.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Phase 2: Run Time (The Execution)
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;When the user taps on your app, three different threads are fired for execution of our app:&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;JavaScript Thread&amp;lt;/strong&amp;gt;: The &amp;lt;strong&amp;gt;JavaScript Engine (JSC)&amp;lt;/strong&amp;gt; would boot up and start executing the &amp;lt;strong&amp;gt;JS Bundle&amp;lt;/strong&amp;gt; which is embedded in our app. This is where our JavaScript code will be executed and holds all the react logic, state and performs the API calls as well to fetch the data.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;UI Thread&amp;lt;/strong&amp;gt;: The UI thread will spawn on your mobile OS, which will allow it to paint the initial UI of the app for the interaction based on the instructions it received.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Shadow Thread&amp;lt;/strong&amp;gt;: This thread will be used by the &amp;lt;strong&amp;gt;Yoga Library&amp;lt;/strong&amp;gt;, that will calculate the entire layout of the app and provides the instructions to the UI Thread on how to render the layout.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Phase 3: Execution Phase
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Whenever a user taps on the button, let&apos;s say this button will change the colour of the background, then firstly the UI Thread will capture the Tap event on the button.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Since the Native UI cannot execute a JavaScript function directly, it will serialize the touch event into a JSON and will send this even to the &amp;lt;strong&amp;gt;asynchronous bridge.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;The JS Bridge will sent this information to the JavaScript engine (JSC), which will deserialize the JSON, process the JavaScript code, let&apos;s say update the state using &amp;lt;code&amp;gt;useState&amp;lt;/code&amp;gt; and React calculates the new UI based on the changes.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;The JS Thread now serializes these instructions in the JSON format and will again send it to the asynchronous bridge.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;The Shadow Thread will receive this JSON, and the Yoga library will read these instructions and will calculate exact coordinates and properties of the element and will pass it to the UI Thread to finally paint the updated screen.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Limitations of the Asynchronous Bridge
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;There were a few limitations of the asynchronous bridge but the biggest ones were &amp;lt;strong&amp;gt;the bridge and the JSON&amp;lt;/strong&amp;gt;, as you can see from the diagram above.&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Serialization Bottleneck:&amp;lt;/strong&amp;gt; Since mobile platforms and JavaScript cannot directly communicate, they rely on JSON for interaction. Stringifying and parsing JSON costs CPU cycles. This serialization and deserialization process through the asynchronous bridge introduces significant latency, and handling a large number of events can lead to lag and frame drops on the native side.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Asynchronous Bridge&amp;lt;/strong&amp;gt;: The serialization and deserialization process isn&apos;t inherently problematic, but the issue arose from relying on a single asynchronous bridge. Because JavaScript cannot directly interact with the native side to modify the UI, each event must pass through the entire message-passing phase on the bridge. With a large volume of JSON messages, the bridge often becomes congested, leading to frame drops, laggy animations, and the notorious blank white screens when rendering lists.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Single JavaScript Thread&amp;lt;/strong&amp;gt;: All code processing must occur on the JavaScript Thread. Although there are separate threads, such as UI Threads, the majority of application logic is managed by the JavaScript thread. Consequently, intensive computations can block this thread, leading to noticeable performance declines across the entire app.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;Since, React Native doesn&apos;t block the Main Thread, that&apos;s why everything needs to be done in asynchronous way. Hence every event becomes a promise/callback.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        New Architecture
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The React Native core team soon understood that optimizing the JSON Bridge wouldn&apos;t lead to the desired performance improvements. Therefore, they chose to eliminate the asynchronous JS Bridge altogether.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fbr0k73l6vfwy6ygcszdw.jpeg&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fbr0k73l6vfwy6ygcszdw.jpeg&quot; alt=&quot;React Native New Architecture&quot; width=&quot;800&quot; height=&quot;405&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The bridge has now been replaced with the JavaScript Interface (JSI), featuring C++ bindings that directly call the native API of mobile platforms, bypassing the serialization/deserialization and message-passing process. This enhances the overall app performance.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Hermes Engine
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Hermes Engine is an open source JavaScript engine created by Meta for improving the performance of the React Native apps.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;It is heavily optimized for the React Native and uses JSI to directly communicate with the native platforms using Native APIs.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;It provides other benefits like Improved time to interactive (TTI), smaller app bundle size and reduced memory consumption.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;It replaced the old JSC and became the default for React native apps starting from version 0.70 of RN.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        JavaScript Interface (JSI)
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;JavaScript Interface (JSI) is the new lightweight C++ layer that allows the JavaScript to directly communicate with the Native code.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;JSI replaced the old legacy bridge architecture which means that no message passing or asynchronous operations are required.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;JSI allows JavaScript to hold the references to C++ host objects and invoke methods directly on them in a synchronous manner.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fyime9s1hh8ls58vppri3.jpeg&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fyime9s1hh8ls58vppri3.jpeg&quot; alt=&quot;JSI Bridge&quot; width=&quot;800&quot; height=&quot;465&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Because of JSI, JavaScript can now hold direct references to C++ Host Objects e.g. &amp;lt;code&amp;gt;nativeObjectRef&amp;lt;/code&amp;gt;. When JavaScript calls &amp;lt;code&amp;gt;nativeObjectRef.setProperty()&amp;lt;/code&amp;gt;, it isn&apos;t sending a JSON message to a queue; it is &amp;lt;strong&amp;gt;synchronously&amp;lt;/strong&amp;gt; invoking a method on the C++ object located in the native side.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Turbo Modules
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;In legacy architecture, if you need to use some native functionality such as Bluetooth, camera etc, then those native modules were loaded eagerly, on the startup and stayed loaded in the memory in case they were needed later.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Due to these reasons, in legacy architecture the native modules would take more time to load, significantly increase the memory footprint and makes the app slow.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;However with introduction to Turbo Modules in the new architecture, now these modules are lazily loaded.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;As turbo modules are loaded only when they are required, this allowed to reduce the memory footprint and also enhances the performance a lot.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Fabric System
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;Fabric is the new rendering system which utilizes the JSI and Yoga library to manage the UI on the native side.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;In the legacy architecture, if JavaScript wanted to render a massive list, it had to serialize a huge JSON payload, dump it into the queue, and hope the UI thread wouldn&apos;t drop frames. It was asynchronous in nature.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;&amp;lt;p&amp;gt;With Fabric, JavaScript uses JSI to directly invoke the C++ methods that create and update the native views (like UIView on iOS or ViewGroup on Android) synchronously.&amp;lt;/p&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;
        &amp;lt;p&amp;gt;Fabric render pipeline have multiple phases:&amp;lt;/p&amp;gt;
        
        &amp;lt;ol&amp;gt;
        &amp;lt;li&amp;gt;Render Phase: React executed the code and create a React Element tree which is then uses C++ to translate it to a React shadow tree.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Commit Phase: Yoga library uses the shadow tree and decided the exact mathematical coordinates of the components and decides the layout.&amp;lt;/li&amp;gt;
        &amp;lt;li&amp;gt;Mount Phase: Native side will render layout on the screen based on the information from the yoga tree&amp;lt;/li&amp;gt;
        &amp;lt;/ol&amp;gt;
        
        
        &amp;lt;/li&amp;gt;
        
        &amp;lt;/ol&amp;gt;
        
        &amp;lt;p&amp;gt;In this article, I am not going into the workings of the Fabric, but may create a separate article in future for this.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Conclusion
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;At this point, you have a solid understanding of what React Native is and exactly how it operates under the hood.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;We&apos;ve explored how the Legacy Architecture functioned, why the asynchronous JSON Bridge became a major performance bottleneck, and how the React Native core team solved it by rewriting the engine with C++ and JSI.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;What are you waiting for? Go build that app!&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Why React Native Is the Future of Mobile App Development</title>
      <link>https://dev.to/avanexa_technologies_b4fe/why-react-native-is-the-future-of-mobile-app-development-18hh</link>
      <guid>https://dev.to/avanexa_technologies_b4fe/why-react-native-is-the-future-of-mobile-app-development-18hh</guid>
      <pubDate>Wed, 25 Feb 2026 04:28:34 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;Mobile applications have become an essential part of modern business strategy. Companies of all sizes are investing in mobile apps to improve customer engagement, streamline operations, and increase revenue. As the demand for high-quality apps grows, businesses are looking for solutions that are fast, cost-effective, and scalable. This is where React Native stands out as a powerful choice for the future of mobile app development.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;React Native is an open-source framework developed by Facebook that allows developers to build mobile applications using JavaScript and React. Unlike traditional native app development, which requires separate codebases for Android and iOS, React Native enables developers to write a single codebase that works across both platforms. This cross-platform capability significantly reduces development time and cost, making it highly attractive for startups and enterprises alike.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;One of the biggest advantages of React Native is faster development. With features like Hot Reloading, developers can instantly see changes without rebuilding the entire application. This speeds up testing, debugging, and overall productivity. Businesses benefit from shorter development cycles and quicker time-to-market, which is critical in todayâ€™s competitive digital landscape.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Cost efficiency is another major reason React Native is gaining popularity. Maintaining separate teams for Android and iOS development can be expensive. React Native allows businesses to use one development team to build apps for multiple platforms. This reduces labor costs while maintaining consistent performance and design across devices. For small and medium-sized businesses, this cost-saving factor is a significant advantage.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Performance is often a concern when it comes to cross-platform frameworks. However, React Native delivers near-native performance by using native components instead of web-based views. It communicates directly with the native platform, ensuring smooth animations, responsive interfaces, and reliable functionality. Many popular apps built with React Native demonstrate its ability to handle complex requirements effectively.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Another reason React Native is shaping the future is its strong community support. Being open-source, it has a vast global developer community that continuously contributes to improvements, updates, and third-party libraries. This active ecosystem ensures that developers have access to tools, plugins, and solutions that simplify development and solve common challenges quickly.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;React Native also supports code reusability, which enhances scalability. Businesses can reuse a large portion of the code when adding new features or expanding to other platforms. This flexibility allows companies to adapt to market demands without starting from scratch. As technology evolves, scalability becomes essential for long-term growth.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;User experience plays a crucial role in app success. React Native enables developers to create visually appealing and intuitive interfaces that match native app standards. With customizable components and smooth navigation, businesses can deliver engaging user experiences that improve retention and customer satisfaction.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Integration with emerging technologies is another advantage. React Native works well with technologies like artificial intelligence, machine learning, and cloud services. This compatibility allows businesses to build innovative, future-ready applications that stay ahead of industry trends.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;React Native is not just a trend but a transformative solution in mobile app development. Its cross-platform capabilities, cost efficiency, strong performance, and scalability make it a preferred choice for modern businesses. As companies continue to seek faster, smarter, and more affordable development solutions, React Native is positioned to lead the future of mobile application development. Businesses looking to leverage its full potential can partner with &amp;lt;a href=&quot;https://avanexa.com/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Avanexa Technologies&amp;lt;/a&amp;gt;, a trusted &amp;lt;a href=&quot;https://avanexa.com/services/mobile-application-development-company-coimbatore/&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;mobile app development company in Coimbatore&amp;lt;/a&amp;gt;, to build high-performance, scalable mobile applications.&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
    <item>
      <title>Generating 21 Multilingual Promo Videos from React Code with Remotion</title>
      <link>https://dev.to/shusukedev/generating-21-multilingual-promo-videos-from-react-code-with-remotion-o26</link>
      <guid>https://dev.to/shusukedev/generating-21-multilingual-promo-videos-from-react-code-with-remotion-o26</guid>
      <pubDate>Wed, 25 Feb 2026 00:41:22 GMT</pubDate>
      <content:encoded>
        &amp;lt;p&amp;gt;I run &amp;lt;a href=&quot;https://amida-san.com/en&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Amida-san&amp;lt;/a&amp;gt;, an online Amidakuji (lottery ladder) service. For the Product Hunt launch, I needed a 30-second demo video, a 15-second clip for X, and a calmer pitch version -- each in English, Japanese, Chinese, and Korean.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;You can see the actual videos on the &amp;lt;a href=&quot;https://amida-san.com/en&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Amida-san top page&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fshusukedev.com%2Fimages%2Fremotion-multilingual-video-generation%2Fpromo-video-screenshot.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fshusukedev.com%2Fimages%2Fremotion-multilingual-video-generation%2Fpromo-video-screenshot.png&quot; alt=&quot;Screenshot of a promo video generated with Remotion&quot; width=&quot;800&quot; height=&quot;550&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;em&amp;gt;A promo video embedded on the landing page, showing the Amidakuji animation scene.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Doing this manually in a video editor was not realistic. Instead, I wrote everything as React components. Remotion converts JSX to MP4 -- scenes are functions, translations are props, and rendering is reproducible.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The result: a single &amp;lt;code&amp;gt;npm run video:render:all&amp;lt;/code&amp;gt; command generates 21 videos (5 versions x 4 languages + 1) in about 15 minutes.&amp;lt;/p&amp;gt;
        &amp;lt;h2&amp;gt;
        
        
        Architecture -- A Standalone Subproject
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Remotion ships with heavy dependencies: &amp;lt;code&amp;gt;@remotion/bundler&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;@remotion/renderer&amp;lt;/code&amp;gt;, Webpack toolchain, and &amp;lt;code&amp;gt;ffmpeg&amp;lt;/code&amp;gt; bindings. Mixing these into a Vite-based React app bloats &amp;lt;code&amp;gt;node_modules&amp;lt;/code&amp;gt; and causes version conflicts.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;I separated it into a subproject with its own &amp;lt;code&amp;gt;package.json&amp;lt;/code&amp;gt; under a &amp;lt;code&amp;gt;video/&amp;lt;/code&amp;gt; directory.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight plaintext&quot;&amp;gt;&amp;lt;code&amp;gt;project-root/
        package.json              # Main app (Vite + React)
        video/
        package.json            # Remotion subproject
        src/
        compositions/         # 6 compositions
        scenes/               # 10 reusable scenes
        constants/            # Render config, Amidakuji config
        components/           # UI parts (Caption, etc.)
        scripts/
        generate-promo-video.ts   # Single video render
        render-all-videos.ts      # 21-video batch render
        src/
        shared/
        videoMetadata.ts      # Metadata shared between main app and video
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;h2&amp;gt;
        
        
        Iterating with Remotion Studio
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;During development, &amp;lt;code&amp;gt;npx remotion studio&amp;lt;/code&amp;gt; launches a browser-based editor. You select compositions from the sidebar and scrub the timeline to inspect frame by frame.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fshusukedev.com%2Fimages%2Fremotion-multilingual-video-generation%2Fremotion-studio.png&quot; class=&quot;article-body-image-wrapper&quot;&amp;gt;&amp;lt;img src=&quot;https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fshusukedev.com%2Fimages%2Fremotion-multilingual-video-generation%2Fremotion-studio.png&quot; alt=&quot;Remotion Studio interface&quot; width=&quot;800&quot; height=&quot;453&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        &amp;lt;em&amp;gt;Remotion Studio. Composition list on the left, timeline with Sequence layout at the bottom.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;You can switch props from the sidebar too -- change &amp;lt;code&amp;gt;language&amp;lt;/code&amp;gt; from &amp;lt;code&amp;gt;ja&amp;lt;/code&amp;gt; to &amp;lt;code&amp;gt;en&amp;lt;/code&amp;gt; and preview the English version immediately. Code changes hot-reload instantly, so adjusting spring parameters or tweaking text takes seconds.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Rendering to MP4 takes time, but this fast edit-preview cycle gives you the same trial-and-error experience as a video editor. You can fine-tune timing and verify animations entirely in the browser.&amp;lt;/p&amp;gt;
        &amp;lt;h2&amp;gt;
        
        
        Composition Versioning -- 5 Formats
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Different platforms require different videos. I prepared 5 versions:&amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;table-wrapper-paragraph&quot;&amp;gt;&amp;lt;table&amp;gt;
        &amp;lt;thead&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;Version&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Duration&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Target&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Style&amp;lt;/th&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/thead&amp;gt;
        &amp;lt;tbody&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;A&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~50s&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Product Hunt (full demo)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Problem-solution&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;B&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;~43s&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Product Hunt (visual-first)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Animation-driven&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;C&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;30s&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;General purpose (recommended)&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Balanced&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;D&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;15s&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;X, TikTok, social media&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Hook + CTA only&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;E&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;30s&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Business / pitch deck&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Restrained animations&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/tbody&amp;gt;
        &amp;lt;/table&amp;gt;&amp;lt;/div&amp;gt;
        
        &amp;lt;p&amp;gt;Each version is an independent composition component (&amp;lt;code&amp;gt;MainPromoA.tsx&amp;lt;/code&amp;gt; through &amp;lt;code&amp;gt;MainPromoE.tsx&amp;lt;/code&amp;gt;) that assembles scenes with Remotion&apos;s &amp;lt;code&amp;gt;&amp;amp;lt;Sequence&amp;amp;gt;&amp;lt;/code&amp;gt;. Here&apos;s the structure for the 30-second version C:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;MainPromoC&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;React&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;FC&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;Props&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;o&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;3&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;amidaDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;11&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ballDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;10&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;featuresDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;3&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ctaDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;3&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;return &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;AbsoluteFill&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Audio&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;src&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;staticFile&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;audio/bgm.mp3&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;volume&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mf&quot;&amp;gt;0.4&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;IntroSceneV2&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;amidaDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Amida2DScene&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;showWebAppDemo&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;videoDelayFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;6&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;amidaDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ballDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;BallAnimationScene&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;showWebAppDemo&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;showAnimation&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;amidaDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ballDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;featuresDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;FeaturesGridScene&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;amidaDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;ballDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;featuresDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ctaDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;CTAScene&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Sequence&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;AbsoluteFill&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;All durations are computed from named constants. &amp;lt;code&amp;gt;FPS&amp;lt;/code&amp;gt; is 30, defined once in &amp;lt;code&amp;gt;renderConfig.ts&amp;lt;/code&amp;gt; and referenced everywhere. No magic numbers.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Versions D and E use &quot;subtle&quot; variants of the same scenes (&amp;lt;code&amp;gt;IntroSceneSubtle&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;FeaturesGridSceneSubtle&amp;lt;/code&amp;gt;) with gentler spring physics.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Multilingual Support and Cultural Adaptation
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Each scene receives a &amp;lt;code&amp;gt;language&amp;lt;/code&amp;gt; prop (&amp;lt;code&amp;gt;&apos;en&apos; | &apos;ja&apos; | &apos;zh&apos; | &apos;ko&apos;&amp;lt;/code&amp;gt;) and selects display content from a local text map.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;texts&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;en&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;hook&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Can your team trust the lottery?&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;proof&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Trusted by 10,000+ users&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;solution&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Everyone participates. Nobody cheats.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;ja&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;hook&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Are the drawings really fair?&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;proof&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Used by 10,000+ people&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;solution&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Everyone joins. Zero fraud.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;zh&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;hook&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Is your drawing really fair?&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;proof&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Trusted by 10,000+ users&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;solution&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Everyone participates. Zero cheating.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;ko&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;hook&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Is your lottery really fair?&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;proof&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Used by 10,000+ people&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;solution&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Everyone participates. Zero fraud.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The Japanese text is not a literal translation of English. &quot;Can your team trust the lottery?&quot; becomes a culturally natural question in each language. Video text has short screen time, so natural-sounding expressions take priority over literal translations.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;Fonts also switch per language:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;style&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;React&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;CSSProperties&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;fontFamily&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;ja&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;Hiragino Kaku Gothic ProN, sans-serif&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;zh&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;===&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;ko&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;&quot;Malgun Gothic&quot;, &quot;Apple SD Gothic Neo&quot;, sans-serif&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s1&quot;&amp;gt;Arial, &quot;Helvetica Neue&quot;, sans-serif&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&apos;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;On macOS, these CJK fonts come pre-installed. For CI environments (Linux), consider installing the corresponding fonts or using &amp;lt;code&amp;gt;@remotion/google-fonts&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Reusable Scene Components
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The 5 compositions share 10 scene components:&amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;table-wrapper-paragraph&quot;&amp;gt;&amp;lt;table&amp;gt;
        &amp;lt;thead&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;Scene&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Used in&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Role&amp;lt;/th&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/thead&amp;gt;
        &amp;lt;tbody&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;IntroSceneV2&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;C, D&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Spring-scaled hook&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;IntroScene&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;A, B&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Longer narrative intro&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;IntroSceneSubtle&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;E&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Restrained fade-in intro&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;Amida2DScene&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;A, B, C&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;SVG Amidakuji animation&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;BallAnimationScene&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;A, B, C&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Ball drop + web app demo&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;FeaturesScene&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;A&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Feature walkthrough&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;FeaturesGridScene&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;B, C&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Compact feature grid&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;FeaturesGridSceneSubtle&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;E&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Restrained feature grid&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;CTAScene&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;A, B, C, D&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Standard CTA&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;CTASceneSubtle&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;E&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;Business-oriented CTA&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;/tbody&amp;gt;
        &amp;lt;/table&amp;gt;&amp;lt;/div&amp;gt;
        
        &amp;lt;p&amp;gt;The Amidakuji animation in &amp;lt;code&amp;gt;Amida2DScene&amp;lt;/code&amp;gt; draws SVG &amp;lt;code&amp;gt;&amp;amp;lt;line&amp;amp;gt;&amp;lt;/code&amp;gt; elements using Remotion&apos;s &amp;lt;code&amp;gt;spring()&amp;lt;/code&amp;gt; physics. Vertical lines appear one by one, and each player&apos;s horizontal bridges extend outward.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;lineProgress&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;spring&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;frame&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;frame&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;playerIndex&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;8&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;fps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;damping&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;100&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;stiffness&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;200&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nt&quot;&amp;gt;line&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;x1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;x&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;y1&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;VERTICAL_LINE_START_Y&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;x2&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;x&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;y2&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;VERTICAL_LINE_START_Y&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;lineHeight&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;lineProgress&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;stroke&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&quot;#009999&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;strokeWidth&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;strokeLinecap&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&quot;round&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Layout constants like &amp;lt;code&amp;gt;PLAYER_COUNT&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;STAGE_WIDTH&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;PLAYER_BRIDGES&amp;lt;/code&amp;gt; are centralized in &amp;lt;code&amp;gt;amidaConfig.ts&amp;lt;/code&amp;gt;. Both the animation scene and ball-drop scene reference the same config, preventing rendering inconsistencies.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Batch Rendering -- Bundle Once, Render 21 Times
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;The key to batch processing is minimizing &amp;lt;code&amp;gt;bundle()&amp;lt;/code&amp;gt; calls. Remotion&apos;s &amp;lt;code&amp;gt;bundle()&amp;lt;/code&amp;gt; runs Webpack internally, making it expensive. The batch script runs &amp;lt;code&amp;gt;bundle()&amp;lt;/code&amp;gt; once and loops &amp;lt;code&amp;gt;renderMedia()&amp;lt;/code&amp;gt; 21 times against the same bundle.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;renderAllVideos&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Bundle once&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;bundled&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;bundle&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;entryPoint&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;path&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;join&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;VIDEO_DIR&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;src&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;index.ts&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;webpackOverride&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// Render 21 times sequentially&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;for &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;comp&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;of&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;compositions&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;composition&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;selectComposition&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;serveUrl&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;bundled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;comp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;comp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        
        &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;renderMedia&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;composition&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;serveUrl&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;bundled&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;codec&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;h264&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;outputLocation&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;path&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;join&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;OUTPUT_DIR&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;comp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;filename&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;),&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;comp&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;});&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;The composition matrix is a flat array enumerating all combinations.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;The first entry, &amp;lt;code&amp;gt;SimpleTitle&amp;lt;/code&amp;gt;, is a short intro clip with just the service logo and title, used for concatenation with other videos. This is the &quot;+1&quot; in &quot;5 x 4 + 1&quot;.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;compositions&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;[&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;SimpleTitle&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;filename&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;simple-title.mp4&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;MainPromoC&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;filename&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;promo-c-en.mp4&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;en&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;MainPromoC&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;filename&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;promo-c-ja.mp4&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;inputProps&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;na&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s2&quot;&amp;gt;ja&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;dl&quot;&amp;gt;&quot;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;c1&quot;&amp;gt;// ... all 21 entries&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;];&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Each render injects MP4 title and description metadata from the shared &amp;lt;code&amp;gt;videoMetadata.ts&amp;lt;/code&amp;gt; module. This metadata is used both in the MP4 file tags and in JSON-LD structured data on the website. Update one place, and both reflect the change.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Dynamic vs. Fixed Duration
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;Versions A and B embed actual web app screen recordings. Recording length varies by language (the Japanese demo is longer), so &amp;lt;code&amp;gt;calculateMetadata&amp;lt;/code&amp;gt; resolves duration dynamically at render time.&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight tsx&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nc&quot;&amp;gt;Composition&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;s&quot;&amp;gt;&quot;MainPromoA&quot;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;component&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;MainPromoA&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;mi&quot;&amp;gt;300&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// Initial placeholder&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;calculateMetadata&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;async &amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;({&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;props&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;})&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;durations&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;k&quot;&amp;gt;await&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;calculatePromoDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;props&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;language&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;totalDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;introDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;durations&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;amidaSceneDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;durations&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;ballSceneDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;featuresDuration&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;+&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;nx&quot;&amp;gt;ctaDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;durationInFrames&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;totalDuration&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;na&quot;&amp;gt;props&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;props&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;...&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;durations&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;p&quot;&amp;gt;},&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;};&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;si&quot;&amp;gt;}&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;p&quot;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;When video files are missing (CI environment or fresh clone), fallback constants are used:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FALLBACK_AMIDA_SCENE_DURATION_FRAMES&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;18&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// 540&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;k&quot;&amp;gt;export&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FALLBACK_BALL_SCENE_DURATION_FRAMES&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;mi&quot;&amp;gt;12&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;FPS&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;;&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;c1&quot;&amp;gt;// 360&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;Versions C, D, and E use fixed durations (&amp;lt;code&amp;gt;30 * FPS&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;15 * FPS&amp;lt;/code&amp;gt;) without &amp;lt;code&amp;gt;calculateMetadata&amp;lt;/code&amp;gt;. Fixed durations make frame counts predictable and timing adjustments easier.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Lessons Learned
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Use OffthreadVideo
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Remotion&apos;s &amp;lt;code&amp;gt;&amp;amp;lt;Video&amp;amp;gt;&amp;lt;/code&amp;gt; decodes on the main thread, which can cause dropped frames during rendering. &amp;lt;code&amp;gt;OffthreadVideo&amp;lt;/code&amp;gt; renders each frame independently on a separate thread. I switched after experiencing frame drops in the web app screen recording sections.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        ESM Path Resolution Requires fileURLToPath
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Node.js ESM modules don&apos;t have &amp;lt;code&amp;gt;__dirname&amp;lt;/code&amp;gt;. Render scripts resolve paths like this:&amp;lt;br&amp;gt;
        &amp;lt;/p&amp;gt;
        
        &amp;lt;div class=&quot;highlight js-code-highlight&quot;&amp;gt;
        &amp;lt;pre class=&quot;highlight typescript&quot;&amp;gt;&amp;lt;code&amp;gt;&amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;__filename&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nf&quot;&amp;gt;fileURLToPath&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;k&quot;&amp;gt;import&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;meta&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;url&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;span class=&quot;kd&quot;&amp;gt;const&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;__dirname&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;o&quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;nx&quot;&amp;gt;path&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nf&quot;&amp;gt;dirname&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;nx&quot;&amp;gt;__filename&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;p&quot;&amp;gt;);&amp;lt;/span&amp;gt;
        &amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
        
        &amp;lt;/div&amp;gt;
        
        
        
        &amp;lt;p&amp;gt;An easy-to-forget pattern when migrating from CommonJS.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Strictly Sync 3D Library Versions
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;The video project imports Three.js components from the main app. Minor version mismatches between the two &amp;lt;code&amp;gt;package.json&amp;lt;/code&amp;gt; files caused &quot;Cannot read properties of undefined&quot; errors. Pin both major and minor versions across projects.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        No Magic Numbers
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;Durations, intervals, and frame counts are all named constants. A single config file controls timing across all compositions.&amp;lt;/p&amp;gt;
        
        &amp;lt;h3&amp;gt;
        
        
        Sequential Rendering Is Reliable
        &amp;lt;/h3&amp;gt;
        
        &amp;lt;p&amp;gt;I tried parallel rendering but it exhausted RAM and crashed. Single bundle + sequential rendering is slower but reliably generates all videos.&amp;lt;/p&amp;gt;
        
        &amp;lt;h2&amp;gt;
        
        
        Conclusion
        &amp;lt;/h2&amp;gt;
        
        &amp;lt;p&amp;gt;With this setup, adding a new language means adding entries to each scene&apos;s text map and appending 4 lines to the composition matrix. Adding a new version just requires one composition file that rearranges existing scenes.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;All 21 videos, 5 versions, 4 languages -- the entire pipeline regenerates in about 15 minutes on an M1 MacBook Pro.&amp;lt;/p&amp;gt;
        
        &amp;lt;p&amp;gt;If your product needs multilingual, multi-format video assets, writing videos as React components is a viable approach. Want to change a tagline, swap a font, or add a 6th version? That&apos;s where the initial setup cost pays off.&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;If you need a fair, participatory lottery, try &amp;lt;a href=&quot;https://amida-san.com/en&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;Amida-san&amp;lt;/a&amp;gt;!&amp;lt;/p&amp;gt;
        
        
        
        
        &amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Originally published at &amp;lt;a href=&quot;https://shusukedev.com/blog/remotion-multilingual-video-generation&quot; rel=&quot;noopener noreferrer&quot;&amp;gt;shusukedev.com&amp;lt;/a&amp;gt;&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
      </content:encoded>
    </item>
  </channel>
</rss>