[
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "RAG Recall vs Precision: A Practical Diagnostic Guide for Reliable Retrieval",
    "partialText": "&lt;h1&gt;\n  \n  \n  RAG Recall vs Precision: A Practical Diagnostic Guide for Reliable Retrieval\n&lt;/h1&gt;\n\n&lt;p&gt;Building reliable Retrieval-Augmented Generation (RAG) systems isnâ€™t just about retrieving &lt;em&gt;something&lt;/em&gt; â€” itâ€™s about retrieving the &lt;strong&gt;right information efficiently&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;Two of the most misunderstood metrics in RAG quality are &lt;strong&gt;recall&lt;/strong&gt; and &lt;strong&gt;precision&lt;/strong&gt;. This post breaks down their real meaning in RAG systems and introduces a &lt;strong&gt;practical diagnostic framework&lt;/strong&gt; to identify where your pipeline is actually failing â€” before you blindly increase &lt;code&gt;k&lt;/code&gt; or stack more rerankers.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What Recall and Precision Really Mean in RAG\n&lt;/h2&gt;\n\n&lt;h3&gt;\n  \n  \n  ğŸ”¹ Recall in RAG\n&lt;/h3&gt;\n\n&lt;p&gt;Recall answers the question:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Did the retriever successfully find the document (or chunk) that contains the correct answer?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;High recall means the correct source exists somewhere in the candidate set.&lt;/p&gt;\n\n&lt;p&gt;If recall is low, it means:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Your embeddings may not represent the content well&lt;/li&gt;\n&lt;li&gt;Query formulation may be weak&lt;/li&gt;\n&lt;li&gt;Chunking strategy may be flawed&lt;/li&gt;\n&lt;li&gt;Indexing configuration might be suboptimal&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;In short: &lt;strong&gt;the truth never entered the system.&lt;/strong&gt;&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  ğŸ”¹ Precision in RAG\n&lt;/h3&gt;\n\n&lt;p&gt;Precision answers a different question:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;How much of the retrieved context is actually relevant?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;If you retrieve 20 chunks but only 3 are relevant, precision is low.&lt;/p&gt;\n\n&lt;p&gt;Low precision causes:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Context dilution&lt;/li&gt;\n&lt;li&gt;Contradictory information&lt;/li&gt;\n&lt;li&gt;Higher hallucination risk&lt;/li&gt;\n&lt;li&gt;Unnecessary token cost&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;In RAG, precision is critical because LLMs are sensitive to noisy context.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Core Problem: Same Symptom, Different Root Causes\n&lt;/h2&gt;\n\n&lt;p&gt;Bad answer quality does not automatically mean bad retrieval.&lt;/p&gt;\n\n&lt;p&gt;You must determine whether the failure comes from:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;âŒ Low recall (missing the correct source)&lt;/li&gt;\n&lt;li&gt;âŒ Low precision (too much irrelevant noise)&lt;/li&gt;\n&lt;li&gt;âŒ Selection failure (correct doc retrieved but not passed to the model)&lt;/li&gt;\n&lt;li&gt;âŒ Generation failure (retrieval was fine, model reasoning failed)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Without diagnosis, tuning becomes guesswork.&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  A Practical RAG Diagnostic Framework\n&lt;/h1&gt;\n\n&lt;p&gt;This workflow can be applied to real production logs in under 30 minutes.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 1 â€” Define the Ground Truth\n&lt;/h2&gt;\n\n&lt;p&gt;For a failed query:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Identify the correct source document or chunk.&lt;/li&gt;\n&lt;li&gt;Confirm where the answer actually exists.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;This becomes your evaluation reference.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 2 â€” Candidate Recall Check (Top N Retrieval)\n&lt;/h2&gt;\n\n&lt;p&gt;Retrieve a larger candidate set (e.g., Top 50).&lt;/p&gt;\n\n&lt;p&gt;Ask:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Is the correct source present anywhere in this candidate set?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h3&gt;\n  \n  \n  If NO â†’ You Have a Recall Problem\n&lt;/h3&gt;\n\n&lt;p&gt;Focus on:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Embeddings&lt;/li&gt;\n&lt;li&gt;Hybrid search&lt;/li&gt;\n&lt;li&gt;Query expansion&lt;/li&gt;\n&lt;li&gt;Chunking strategy&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  If YES â†’ Move to Step 3\n&lt;/h3&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 3 â€” Selection Recall Check\n&lt;/h2&gt;\n\n&lt;p&gt;Now check what was actually passed to the model.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Was the correct source included in the final prompt context?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h3&gt;\n  \n  \n  If NO â†’ Selection / Reranking Issue\n&lt;/h3&gt;\n\n&lt;p&gt;Problems may include:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Reranker scoring errors&lt;/li&gt;\n&lt;li&gt;Context window limits&lt;/li&gt;\n&lt;li&gt;Poor ranking logic&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  If YES â†’ Move to Step 4\n&lt;/h3&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 4 â€” Precision Check (Noise Ratio)\n&lt;/h2&gt;\n\n&lt;p&gt;Evaluate the final prompt context:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;How many chunks are relevant?&lt;/li&gt;\n&lt;li&gt;How many are noise?&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;If the context contains large amounts of irrelevant or conflicting information:&lt;/p&gt;\n\n&lt;p&gt;â†’ You have a &lt;strong&gt;precision problem&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;Even if recall is high, low precision can destroy answer quality.&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  Diagnostic Matrix\n&lt;/h1&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Candidate Recall&lt;/th&gt;\n&lt;th&gt;Precision&lt;/th&gt;\n&lt;th&gt;Likely Root Cause&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;Low&lt;/td&gt;\n&lt;td&gt;â€”&lt;/td&gt;\n&lt;td&gt;Retrieval failure&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;High&lt;/td&gt;\n&lt;td&gt;Low&lt;/td&gt;\n&lt;td&gt;Context noise / poor filtering&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;High&lt;/td&gt;\n&lt;td&gt;High&lt;/td&gt;\n&lt;td&gt;Likely generator or reasoning issue&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n&lt;p&gt;This matrix prevents wasted optimization effort.&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  Why Increasing &lt;code&gt;k&lt;/code&gt; Is Usually the Wrong Fix\n&lt;/h1&gt;\n\n&lt;p&gt;A common reaction to failure is:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;â€œLetâ€™s just increase Top-k.â€&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;This may improve recall slightly, but it often:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Reduces precision&lt;/li&gt;\n&lt;li&gt;Increases token cost&lt;/li&gt;\n&lt;li&gt;Adds irrelevant context&lt;/li&gt;\n&lt;li&gt;Confuses the model&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Smart RAG systems optimize &lt;em&gt;signal&lt;/em&gt;, not volume.&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  Targeted Fixes Based on Diagnosis\n&lt;/h1&gt;\n\n&lt;h2&gt;\n  \n  \n  If Recall Is Low\n&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Improve embedding model&lt;/li&gt;\n&lt;li&gt;Introduce hybrid retrieval (vector + keyword)&lt;/li&gt;\n&lt;li&gt;Improve chunking granularity&lt;/li&gt;\n&lt;li&gt;Apply query rewriting or expansion&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  If Selection Recall Is Low\n&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Improve reranker quality&lt;/li&gt;\n&lt;li&gt;Adjust ranking thresholds&lt;/li&gt;\n&lt;li&gt;Improve context budget allocation&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  If Precision Is Low\n&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Limit context size&lt;/li&gt;\n&lt;li&gt;Add confidence thresholds&lt;/li&gt;\n&lt;li&gt;Remove contradictory sources&lt;/li&gt;\n&lt;li&gt;Apply post-retrieval filtering&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  Key Takeaway\n&lt;/h1&gt;\n\n&lt;p&gt;Recall and precision are not interchangeable â€” and confusing them leads to wasted time and unstable RAG systems.&lt;/p&gt;\n\n&lt;p&gt;Before tuning:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Check if the correct source was retrieved.&lt;/li&gt;\n&lt;li&gt;Check if it was selected.&lt;/li&gt;\n&lt;li&gt;Measure how much noise entered the prompt.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Reliable RAG is not about retrieving more.&lt;br&gt;\nItâ€™s about retrieving &lt;strong&gt;correctly and cleanly&lt;/strong&gt;.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;If you're building internal copilots, enterprise assistants, or customer-facing AI systems, this diagnostic framework will save you weeks of blind optimization.&lt;/p&gt;",
    "date": "2026-02-18T15:41:34.000Z",
    "url": "https://dev.to/optyxstack/rag-recall-vs-precision-a-practical-diagnostic-guide-for-reliable-retrieval-26oh"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "MongoDB at Scale: Common Anti Patterns That Silently Kill Performance",
    "partialText": "&lt;blockquote&gt;\n&lt;p&gt;Is your MongoDB app running slow? The problem might not be your code, but how your database is set up. MongoDB is very flexible, but this can sometimes lead to big performance issues if you don't use it right. This article will explain common MongoDB problems and give you smart ways to fix them, so your apps can be fast and handle a lot of users.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h2&gt;\n  \n  \n  The Good and Bad of MongoDB's Flexibility\n&lt;/h2&gt;\n\n&lt;p&gt;MongoDB lets you build apps quickly because its data structure is easy to change. But this freedom can also hide problems. If you treat MongoDB like a traditional SQL database, you'll run into issues like making too many small requests (N+1 queries), scanning huge amounts of data, and using complicated data processing steps that slow everything down. To truly master MongoDB, you need to understand how it works inside and design your data and queries to match its strengths.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Common Performance Problems and How to Solve Them\n&lt;/h2&gt;\n\n&lt;h3&gt;\n  \n  \n  1. The N+1 Query Problem: A Hidden Performance Killer\n&lt;/h3&gt;\n\n&lt;p&gt;The N+1 query problem happens when your app first gets a list of main items, and then for &lt;em&gt;each&lt;/em&gt; of those items, it makes a separate request to get related details (the \"N\" queries). This means your app talks to the database too much, which wastes time and makes the database work harder.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Imagine you have &lt;code&gt;orders&lt;/code&gt; and &lt;code&gt;customers&lt;/code&gt; collections. To show a list of orders with customer names, a common mistake is:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight jsx\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// 1. Get all orders (the \"+1\" query)&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;orders&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;db&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;collection&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;orders&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;find&lt;/span&gt;&lt;span class=\"p\"&gt;().&lt;/span&gt;&lt;span class=\"nf\"&gt;toArray&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// 2. For each order, get its customer (the \"N\" queries)&lt;/span&gt;\n&lt;span class=\"k\"&gt;for &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;order&lt;/span&gt; &lt;span class=\"k\"&gt;of&lt;/span&gt; &lt;span class=\"nx\"&gt;orders&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;order&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;customer&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;db&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;collection&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;customers&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;findOne&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt; &lt;span class=\"na\"&gt;_id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;order&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;customerId&lt;/span&gt; &lt;span class=\"p\"&gt;});&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;If you have 100 orders, this runs 101 queries. Each of those 100 customer queries might have to scan through the whole &lt;code&gt;customers&lt;/code&gt; collection if you don't have the right index, making things even slower.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Smart Solutions:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Keep Related Data Together (Embedding):&lt;/strong&gt; If data is often used together and doesn't change much, put it directly inside the main document. For example, put the customer's name and key details right into the &lt;code&gt;order&lt;/code&gt; document. This means you only need one request to get all the info.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Batching Requests:&lt;/strong&gt; If you can't embed data, gather all the IDs you need and ask for them in one go. Instead of 100 separate requests for customers, make one request asking for all 100 customer IDs at once. This saves a lot of back-and-forth communication.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Copying Data (Denormalization):&lt;/strong&gt; Sometimes, it's faster to copy a little bit of data (like a customer's name) into many places. This makes reading data super fast because you don't need to look up other documents. You trade a bit of extra work when writing data for much faster reading.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  2. The High Cost of Scanning Millions of Documents\n&lt;/h3&gt;\n\n&lt;p&gt;When MongoDB can't use an index to find data, it has to read every single document in a collection. This is called a &lt;code&gt;COLLSCAN&lt;/code&gt; (collection scan). If your collection has millions of documents, reading all of them takes a very long time, uses a lot of your computer's power, and makes your app feel very slow. In systems with many servers (sharded clusters), this problem gets even worse because it has to scan across all of them.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Smart Solutions:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Good Indexing Strategy:&lt;/strong&gt; Indexes are like a book's table of contents. They help MongoDB find data quickly. Create indexes on all fields you search by, sort by, or use in &lt;code&gt;$lookup&lt;/code&gt; operations. For searches that use multiple fields, create &lt;strong&gt;compound indexes&lt;/strong&gt; (indexes on several fields). Also, try to make &lt;strong&gt;covered queries&lt;/strong&gt;, where all the data needed for a query is found directly in the index, so MongoDB doesn't even need to look at the main documents.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Choose Fields Carefully for Indexes:&lt;/strong&gt; Put indexes on fields that have many different values (high cardinality) and are good at narrowing down search results. Avoid indexing fields with only a few different values unless they are part of a compound index that helps a lot.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Partial Indexes:&lt;/strong&gt; If only some of your documents have a certain field, or if you only care about a specific group of documents, you can use &lt;strong&gt;partial indexes&lt;/strong&gt;. These indexes are smaller and faster because they only cover a part of your collection.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;TTL Indexes:&lt;/strong&gt; For data that expires (like old logs), &lt;strong&gt;TTL indexes&lt;/strong&gt; automatically delete old documents. This keeps your collections from getting too big and helps queries stay fast.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Use &lt;code&gt;explain()&lt;/code&gt; to See What's Happening:&lt;/strong&gt; Use &lt;code&gt;db.collection.explain(\"executionStats\")&lt;/code&gt; to understand how your queries are running. Look for &lt;code&gt;COLLSCAN&lt;/code&gt; (bad!), and check &lt;code&gt;totalKeysExamined&lt;/code&gt; (how many index entries it looked at) versus &lt;code&gt;totalDocsExamined&lt;/code&gt; (how many documents it looked at). If &lt;code&gt;totalDocsExamined&lt;/code&gt; is much higher than the number of results you get, your index isn't working well.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  3. The &lt;code&gt;$lookup&lt;/code&gt; (Join) Cost: A Tricky Balance\n&lt;/h3&gt;\n\n&lt;p&gt;MongoDB's &lt;code&gt;$lookup&lt;/code&gt; feature lets you combine data from different collections, similar to a &lt;code&gt;JOIN&lt;/code&gt; in SQL. It's powerful, but it's not a magic bullet. Each &lt;code&gt;$lookup&lt;/code&gt; step uses up resources and can slow things down, especially with large amounts of data or if you don't have the right indexes.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Smart Solutions:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Index the Joined Fields:&lt;/strong&gt; Always make sure the fields you use to connect collections in &lt;code&gt;$lookup&lt;/code&gt; (the &lt;code&gt;localField&lt;/code&gt; and &lt;code&gt;foreignField&lt;/code&gt;) have indexes. This helps MongoDB find matching documents quickly.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Use &lt;code&gt;$lookup&lt;/code&gt; Less Often:&lt;/strong&gt; Don't use &lt;code&gt;$lookup&lt;/code&gt; for every connection between data. If you often need related data together, embedding it is usually better. Use &lt;code&gt;$lookup&lt;/code&gt; only when embedding isn't practical, like for very large related data or complex many-to-many relationships.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Watch Memory Use:&lt;/strong&gt; &lt;code&gt;$lookup&lt;/code&gt; operations can use a lot of memory. If they use too much, MongoDB might have to write temporary data to disk, which is very slow. Keep an eye on memory usage and consider changing &lt;code&gt;aggregationMemoryLimitMb&lt;/code&gt; if needed, or simplify your query.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  4. The Aggregation Pipeline Trap: Powerful but Dangerous\n&lt;/h3&gt;\n\n&lt;p&gt;MongoDB's aggregation framework is great for complex data tasks. But if you build long, complicated pipelines (sequences of operations), they can become very slow. Each step in the pipeline processes the results of the previous one, so one slow step early on can make the whole pipeline crawl.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Smart Solutions:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Keep Pipelines Simple:&lt;/strong&gt; Avoid making pipelines too long or complex. Break down big tasks into smaller ones, or do some of the data processing in your application code.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Order Steps Smartly:&lt;/strong&gt; The order of steps in your pipeline matters a lot. Always use &lt;code&gt;$match&lt;/code&gt; (filter) and &lt;code&gt;$project&lt;/code&gt; (choose specific fields) early. This reduces the amount of data that later, more expensive steps have to process.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;&lt;code&gt;$unwind&lt;/code&gt; with Caution:&lt;/strong&gt; The &lt;code&gt;$unwind&lt;/code&gt; step creates a separate document for each item in an array. If your arrays are very large, this can create a huge number of documents, using up a lot of memory and slowing things down. Look for other ways to handle arrays if &lt;code&gt;$unwind&lt;/code&gt; is too slow.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Index for &lt;code&gt;$group&lt;/code&gt;:&lt;/strong&gt; If you use &lt;code&gt;$group&lt;/code&gt; to combine documents, make sure the field you're grouping by (&lt;code&gt;_id&lt;/code&gt;) is indexed. This helps MongoDB group documents efficiently.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Watch Memory (Again):&lt;/strong&gt; Many aggregation steps can use a lot of memory and spill to disk. Use &lt;code&gt;explain()&lt;/code&gt; to check how much memory and disk space your pipelines are using. For very large tasks, consider doing some processing outside of MongoDB, like with Apache Spark.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  How to Keep MongoDB Fast: A Developer's Guide\n&lt;/h2&gt;\n\n&lt;p&gt;Making MongoDB fast for big applications is an ongoing effort. It means always thinking about how you design your data, how you use indexes, and how you write your queries. You need to constantly check how your database is performing and make changes.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Always Check for Slow Queries:&lt;/strong&gt; Turn on the database profiler (&lt;code&gt;db.setProfilingLevel(1)&lt;/code&gt;) to find queries that are taking too long. Look at the results to see which queries are run often, take a long time, or look at too many documents.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Monitor Your Database:&lt;/strong&gt; Use tools like MongoDB Cloud Manager or Ops Manager to watch important numbers like how many operations are happening, memory use, CPU use, and how fast data is copied between servers. Pay attention to how much data is being read from and written to disk.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Sharding for Huge Data:&lt;/strong&gt; For extremely large amounts of data, you need to split it across many servers (sharding). But choosing the wrong way to split your data can create problems like some servers being overloaded while others are idle. Pick a sharding key that spreads data evenly and works well with your common queries.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Tune Your Hardware:&lt;/strong&gt; Make sure your servers have enough CPU, RAM, and fast storage (SSDs). Also, adjust MongoDB settings (like &lt;code&gt;wiredTigerCacheSizeGB&lt;/code&gt;) to match how your app uses the database.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  In Short\n&lt;/h2&gt;\n\n&lt;p&gt;To make MongoDB perform well at an advanced level, you need to deeply understand how it works. It's about smart data design, careful indexing, and writing efficient queries. By avoiding common mistakes and using these advanced tips, you can build strong, fast, and scalable applications that handle heavy use with ease.&lt;/p&gt;",
    "date": "2026-02-18T15:41:18.000Z",
    "url": "https://dev.to/mhmd_zbib/mongodb-at-scale-common-anti-patterns-that-silently-kill-performance-jci"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "STREAM API IN JAVA",
    "partialText": "&lt;h1&gt;\n  \n  \n  â“ &lt;code&gt;numbers.stream()&lt;/code&gt; sabse pehle kyu likhte hain?\n&lt;/h1&gt;\n\n&lt;h2&gt;\n  \n  \n  ğŸ”· Simple Answer\n&lt;/h2&gt;\n\n&lt;p&gt;Kyuki:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Stream operations sirf &lt;strong&gt;Stream object&lt;/strong&gt; par hi lagte hain,&lt;br&gt;\nList par directly nahi.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  ğŸ” Thoda Deep Samjho\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;code&gt;numbers&lt;/code&gt; kya hai?&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;Integer&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;numbers&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Arrays&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;asList&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"o\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;3&lt;/span&gt;&lt;span class=\"o\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"o\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;5&lt;/span&gt;&lt;span class=\"o\"&gt;);&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Ye ek &lt;strong&gt;List&lt;/strong&gt; object hai.&lt;/p&gt;\n\n&lt;p&gt;List ke paas methods hote hain:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;add()&lt;/li&gt;\n&lt;li&gt;remove()&lt;/li&gt;\n&lt;li&gt;size()&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;But List ke paas &lt;code&gt;filter()&lt;/code&gt; method nahi hota âŒ&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  ğŸ”¥ &lt;code&gt;filter()&lt;/code&gt; kiske paas hota hai?\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;code&gt;Stream&lt;/code&gt; ke paas.&lt;/p&gt;\n\n&lt;p&gt;Isliye pehle:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;numbers&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Ye List ko convert karta hai â†’ &lt;strong&gt;Stream me&lt;/strong&gt;&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· Real Flow\n&lt;/h1&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;List â†’ Stream â†’ Process â†’ Result\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”¥ Example Samjho\n&lt;/h1&gt;\n\n&lt;p&gt;Galat code:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;numbers&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;filter&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;%&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;);&lt;/span&gt;  &lt;span class=\"c1\"&gt;// âŒ ERROR&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Kyuki List me filter method hi nahi hai.&lt;/p&gt;\n\n&lt;p&gt;Sahi code:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;numbers&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;   &lt;span class=\"c1\"&gt;// List â†’ Stream&lt;/span&gt;\n       &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;filter&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;%&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt;\n       &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toList&lt;/span&gt;&lt;span class=\"o\"&gt;();&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· Internal Concept\n&lt;/h1&gt;\n\n&lt;p&gt;&lt;code&gt;stream()&lt;/code&gt; method defined hai:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"nc\"&gt;Collection&lt;/span&gt; &lt;span class=\"kd\"&gt;interface&lt;/span&gt; &lt;span class=\"nc\"&gt;me&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Jab tum &lt;code&gt;numbers.stream()&lt;/code&gt; likhte ho:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;JVM ek Stream object create karta hai&lt;/li&gt;\n&lt;li&gt;Data ko internally pipeline me daal deta hai&lt;/li&gt;\n&lt;li&gt;Phir tum filter/map laga sakte ho&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”¥ Example Flow Diagram\n&lt;/h1&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;numbers (List)\n   â†“\nstream()\n   â†“\nStream Object\n   â†“\nfilter()\n   â†“\ncollect()\n   â†“\nResult List\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”¥ Important Interview Point\n&lt;/h1&gt;\n\n&lt;p&gt;ğŸ‘‰ Stream ek pipeline hai&lt;br&gt;\nğŸ‘‰ Stream original data ko change nahi karta&lt;br&gt;\nğŸ‘‰ Stream ek baar use hota hai&lt;br&gt;\nğŸ‘‰ stream() source hota hai&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· Ek Real Life Example\n&lt;/h1&gt;\n\n&lt;p&gt;Socho:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;numbers&lt;/code&gt; = raw vegetables ğŸ¥•ğŸ¥¦&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;stream()&lt;/code&gt; = conveyor belt machine start&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;filter()&lt;/code&gt; = sorting machine&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;collect()&lt;/code&gt; = final packed box&lt;/p&gt;\n\n&lt;p&gt;Machine start kiye bina processing nahi hoga ğŸ˜„&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ¯ Final Clear Answer\n&lt;/h1&gt;\n\n&lt;p&gt;&lt;code&gt;numbers.stream()&lt;/code&gt; isliye sabse pehle likhte hain kyuki:&lt;/p&gt;\n\n&lt;p&gt;âœ” Stream methods List par directly available nahi hote&lt;br&gt;\nâœ” Processing Stream object par hoti hai&lt;br&gt;\nâœ” stream() source hota hai&lt;br&gt;\nâœ” Ye pipeline start karta hai&lt;/p&gt;\n\n\n\n&lt;p&gt;Agar chaho toh next main samjha sakta hoon:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Stream internally kaise kaam karta hai?&lt;/li&gt;\n&lt;li&gt;stream() vs parallelStream() difference?&lt;/li&gt;\n&lt;li&gt;stream() call karte hi kya hota hai memory me?&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h1&gt;\n  \n  \n  Tum kis level ka deep explanation chahte ho? ğŸ˜\n&lt;/h1&gt;\n\n&lt;p&gt;Main tumhe &lt;strong&gt;clear roadmap + master template&lt;/strong&gt; de raha hoon â€” jisse tum Stream API ka pura concept pakad jao ğŸ’ª&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 1ï¸âƒ£ Stream API Kya Hai?\n&lt;/h1&gt;\n\n&lt;p&gt;ğŸ‘‰ &lt;strong&gt;Stream API Java 8 me introduce hua&lt;/strong&gt;&lt;br&gt;\nPart of: &lt;code&gt;java.util.stream&lt;/code&gt; package&lt;/p&gt;\n\n&lt;p&gt;ğŸ‘‰ Stream API ka kaam hai:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Collection ke data ko functional style me process karna&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Matlab:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Filter karna&lt;/li&gt;\n&lt;li&gt;Sort karna&lt;/li&gt;\n&lt;li&gt;Map karna&lt;/li&gt;\n&lt;li&gt;Group karna&lt;/li&gt;\n&lt;li&gt;Count karna&lt;/li&gt;\n&lt;li&gt;Aggregate karna&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Without writing complex loops.&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 2ï¸âƒ£ Stream API Kyu Hai? (Why Introduced?)\n&lt;/h1&gt;\n\n&lt;p&gt;Before Java 8:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;for&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;;&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;size&lt;/span&gt;&lt;span class=\"o\"&gt;();&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;++){&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;get&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;%&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;){&lt;/span&gt;\n        &lt;span class=\"n\"&gt;result&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;add&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;get&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;));&lt;/span&gt;\n    &lt;span class=\"o\"&gt;}&lt;/span&gt;\n&lt;span class=\"o\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;âŒ Verbose&lt;br&gt;\nâŒ Complex&lt;br&gt;\nâŒ Hard to maintain&lt;/p&gt;\n\n&lt;p&gt;Stream API ne diya:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n    &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;filter&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;%&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt;\n    &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toList&lt;/span&gt;&lt;span class=\"o\"&gt;();&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;âœ… Short&lt;br&gt;\nâœ… Clean&lt;br&gt;\nâœ… Readable&lt;br&gt;\nâœ… Functional Programming Support&lt;br&gt;\nâœ… Parallel processing possible&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 3ï¸âƒ£ Stream API Kya Nahi Hai?\n&lt;/h1&gt;\n\n&lt;p&gt;âŒ It is NOT a data structure&lt;br&gt;\nâŒ It does NOT store data&lt;br&gt;\nâŒ It does NOT modify original collection&lt;/p&gt;\n\n&lt;p&gt;Stream sirf processing pipeline hai.&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 4ï¸âƒ£ Stream Ka Master Structure (Golden Template)\n&lt;/h1&gt;\n\n&lt;p&gt;Har Stream 3 part me hota hai:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;1ï¸âƒ£ Source\n2ï¸âƒ£ Intermediate Operation\n3ï¸âƒ£ Terminal Operation\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Template:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;collection&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n          &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;intermediateOperation&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n          &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;terminalOperation&lt;/span&gt;&lt;span class=\"o\"&gt;();&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Example:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;numbers&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;          &lt;span class=\"c1\"&gt;// Source&lt;/span&gt;\n       &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;filter&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;%&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt;   &lt;span class=\"c1\"&gt;// Intermediate&lt;/span&gt;\n       &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;collect&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;Collectors&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toList&lt;/span&gt;&lt;span class=\"o\"&gt;());&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Terminal&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 5ï¸âƒ£ Stream Types (Important)\n&lt;/h1&gt;\n\n&lt;h3&gt;\n  \n  \n  1ï¸âƒ£ Stream â†’ Object Stream\n&lt;/h3&gt;\n\n&lt;h3&gt;\n  \n  \n  2ï¸âƒ£ IntStream\n&lt;/h3&gt;\n\n&lt;h3&gt;\n  \n  \n  3ï¸âƒ£ LongStream\n&lt;/h3&gt;\n\n&lt;h3&gt;\n  \n  \n  4ï¸âƒ£ DoubleStream\n&lt;/h3&gt;\n\n&lt;p&gt;Primitive streams better performance dete hain.&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 6ï¸âƒ£ Intermediate Operations (Must Know List ğŸ”¥)\n&lt;/h1&gt;\n\n&lt;p&gt;Ye sab &lt;strong&gt;lazy&lt;/strong&gt; hote hain.&lt;/p&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Method&lt;/th&gt;\n&lt;th&gt;Kaam&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;filter()&lt;/td&gt;\n&lt;td&gt;condition check&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;map()&lt;/td&gt;\n&lt;td&gt;transform&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;flatMap()&lt;/td&gt;\n&lt;td&gt;flatten&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;distinct()&lt;/td&gt;\n&lt;td&gt;duplicate remove&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;sorted()&lt;/td&gt;\n&lt;td&gt;sort&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;limit()&lt;/td&gt;\n&lt;td&gt;first n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;skip()&lt;/td&gt;\n&lt;td&gt;skip n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;peek()&lt;/td&gt;\n&lt;td&gt;debug&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 7ï¸âƒ£ Terminal Operations (Must Know ğŸ”¥)\n&lt;/h1&gt;\n\n&lt;p&gt;Ye stream ko close kar dete hain.&lt;/p&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Method&lt;/th&gt;\n&lt;th&gt;Kaam&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;collect()&lt;/td&gt;\n&lt;td&gt;convert&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;forEach()&lt;/td&gt;\n&lt;td&gt;iterate&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;count()&lt;/td&gt;\n&lt;td&gt;count&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;reduce()&lt;/td&gt;\n&lt;td&gt;aggregation&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;anyMatch()&lt;/td&gt;\n&lt;td&gt;condition&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;allMatch()&lt;/td&gt;\n&lt;td&gt;condition&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;findFirst()&lt;/td&gt;\n&lt;td&gt;first element&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 8ï¸âƒ£ Most Important Concepts (Interview Level)\n&lt;/h1&gt;\n\n&lt;h2&gt;\n  \n  \n  ğŸ”¥ 1. filter()\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n    &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;filter&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;x&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;x&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt;\n    &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toList&lt;/span&gt;&lt;span class=\"o\"&gt;();&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  ğŸ”¥ 2. map()\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n    &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;map&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;x&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;x&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt;\n    &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toList&lt;/span&gt;&lt;span class=\"o\"&gt;();&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  ğŸ”¥ 3. reduce()\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;sum&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;stream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n              &lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;reduce&lt;/span&gt;&lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"o\"&gt;,&lt;/span&gt; &lt;span class=\"o\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;a&lt;/span&gt;&lt;span class=\"o\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;b&lt;/span&gt;&lt;span class=\"o\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;a&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;b&lt;/span&gt;&lt;span class=\"o\"&gt;);&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  ğŸ”¥ 4. collect() with Collectors\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"nc\"&gt;Collectors&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toList&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;span class=\"nc\"&gt;Collectors&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;toSet&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;span class=\"nc\"&gt;Collectors&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;groupingBy&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;span class=\"nc\"&gt;Collectors&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;counting&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;span class=\"nc\"&gt;Collectors&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;joining&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· 9ï¸âƒ£ Stream vs ParallelStream\n&lt;/h1&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight java\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;list&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"na\"&gt;parallelStream&lt;/span&gt;&lt;span class=\"o\"&gt;()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;âš¡ Multi-core processing&lt;br&gt;\nâš ï¸ Not always faster&lt;br&gt;\nâš ï¸ Order not guaranteed&lt;/p&gt;\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”· ğŸ”Ÿ Internal Working (Very Important)\n&lt;/h1&gt;\n\n&lt;p&gt;Stream Pipeline:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Data â†’ Stream â†’ Intermediate â†’ Terminal â†’ Result\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;ğŸ‘‰ Lazy evaluation&lt;br&gt;\nğŸ‘‰ One-time use&lt;br&gt;\nğŸ‘‰ Does not store data&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ¯ Ab Tumhe Kya Kya Padhna Padega? (Complete Roadmap)\n&lt;/h1&gt;\n\n&lt;h3&gt;\n  \n  \n  Step 1: Basic\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Lambda Expression&lt;/li&gt;\n&lt;li&gt;Functional Interface&lt;/li&gt;\n&lt;li&gt;Predicate&lt;/li&gt;\n&lt;li&gt;Function&lt;/li&gt;\n&lt;li&gt;Consumer&lt;/li&gt;\n&lt;li&gt;Supplier&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Step 2: Stream Basics\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;stream()&lt;/li&gt;\n&lt;li&gt;filter()&lt;/li&gt;\n&lt;li&gt;map()&lt;/li&gt;\n&lt;li&gt;collect()&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Step 3: Advanced\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;reduce()&lt;/li&gt;\n&lt;li&gt;groupingBy()&lt;/li&gt;\n&lt;li&gt;partitioningBy()&lt;/li&gt;\n&lt;li&gt;flatMap()&lt;/li&gt;\n&lt;li&gt;Optional class&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Step 4: Parallel Stream + Performance\n&lt;/h3&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸš€ Master Learning Strategy (How To Study)\n&lt;/h1&gt;\n\n&lt;h3&gt;\n  \n  \n  ğŸ”¥ Rule 1:\n&lt;/h3&gt;\n\n&lt;p&gt;Har concept ke 5 question solve karo.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  ğŸ”¥ Rule 2:\n&lt;/h3&gt;\n\n&lt;p&gt;Ek hi problem ko:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;for loop se karo&lt;/li&gt;\n&lt;li&gt;stream se karo&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  ğŸ”¥ Rule 3:\n&lt;/h3&gt;\n\n&lt;p&gt;Daily 30 min practice.&lt;/p&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ’ 20 Must Practice Questions\n&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Filter even numbers&lt;/li&gt;\n&lt;li&gt;Find max number&lt;/li&gt;\n&lt;li&gt;Find second highest&lt;/li&gt;\n&lt;li&gt;Count strings length &amp;gt; 5&lt;/li&gt;\n&lt;li&gt;Convert list to uppercase&lt;/li&gt;\n&lt;li&gt;Group by age&lt;/li&gt;\n&lt;li&gt;Remove duplicates&lt;/li&gt;\n&lt;li&gt;Sum of list&lt;/li&gt;\n&lt;li&gt;Find duplicate elements&lt;/li&gt;\n&lt;li&gt;Find first non-repeated character\n... etc&lt;/li&gt;\n&lt;/ol&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ“ Interview Me Puchne Wale Tough Questions\n&lt;/h1&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Difference between map and flatMap?&lt;/li&gt;\n&lt;li&gt;What is lazy evaluation?&lt;/li&gt;\n&lt;li&gt;Why stream cannot be reused?&lt;/li&gt;\n&lt;li&gt;Difference between intermediate and terminal?&lt;/li&gt;\n&lt;li&gt;What is reduce?&lt;/li&gt;\n&lt;li&gt;How groupingBy works internally?&lt;/li&gt;\n&lt;li&gt;How parallel stream works?&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h1&gt;\n  \n  \n  ğŸ”¥ Final Master Template (Yaad Karlo)\n&lt;/h1&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Stream = Functional Data Processing Pipeline\n\n1. Source\n2. Intermediate (lazy)\n3. Terminal (execute)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;",
    "date": "2026-02-18T15:41:13.000Z",
    "url": "https://dev.to/bhu_kalki/stream-api-in-java-2kl9"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Build a Container from Scratch in Go (Modern Namespaces + cgroup v2)",
    "partialText": "&lt;p&gt;So I made a container from scratch in Go with the minimum number of lines of code possible and learned various things that usually happen inside a container and that is what Docker abstracts away.&lt;/p&gt;\n\n&lt;p&gt;Although you may get other articles about the same, I wrote this because of some changes in the Linux kernel, the blogs got somewhat deprecated in terms of understanding and implementation of code.&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  What are containers?\n&lt;/h1&gt;\n\n&lt;p&gt;Let's understand what containers are. As you already might know, fundamentally, containers are \"about bundling up dependencies so we can ship code around in a repeatable, secure way.\"&lt;/p&gt;\n\n&lt;p&gt;But let's understand the underlying concepts - Namespaces, Cgroups, and Filesystem isolation that make containers what they are.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Namespaces\n&lt;/h2&gt;\n\n&lt;p&gt;Linux namespaces are a fundamental kernel feature that provides resource isolation so different sets of processes see different sets of resources.&lt;/p&gt;\n\n&lt;p&gt;Namespaces are very important, as we will see further how much we are going to use them because they're the core technologies containers are built on. So whenever you create containers with Docker or Podman, it automatically creates namespaces on your behalf.&lt;/p&gt;\n\n&lt;p&gt;Namespaces primarily are of 6 types (note that we will cover them more while coding the container, as that is how I like learning by making things so I'm not bombarding you with a lot of information firsthand):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;PID&lt;/strong&gt; - Assigns independent process IDs. The first process in a new namespace gets PID 1.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Network&lt;/strong&gt; - Provides an independent network stack via virtual ethernet pairs.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;MNT&lt;/strong&gt; - Maintains an independent list of mount points, allowing filesystem mounts/unmounts without affecting the host.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;USER&lt;/strong&gt; - Has its own user IDs and group IDs, allowing a process to have root privilege within its namespace without having it elsewhere.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;IPC&lt;/strong&gt; - Isolates interprocess communication resources like POSIX message queues.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;UTS&lt;/strong&gt; - Allows different host and domain names for different processes on the same system.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  Cgroups\n&lt;/h2&gt;\n\n&lt;p&gt;While understanding cgroups and knowing on the surface level what cgroups do is very easy it basically means control groups, it's a Linux kernel feature that limits, accounts for, and isolates the resource usage including CPU, memory, disk I/O, and network of collections of processes.&lt;/p&gt;\n\n&lt;p&gt;We can talk a lot about cgroups, but I'll stick to the basics required for implementation, and don't worry, I'll talk about it more again down further.&lt;/p&gt;\n\n&lt;p&gt;Let's name the phases of code as it will be beneficial to go one by one, understanding deeply.&lt;/p&gt;\n\n&lt;p&gt;here's the github link for full code(please give a star)- &lt;br&gt;\n&lt;a href=\"https://github.com/faizanfirdousi/container-from-scratch\" rel=\"noopener noreferrer\"&gt;https://github.com/faizanfirdousi/container-from-scratch&lt;/a&gt;&lt;/p&gt;\n&lt;h1&gt;\n  \n  \n  Phase 0\n&lt;/h1&gt;\n\n&lt;p&gt;First, let me clarify what we're doing here exactly our main goal is to create a container that is isolated from the host machine. In other words, we're building a sandboxed environment that runs a shell with its own filesystem, process namespace, and resource limits, giving it strong isolation from the host.&lt;/p&gt;\n\n&lt;p&gt;The container can be of anything. Here, for simplicity, we are going to have an Alpine Linux container as it's smaller in size and also has full components that give the feel of a whole system. At the end, we will create a container or basically a process that thinks the Alpine directory is the entire computer.&lt;/p&gt;\n\n&lt;p&gt;For that, we need to have the root filesystem of Alpine, so set this up before starting to code:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;&lt;span class=\"c\"&gt;# Download and extract Alpine Linux rootfs&lt;/span&gt;\ndocker &lt;span class=\"nb\"&gt;export&lt;/span&gt; &lt;span class=\"si\"&gt;$(&lt;/span&gt;docker create alpine&lt;span class=\"si\"&gt;)&lt;/span&gt; &lt;span class=\"nt\"&gt;-o&lt;/span&gt; alpine.tar\n&lt;span class=\"nb\"&gt;mkdir&lt;/span&gt; &lt;span class=\"nt\"&gt;-p&lt;/span&gt; /home/faizan/alpine-rootfs\n&lt;span class=\"nb\"&gt;tar&lt;/span&gt; &lt;span class=\"nt\"&gt;-xf&lt;/span&gt; alpine.tar &lt;span class=\"nt\"&gt;-C&lt;/span&gt; /home/faizan/alpine-rootfs\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;If you don't have Docker, then install it via curl. I just used it for simplicity.&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  Phase 1\n&lt;/h1&gt;\n\n&lt;p&gt;First, we're going to create a simple program that runs commands*&lt;em&gt;but it won't have any isolation yet&lt;/em&gt;*. This might seem counterintuitive, but there's a good reason: by seeing what happens without isolation, you'll truly understand what each isolation primitive does when we add it later.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;package&lt;/span&gt; &lt;span class=\"n\"&gt;main&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"s\"&gt;\"fmt\"&lt;/span&gt;\n    &lt;span class=\"s\"&gt;\"os\"&lt;/span&gt;\n    &lt;span class=\"s\"&gt;\"os/exec\"&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;main&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"nb\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"m\"&gt;2&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Fprintf&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"Usage: %s run &amp;lt;cmd&amp;gt; [args...]&lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"s\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n        &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Exit&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"m\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;switch&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;case&lt;/span&gt; &lt;span class=\"s\"&gt;\"run\"&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;\n        &lt;span class=\"n\"&gt;run&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n    &lt;span class=\"k\"&gt;default&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;\n        &lt;span class=\"nb\"&gt;panic&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Unknown command\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;run&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Printf&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Running %v&lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"s\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;exec&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Command&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;3&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Run&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"kt\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;!=&lt;/span&gt; &lt;span class=\"no\"&gt;nil&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"nb\"&gt;panic&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  What this code does\n&lt;/h2&gt;\n\n&lt;p&gt;The program starts by checking the arguments passed to it. The first argument must be &lt;code&gt;run&lt;/code&gt;, which tells our program that we want to execute a command. Everything after &lt;code&gt;run&lt;/code&gt; becomes the actual command and its arguments that we want to execute for example, &lt;code&gt;/bin/bash&lt;/code&gt; or &lt;code&gt;/bin/sh&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;When the &lt;code&gt;run&lt;/code&gt; function is called, it uses Go's &lt;code&gt;exec.Command&lt;/code&gt; to create a new process. The way this works is straightforward: &lt;code&gt;os.Args[2]&lt;/code&gt; contains the command itself (like &lt;code&gt;/bin/bash&lt;/code&gt;), and &lt;code&gt;os.Args[3:]&lt;/code&gt; contains any additional arguments you want to pass to that command. The &lt;code&gt;...&lt;/code&gt; syntax spreads those arguments out so they're passed individually to the command.&lt;/p&gt;\n\n&lt;p&gt;We then connect the standard input, output, and error streams. This is important because it allows the command to interact with your terminal naturally. You can type input and see output just like you would with any normal command. Finally, &lt;code&gt;cmd.Run()&lt;/code&gt; actually executes the command and waits for it to complete.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Test\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;go run main.go run /bin/bash\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;You should see something like this:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;Running &lt;span class=\"o\"&gt;[&lt;/span&gt;/bin/bash]\n&lt;span class=\"o\"&gt;[&lt;/span&gt;root@archlinux cfs]#\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Test if it's isolated by running commands like &lt;code&gt;ps&lt;/code&gt; and &lt;code&gt;hostname&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwqx72lsjwriw8i1oq4wa.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwqx72lsjwriw8i1oq4wa.png\" alt=\" \" width=\"508\" height=\"213\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Now let me show you what happens when I test this. Run &lt;code&gt;ps&lt;/code&gt; inside the shell and look closely at the output.&lt;/p&gt;\n\n&lt;p&gt;Notice something interesting? The PIDs are not starting from 1 like they would in a real container. Instead, you're seeing PIDs like 46628, 46629, 46669 ,these are the exact same process IDs that the host system sees. If you open another terminal window on your host and run &lt;code&gt;ps aux&lt;/code&gt; there, you'll see the exact same PID values. This proves we're sharing the same process namespace as the host.&lt;/p&gt;\n\n&lt;p&gt;Now let's check the hostname.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fsqa5gwhv12li5y81895z.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fsqa5gwhv12li5y81895z.png\" alt=\" \" width=\"800\" height=\"265\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Run &lt;code&gt;hostname&lt;/code&gt; and you'll see your machine's actual hostname. Try changing it with &lt;code&gt;sudo hostname test-container&lt;/code&gt;, then run &lt;code&gt;hostname&lt;/code&gt; again to confirm it changed. Exit the shell and check your host's hostname, it's been changed there too! We just modified the host system's hostname directly. There's no isolation barrier protecting the host from changes made inside our \"container.\"&lt;/p&gt;\n\n&lt;p&gt;The same goes for the filesystem. When you run &lt;code&gt;ls /&lt;/code&gt;, you're looking at your actual host's root directory. Any file you create in &lt;code&gt;/tmp&lt;/code&gt; will appear on the host. We're operating directly on the host system with zero separation.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Why This Matters\n&lt;/h3&gt;\n\n&lt;p&gt;What we've built right now is basically just a wrapper that executes commands, there's no containerization happening at all. But this baseline is important. In the next steps, when we add Linux namespaces, you'll see how dramatically things change. The PIDs will start from 1, hostname changes won't affect the host, and we'll have our own isolated filesystem.&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  Phase 2\n&lt;/h1&gt;\n\n&lt;p&gt;Now update the &lt;code&gt;run()&lt;/code&gt; function to look exactly like this:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;run&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Printf&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Running %v&lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"s\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n\n    &lt;span class=\"c\"&gt;// Re-exec ourselves as \"child\" inside new namespaces&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;exec&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Command&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/proc/self/exe\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nb\"&gt;append&lt;/span&gt;&lt;span class=\"p\"&gt;([]&lt;/span&gt;&lt;span class=\"kt\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"s\"&gt;\"child\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;SysProcAttr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;amp;&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;SysProcAttr&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;Cloneflags&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWUTS&lt;/span&gt; &lt;span class=\"o\"&gt;|&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWPID&lt;/span&gt; &lt;span class=\"o\"&gt;|&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWNS&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;Unshareflags&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWNS&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Run&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;And add this new &lt;code&gt;child()&lt;/code&gt; function:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;child&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Printf&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Running %v as child&lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"s\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;exec&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Command&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;3&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Sethostname&lt;/span&gt;&lt;span class=\"p\"&gt;([]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"container\"&lt;/span&gt;&lt;span class=\"p\"&gt;)))&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Run&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;!=&lt;/span&gt; &lt;span class=\"no\"&gt;nil&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Println&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Process exited:\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Let's understand what we're doing here. First, we need to create namespaces. Before that, we write this in &lt;code&gt;run()&lt;/code&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;cmd&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;exec&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Command&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/proc/self/exe\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nb\"&gt;append&lt;/span&gt;&lt;span class=\"p\"&gt;([]&lt;/span&gt;&lt;span class=\"kt\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"s\"&gt;\"child\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;This is the critical insight&lt;/strong&gt;: We're &lt;strong&gt;not&lt;/strong&gt; running &lt;code&gt;/bin/bash&lt;/code&gt; directly. Instead, we're re-executing &lt;strong&gt;our own Go program&lt;/strong&gt; (&lt;code&gt;/proc/self/exe&lt;/code&gt; is the path to our currently running binary) but with a new argument list: &lt;code&gt;[\"child\", \"/bin/bash\"]&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Why this weird self-re-execution? Because &lt;strong&gt;Linux namespaces can only be created when spawning a NEW process&lt;/strong&gt;, you cannot create namespaces for a process that's already running. So we need our code to run again, but this time &lt;strong&gt;inside fresh, isolated namespaces&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;Then we actually create the namespaces using this code:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;SysProcAttr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;amp;&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;SysProcAttr&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;Cloneflags&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWUTS&lt;/span&gt; &lt;span class=\"o\"&gt;|&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWPID&lt;/span&gt; &lt;span class=\"o\"&gt;|&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWNS&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;Unshareflags&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;CLONE_NEWNS&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;As I told you at the start of the blog, different namespaces isolate different things. What we're doing here is creating namespaces using &lt;strong&gt;Linux system calls&lt;/strong&gt;. Specifically, we're using the &lt;code&gt;clone()&lt;/code&gt; system call with special flags.&lt;/p&gt;\n\n&lt;p&gt;The system calls we're using are the &lt;code&gt;CLONE_*&lt;/code&gt; family. Each &lt;code&gt;CLONE_NEW*&lt;/code&gt; flag tells the Linux kernel: \"When you create this child process, put it in a completely separate namespace for this resource.\" Let me break down what each one does:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;CLONE_NEWUTS&lt;/code&gt;&lt;/strong&gt; creates a new UTS (Unix Time-Sharing) namespace. This isolates the hostname and domain name. With this flag, when the child process changes its hostname to \"container\", the host machine's hostname stays completely unchanged. Without this, changing the hostname inside would affect your actual host system exactly what we saw in Phase 1.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;CLONE_NEWPID&lt;/code&gt;&lt;/strong&gt; creates a new PID (Process ID) namespace. This is huge. It means the child process gets its own, completely separate process ID numbering system. Inside the container, the shell will see itself as PID 1â€”the first process, just like the init system in a real Linux boot. But from the host's perspective, that same process might be PID 15234. This is why when you run &lt;code&gt;ps aux&lt;/code&gt; in a real container, you only see the container's processes, not all the host processes.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;CLONE_NEWNS&lt;/code&gt;&lt;/strong&gt; creates a new Mount namespace. This isolates filesystem mount points. Any mounts we do inside the container (like mounting &lt;code&gt;/proc&lt;/code&gt; or &lt;code&gt;/tmp&lt;/code&gt;) won't appear on the host system, and vice versa. This is crucial for filesystem isolation.&lt;/p&gt;\n\n&lt;p&gt;The &lt;code&gt;|&lt;/code&gt; (pipe) symbol between these flags is a bitwise OR operationâ€”it's how we enable multiple namespaces at once. We're essentially saying \"create ALL THREE of these namespaces for the child process.\"&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;Unshareflags&lt;/code&gt;&lt;/strong&gt; with &lt;code&gt;CLONE_NEWNS&lt;/code&gt; is an additional safety measure. It makes the mount namespace \"unshareable\" to prevent mount propagation, basically ensuring that any filesystem changes inside the container absolutely cannot leak to the host.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Test\n&lt;/h2&gt;\n\n&lt;p&gt;Now let's test if our namespace isolation is actually working. Run your updated code:&lt;/p&gt;\n\n&lt;p&gt;You should see:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;Running &lt;span class=\"o\"&gt;[&lt;/span&gt;/bin/bash]\nRunning &lt;span class=\"o\"&gt;[&lt;/span&gt;/bin/bash] as child\n&lt;span class=\"o\"&gt;[&lt;/span&gt;root@container cfs]#\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;You will notice that the hostname in your prompt already shows &lt;code&gt;container&lt;/code&gt;â€”that's the &lt;code&gt;Sethostname&lt;/code&gt; call working.&lt;/p&gt;\n\n&lt;p&gt;Now check if hostname changes stay isolated by changing the hostname of the container and checking if the host's hostname also changed.&lt;/p&gt;\n\n&lt;p&gt;Now check the PID namespace isolation - this is interesting and important.&lt;/p&gt;\n\n&lt;p&gt;Inside the container, run:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;&lt;span class=\"nb\"&gt;echo&lt;/span&gt; &lt;span class=\"nv\"&gt;$$&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;On your host (different terminal):&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;ps aux | &lt;span class=\"nb\"&gt;grep &lt;/span&gt;bash\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fr87x4pmxrz0wgcxl544c.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fr87x4pmxrz0wgcxl544c.png\" alt=\" \" width=\"800\" height=\"253\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Same process, two different PIDs!&lt;/strong&gt; Inside the namespace it's PID 7 (can be different but a low number for you), from the host it's PID 44999. This proves PID isolation is working.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Test The /proc Problem\n&lt;/h2&gt;\n\n&lt;p&gt;Run &lt;code&gt;ps&lt;/code&gt; inside the container:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;ps aux\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;You'll see &lt;strong&gt;all the host's processes&lt;/strong&gt;â€”systemd, kthreadd, Chrome, everything. Why? Because even though we have PID namespace isolation, we're still reading the &lt;strong&gt;host's&lt;/strong&gt; &lt;code&gt;/proc&lt;/code&gt; filesystem. The &lt;code&gt;ps&lt;/code&gt; command gets its information from &lt;code&gt;/proc&lt;/code&gt;, which we haven't isolated yet.&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  Phase 3\n&lt;/h1&gt;\n\n&lt;p&gt;Update your &lt;code&gt;child()&lt;/code&gt; function to add filesystem isolation. First, add environment variables right after the &lt;code&gt;cmd&lt;/code&gt; setup:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;child&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Printf&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Running %v &lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"s\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;exec&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Command&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Args&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"m\"&gt;3&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;&lt;span class=\"o\"&gt;...&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdin&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stdout&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Stderr&lt;/span&gt;\n\n    &lt;span class=\"c\"&gt;// Add these environment variables&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Env&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"s\"&gt;\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"s\"&gt;\"HOME=/root\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"s\"&gt;\"TERM=xterm\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Sethostname&lt;/span&gt;&lt;span class=\"p\"&gt;([]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"container\"&lt;/span&gt;&lt;span class=\"p\"&gt;)))&lt;/span&gt;\n\n    &lt;span class=\"c\"&gt;// Add filesystem isolation&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Chroot&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/home/faizan/alpine-rootfs\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Chdir&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n\n    &lt;span class=\"c\"&gt;// Mount /proc filesystem&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Mount&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n\n    &lt;span class=\"c\"&gt;// Mount tmpfs at /tmp&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;MkdirAll&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"tmp\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0755&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Mount&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"tmpfs\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"tmp\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"tmpfs\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Run&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;!=&lt;/span&gt; &lt;span class=\"no\"&gt;nil&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;fmt&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Println&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"Process exited:\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"c\"&gt;// Cleanup mounts on exit&lt;/span&gt;\n    &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Unmount&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Unmount&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"tmp\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  Environment Variables\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;cmd&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Env&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"s\"&gt;\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"s\"&gt;\"HOME=/root\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"s\"&gt;\"TERM=xterm\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;This is a small but important detail. When a child process is spawned, by default it inherits the parent's environment variables, which means it would inherit your host's &lt;code&gt;PATH&lt;/code&gt;, your host's &lt;code&gt;HOME&lt;/code&gt;, all of it. That's a problem because after we do the filesystem isolation in the next step, those host paths won't even exist inside our container.&lt;/p&gt;\n\n&lt;p&gt;So we're explicitly setting a clean, minimal environment. &lt;code&gt;PATH&lt;/code&gt; tells the shell where to look for binaries. &lt;code&gt;HOME&lt;/code&gt; sets the home directory. &lt;code&gt;TERM=xterm&lt;/code&gt; makes sure terminal behavior works correctly, things like clearing the screen, arrow keys, color output. Without &lt;code&gt;TERM&lt;/code&gt;, a lot of terminal programs behave weirdly or refuse to run.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Chrooting (the important step)\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Chroot&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/home/faizan/alpine-rootfs\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Chdir&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;code&gt;chroot&lt;/code&gt; redefines what &lt;code&gt;/&lt;/code&gt; means for this process and all its children. After this call, when the shell opens &lt;code&gt;/etc/passwd&lt;/code&gt;, the kernel resolves it as &lt;code&gt;/home/faizan/alpine-rootfs/etc/passwd&lt;/code&gt;. The host filesystem becomes completely invisible. Run &lt;code&gt;ls /&lt;/code&gt; and you see Alpine's &lt;code&gt;bin&lt;/code&gt;, &lt;code&gt;etc&lt;/code&gt;, &lt;code&gt;usr&lt;/code&gt;, exactly like a real Alpine machine.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;chroot&lt;/code&gt; changes where &lt;code&gt;/&lt;/code&gt; points, but your current working directory doesn't move. So in the directory you are running the code from, you're still sitting there after the &lt;code&gt;chroot&lt;/code&gt;, that means outside the jail. From there, a process can just do &lt;code&gt;cd ../../..&lt;/code&gt; and walk right out. &lt;code&gt;os.Chdir(\"/\")&lt;/code&gt; moves you inside the jail immediately, so there's nowhere to escape to, which is perfect.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Mounting &lt;code&gt;/proc&lt;/code&gt; - Fixing What &lt;code&gt;ps&lt;/code&gt; Reads\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Mount&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"proc\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;After &lt;code&gt;chroot&lt;/code&gt;, Alpine's &lt;code&gt;/proc&lt;/code&gt; is an empty directory. The &lt;code&gt;ps&lt;/code&gt; command reads everything from &lt;code&gt;/proc/&amp;lt;pid&amp;gt;/status&lt;/code&gt; without mounting something there, &lt;code&gt;ps&lt;/code&gt; would just fail.&lt;/p&gt;\n\n&lt;p&gt;So we mount a fresh &lt;code&gt;procfs&lt;/code&gt;. The key detail: this is not a copy of the host's &lt;code&gt;/proc&lt;/code&gt;. The kernel populates it based on &lt;strong&gt;what the current PID namespace can see&lt;/strong&gt;. Since we're inside &lt;code&gt;CLONE_NEWPID&lt;/code&gt; from Phase 2, only the container's processes appear. Run &lt;code&gt;ps aux&lt;/code&gt; now and you'll only see the container's shell. The host process flood is gone. This is PID isolation and filesystem isolation finally working together.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Mounting &lt;code&gt;tmpfs&lt;/code&gt; at &lt;code&gt;/tmp&lt;/code&gt;\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;MkdirAll&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"tmp\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0755&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;syscall&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Mount&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"tmpfs\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"tmp\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"tmpfs\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;code&gt;tmpfs&lt;/code&gt; is memory-backed. Anything written to &lt;code&gt;/tmp&lt;/code&gt; inside the container lives in RAM, never touches your host's &lt;code&gt;/tmp&lt;/code&gt;, and disappears the moment the container exits. This is also why &lt;code&gt;CLONE_NEWNS&lt;/code&gt; from Phase 2 mattered. Without the mount namespace, these mounts would propagate to the host's mount table. The mount namespace is the prerequisite; these mounts are the payload.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Test\n&lt;/h2&gt;\n\n&lt;p&gt;now check everything if it's showing file system and process of the container and not of the host&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F4v5e08d8e2am1ivhu92q.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F4v5e08d8e2am1ivhu92q.png\" alt=\" \" width=\"800\" height=\"285\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  Phase 4 - Cgroups\n&lt;/h1&gt;\n\n&lt;p&gt;We now have a container with real isolation, its own filesystem, its own process tree, its own hostname. But there's still one problem: nothing stops a process inside this container from consuming all of your host's CPU, spawning thousands of processes, or eating all your RAM. A simple fork bomb inside the container would take down your entire machine.&lt;/p&gt;\n\n&lt;p&gt;This is what &lt;strong&gt;cgroups&lt;/strong&gt; (control groups) solve. While namespaces control what a process can &lt;em&gt;see&lt;/em&gt;, cgroups control what it can &lt;em&gt;use&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;So update your code with this function:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;cg&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cgroupRoot&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"s\"&gt;\"/sys/fs/cgroup/\"&lt;/span&gt;\n    &lt;span class=\"n\"&gt;cgroupName&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"s\"&gt;\"container-cgroup\"&lt;/span&gt;\n    &lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;cgroupRoot&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;cgroupName&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;cgroupRoot&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"cgroup.subtree_control\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"+pids +memory +cpu\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"m\"&gt;0644&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;MkdirAll&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0755&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"pids.max\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"20\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"memory.max\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"52428800\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"cpu.max\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"50000 100000\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"cgroup.procs\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;strconv&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Itoa&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Getpid&lt;/span&gt;&lt;span class=\"p\"&gt;())),&lt;/span&gt;\n        &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  Cgroup v2\n&lt;/h2&gt;\n\n&lt;p&gt;This is what I wrote this blog mainly for. You see, most of the blogs were based on cgroups v1, but it got changed to cgroup v2 a long time ago, so eventually the code's gotta change as well.&lt;/p&gt;\n\n&lt;p&gt;Cgroup v2 uses a &lt;strong&gt;unified hierarchy&lt;/strong&gt;. Every controllerâ€”pids, memory, cpu, lives under a single tree at &lt;code&gt;/sys/fs/cgroup/&lt;/code&gt;. This is different from v1, which had separate trees per controller, like &lt;code&gt;/sys/fs/cgroup/pids/&lt;/code&gt;, &lt;code&gt;/sys/fs/cgroup/memory/&lt;/code&gt;, and so on. If you've seen old container blogs using v1 paths, that's why they're broken on modern kernels.&lt;/p&gt;\n\n&lt;p&gt;Working with cgroups is entirely done through the filesystemâ€”you create directories, write to files. No special syscalls needed.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;cgroupRoot&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"cgroup.subtree_control\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"+pids +memory +cpu\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"m\"&gt;0644&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;First, we enable the controllers on the root cgroup. Writing &lt;code&gt;+pids +memory +cpu&lt;/code&gt; to &lt;code&gt;subtree_control&lt;/code&gt; tells the kernel to make these controllers available to child cgroups we create underneath. It's like unlocking the feature before using it.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Creating the Cgroup\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;MkdirAll&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;0755&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;This is the entire cgroup creation. You make a directory under &lt;code&gt;/sys/fs/cgroup/&lt;/code&gt; and the kernel sees it, recognizes it as a new cgroup, and automatically populates it with control files, &lt;code&gt;pids.max&lt;/code&gt;, &lt;code&gt;memory.max&lt;/code&gt;, &lt;code&gt;cpu.max&lt;/code&gt;, &lt;code&gt;cgroup.procs&lt;/code&gt;, and more. Nothing else needed.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Limits\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"pids.max\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"20\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"memory.max\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"52428800\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"cpu.max\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"50000 100000\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;pids.max&lt;/code&gt;&lt;/strong&gt; is the most immediately important one. Setting it to &lt;code&gt;20&lt;/code&gt; means the kernel will start rejecting &lt;code&gt;fork()&lt;/code&gt; and &lt;code&gt;clone()&lt;/code&gt; calls the moment the process count hits 20. A fork bomb inside the container just chokes and dies, the host is untouched.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;memory.max&lt;/code&gt;&lt;/strong&gt; is &lt;code&gt;52428800&lt;/code&gt; bytes - 50 MiB. If the container crosses this, the kernel's OOM killer steps in and kills the process that pushed it over. The host's memory is never at risk.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;cpu.max&lt;/code&gt;&lt;/strong&gt; format is &lt;code&gt;$MAX $PERIOD&lt;/code&gt; in microseconds. &lt;code&gt;50000 100000&lt;/code&gt; means: out of every 100ms window, this cgroup gets at most 50ms of CPU time, 50% of one core. A runaway CPU loop inside the container gets throttled at the kernel scheduler level. Your machine stays responsive.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Moving the Process In\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;must&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteFile&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"n\"&gt;filepath&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;containerCgroup&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"cgroup.procs\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"p\"&gt;[]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;strconv&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Itoa&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;os&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Getpid&lt;/span&gt;&lt;span class=\"p\"&gt;())),&lt;/span&gt;\n    &lt;span class=\"m\"&gt;0700&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Everything before this was just configuration. This line is what actually enforces it. Writing our PID to &lt;code&gt;cgroup.procs&lt;/code&gt; moves the current process into the cgroup. From this point, this process and every child it spawnsâ€”including the shell and everything the user runs inside, is subject to all three limits above.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Test\n&lt;/h2&gt;\n\n&lt;p&gt;Try a fork bomb inside the container:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;:&lt;span class=\"o\"&gt;(){&lt;/span&gt; :|:&amp;amp; &lt;span class=\"o\"&gt;}&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;:\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;With &lt;code&gt;pids.max = 20&lt;/code&gt;, the kernel rejects every &lt;code&gt;fork()&lt;/code&gt; past the limit. The container shell dies. Open another terminal on your host, everything is running perfectly. Without cgroups, that fork bomb would have required a hard reboot.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;That's it! You've built a real container from scratch with proper isolation using namespaces, filesystem virtualization with chroot, and resource limits with cgroups v2. This is fundamentally what Docker does under the hood, just with a lot more features, better UX, and production-grade tooling on top.&lt;/p&gt;",
    "date": "2026-02-18T15:38:24.000Z",
    "url": "https://dev.to/faizanfirdousi/build-a-container-from-scratch-in-go-modern-namespaces-cgroup-v2-5556"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Java Most Asked Stream API Coding Questions",
    "partialText": "&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Filter Even Numbers&lt;/strong&gt; &lt;/li&gt;\n&lt;/ol&gt;",
    "date": "2026-02-18T15:38:24.000Z",
    "url": "https://dev.to/bhu_kalki/java-most-asked-stream-api-coding-questions-4egi"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "I Got Lazy With My Home Networkâ€”So I Rebuilt It Properly (1/3)",
    "partialText": "&lt;blockquote&gt;\n&lt;p&gt;A few years ago I downsized from a full-size rack to... just my ISP router. Practical? Sure. Boring? Absolutely.&lt;br&gt;&lt;br&gt;\nNow I'm getting back into homelabbing, this time with mini PCs and SBCs running a multi-node Kubernetes cluster to sharpen my skills. But before I could spin up workloads, I needed to rebuild my home network with proper segmentation, dual-site connectivity to a secondary location (my backup lab location), and secure VPN access when traveling.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n\n\n\n&lt;p&gt;This 3-part series documents that rebuild:&lt;br&gt;&lt;br&gt;\n&lt;strong&gt;Part 1&lt;/strong&gt; (this post) - Got Lazy With My Home Networkâ€”So I Rebuilt It Properly&lt;br&gt;&lt;br&gt;\n&lt;strong&gt;Part 2&lt;/strong&gt; (soon) - Turning One LAN Into Five Networks: VLANs + Wiâ€‘Fi Segmentation at Home&lt;br&gt;&lt;br&gt;\n&lt;strong&gt;Part 3&lt;/strong&gt; (soon) - Making It Two Locations: A Routed WireGuard Tunnel Between My Labs&lt;/p&gt;\n\n\n\n&lt;p&gt;I tore down my old \"it mostly works\" home network and rebuilt it as a small, intentional platform: segmented VLANs, predictable addressing, and a path to a dualâ€‘site homelab connected by a siteâ€‘toâ€‘site VPN.&lt;br&gt;&lt;br&gt;\nThis post sets the context, the goals, the hardware, and the VLAN/IP plan, so Part 2 can focus on implementation without constantly stopping to explain &lt;em&gt;why&lt;/em&gt; the design looks the way it does.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  Why I tore down and rebuilt my home network\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F0rp351yv2k8j99jvzyav.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F0rp351yv2k8j99jvzyav.png\" alt=\" \" width=\"800\" height=\"457\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Back in the days, I had my home network in full control, this was the pre-IoT era. Every room had network jacks, a few access points spread around the house, and servers running inside a 42U rack cabinet with network gear blinking all night, all centralized in my office.&lt;/p&gt;\n\n&lt;p&gt;But life happens. I moved to a smaller house with no space for a full rack. Most of the equipment was donated; only a couple of computers and the cabinet itself remain, stored at my parents' house, waiting for a new life.&lt;/p&gt;\n\n&lt;p&gt;Suddenly I was using just a laptop. No more servers. The smart home \"devices\" were just lightbulbs and power plugs, all relying on the ISP router's WiFi (which, to be fair, isn't terrible). I was traveling constantly, focused on work, with no time left for hobbiesâ€”so I never really missed the gear I used to manage.&lt;/p&gt;\n\n&lt;p&gt;But slowly, the homelab interest started reclaiming its space. A Raspberry Pi here, a VPN gateway there, a NUC box... and the pitiful sight of an old Mac Mini gathering dust for years, begging to be repurposed. That's when I saw the potential: mini PCs as a Kubernetes clusterâ€”low power consumption, minimal space.&lt;/p&gt;\n\n&lt;p&gt;Then a new concern emerged: my home network was a mess. I had no sense of what was connected, and important concepts like security boundaries and reliability were nowhere to be found. My pragmatic \"mostly works\" approach had to stop. That's why I tore down everything and rebuilt my home network from scratch.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  Requirements for the \"new\" homelab era\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fgjxs663zf96nwjgmj1j5.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fgjxs663zf96nwjgmj1j5.png\" alt=\" \" width=\"800\" height=\"449\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The rebuild was driven by two practical pain points:&lt;/p&gt;\n&lt;h3&gt;\n  \n  \n  Isolation and reliability\n&lt;/h3&gt;\n\n&lt;p&gt;One misbehaving device shouldn't impact everything else, and untrusted devices shouldn't reach critical infrastructure.&lt;br&gt;&lt;br&gt;\nWhen everything shares a single broadcast domain, a chatty IoT gadget or a device stuck in a DHCP loop can degrade performance for the entire household. Worse, many consumer IoT devices have weak or outdated firmware, and guest devices are inherently untrustedâ€”without network segmentation, a compromised device on the same flat LAN can potentially reach router admin panels, NAS management interfaces, or lab VMs.&lt;br&gt;&lt;br&gt;\nSegmentation contains both reliability issues and security threats to their own VLAN, so a malfunctioning (or compromised) smart bulb doesn't slow down video calls, access management interfaces, or interfere with homelab services.&lt;/p&gt;\n&lt;h3&gt;\n  \n  \n  Future expansion\n&lt;/h3&gt;\n\n&lt;p&gt;I wanted a foundation that could later support a Kubernetesâ€‘style lab without reâ€‘addressing the entire house.&lt;br&gt;&lt;br&gt;\nWhen you start planning multi-node clusters, persistent storage backends, or service meshes, clean subnet boundaries and predictable addressing save hours of debugging routing and firewall rules.&lt;br&gt;&lt;br&gt;\nGetting the VLAN and IP scheme right now means I won't have to renumber everything when I scale from a single mini PC to a three-node cluster spanning two sites.&lt;/p&gt;\n&lt;h3&gt;\n  \n  \n  The concrete requirements\n&lt;/h3&gt;\n\n&lt;p&gt;These pain points translated into a specific set of technical requirements:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;VLANs for segmentation&lt;/strong&gt; â€“ separate networks for family, IoT, homelab, and management&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Multiple SSIDs&lt;/strong&gt; â€“ different Wi-Fi networks mapping to different VLANs, so guests and IoT devices don't share the same wireless space as trusted devices&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Site-to-site VPN&lt;/strong&gt; â€“ connecting my home network to a secondary location so both labs can communicate as if they were on the same LAN&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Point-to-site VPN&lt;/strong&gt; â€“ remote access when traveling, letting me reach any device on any VLAN from anywhere without fumbling with port forwards or exposing services to the internet&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Seamless admin access&lt;/strong&gt; â€“ as the network admin, I should be able to connect from anywhere (home, secondary location, or traveling) to every device across all VLANs without extra steps&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The goal was simple: strong boundaries for everyone else, zero friction for me.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  Hardware inventory and high-level topology\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F31af49byhmwpl68jix87.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F31af49byhmwpl68jix87.png\" alt=\" \" width=\"800\" height=\"457\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;This rebuild uses prosumer gear that's flexible enough for a homelab but doesn't require enterprise-grade budgets or complexity. Most of it I already had; a few pieces (like the Omada AP and Netgear managed switch) I added specifically for VLAN capabilities.&lt;/p&gt;\n&lt;h3&gt;\n  \n  \n  Network gear\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;At my house (Site A):&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;ISP router&lt;/strong&gt; â€“ provided by my ISP, running in \"DMZ mode\" to pass traffic to the Brume 2&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;GL.iNet Brume 2&lt;/strong&gt; â€“ the heart of the network, running OpenWrt with VLAN interfaces and acting as the WireGuard VPN server&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Netgear GS308Ev4&lt;/strong&gt; â€“ 8-port managed switch handling VLAN trunking between the Brume 2, access points, and wired devices&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;TP-Link Omada EAP610&lt;/strong&gt; â€“ Wi-Fi 6 access point with per-SSID VLAN tagging, broadcasting separate networks for family, IoT, and homelab&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;TP-Link 8-port gigabit switch&lt;/strong&gt; â€“ unmanaged switch extending wired connections to the second floor (receives a single VLAN from the Netgear trunk)&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;At a secondary location (Site B):&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;ISP router&lt;/strong&gt; â€“ their ISP-provided router&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Xiaomi Mi Router 4A Gigabit Edition&lt;/strong&gt; â€“ flashed with OpenWrt, acting as the WireGuard VPN client and routing the homelab VLAN at Site B&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;TP-Link 5-port gigabit switch&lt;/strong&gt; â€“ unmanaged switch connecting the Site B homelab devices&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;For travel:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;GL.iNet Beryl AX&lt;/strong&gt; â€“ travel router that can connect to the site-to-site VPN as a point-to-site client, giving me seamless access to both sites from anywhere&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3&gt;\n  \n  \n  Devices to connect\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Active devices:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;MacBook (my daily driver)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Lenovo ThinkPad (work machine)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Raspberry Pi 2 (small services, monitoring)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;N150 NUC box (testing Kubernetes workloads)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Family devices: desktop PCs, laptops, smartphones, smart TVs&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;IoT devices: a bunch of smart lightbulbs and power plugs&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Old devices waiting to be repurposed as homelab nodes:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;5Ã— HP G3 mini PCs (the future Kubernetes cluster)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Mac Mini 2010 (lightweight services or storage node)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;MacBook 2008 (maybe a dedicated build server or CI/CD runner)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Desktop PC with i7-7700 and 8GB RAM (heavier workloads or a hypervisor)&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;These old devices are why the dual-site setup matters: some will stay at my house, some will live at my parents' house, and the site-to-site VPN will let them connect to each other when need without extra effort.&lt;/p&gt;\n&lt;h3&gt;\n  \n  \n  High-level topology\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Site A (my house):&lt;/strong&gt;&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;ISP Router (DMZ)\n     â†“ \nGL.iNet Brume 2 (OpenWrt, VLANs, WireGuard server)\n     â†“ \nNetgear GS308Ev4 (managed switch, VLAN trunks)\n     â”œâ”€â†’ TP-Link Omada EAP610 (Wi-Fi, per-SSID VLANs) â†’ all wireless devices\n     â”œâ”€â†’ TP-Link 8-port switch (2nd floor, access mode) â†’ wired desktop PCs\n     â””â”€â†’ Raspberry Pi 2, NUC box, future HP mini PCs (direct VLAN access)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Site B (secondary location):&lt;/strong&gt;&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;ISP Router\n     â†“ \nXiaomi Router 4A (OpenWrt, WireGuard client)\n     â†“ \nTP-Link 5-port switch\n     â””â”€â†’ Old MacBook, Mac Mini, desktop PC (homelab VLAN)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Travel setup:&lt;/strong&gt;&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;GL.iNet Beryl AX (point-to-site VPN client)\n     â†“ \nConnects to Brume 2 WireGuard server\n     â†“ \nAccess to all VLANs at both Site A and Site B\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The Brume 2 acts as the central hub: it terminates the WireGuard tunnel from Site B, routes between VLANs at Site A, and allows point-to-site VPN clients (like the Beryl AX when traveling or my laptop) to reach everything. The Xiaomi at Site B initiates and keeps the tunnel alive, since it's behind NAT with no public IP or port forwarding.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Designing a VLAN and IP scheme that will scale\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7l1pzpjohj8ap8jrhyya.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F7l1pzpjohj8ap8jrhyya.png\" alt=\" \" width=\"800\" height=\"457\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Before touching any configs, I mapped out the VLAN IDs and IP ranges with three goals: make them easy to recognize, avoid collisions between sites, and leave room for growth.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  VLAN mapping\n&lt;/h3&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;VLAN ID&lt;/th&gt;\n&lt;th&gt;Subnet&lt;/th&gt;\n&lt;th&gt;Purpose&lt;/th&gt;\n&lt;th&gt;Who uses it&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;10.11.10.0/24&lt;/td&gt;\n&lt;td&gt;&lt;strong&gt;Management&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;Router admin interfaces, managed switch, AP controller&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;20&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;10.11.20.0/24&lt;/td&gt;\n&lt;td&gt;&lt;strong&gt;Family&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;Laptops, phones, tablets â€”trusted personal devices&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;30&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;10.11.30.0/24&lt;/td&gt;\n&lt;td&gt;&lt;strong&gt;Homelab&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;Raspberry Pi, NUC, HP mini PCs, any device running lab workloads&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;40&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;10.11.40.0/24&lt;/td&gt;\n&lt;td&gt;&lt;strong&gt;IoT&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;Smart lightbulbs, power plugs, other IoT gadgets with questionable firmware&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;50&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;10.11.50.0/24&lt;/td&gt;\n&lt;td&gt;&lt;strong&gt;Entertainment&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;Media devices, smart TVs, gaming consoles, streaming boxes&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n&lt;h2&gt;\n  \n  \n  Address space design\n&lt;/h2&gt;\n\n&lt;p&gt;I decided to use Class A private IP range (10.0.0.0/8) with a structured approach: the second octet represents the site, and the third octet represents the VLAN.&lt;/p&gt;\n\n&lt;p&gt;For example, &lt;code&gt;10.11.30.200&lt;/code&gt;:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;11&lt;/code&gt; identifies the site (in this case, my house)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;30&lt;/code&gt; identifies the VLAN (in this case, the homelab VLAN)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;200&lt;/code&gt; is the specific host within that network&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;This structure makes it instantly obvious where a device lives just by looking at its IP address. When I add the second site later, it will use &lt;code&gt;10.22.x.x&lt;/code&gt;, making cross-site routing and firewall rules straightforwardâ€”no subnet overlap, no NAT headaches, and clear visual distinction between locations.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Room for growth\n&lt;/h3&gt;\n\n&lt;p&gt;Each VLAN gets a full &lt;code&gt;/24&lt;/code&gt; (254 usable IPs), which is overkill for now but leaves room to grow. If the Kubernetes cluster scales to 10+ nodes across both sites, or if I add more IoT devices or guest networks, I won't need to re-subnet anythingâ€”I just add more devices to the existing VLANs.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Management isolation\n&lt;/h3&gt;\n\n&lt;p&gt;VLAN 10 is reserved for network infrastructure (router, switch, AP) and nothing else. Family devices, IoT gadgets, and even homelab workloads can't directly reach management interfaces unless firewall rules explicitly allow it. This means a compromised IoT device or a rogue VM can't start poking at the router's admin panel.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Wrapping up Part 1\n&lt;/h2&gt;\n\n&lt;p&gt;That's the foundation: the story of why I rebuilt, the requirements that drove the design, the hardware doing the work, and the VLAN/IP scheme that ties it all together.&lt;/p&gt;\n\n&lt;p&gt;In &lt;strong&gt;Part 2&lt;/strong&gt;, I'll show you how to implement this at Site A: configuring VLAN interfaces on the Brume 2, setting up VLAN trunking and access ports on the Netgear switch, mapping SSIDs to VLANs on the Omada AP, and writing the firewall rules that enforce isolation between networks.&lt;/p&gt;\n\n&lt;p&gt;In &lt;strong&gt;Part 3&lt;/strong&gt;, we'll extend this to Site B, configure the site-to-site WireGuard tunnel, and set up point-to-site VPN access so everything works seamlessly whether you're at home, at the secondary site, or halfway around the world.&lt;/p&gt;",
    "date": "2026-02-18T15:37:33.000Z",
    "url": "https://dev.to/n20amaral/i-got-lazy-with-my-home-network-so-i-rebuilt-it-properly-13-4e33"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Build AI-Powered Vue.js Apps: Integrate OpenAI API with Composition API and Pinia",
    "partialText": "&lt;p&gt;This article contains affiliate links. I may earn a commission at no extra cost to you.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;title: \"Build AI-Powered Vue.js Apps: Integrate OpenAI API with Composition API and Pinia\"&lt;br&gt;\npublished: true&lt;br&gt;\ndescription: \"Learn to build production-ready AI features in Vue 3 with proper state management, error handling, and cost optimization\"&lt;br&gt;\ntags: vue, ai, openai, javascript, tutorial&lt;/p&gt;\n&lt;h2&gt;\n  \n  \n  cover_image: &lt;a href=\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vue-ai-integration.png\" rel=\"noopener noreferrer\"&gt;https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vue-ai-integration.png&lt;/a&gt;\n&lt;/h2&gt;\n\n&lt;p&gt;AI integration is becoming essential for modern web applications, but many tutorials skip the production-ready details. Today, we'll build a smart text summarizer that demonstrates proper Vue 3 patterns, state management with Pinia, and real-world considerations like rate limiting and cost optimization.&lt;/p&gt;\n&lt;h2&gt;\n  \n  \n  What We're Building\n&lt;/h2&gt;\n\n&lt;p&gt;Our text summarizer will:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Accept long-form text input&lt;/li&gt;\n&lt;li&gt;Generate AI-powered summaries using OpenAI's API&lt;/li&gt;\n&lt;li&gt;Cache results to minimize API costs&lt;/li&gt;\n&lt;li&gt;Handle errors gracefully with retry logic&lt;/li&gt;\n&lt;li&gt;Track token usage for cost monitoring&lt;/li&gt;\n&lt;li&gt;Implement rate limiting for production use&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;\n  \n  \n  Project Setup\n&lt;/h2&gt;\n\n&lt;p&gt;First, let's create a Vue 3 project with the necessary dependencies:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;npm create vue@latest ai-text-summarizer\n&lt;span class=\"nb\"&gt;cd &lt;/span&gt;ai-text-summarizer\nnpm &lt;span class=\"nb\"&gt;install &lt;/span&gt;pinia openai axios\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Select TypeScript and Pinia when prompted during setup.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Environment Configuration\n&lt;/h2&gt;\n\n&lt;p&gt;Create a &lt;code&gt;.env&lt;/code&gt; file for your OpenAI API key:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;VITE_OPENAI_API_KEY=your_openai_api_key_here\nVITE_MAX_REQUESTS_PER_MINUTE=10\nVITE_CACHE_DURATION=3600000\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Security Note&lt;/strong&gt;: In production, never expose API keys in client-side code. Use a backend proxy instead. For this tutorial, we'll use client-side integration for simplicity.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Setting Up the OpenAI Service\n&lt;/h2&gt;\n\n&lt;p&gt;Create &lt;code&gt;src/services/openai.js&lt;/code&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"nx\"&gt;OpenAI&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;openai&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n\n&lt;span class=\"kd\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;OpenAIService&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nf\"&gt;constructor&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;client&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;new&lt;/span&gt; &lt;span class=\"nc\"&gt;OpenAI&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n      &lt;span class=\"na\"&gt;apiKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"k\"&gt;import&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;meta&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;env&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;VITE_OPENAI_API_KEY&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n      &lt;span class=\"na\"&gt;dangerouslyAllowBrowser&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kc\"&gt;true&lt;/span&gt; &lt;span class=\"c1\"&gt;// Only for demo - use backend in production&lt;/span&gt;\n    &lt;span class=\"p\"&gt;})&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;requestQueue&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;\n    &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;maxRequestsPerMinute&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;parseInt&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;meta&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;env&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;VITE_MAX_REQUESTS_PER_MINUTE&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;||&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"nf\"&gt;summarizeText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;150&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;enforceRateLimit&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;try&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;client&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;chat&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;completions&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;create&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n        &lt;span class=\"na\"&gt;model&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;gpt-3.5-turbo&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"na\"&gt;messages&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;\n          &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"na\"&gt;role&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;system&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"na\"&gt;content&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;You are a helpful assistant that creates concise, accurate summaries of text content.&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n          &lt;span class=\"p\"&gt;},&lt;/span&gt;\n          &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"na\"&gt;role&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;user&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"na\"&gt;content&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"s2\"&gt;`Please summarize the following text in &lt;/span&gt;&lt;span class=\"p\"&gt;${&lt;/span&gt;&lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"s2\"&gt; tokens or less:\\n\\n&lt;/span&gt;&lt;span class=\"p\"&gt;${&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"s2\"&gt;`&lt;/span&gt;\n          &lt;span class=\"p\"&gt;}&lt;/span&gt;\n        &lt;span class=\"p\"&gt;],&lt;/span&gt;\n        &lt;span class=\"na\"&gt;max_tokens&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"na\"&gt;temperature&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"mf\"&gt;0.3&lt;/span&gt;\n      &lt;span class=\"p\"&gt;})&lt;/span&gt;\n\n      &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"na\"&gt;summary&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;choices&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;].&lt;/span&gt;&lt;span class=\"nx\"&gt;message&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;content&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"na\"&gt;tokensUsed&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;usage&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;total_tokens&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"na\"&gt;cost&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;calculateCost&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;response&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;usage&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;total_tokens&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n      &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;catch &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"k\"&gt;throw&lt;/span&gt; &lt;span class=\"k\"&gt;new&lt;/span&gt; &lt;span class=\"nc\"&gt;Error&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s2\"&gt;`OpenAI API Error: &lt;/span&gt;&lt;span class=\"p\"&gt;${&lt;/span&gt;&lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;message&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"s2\"&gt;`&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"nf\"&gt;enforceRateLimit&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;now&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nb\"&gt;Date&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;now&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n    &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;requestQueue&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;requestQueue&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;filter&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;time&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;now&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"nx\"&gt;time&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;60000&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;requestQueue&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;length&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;maxRequestsPerMinute&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;waitTime&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;60000&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;now&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;requestQueue&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n      &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"k\"&gt;new&lt;/span&gt; &lt;span class=\"nc\"&gt;Promise&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;resolve&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nf\"&gt;setTimeout&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;resolve&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;waitTime&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;this&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;requestQueue&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;push&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;now&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"nf\"&gt;calculateCost&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;tokens&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// GPT-3.5-turbo pricing: $0.002 per 1K tokens&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;tokens&lt;/span&gt; &lt;span class=\"o\"&gt;/&lt;/span&gt; &lt;span class=\"mi\"&gt;1000&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mf\"&gt;0.002&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"k\"&gt;default&lt;/span&gt; &lt;span class=\"k\"&gt;new&lt;/span&gt; &lt;span class=\"nc\"&gt;OpenAIService&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  Pinia Store for State Management\n&lt;/h2&gt;\n\n&lt;p&gt;Create &lt;code&gt;src/stores/summarizer.js&lt;/code&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;defineStore&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;pinia&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;computed&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;vue&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"nx\"&gt;openaiService&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../services/openai&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;useSummarizerStore&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;defineStore&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;summarizer&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"c1\"&gt;// State&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;summaries&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;new&lt;/span&gt; &lt;span class=\"nc\"&gt;Map&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;isLoading&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kc\"&gt;false&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;error&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kc\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;totalTokensUsed&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;totalCost&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n  &lt;span class=\"c1\"&gt;// Cache configuration&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;cacheTimeout&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;parseInt&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;meta&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;env&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;VITE_CACHE_DURATION&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;||&lt;/span&gt; &lt;span class=\"mi\"&gt;3600000&lt;/span&gt; &lt;span class=\"c1\"&gt;// 1 hour&lt;/span&gt;\n\n  &lt;span class=\"c1\"&gt;// Computed&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;hasError&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;computed&lt;/span&gt;&lt;span class=\"p\"&gt;(()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;!==&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;formattedCost&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;computed&lt;/span&gt;&lt;span class=\"p\"&gt;(()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"s2\"&gt;`$&lt;/span&gt;&lt;span class=\"p\"&gt;${&lt;/span&gt;&lt;span class=\"nx\"&gt;totalCost&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;toFixed&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;)}&lt;/span&gt;&lt;span class=\"s2\"&gt;`&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n  &lt;span class=\"c1\"&gt;// Actions&lt;/span&gt;\n  &lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;summarizeText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;options&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{})&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;cacheKey&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;generateCacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;options&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Check cache first&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;cached&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;getCachedSummary&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cached&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;cached&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"nx\"&gt;isLoading&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;true&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;try&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;result&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;openaiService&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;summarizeText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;options&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n      &lt;span class=\"c1\"&gt;// Cache the result&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;summaries&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;set&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"p\"&gt;...&lt;/span&gt;&lt;span class=\"nx\"&gt;result&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"na\"&gt;timestamp&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;Date&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;now&lt;/span&gt;&lt;span class=\"p\"&gt;(),&lt;/span&gt;\n        &lt;span class=\"na\"&gt;originalText&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;substring&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;100&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;...&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n      &lt;span class=\"p\"&gt;})&lt;/span&gt;\n\n      &lt;span class=\"c1\"&gt;// Update usage statistics&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;totalTokensUsed&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;+=&lt;/span&gt; &lt;span class=\"nx\"&gt;result&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;tokensUsed&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;totalCost&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;+=&lt;/span&gt; &lt;span class=\"nx\"&gt;result&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;cost&lt;/span&gt;\n\n      &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;result&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;catch &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;message&lt;/span&gt;\n      &lt;span class=\"k\"&gt;throw&lt;/span&gt; &lt;span class=\"nx\"&gt;err&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;finally&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;isLoading&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;false&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;getCachedSummary&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;cached&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;summaries&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;get&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cached&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=\"nb\"&gt;Date&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;now&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"nx\"&gt;cached&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;timestamp&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"nx\"&gt;cacheTimeout&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;cached&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cached&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;summaries&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"k\"&gt;delete&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;cacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;generateCacheKey&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;options&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;textHash&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;btoa&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;substring&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;500&lt;/span&gt;&lt;span class=\"p\"&gt;)).&lt;/span&gt;&lt;span class=\"nf\"&gt;replace&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"se\"&gt;[^&lt;/span&gt;&lt;span class=\"sr\"&gt;a-zA-Z0-9&lt;/span&gt;&lt;span class=\"se\"&gt;]&lt;/span&gt;&lt;span class=\"sr\"&gt;/g&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"dl\"&gt;''&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"s2\"&gt;`&lt;/span&gt;&lt;span class=\"p\"&gt;${&lt;/span&gt;&lt;span class=\"nx\"&gt;textHash&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"s2\"&gt;_&lt;/span&gt;&lt;span class=\"p\"&gt;${&lt;/span&gt;&lt;span class=\"nx\"&gt;options&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt; &lt;span class=\"o\"&gt;||&lt;/span&gt; &lt;span class=\"mi\"&gt;150&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"s2\"&gt;`&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;clearError&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;clearCache&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;summaries&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;clear&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// State&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;summaries&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;isLoading&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;totalTokensUsed&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;totalCost&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Computed&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;hasError&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;formattedCost&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Actions&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;summarizeText&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;clearError&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;clearCache&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;})&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  Building the Summarizer Component\n&lt;/h2&gt;\n\n&lt;p&gt;Create &lt;code&gt;src/components/TextSummarizer.vue&lt;/code&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight vue\"&gt;&lt;code&gt;&lt;span class=\"nt\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"k\"&gt;template&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"text-summarizer\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"input-section\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;label&lt;/span&gt; &lt;span class=\"na\"&gt;for=&lt;/span&gt;&lt;span class=\"s\"&gt;\"text-input\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;Enter text to summarize:&lt;span class=\"nt\"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;textarea&lt;/span&gt;\n        &lt;span class=\"na\"&gt;id=&lt;/span&gt;&lt;span class=\"s\"&gt;\"text-input\"&lt;/span&gt;\n        &lt;span class=\"na\"&gt;v-model=&lt;/span&gt;&lt;span class=\"s\"&gt;\"inputText\"&lt;/span&gt;\n        &lt;span class=\"na\"&gt;placeholder=&lt;/span&gt;&lt;span class=\"s\"&gt;\"Paste your text here...\"&lt;/span&gt;\n        &lt;span class=\"na\"&gt;:disabled=&lt;/span&gt;&lt;span class=\"s\"&gt;\"isLoading\"&lt;/span&gt;\n        &lt;span class=\"na\"&gt;rows=&lt;/span&gt;&lt;span class=\"s\"&gt;\"8\"&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;/&amp;gt;&lt;/span&gt;\n\n      &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"controls\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;lt;label&amp;gt;&lt;/span&gt;\n          Max summary length:\n          &lt;span class=\"nt\"&gt;&amp;lt;select&lt;/span&gt; &lt;span class=\"na\"&gt;v-model=&lt;/span&gt;&lt;span class=\"s\"&gt;\"maxTokens\"&lt;/span&gt; &lt;span class=\"na\"&gt;:disabled=&lt;/span&gt;&lt;span class=\"s\"&gt;\"isLoading\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=\"nt\"&gt;&amp;lt;option&lt;/span&gt; &lt;span class=\"na\"&gt;value=&lt;/span&gt;&lt;span class=\"s\"&gt;\"100\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;Short (100 tokens)&lt;span class=\"nt\"&gt;&amp;lt;/option&amp;gt;&lt;/span&gt;\n            &lt;span class=\"nt\"&gt;&amp;lt;option&lt;/span&gt; &lt;span class=\"na\"&gt;value=&lt;/span&gt;&lt;span class=\"s\"&gt;\"150\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;Medium (150 tokens)&lt;span class=\"nt\"&gt;&amp;lt;/option&amp;gt;&lt;/span&gt;\n            &lt;span class=\"nt\"&gt;&amp;lt;option&lt;/span&gt; &lt;span class=\"na\"&gt;value=&lt;/span&gt;&lt;span class=\"s\"&gt;\"250\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;Long (250 tokens)&lt;span class=\"nt\"&gt;&amp;lt;/option&amp;gt;&lt;/span&gt;\n          &lt;span class=\"nt\"&gt;&amp;lt;/select&amp;gt;&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;\n\n        &lt;span class=\"nt\"&gt;&amp;lt;button&lt;/span&gt; \n          &lt;span class=\"err\"&gt;@&lt;/span&gt;&lt;span class=\"na\"&gt;click=&lt;/span&gt;&lt;span class=\"s\"&gt;\"handleSummarize\"&lt;/span&gt;\n          &lt;span class=\"na\"&gt;:disabled=&lt;/span&gt;&lt;span class=\"s\"&gt;\"!canSummarize\"&lt;/span&gt;\n          &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"summarize-btn\"&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n          &lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;isLoading&lt;/span&gt; &lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;Summarizing...&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;Summarize&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n    &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;v-if=&lt;/span&gt;&lt;span class=\"s\"&gt;\"hasError\"&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"error-message\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;&lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;error&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;button&lt;/span&gt; &lt;span class=\"err\"&gt;@&lt;/span&gt;&lt;span class=\"na\"&gt;click=&lt;/span&gt;&lt;span class=\"s\"&gt;\"clearError\"&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"retry-btn\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;Dismiss&lt;span class=\"nt\"&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;\n    &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;v-if=&lt;/span&gt;&lt;span class=\"s\"&gt;\"currentSummary\"&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"summary-section\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;h3&amp;gt;&lt;/span&gt;Summary&lt;span class=\"nt\"&gt;&amp;lt;/h3&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"summary-content\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;&lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;currentSummary&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;summary&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"summary-meta\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n          &lt;span class=\"nt\"&gt;&amp;lt;span&amp;gt;&lt;/span&gt;Tokens used: &lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;currentSummary&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;tokensUsed&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;\n          &lt;span class=\"nt\"&gt;&amp;lt;span&amp;gt;&lt;/span&gt;Cost: $&lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;currentSummary&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;cost&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;toFixed&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;\n        &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n    &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\"nt\"&gt;&amp;lt;div&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"usage-stats\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;h4&amp;gt;&lt;/span&gt;Session Statistics&lt;span class=\"nt\"&gt;&amp;lt;/h4&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Total tokens used: &lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;totalTokensUsed&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Total cost: &lt;span class=\"si\"&gt;{{&lt;/span&gt; &lt;span class=\"nx\"&gt;formattedCost&lt;/span&gt; &lt;span class=\"si\"&gt;}}&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nt\"&gt;&amp;lt;button&lt;/span&gt; &lt;span class=\"err\"&gt;@&lt;/span&gt;&lt;span class=\"na\"&gt;click=&lt;/span&gt;&lt;span class=\"s\"&gt;\"clearCache\"&lt;/span&gt; &lt;span class=\"na\"&gt;class=&lt;/span&gt;&lt;span class=\"s\"&gt;\"clear-btn\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;Clear Cache&lt;span class=\"nt\"&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;\n    &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n  &lt;span class=\"nt\"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;\n&lt;span class=\"nt\"&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\"k\"&gt;template&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=\"nt\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"k\"&gt;script&lt;/span&gt; &lt;span class=\"na\"&gt;setup&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;computed&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;vue&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useSummarizerStore&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../stores/summarizer&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;store&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useSummarizerStore&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Local state&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;inputText&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;''&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;150&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;currentSummary&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kc\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Computed properties&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;canSummarize&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;computed&lt;/span&gt;&lt;span class=\"p\"&gt;(()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;inputText&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;trim&lt;/span&gt;&lt;span class=\"p\"&gt;().&lt;/span&gt;&lt;span class=\"nx\"&gt;length&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"mi\"&gt;50&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"nx\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;isLoading&lt;/span&gt;\n&lt;span class=\"p\"&gt;})&lt;/span&gt;\n\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;isLoading&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;hasError&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;totalTokensUsed&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;formattedCost&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;store&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Methods&lt;/span&gt;\n&lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;handleSummarize&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"nx\"&gt;canSummarize&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;return&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;try&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;currentSummary&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;summarizeText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;inputText&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"na\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nf\"&gt;parseInt&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;})&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;catch &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;Summarization failed:&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;clearError&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;clearError&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;clearCache&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;clearCache&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;currentSummary&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;value&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"nt\"&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\"k\"&gt;script&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=\"nt\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"k\"&gt;style&lt;/span&gt; &lt;span class=\"na\"&gt;scoped&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\"nc\"&gt;.text-summarizer&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;max-width&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;800px&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;margin&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;0&lt;/span&gt; &lt;span class=\"nb\"&gt;auto&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;padding&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;2rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.input-section&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;margin-bottom&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;2rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nt\"&gt;textarea&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;width&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;100%&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;padding&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;2px&lt;/span&gt; &lt;span class=\"nb\"&gt;solid&lt;/span&gt; &lt;span class=\"m\"&gt;#e1e5e9&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border-radius&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;8px&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;font-family&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;inherit&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;resize&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;vertical&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.controls&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;display&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;flex&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;justify-content&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;space-between&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;align-items&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;center&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;margin-top&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"py\"&gt;gap&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.summarize-btn&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;background&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;#007acc&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;color&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"no\"&gt;white&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;none&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;padding&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;0.75rem&lt;/span&gt; &lt;span class=\"m\"&gt;1.5rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border-radius&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;6px&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;cursor&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;pointer&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;font-weight&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;600&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.summarize-btn&lt;/span&gt;&lt;span class=\"nd\"&gt;:disabled&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;background&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;#ccc&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;cursor&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;not-allowed&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.error-message&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;background&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;#fee&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1px&lt;/span&gt; &lt;span class=\"nb\"&gt;solid&lt;/span&gt; &lt;span class=\"m\"&gt;#fcc&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;padding&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border-radius&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;6px&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;margin-bottom&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.summary-section&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;background&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;#f8f9fa&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;padding&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1.5rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border-radius&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;8px&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;margin-bottom&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;2rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.summary-meta&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;display&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;flex&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"py\"&gt;gap&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;margin-top&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;font-size&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;0.9rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;color&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;#666&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nc\"&gt;.usage-stats&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;border-top&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1px&lt;/span&gt; &lt;span class=\"nb\"&gt;solid&lt;/span&gt; &lt;span class=\"m\"&gt;#e1e5e9&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;padding-top&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;1rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;font-size&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"m\"&gt;0.9rem&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"nt\"&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\"k\"&gt;style&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  Production Deployment Considerations\n&lt;/h2&gt;\n\n&lt;p&gt;For production deployment, implement these security measures:&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  1. Backend API Proxy\n&lt;/h3&gt;\n\n&lt;p&gt;Create a backend endpoint that handles OpenAI requests:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// backend/routes/ai.js&lt;/span&gt;\n&lt;span class=\"nx\"&gt;app&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;post&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;/api/summarize&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"k\"&gt;async &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;req&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;res&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;req&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;body&lt;/span&gt;\n\n  &lt;span class=\"c1\"&gt;// Add authentication, rate limiting, input validation&lt;/span&gt;\n  &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"nf\"&gt;isValidUser&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;req&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;res&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;status&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;401&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;json&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt; &lt;span class=\"na\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;Unauthorized&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt; &lt;span class=\"p\"&gt;})&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;try&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;result&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;openaiService&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;summarizeText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;res&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;json&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;result&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;catch &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;res&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;status&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;500&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;json&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt; &lt;span class=\"na\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;message&lt;/span&gt; &lt;span class=\"p\"&gt;})&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;})&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  2. Environment Variables for Production\n&lt;/h3&gt;\n\n&lt;p&gt;Update your deployment configuration:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;# Production .env\nVITE_API_BASE_URL=https://your-api.com\nVITE_MAX_REQUESTS_PER_MINUTE=5\nVITE_CACHE_DURATION=7200000\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  3. Error Boundary and Monitoring\n&lt;/h3&gt;\n\n&lt;p&gt;Add error tracking and monitoring:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Add to your main.js&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"nx\"&gt;Sentry&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;@sentry/vue&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n\n&lt;span class=\"nx\"&gt;Sentry&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;init&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;app&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n  &lt;span class=\"na\"&gt;dsn&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;your-sentry-dsn&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;\n&lt;span class=\"p\"&gt;})&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h2&gt;\n  \n  \n  Cost Optimization Tips\n&lt;/h2&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Implement aggressive caching&lt;/strong&gt; - Cache results for identical inputs&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Use shorter prompts&lt;/strong&gt; - Reduce token usage in system messages&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Batch requests&lt;/strong&gt; - Process multiple summaries together when possible&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Set token limits&lt;/strong&gt; - Prevent unexpectedly long responses&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Monitor usage&lt;/strong&gt; - Track costs and set alerts&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;h2&gt;\n  \n  \n  Conclusion\n&lt;/h2&gt;\n\n&lt;p&gt;We've built a production-ready AI-powered Vue.js application that demonstrates:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Proper state management with Pinia&lt;/li&gt;\n&lt;li&gt;Error handling and loading states&lt;/li&gt;\n&lt;li&gt;Cost optimization through caching&lt;/li&gt;\n&lt;li&gt;Rate limiting for API protection&lt;/li&gt;\n&lt;li&gt;Security considerations for deployment&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The key to successful AI integration is treating it like any other external service - with proper error handling, caching, and monitoring. Start with simple features like text summarization, then expand to more complex AI capabilities as your application grows.&lt;/p&gt;\n\n&lt;p&gt;Remember: always proxy AI API calls through your backend in production to protect API keys and implement proper rate limiting. The client-side approach shown here is for development and learning purposes only.&lt;/p&gt;\n\n&lt;p&gt;Happy coding! ğŸš€&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;Tools mentioned:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"https://www.amazon.com/?tag=practicalai06-20\" rel=\"noopener noreferrer\"&gt;Amazon&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;",
    "date": "2026-02-18T15:35:22.000Z",
    "url": "https://dev.to/paul_robertson_e844997d2b/build-ai-powered-vuejs-apps-integrate-openai-api-with-composition-api-and-pinia-1946"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "How Shopify Silently Kills Your Webhook Subscriptions (And How to Prevent It)",
    "partialText": "&lt;p&gt;Here's something most Shopify app developers learn the hard way: Shopify will silently delete your webhook subscriptions if your endpoint fails â€” and it won't tell you.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;No email. No notification. No entry in your Partner Dashboard. Just... silence.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Shopify Webhook Retry Policy\n&lt;/h2&gt;\n\n&lt;p&gt;When your webhook endpoint fails to respond with a &lt;code&gt;2xx&lt;/code&gt; status within 5 seconds, Shopify doesn't immediately give up. It retries. After the original delivery attempt plus &lt;strong&gt;18 retries&lt;/strong&gt; over roughly &lt;strong&gt;48 hours&lt;/strong&gt;, Shopify &lt;strong&gt;permanently removes&lt;/strong&gt; your webhook subscription.&lt;/p&gt;\n\n&lt;p&gt;This is documented in &lt;a href=\"https://shopify.dev/docs/apps/build/webhooks/troubleshooting-webhooks\" rel=\"noopener noreferrer\"&gt;Shopify's webhook troubleshooting docs&lt;/a&gt;, but it's easy to miss â€” and the consequences are severe.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Why This Is Worse Than a Regular Outage\n&lt;/h2&gt;\n\n&lt;p&gt;Most server outages get noticed quickly â€” your app goes down, users complain, your monitoring catches it. But webhook endpoints are different:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;They're passive.&lt;/strong&gt; They only receive traffic when Shopify has an event to send. There's no user staring at a loading screen.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Failures are invisible.&lt;/strong&gt; Shopify retries silently. There's no proactive notification about delivery failures.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;The blast radius is delayed.&lt;/strong&gt; The real damage â€” missing orders, unfulfilled shipments, broken inventory sync â€” shows up hours or days later.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Re-subscribing isn't automatic.&lt;/strong&gt; Once Shopify removes the subscription, it stays removed until you manually re-register it.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  A Real-World Scenario\n&lt;/h2&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Timeline of a silent webhook failure&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;ğŸŸ¢ &lt;strong&gt;Monday 9:00 AM&lt;/strong&gt;&lt;br&gt;\nEverything works fine. Your &lt;code&gt;orders/create&lt;/code&gt; webhook fires, your fulfillment system picks it up, customers get tracking emails.&lt;/p&gt;\n\n&lt;p&gt;ğŸŸ¡ &lt;strong&gt;Tuesday 2:13 AM&lt;/strong&gt;&lt;br&gt;\nA routine deploy introduces a regression. Your webhook handler starts returning 500s. Shopify begins retrying silently. You're asleep.&lt;/p&gt;\n\n&lt;p&gt;ğŸŸ  &lt;strong&gt;Wednesday ~2 AM â€” 48 hours later&lt;/strong&gt;&lt;br&gt;\nShopify exhausts all 19 attempts. It silently deletes your webhook subscription. Your integration is now completely disconnected. Events still happen â€” they just have nowhere to go.&lt;/p&gt;\n\n&lt;p&gt;ğŸ”´ &lt;strong&gt;Wednesday afternoon â€” a customer complains&lt;/strong&gt;&lt;br&gt;\n\"Why hasn't my order shipped?\" You check the logs. Nothing. You check Shopify Admin. The webhook subscription is &lt;strong&gt;gone&lt;/strong&gt;. You've been missing every order for 30+ hours.&lt;/p&gt;\n&lt;h2&gt;\n  \n  \n  Why Generic Uptime Monitors Don't Catch This\n&lt;/h2&gt;\n\n&lt;p&gt;\"Just use UptimeRobot\" is the usual advice. Here's why it's insufficient for webhooks:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;UptimeRobot and Pingdom monitor availability.&lt;/strong&gt; They send a GET request and check if your server responds with 200. That tells you \"your server is up.\"&lt;/p&gt;\n\n&lt;p&gt;But webhook endpoints have different failure modes:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Your server might be up, but your webhook &lt;em&gt;handler&lt;/em&gt; throws a 500 on POST requests&lt;/li&gt;\n&lt;li&gt;Your server responds fine to GET, but times out on the actual webhook payload processing&lt;/li&gt;\n&lt;li&gt;Your endpoint works, but Shopify already removed the subscription â€” so nothing is coming through&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;The gap: generic monitors tell you if your server is up. They don't tell you if your webhook integration is actually working.&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2&gt;\n  \n  \n  What You Should Actually Monitor\n&lt;/h2&gt;\n\n&lt;p&gt;For reliable Shopify webhook integrations, you need to check:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Endpoint health&lt;/strong&gt; â€” Is the endpoint responding to the correct HTTP method (POST) with a &lt;code&gt;2xx&lt;/code&gt; status within Shopify's 5-second timeout?&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Response time trends&lt;/strong&gt; â€” Is your response time creeping up? A handler averaging 4.5 seconds today will start timing out next week.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Delivery gaps&lt;/strong&gt; â€” If you normally receive 50 events per day and suddenly get 0, something is wrong even if the endpoint is \"up.\"&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Subscription status&lt;/strong&gt; â€” Is the webhook subscription still registered in Shopify?&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;\n  \n  \n  Prevention Checklist\n&lt;/h2&gt;\n&lt;h3&gt;\n  \n  \n  1. Acknowledge immediately, process async\n&lt;/h3&gt;\n\n&lt;p&gt;Your webhook handler &lt;strong&gt;must&lt;/strong&gt; respond within 5 seconds. If you do heavy processing, acknowledge first:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Node.js â€” acknowledge immediately, process async&lt;/span&gt;\n&lt;span class=\"nx\"&gt;app&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;post&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;/webhooks/orders-create&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;req&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;res&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"c1\"&gt;// Respond to Shopify immediately&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;res&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;status&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;200&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;send&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;ok&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n\n  &lt;span class=\"c1\"&gt;// Process the order in the background&lt;/span&gt;\n  &lt;span class=\"nf\"&gt;processOrder&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;req&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;body&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"k\"&gt;catch&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;Failed to process order:&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;err&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n  &lt;span class=\"p\"&gt;});&lt;/span&gt;\n&lt;span class=\"p\"&gt;});&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  2. Add a health check endpoint\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight go\"&gt;&lt;code&gt;&lt;span class=\"c\"&gt;// Go â€” simple health check handler&lt;/span&gt;\n&lt;span class=\"k\"&gt;func&lt;/span&gt; &lt;span class=\"n\"&gt;healthCheck&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;w&lt;/span&gt; &lt;span class=\"n\"&gt;http&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;ResponseWriter&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;r&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt;&lt;span class=\"n\"&gt;http&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Request&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;:=&lt;/span&gt; &lt;span class=\"n\"&gt;db&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Ping&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt; &lt;span class=\"n\"&gt;err&lt;/span&gt; &lt;span class=\"o\"&gt;!=&lt;/span&gt; &lt;span class=\"no\"&gt;nil&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;http&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Error&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;w&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s\"&gt;\"db unhealthy\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"m\"&gt;503&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"n\"&gt;w&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WriteHeader&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"m\"&gt;200&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;w&lt;/span&gt;&lt;span class=\"o\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Write&lt;/span&gt;&lt;span class=\"p\"&gt;([]&lt;/span&gt;&lt;span class=\"kt\"&gt;byte&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"ok\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  3. Implement idempotent webhook handlers\n&lt;/h3&gt;\n\n&lt;p&gt;Shopify can send duplicate webhooks. Use the &lt;code&gt;X-Shopify-Webhook-Id&lt;/code&gt; header to deduplicate:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;# Python â€” idempotent handler\n&lt;/span&gt;&lt;span class=\"nd\"&gt;@app.route&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;/webhooks/orders-create&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;methods&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;POST&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;handle_order&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;request&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n    &lt;span class=\"n\"&gt;webhook_id&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;request&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;headers&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;get&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;X-Shopify-Webhook-Id&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;redis&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;exists&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;webhook:&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;webhook_id&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;already processed&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;200&lt;/span&gt;\n\n    &lt;span class=\"nf\"&gt;process_order&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;request&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;json&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;redis&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;set&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;webhook:&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;webhook_id&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;1&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ex&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"mi\"&gt;172800&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;ok&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;200&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  4. Check your webhook subscriptions periodically\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;&lt;span class=\"c\"&gt;# List all registered webhooks for your Shopify app&lt;/span&gt;\ncurl &lt;span class=\"nt\"&gt;-X&lt;/span&gt; GET &lt;span class=\"se\"&gt;\\&lt;/span&gt;\n  &lt;span class=\"s2\"&gt;\"https://your-store.myshopify.com/admin/api/2024-01/webhooks.json\"&lt;/span&gt; &lt;span class=\"se\"&gt;\\&lt;/span&gt;\n  &lt;span class=\"nt\"&gt;-H&lt;/span&gt; &lt;span class=\"s2\"&gt;\"X-Shopify-Access-Token: YOUR_TOKEN\"&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;If the list comes back shorter than expected, you've already lost subscriptions.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Automated Monitoring with ShopHooks\n&lt;/h2&gt;\n\n&lt;p&gt;After experiencing this failure firsthand, I built &lt;a href=\"https://shophooks.dev\" rel=\"noopener noreferrer\"&gt;ShopHooks&lt;/a&gt; â€” a monitoring tool specifically designed for Shopify webhook endpoints.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;âœ… &lt;strong&gt;60-second health checks&lt;/strong&gt; using the same HTTP method Shopify uses (POST)&lt;/li&gt;\n&lt;li&gt;âœ… &lt;strong&gt;Smart alerts&lt;/strong&gt; via Slack and email with context about what failed and why&lt;/li&gt;\n&lt;li&gt;âœ… &lt;strong&gt;AI health analysis&lt;/strong&gt; that spots degradation trends before they become outages&lt;/li&gt;\n&lt;li&gt;âœ… &lt;strong&gt;Recovery notifications&lt;/strong&gt; when endpoints come back up&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;It's &lt;a href=\"https://shophooks.dev/sign-up\" rel=\"noopener noreferrer\"&gt;free for up to 3 endpoints&lt;/a&gt; (no credit card required), which covers most single-store integrations. Setup takes about 60 seconds.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;em&gt;Have you experienced silent webhook removal? I'd love to hear your war stories in the comments.&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-18T15:34:23.000Z",
    "url": "https://dev.to/shophooks_031476411ce890d/how-shopify-silently-kills-your-webhook-subscriptions-and-how-to-prevent-it-1d3f"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Replacing Static AWS Credentials in CI/CD with GitHub OIDC (A Practical DevOps Lab)",
    "partialText": "&lt;p&gt;Storing longâ€‘lived AWS access keys inside CI/CD pipelines is common. It&lt;br&gt;\nworks. It is simple. And it usually stays that way for years.&lt;/p&gt;\n\n&lt;p&gt;But static credentials expand the trust boundary more than we often&lt;br&gt;\nrealize. They live in repository settings, they require manual rotation,&lt;br&gt;\nand if exposed, they remain valid until explicitly revoked.&lt;/p&gt;\n\n&lt;p&gt;In this lab, I built a minimal deployment pipeline from GitHub Actions&lt;br&gt;\nto Amazon S3 and then deliberately refactored it. The goal was not to&lt;br&gt;\ndeploy a website. The goal was to observe how the trust model changes&lt;br&gt;\nwhen static credentials are replaced with shortâ€‘lived role assumption.&lt;/p&gt;\n\n&lt;p&gt;The structure is simple: the deployment remains the same, the trust boundary changes.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Goal\n&lt;/h2&gt;\n\n&lt;p&gt;Demonstrate a practical migration:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Phase 1 --- deploy to S3 using static AWS credentials stored in\nGitHub Secrets&lt;/li&gt;\n&lt;li&gt;  Phase 2 --- remove static credentials and use GitHub OIDC (OpenID Connect) federation\nwith IAM role assumption&lt;/li&gt;\n&lt;li&gt;  Keep the deployment behavior identical while improving the\nauthentication model&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The target (S3 static site) is intentionally minimal so that&lt;br&gt;\nauthentication and identity flow stay in focus.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Constraints / Assumptions\n&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Single AWS account&lt;/li&gt;\n&lt;li&gt;  Manual setup (no Terraform for clarity)&lt;/li&gt;\n&lt;li&gt;  S3 static website enabled (lab shortcut)&lt;/li&gt;\n&lt;li&gt;  GitHub Actions used as CI/CD engine&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Public S3 access is used only to simplify validation. In a production&lt;br&gt;\nsetup, CloudFront and stricter bucket policies would replace it.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  High-Level Design\n&lt;/h2&gt;\n\n&lt;p&gt;The central question of this lab:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Can we change how CI/CD authenticates to AWS without changing how it&lt;br&gt;\ndeploys?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h3&gt;\n  \n  \n  Phase 1 --- Make it work\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fx6upcc222euimqv4oa08.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fx6upcc222euimqv4oa08.png\" alt=\" \" width=\"800\" height=\"533\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Architecture:&lt;/p&gt;\n\n&lt;p&gt;GitHub Actions â†’ GitHub Secrets â†’ IAM User â†’ S3&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  An IAM user is created.&lt;/li&gt;\n&lt;li&gt;  Access keys are generated.&lt;/li&gt;\n&lt;li&gt;  Keys are stored as repository secrets.&lt;/li&gt;\n&lt;li&gt;  The workflow uploads files using &lt;code&gt;aws s3 sync&lt;/code&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The system works exactly as expected.&lt;/p&gt;\n\n&lt;p&gt;However:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Credentials are longâ€‘lived.&lt;/li&gt;\n&lt;li&gt;  Rotation is manual.&lt;/li&gt;\n&lt;li&gt;  Any secret leakage provides direct AWS access.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Nothing is broken --- but trust is broad.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Phase 2 --- Reduce Trust / Harden Access\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fquaitlseiu31rayeygbr.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fquaitlseiu31rayeygbr.png\" alt=\" \" width=\"800\" height=\"533\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;In the second phase, the IAM user is removed from the deployment path.&lt;/p&gt;\n\n&lt;p&gt;Architecture becomes:&lt;/p&gt;\n\n&lt;p&gt;GitHub Actions â†’ OIDC Token â†’ IAM OIDC Provider â†’ Security Token Service (STS) â†’ IAM Role â†’ S3&lt;/p&gt;\n\n&lt;p&gt;Three architectural changes occur.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  1. Introduce an IAM OIDC Provider\n&lt;/h3&gt;\n\n&lt;p&gt;AWS is configured to trust tokens issued by:&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;https://token.actions.githubusercontent.com\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n&lt;p&gt;This creates a formal trust anchor between GitHub and AWS.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  2. Define a Scoped Trust Policy\n&lt;/h3&gt;\n\n&lt;p&gt;The IAM role trust policy restricts access to:&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;repo:&amp;lt;OWNER&amp;gt;/&amp;lt;REPO&amp;gt;:ref:refs/heads/main\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n&lt;p&gt;This means:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Only this repository&lt;/li&gt;\n&lt;li&gt;  Only this branch&lt;/li&gt;\n&lt;li&gt;  Only through OIDC&lt;/li&gt;\n&lt;li&gt;  Only via STS&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Trust becomes explicit and narrow.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  3. Replace Static Credentials with Role Assumption\n&lt;/h3&gt;\n\n&lt;p&gt;The GitHub workflow:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Requests an ID token&lt;/li&gt;\n&lt;li&gt;  Calls &lt;code&gt;AssumeRoleWithWebIdentity&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;  Receives shortâ€‘lived credentials&lt;/li&gt;\n&lt;li&gt;  Deploys using the same &lt;code&gt;aws s3 sync&lt;/code&gt; command&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The deployment logic remains unchanged.&lt;/p&gt;\n\n&lt;p&gt;But no static AWS keys exist in GitHub anymore.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What Actually Changed\n&lt;/h2&gt;\n\n&lt;p&gt;Operationally, nothing changed:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Same repository&lt;/li&gt;\n&lt;li&gt;  Same workflow structure&lt;/li&gt;\n&lt;li&gt;  Same deployment command&lt;/li&gt;\n&lt;li&gt;  Same S3 bucket&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;From a trust perspective, everything changed:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Credentials are now shortâ€‘lived&lt;/li&gt;\n&lt;li&gt;  No manual rotation is required&lt;/li&gt;\n&lt;li&gt;  Access is scoped to one repository and branch&lt;/li&gt;\n&lt;li&gt;  AWS access depends on a validated identity token&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The system now grants access based on verified identity rather than&lt;br&gt;\nstored secrets.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Observations from Implementation\n&lt;/h2&gt;\n\n&lt;p&gt;A few practical lessons emerged during the lab:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Incorrect S3 ARNs in role policies immediately cause &lt;code&gt;AccessDenied&lt;/code&gt;\nerrors.&lt;/li&gt;\n&lt;li&gt;  Missing &lt;code&gt;id-token: write&lt;/code&gt; permission prevents OIDC role assumption.&lt;/li&gt;\n&lt;li&gt;  Trust policy &lt;code&gt;sub&lt;/code&gt; mismatches block access cleanly and predictably.&lt;/li&gt;\n&lt;li&gt;  &lt;code&gt;aws sts get-caller-identity&lt;/code&gt; is the most useful debugging command\nin this flow.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Federated identity setups are less forgiving than static keys --- but&lt;br&gt;\nthat strictness is the point.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Lessons Learned\n&lt;/h2&gt;\n\n&lt;ol&gt;\n&lt;li&gt; Replacing static credentials does not require changing deployment\nlogic.&lt;/li&gt;\n&lt;li&gt; Trust policy design is the most sensitive part of the setup.&lt;/li&gt;\n&lt;li&gt; Shortâ€‘lived credentials reduce operational overhead and risk.&lt;/li&gt;\n&lt;li&gt; CI/CD hardening is primarily about narrowing trust boundaries.&lt;/li&gt;\n&lt;li&gt; Security improvements can be incremental and observable.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;The lab reinforces a simple pattern: &lt;strong&gt;Make it work. Then deliberately reduce trust.&lt;/strong&gt;&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Where to Go Next\n&lt;/h2&gt;\n\n&lt;p&gt;This setup can be extended in several directions:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  Build and push Docker images to ECR using the same OIDC role\\&lt;/li&gt;\n&lt;li&gt;  Deploy to ECS instead of S3\\&lt;/li&gt;\n&lt;li&gt;  Provision IAM and OIDC provider via Terraform\\&lt;/li&gt;\n&lt;li&gt;  Add GitHub Environments and environmentâ€‘scoped trust conditions\\&lt;/li&gt;\n&lt;li&gt;  Remove public S3 access and introduce CloudFront&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Each extension builds on the same identity model.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Repository\n&lt;/h2&gt;\n\n&lt;p&gt;Full reproducible runbook and workflows:&lt;/p&gt;\n\n&lt;p&gt;ğŸ‘‰ &lt;a href=\"https://github.com/iuri-covaliov/devops-labs/tree/main/GitHubActionswithAWSOIDC\" rel=\"noopener noreferrer\"&gt;https://github.com/iuri-covaliov/devops-labs/tree/main/GitHubActionswithAWSOIDC&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;This repository is intended to be read alongside the article: the article explains why each layer exists, while the repository shows how it is implemented.&lt;/p&gt;",
    "date": "2026-02-18T15:30:49.000Z",
    "url": "https://dev.to/iuri_covaliov/replacing-static-aws-credentials-in-cicd-with-github-oidc-a-practical-devops-lab-2222"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Kubernetes Advanced Scheduling: How we fixed Real Production Incidents",
    "partialText": "&lt;p&gt;We Used 'Kubernetes Advanced Scheduling' to Fix Real Production Incidents as below:&lt;/p&gt;\n\n&lt;p&gt;Kubernetes scheduling looks simple â€” until production traffic hits.&lt;br&gt;\nIn lower environments, the default scheduler works beautifully.&lt;/p&gt;\n\n&lt;p&gt;In production, under load, across multiple AZs, with service mesh, sidecars, GPUs, and mixed workloads?&lt;/p&gt;\n\n&lt;p&gt;Thatâ€™s when we discovered:&lt;br&gt;\nThe scheduler is not â€œbasic.â€&lt;/p&gt;\n\n&lt;p&gt;Itâ€™s powerful â€” if we know how to use it.&lt;/p&gt;\n\n&lt;p&gt;Based on real issues we resolved in a live Kubernetes environment running critical workloads, these were 2 AM incidents.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Incident 1: All Pods in One AZ â€“ The Near-Outage&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Situation&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;We had a 3-zone cluster.&lt;br&gt;\nA critical API deployment had 9 replicas.&lt;br&gt;\nOne evening, during a traffic spike, one Availability Zone had network degradation.&lt;br&gt;\nSuddenly, 6 of our 9 pods were unreachable.&lt;br&gt;\nWhy?&lt;br&gt;\nBecause the default scheduler had â€œhelpfullyâ€ packed pods into fewer zones for efficiency.&lt;br&gt;\nReplicaSet guarantees count.&lt;br&gt;\n&lt;strong&gt;&lt;em&gt;It does NOT guarantee distribution.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;That night we learned:&lt;br&gt;\nHigh Availability is not automatic.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Fix: Pod Topology Spread Constraints&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;We implemented:&lt;br&gt;\nâ€¢ topologyKey: topology.kubernetes.io/zone&lt;br&gt;\nâ€¢ maxSkew: 1&lt;br&gt;\nâ€¢ whenUnsatisfiable: DoNotSchedule&lt;/p&gt;\n\n&lt;p&gt;This forced the scheduler to maintain balanced pod distribution across zones.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;What Changed Immediately&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;â€¢ Pods spread 3-3-3 across AZs&lt;br&gt;\nâ€¢ Rolling updates maintained balance&lt;br&gt;\nâ€¢ Zone failure no longer meant partial collapse&lt;/p&gt;\n\n&lt;p&gt;**Why This Matters &lt;/p&gt;\n\n&lt;p&gt;Unlike anti-affinity (which is binary), &lt;strong&gt;Topology Spread Constraints are quantitative.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;They enforce distribution math.&lt;br&gt;\nThatâ€™s the difference.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;Real Production Lesson&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;During a rolling update before the fix:&lt;/p&gt;\n\n&lt;p&gt;New pods filled one AZ first.&lt;br&gt;\nTraffic imbalance followed.&lt;br&gt;\nLatency spikes happened.&lt;/p&gt;\n\n&lt;p&gt;After implementing spread constraints:&lt;/p&gt;\n\n&lt;p&gt;Updates remained balanced from the first pod.&lt;br&gt;\nNo traffic concentration.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Incident 2: Node Memory Pressure â€“ â€œBut Requests Look Fineâ€&lt;/strong&gt;&lt;br&gt;\n&lt;strong&gt;The Situation&lt;/strong&gt; &lt;/p&gt;\n\n&lt;p&gt;We were using:&lt;br&gt;\nâ€¢ Service mesh (Istio sidecars)&lt;br&gt;\nâ€¢ Kata Containers for isolated workloads&lt;/p&gt;\n\n&lt;p&gt;Pods were requesting 512MB.&lt;br&gt;\nNodes were showing allocatable capacity sufficient for 20 pods.&lt;/p&gt;\n\n&lt;p&gt;But after deploying 15 pods:&lt;/p&gt;\n\n&lt;p&gt;â€¢ Memory pressure started&lt;br&gt;\nâ€¢ Evictions happened&lt;br&gt;\nâ€¢ Latency increased&lt;/p&gt;\n\n&lt;p&gt;Metrics didnâ€™t make sense.&lt;br&gt;\nUntil we realized:&lt;br&gt;\nThe scheduler was blind to runtime overhead.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Fix: Pod Overhead via RuntimeClass&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;We defined a RuntimeClass with:&lt;/p&gt;\n\n&lt;p&gt;overhead:&lt;br&gt;\n  podFixed:&lt;br&gt;\n    memory: \"50Mi\"&lt;br&gt;\n    cpu: \"50m\"&lt;br&gt;\nNow every pod using that RuntimeClass automatically added overhead to scheduling math.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;What Changed?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Before:&lt;br&gt;\nScheduler thought 512MB per pod.&lt;/p&gt;\n\n&lt;p&gt;After:&lt;br&gt;\nScheduler calculated ~562MB per pod.&lt;br&gt;\nNode fitting became accurate.&lt;br&gt;\nEvictions stopped.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Critical Insight&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Pod Overhead creates an â€œinvisible containerâ€ in scheduling math.&lt;/p&gt;\n\n&lt;p&gt;Without it:&lt;br&gt;\nYou overcommit silently.&lt;/p&gt;\n\n&lt;p&gt;With it:&lt;br&gt;\nScheduling becomes financially and operationally accurate.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Incident 3: GPU Pods Landing on Spot Nodes&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Situation&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;We had:&lt;/p&gt;\n\n&lt;p&gt;â€¢ GPU nodes (on-demand)&lt;br&gt;\nâ€¢ General compute nodes (Spot instances)&lt;br&gt;\nA training workload got scheduled on a Spot node without GPU.&lt;/p&gt;\n\n&lt;p&gt;Result:&lt;/p&gt;\n\n&lt;p&gt;â€¢ CrashLoopBackOff&lt;br&gt;\nâ€¢ Wasted compute&lt;br&gt;\nâ€¢ Delayed ML training pipeline&lt;/p&gt;\n\n&lt;p&gt;Node labels existed.&lt;br&gt;\nBut scheduling preference wasnâ€™t strict enough.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Fix: Scheduler Profiles&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Instead of rewriting the scheduler, we:&lt;/p&gt;\n\n&lt;p&gt;â€¢ Created a separate scheduler profile&lt;br&gt;\nâ€¢ Configured specific scoring behavior for ML workloads&lt;br&gt;\nâ€¢ Used taints + tolerations + stricter filtering&lt;/p&gt;\n\n&lt;p&gt;Now:&lt;/p&gt;\n\n&lt;p&gt;â€¢ General workloads used default scheduling&lt;br&gt;\nâ€¢ ML workloads used a GPU-aware scheduling profile&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Production Impact&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;â€¢ Zero misplacements&lt;br&gt;\nâ€¢ Predictable GPU utilization&lt;br&gt;\nâ€¢ Better cost control&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Incident 4: Bin Packing Wasnâ€™t Actually Packing&lt;/strong&gt; &lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Situation&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;We were optimizing for cost.&lt;br&gt;\nUsing bin packing strategy (MostRequested scoring).&lt;br&gt;\nBut nodes were underutilized by 5â€“7%.&lt;/p&gt;\n\n&lt;p&gt;Finance asked:&lt;/p&gt;\n\n&lt;p&gt;â€œWhy are we scaling nodes when CPU is still free?â€&lt;br&gt;\nThe missing variable?&lt;br&gt;\nPod Overhead wasnâ€™t being considered in our mental math.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The Real Scheduler Math&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;When NodeResourceFit runs:&lt;/p&gt;\n\n&lt;p&gt;Total Pod Compute =&lt;br&gt;\n(Sum of container requests) + (Pod Overhead)&lt;/p&gt;\n\n&lt;p&gt;During scoring:&lt;br&gt;\nScheduler evaluates:&lt;br&gt;\n(Current Node Usage + Total Pod Compute)&lt;/p&gt;\n\n&lt;p&gt;With overhead included,&lt;br&gt;\nBin packing becomes more accurate.&lt;br&gt;\nWithout understanding this,&lt;br&gt;\nYou miscalculate cluster density.&lt;/p&gt;\n\n&lt;p&gt;After adjusting runtime overhead correctly:&lt;br&gt;\nâ€¢ Node utilization improved&lt;br&gt;\nâ€¢ Fewer nodes required&lt;br&gt;\nâ€¢ Monthly cloud cost dropped noticeably&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;What Most Teams Donâ€™t Realize&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;The scheduler is not a black box.&lt;/p&gt;\n\n&lt;p&gt;It has phases:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt; Filtering&lt;/li&gt;\n&lt;li&gt; Scoring&lt;/li&gt;\n&lt;li&gt; Binding&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;You can influence each phase.&lt;br&gt;\nAdvanced scheduling is not â€œnice to have.â€&lt;/p&gt;\n\n&lt;p&gt;It is production engineering.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Lessons learnt&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Replica count â‰  High Availability :\nUse Topology Spread Constraints.&lt;/li&gt;\n&lt;li&gt;Container request â‰  Total consumption :\nUse Pod Overhead when sidecars or microVMs are involved.&lt;/li&gt;\n&lt;li&gt;One scheduler profile â‰  All workloads :\nUse Scheduler Profiles for workload classes.&lt;/li&gt;\n&lt;li&gt;Bin packing requires correct math\nUnderstand NodeResourceFit + Overhead interaction.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;Running Kubernetes vs Engineering Kubernetes&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Anyone can deploy pods.&lt;br&gt;\nEngineering Kubernetes means:&lt;br&gt;\nâ€¢ Designing failure domains intentionally&lt;br&gt;\nâ€¢ Accounting for invisible compute&lt;br&gt;\nâ€¢ Aligning scheduling with business rules&lt;br&gt;\nâ€¢ Optimizing cost through math, not guesswork&lt;/p&gt;\n\n&lt;p&gt;The scheduler is not just a placement tool.&lt;/p&gt;\n\n&lt;p&gt;It is:&lt;br&gt;\nA control plane decision engine.&lt;br&gt;\nAnd this separates:&lt;br&gt;\nClusters that survive production&lt;br&gt;\nfrom&lt;br&gt;\nClusters that collapse under it.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;&lt;strong&gt;(You no need to be a Kubestronaut to learn and apply not so known features of Kubernetes. All you need is a 'crisis' at 2 AM)&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-18T15:30:28.000Z",
    "url": "https://dev.to/suresh_devops_ffa0728a190/kubernetes-advanced-scheduling-we-fixed-real-production-incidents-43de"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Components structure in Twenty codebaseâ€Š-â€ŠPartÂ 1.2",
    "partialText": "&lt;p&gt;Inspired by &lt;a href=\"https://github.com/alan2207/bulletproof-react/tree/master\" rel=\"noopener noreferrer\"&gt;BulletProof React&lt;/a&gt;, I applied its codebase architecture concepts to the &lt;a href=\"https://github.com/twentyhq/twenty/tree/b4d957306ea267e7958d82388f04711d476be660\" rel=\"noopener noreferrer\"&gt;Twenty codebase&lt;/a&gt;.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;This article focuses only on the components structure in &lt;a href=\"https://github.com/twentyhq/twenty/tree/b4d957306ea267e7958d82388f04711d476be660\" rel=\"noopener noreferrer\"&gt;Twenty codebase&lt;/a&gt;.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h3&gt;\n  \n  \n  Prerequisite\n&lt;/h3&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Components structure in Twenty codebaseâ€Šâ€”â€ŠPart 1.0&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Components structure in Twenty codebaseâ€Šâ€”â€ŠPart 1.1&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;In Part 1.1, we reviewed the onboarding related components. In this Part 1.2, we review the components structure in the &lt;code&gt;/settings&lt;/code&gt; route.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;useCreateAppRouter.tsx&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;SettingsRoutes.tsx&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;There is a lot more in the settings route, but our goal is to check the consistent patterns used, instead of going through all the components.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fvpuzplhnc49a6nreoi6r.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fvpuzplhnc49a6nreoi6r.png\" width=\"800\" height=\"475\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  useCreateAppRouter.tsx\n&lt;/h3&gt;\n\n&lt;p&gt;In the twent-front, &lt;a href=\"https://github.com/twentyhq/twenty/blob/c3d565f266dff77476541bff290eb9f0dd2d0268/packages/twenty-front/src/modules/app/components/AppRouter.tsx\" rel=\"noopener noreferrer\"&gt;AppRouter.tsx&lt;/a&gt; returns the following:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt; &lt;span class=\"k\"&gt;return &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;RouterProvider&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;router&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nf\"&gt;useCreateAppRouter&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;isFunctionSettingsEnabled&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;isAdminPageEnabled&lt;/span&gt;&lt;span class=\"p\"&gt;)}&lt;/span&gt;\n    &lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;  &lt;span class=\"p\"&gt;);&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Here useCreateAppRouter.tsx is defined at &lt;a href=\"https://github.com/twentyhq/twenty/blob/c3d565f266dff77476541bff290eb9f0dd2d0268/packages/twenty-front/src/modules/app/hooks/useCreateAppRouter.tsx\" rel=\"noopener noreferrer\"&gt;@/app/hooks/useCreateAppRouter&lt;/a&gt; and has all the routes defined.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;useCreateAppRouter&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;isFunctionSettingsEnabled&lt;/span&gt;&lt;span class=\"p\"&gt;?:&lt;/span&gt; &lt;span class=\"nx\"&gt;boolean&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;isAdminPageEnabled&lt;/span&gt;&lt;span class=\"p\"&gt;?:&lt;/span&gt; &lt;span class=\"nx\"&gt;boolean&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt;\n  &lt;span class=\"nf\"&gt;createBrowserRouter&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"nf\"&gt;createRoutesFromElements&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n      &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Route&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;element&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;AppRouterProviders&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// To switch state to `loading` temporarily to enable us&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// to set scroll position before the page is rendered&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;loader&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"k\"&gt;async &lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;Promise&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;resolve&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kc\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;)}&lt;/span&gt;\n      &lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Route&lt;/span&gt; &lt;span class=\"nx\"&gt;element&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;DefaultLayout&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt;\n          &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Route&lt;/span&gt; &lt;span class=\"nx\"&gt;path&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;AppPath&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;Verify&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"nx\"&gt;element&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;VerifyLoginTokenEffect&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;          &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Route&lt;/span&gt; &lt;span class=\"nx\"&gt;path&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;AppPath&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;VerifyEmail&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"nx\"&gt;element&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;VerifyEmailEffect&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;          &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Route&lt;/span&gt; &lt;span class=\"nx\"&gt;path&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;AppPath&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;SignInUp&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"nx\"&gt;element&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;SignInUp&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;However, I could not find the code for /people or /companies. May be this is closed source. Sometimes OSS projects do these, not all parts of can be open.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  SettingsRoutes.tsx\n&lt;/h3&gt;\n\n&lt;p&gt;In the useCreateAppRouter.tsx, at L66, &lt;a href=\"https://github.com/twentyhq/twenty/blob/main/packages/twenty-front/src/modules/app/components/SettingsRoutes.tsx#L409\" rel=\"noopener noreferrer\"&gt;SettingsRoute&lt;/a&gt; is defined as below:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Route&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;path&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;AppPath&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;SettingsCatchAll&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;\n  &lt;span class=\"nx\"&gt;element&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;SettingsRoutes&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;isFunctionSettingsEnabled&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;isFunctionSettingsEnabled&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;isAdminPageEnabled&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;isAdminPageEnabled&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"sr\"&gt;/&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Because settings has so many nested routes, there is a separate component containing all the settings routes.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;SettingsRoutes&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;@/app/components/SettingsRoutes&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;I considered SettingsProfile and SettingsWorkspace to study the components structure and patterns.&lt;/p&gt;\n\n&lt;p&gt;You will learn more about these in Part 1.3.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  About me:\n&lt;/h3&gt;\n\n&lt;p&gt;Hey, my name is &lt;a href=\"https://ramunarasinga.com/\" rel=\"noopener noreferrer\"&gt;Ramu Narasinga&lt;/a&gt;. I study codebase architecture in large open-source projects.&lt;/p&gt;\n\n&lt;p&gt;Email: &lt;a href=\"mailto:ramu.narasinga@gmail.com\"&gt;ramu.narasinga@gmail.com&lt;/a&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;em&gt;I spent 200+ hours analyzing Supabase, shadcn/ui, LobeChat. Found the patterns that separate AI slop from production code. Stop refactoring AI slop. Start with proven patterns. Check out production-grade projects at&lt;/em&gt; &lt;a href=\"http://thinkthroo.com/\" rel=\"noopener noreferrer\"&gt;&lt;em&gt;thinkthroo.com&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h3&gt;\n  \n  \n  References:\n&lt;/h3&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=\"https://github.com/twentyhq/twenty/blob/c3d565f266dff77476541bff290eb9f0dd2d0268/packages/twenty-front/src/modules/app/components/AppRouter.tsx\" rel=\"noopener noreferrer\"&gt;twenty/packages/twenty-front/â€¦/components/AppRouter.tsx&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=\"https://github.com/twentyhq/twenty/blob/c3d565f266dff77476541bff290eb9f0dd2d0268/packages/twenty-front/src/modules/app/hooks/useCreateAppRouter.tsx\" rel=\"noopener noreferrer\"&gt;twenty/packages/twenty-front/â€¦/hooks/useCreateAppRouter.tsx&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=\"https://github.com/twentyhq/twenty/blob/main/packages/twenty-front/src/modules/app/components/SettingsRoutes.tsx#L409\" rel=\"noopener noreferrer\"&gt;twenty/packages/twenty-front/â€¦/components/SettingsRoutes.tsx#L409&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=\"https://github.com/twentyhq/twenty/blob/main/packages/twenty-front/src/pages/settings/SettingsWorkspace.tsx#L13\" rel=\"noopener noreferrer\"&gt;twenty/packages/twenty-front/â€¦/SettingsWorkspace.tsx#L13&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=\"https://github.com/twentyhq/twenty/blob/main/packages/twenty-front/src/pages/settings/SettingsProfile.tsx#L20\" rel=\"noopener noreferrer\"&gt;twenty/packages/twenty-front/â€¦/SettingsProfile.tsx#L20&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;",
    "date": "2026-02-18T15:30:00.000Z",
    "url": "https://dev.to/ramunarasinga-11/components-structure-in-twenty-codebase-part-12-d3g"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "I Built My Own Social Media Platform (And Turned It Into a Game)",
    "partialText": "&lt;p&gt;Most social platforms reward noise.&lt;/p&gt;\n\n&lt;p&gt;The loudest voices win. The fastest takes spread. The algorithm decides what matters.&lt;/p&gt;\n\n&lt;p&gt;So I decided to build something different.&lt;/p&gt;\n\n&lt;p&gt;I created Hypenote â€” a community-driven discussion platform where influence isnâ€™t random. Itâ€™s earned.&lt;/p&gt;\n\n&lt;p&gt;ğŸ‘‰ Check it out here: &lt;a href=\"https://www.hypenote.online/\" rel=\"noopener noreferrer\"&gt;https://www.hypenote.online/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The Core Idea: Aura&lt;/p&gt;\n\n&lt;p&gt;On Hypenote, every user has something called Aura.&lt;/p&gt;\n\n&lt;p&gt;Upvotes increase your Aura&lt;/p&gt;\n\n&lt;p&gt;Downvotes decrease it&lt;/p&gt;\n\n&lt;p&gt;High Aura increases your influence&lt;/p&gt;\n\n&lt;p&gt;Low Aura limits your power&lt;/p&gt;\n\n&lt;p&gt;Aura isnâ€™t just a vanity number. It changes how the system treats you.&lt;/p&gt;\n\n&lt;p&gt;High Aura users can:&lt;/p&gt;\n\n&lt;p&gt;Pin posts&lt;/p&gt;\n\n&lt;p&gt;Create â€œcirclesâ€ (private communities)&lt;/p&gt;\n\n&lt;p&gt;Have stronger voting weight&lt;/p&gt;\n\n&lt;p&gt;Unlock cosmetic badges&lt;/p&gt;\n\n&lt;p&gt;Low Aura users:&lt;/p&gt;\n\n&lt;p&gt;Have post cooldowns&lt;/p&gt;\n\n&lt;p&gt;Carry less voting weight&lt;/p&gt;\n\n&lt;p&gt;Your influence is directly tied to how the community values your contributions.&lt;/p&gt;\n\n&lt;p&gt;Itâ€™s not just content. Itâ€™s reputation.&lt;/p&gt;\n\n&lt;p&gt;Making It Feel Like a Game&lt;/p&gt;\n\n&lt;p&gt;I didnâ€™t want another static discussion board. I wanted something dynamic.&lt;/p&gt;\n\n&lt;p&gt;So I added mechanics inspired by game systems:&lt;/p&gt;\n\n&lt;p&gt;Aura decay over time (stay active or lose influence)&lt;/p&gt;\n\n&lt;p&gt;Streak bonuses for consistent participation&lt;/p&gt;\n\n&lt;p&gt;Daily limited posts&lt;/p&gt;\n\n&lt;p&gt;Early community slot limits&lt;/p&gt;\n\n&lt;p&gt;Anonymous confessions&lt;/p&gt;\n\n&lt;p&gt;Unfiltered controversial takes&lt;/p&gt;\n\n&lt;p&gt;Scarcity creates behavior.&lt;br&gt;\nReputation creates tension.&lt;br&gt;\nInfluence creates competition.&lt;/p&gt;\n\n&lt;p&gt;Now itâ€™s not just posting. Itâ€™s strategy.&lt;/p&gt;\n\n&lt;p&gt;Why I Built It&lt;/p&gt;\n\n&lt;p&gt;Iâ€™ve always been fascinated by how platforms shape behavior.&lt;/p&gt;\n\n&lt;p&gt;Reddit has karma.&lt;br&gt;\nTwitter has followers.&lt;br&gt;\nStack Overflow has reputation.&lt;/p&gt;\n\n&lt;p&gt;But what if influence wasnâ€™t just social proof â€” what if it actively changed your capabilities?&lt;/p&gt;\n\n&lt;p&gt;Hypenote is an experiment in that idea.&lt;/p&gt;\n\n&lt;p&gt;Can you design a platform where reputation actually matters?&lt;/p&gt;\n\n&lt;p&gt;Can you create a system that rewards quality over noise?&lt;/p&gt;\n\n&lt;p&gt;I donâ€™t know yet.&lt;/p&gt;\n\n&lt;p&gt;Thatâ€™s the fun part.&lt;/p&gt;\n\n&lt;p&gt;What I Learned Building It&lt;/p&gt;\n\n&lt;p&gt;Gamification changes everything.&lt;/p&gt;\n\n&lt;p&gt;Scarcity drives engagement.&lt;/p&gt;\n\n&lt;p&gt;Moderation isnâ€™t optional â€” itâ€™s survival.&lt;/p&gt;\n\n&lt;p&gt;Social systems are psychology engines disguised as apps.&lt;/p&gt;\n\n&lt;p&gt;Building a social platform forces you to think about behavior, incentives, and abuse patterns. Youâ€™re not just writing code â€” youâ€™re designing human interaction.&lt;/p&gt;\n\n&lt;p&gt;Whatâ€™s Next&lt;/p&gt;\n\n&lt;p&gt;Right now, Hypenote is focused on:&lt;/p&gt;\n\n&lt;p&gt;Core posting and threaded discussions&lt;/p&gt;\n\n&lt;p&gt;Aura mechanics&lt;/p&gt;\n\n&lt;p&gt;Basic moderation and rate limiting&lt;/p&gt;\n\n&lt;p&gt;Dark theme and responsive UI&lt;/p&gt;\n\n&lt;p&gt;Next steps:&lt;/p&gt;\n\n&lt;p&gt;Smarter trending algorithms&lt;/p&gt;\n\n&lt;p&gt;Improved moderation tooling&lt;/p&gt;\n\n&lt;p&gt;Expanding the â€œcircleâ€ system&lt;/p&gt;\n\n&lt;p&gt;Refining Aura weight logic&lt;/p&gt;\n\n&lt;p&gt;This is still early. Itâ€™s an evolving system.&lt;/p&gt;\n\n&lt;p&gt;But building your own social media platform from scratch?&lt;br&gt;\nThat changes how you see the internet.&lt;/p&gt;\n\n&lt;p&gt;Hypenote is live, but itâ€™s actively being improved.&lt;/p&gt;\n\n&lt;p&gt;You might encounter small bugs, UI inconsistencies, or experimental mechanics while I continue upgrading and refining the system. Thatâ€™s part of building in public.&lt;/p&gt;\n\n&lt;p&gt;Feedback is welcome. Iteration is constant.&lt;/p&gt;\n\n&lt;p&gt;If nothing else, I learned one thing:&lt;/p&gt;\n\n&lt;p&gt;Platforms donâ€™t just host conversations.&lt;br&gt;\nThey shape them.&lt;/p&gt;\n\n&lt;p&gt;And if you can shape behavior, youâ€™re not building an app.&lt;br&gt;\nYouâ€™re building a system.&lt;/p&gt;",
    "date": "2026-02-18T15:25:36.000Z",
    "url": "https://dev.to/ravsalt/i-built-my-own-social-media-platform-and-turned-it-into-a-game-3k68"
  }
]