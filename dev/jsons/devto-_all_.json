[
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "New devs with real projects ‚Äî are you struggling to get hired too?",
    "partialText": "&lt;p&gt;I‚Äôm curious how others are experiencing the entry-level dev market right now.&lt;/p&gt;\n\n&lt;p&gt;I‚Äôve put real effort into learning &amp;amp; building a couple production-ready projects ‚Äî not just tutorials, but things I've shipped. I thought that would move me closer to being ‚Äújob ready,‚Äù yet applications still seem to go nowhere.&lt;/p&gt;\n\n&lt;p&gt;So I want to compare notes:&lt;/p&gt;\n\n&lt;p&gt;If you‚Äôre a newer developer with solid projects, are you also struggling to get hired? What feedback (if any) are you getting? Do you feel the bar has moved, or are we missing something important?&lt;/p&gt;\n\n&lt;p&gt;Would genuinely like to hear what others are seeing.&lt;/p&gt;",
    "date": "2026-02-17T01:42:48.000Z",
    "url": "https://dev.to/israelrotimi/new-devs-with-real-projects-are-you-struggling-to-get-hired-too-4544"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Cloudflare Bot Fight Mode Breaks Zapier OAuth (And How to Fix It)",
    "partialText": "&lt;blockquote&gt;\n&lt;p&gt;&lt;em&gt;This article was originally published on &lt;a href=\"https://jo4.io/blog/cloudflare-bot-fight-mode/\" rel=\"noopener noreferrer\"&gt;Jo4 Blog&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;em&gt;This is a follow-up to my previous article on implementing Zapier OAuth in Spring Boot. After solving all the code issues, I hit one more wall.&lt;/em&gt;&lt;/p&gt;\n\n\n\n\n&lt;p&gt;You've implemented OAuth 2.0 with PKCE. Your E2E tests pass. You deploy to production. Zapier shows:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Oh, foo. Zapier could not connect to your account.\nTry connecting again. Or go to your Zaps and try re-enabling them.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The Cloudflare \"Just a moment...\" page strikes again.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Symptom\n&lt;/h2&gt;\n\n&lt;p&gt;Zapier's OAuth callback hits your &lt;code&gt;/oauth/token&lt;/code&gt; endpoint and gets a 403 with an HTML page instead of JSON:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight html\"&gt;&lt;code&gt;&lt;span class=\"cp\"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;\n&lt;span class=\"nt\"&gt;&amp;lt;html&lt;/span&gt; &lt;span class=\"na\"&gt;lang=&lt;/span&gt;&lt;span class=\"s\"&gt;\"en-US\"&lt;/span&gt;&lt;span class=\"nt\"&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\"nt\"&gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;&lt;/span&gt;Just a moment...&lt;span class=\"nt\"&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;\n&lt;span class=\"c\"&gt;&amp;lt;!-- Cloudflare challenge page --&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Your logs show nothing. Because the request never reaches your application.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Root Cause: Bot Fight Mode\n&lt;/h2&gt;\n\n&lt;p&gt;If you have &lt;strong&gt;Bot Fight Mode&lt;/strong&gt; enabled in Cloudflare (Security &amp;gt; Settings &amp;gt; Bot traffic), it's challenging Zapier's automated requests. Even though Zapier is in Cloudflare's verified bots list.&lt;/p&gt;\n\n&lt;p&gt;\"Easy fix,\" I thought. \"I'll create a WAF rule to skip Bot Fight Mode for &lt;code&gt;/oauth/*&lt;/code&gt; paths.\"&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Wrong.&lt;/strong&gt;&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Documented Limitation You Won't Find Easily\n&lt;/h2&gt;\n\n&lt;p&gt;From Cloudflare's official docs:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;\"You cannot bypass or skip Bot Fight Mode using the Skip action in WAF custom rules or using Page Rules.\"&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;And the explanation:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;\"Skip, Bypass, and Allow actions apply to rules or rulesets running on the Ruleset Engine. While Super Bot Fight Mode rules are implemented in the Ruleset Engine, &lt;strong&gt;Bot Fight Mode checks are not.&lt;/strong&gt;\"&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Translation: Bot Fight Mode (Free plan) runs outside the normal rule engine. No WAF rule, Page Rule, or IP Access Rule can bypass it for specific paths. It's all-or-nothing.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Solutions\n&lt;/h2&gt;\n\n&lt;h3&gt;\n  \n  \n  Option 1: Disable Bot Fight Mode Entirely (Free Plan)\n&lt;/h3&gt;\n\n&lt;p&gt;If you're on Cloudflare Free:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Go to &lt;strong&gt;Security &amp;gt; Settings&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;Click &lt;strong&gt;Bot traffic&lt;/strong&gt; filter&lt;/li&gt;\n&lt;li&gt;Turn off &lt;strong&gt;Bot Fight Mode&lt;/strong&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Your OAuth works. But you lose bot protection everywhere.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Option 2: Upgrade to Pro ($20/month) and Use Super Bot Fight Mode\n&lt;/h3&gt;\n\n&lt;p&gt;Super Bot Fight Mode &lt;em&gt;does&lt;/em&gt; run in the Ruleset Engine. You can skip it for specific paths.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Step 1: Enable Super Bot Fight Mode&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Upgrade to Cloudflare Pro&lt;/li&gt;\n&lt;li&gt;Go to &lt;strong&gt;Security &amp;gt; Settings &amp;gt; Bot traffic&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;Configure &lt;strong&gt;Super Bot Fight Mode&lt;/strong&gt;:\n\n&lt;ul&gt;\n&lt;li&gt;Definitely automated traffic: &lt;strong&gt;Block&lt;/strong&gt; or &lt;strong&gt;Managed Challenge&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;Verified bots: &lt;strong&gt;Allow&lt;/strong&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;Step 2: Create Skip Rule for OAuth&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Go to &lt;strong&gt;Security &amp;gt; Security rules&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;Click &lt;strong&gt;Create rule&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;Configure:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Rule name:&lt;/strong&gt; &lt;code&gt;Skip SBFM for OAuth&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Expression:&lt;/strong&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt; (starts_with(http.request.uri.path, \"/oauth/token\")) or\n (starts_with(http.request.uri.path, \"/oauth/authorize\")) or\n (starts_with(http.request.uri.path, \"/oauth/userinfo\"))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Action:&lt;/strong&gt; &lt;strong&gt;Skip&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;WAF components to skip:&lt;/strong&gt; Check &lt;strong&gt;All Super Bot Fight Mode Rules&lt;/strong&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Click &lt;strong&gt;Deploy&lt;/strong&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Step 3: Test Zapier&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Retry the OAuth connection. Should work now.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Why This Matters\n&lt;/h2&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Plan&lt;/th&gt;\n&lt;th&gt;Bot Protection&lt;/th&gt;\n&lt;th&gt;Can Skip for APIs?&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;Free&lt;/td&gt;\n&lt;td&gt;Bot Fight Mode&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Pro ($20/mo)&lt;/td&gt;\n&lt;td&gt;Super Bot Fight Mode&lt;/td&gt;\n&lt;td&gt;Yes&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n&lt;p&gt;If you're building integrations with Zapier, Make.com, n8n, or any other automation platform, you need the ability to exempt your OAuth endpoints from bot challenges. That requires Pro.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Cost-Benefit\n&lt;/h2&gt;\n\n&lt;p&gt;$20/month for Cloudflare Pro gives you:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Super Bot Fight Mode with path-based exceptions&lt;/li&gt;\n&lt;li&gt;Better analytics&lt;/li&gt;\n&lt;li&gt;Polish Rules (5 vs 0)&lt;/li&gt;\n&lt;li&gt;Faster support&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;For a production SaaS with third-party integrations, it's worth it. The alternative is no bot protection at all.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  TL;DR\n&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Bot Fight Mode (Free):&lt;/strong&gt; Cannot be bypassed for specific paths. All or nothing.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Super Bot Fight Mode (Pro):&lt;/strong&gt; Can be skipped using WAF custom rules.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;The fix:&lt;/strong&gt; Upgrade to Pro, enable SBFM, create Skip rule for &lt;code&gt;/oauth/*&lt;/code&gt; paths.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;OAuth integration isn't done until Cloudflare lets the requests through.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;em&gt;Building &lt;a href=\"https://jo4.io\" rel=\"noopener noreferrer\"&gt;jo4.io&lt;/a&gt; - URL shortener with Zapier, Make.com, and n8n integrations.&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-17T01:35:14.000Z",
    "url": "https://dev.to/anand_rathnas_d5b608cc3de/cloudflare-bot-fight-mode-breaks-zapier-oauth-and-how-to-fix-it-2429"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Privacy First: Chat with Your Medical Reports Locally using Llama-3 and MLX on Mac üçé",
    "partialText": "&lt;p&gt;Your health data is probably the most sensitive information you own. Yet, in the age of AI, most people blindly upload their blood work and MRI results to cloud-based LLMs just to get a summary. Stop right there! üõë&lt;/p&gt;\n\n&lt;p&gt;In this tutorial, we are going to build a &lt;strong&gt;Local RAG (Retrieval-Augmented Generation)&lt;/strong&gt; system. We will leverage the power of &lt;strong&gt;Apple Silicon's unified memory&lt;/strong&gt;, the high-performance &lt;strong&gt;MLX framework&lt;/strong&gt;, and &lt;strong&gt;Llama-3&lt;/strong&gt; to create a private medical assistant that never leaks a single byte to the internet. By using &lt;strong&gt;Local RAG&lt;/strong&gt; and &lt;strong&gt;MLX-optimized Llama-3&lt;/strong&gt;, you can perform complex &lt;strong&gt;semantic search&lt;/strong&gt; and data extraction on your medical PDFs while keeping your data strictly on-device.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Architecture: Why MLX?\n&lt;/h2&gt;\n\n&lt;p&gt;Traditional RAG stacks often rely on heavy Docker containers or cloud APIs. However, if you are on a Mac (M1/M2/M3), the &lt;strong&gt;MLX framework&lt;/strong&gt; (developed by Apple Machine Learning Research) allows you to run Llama-3 with incredible efficiency by utilizing the GPU and unified memory architecture.&lt;/p&gt;\n\n&lt;p&gt;Here is how the data flows from your dusty PDF report to a meaningful conversation:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;graph TD\n    A[Medical PDF Report] --&amp;gt;|PyMuPDF| B(Text Extraction &amp;amp; Cleaning)\n    B --&amp;gt; C{Chunking Strategy}\n    C --&amp;gt;|Sentence Splitting| D[ChromaDB Vector Store]\n    E[User Query: 'Is my cholesterol high?'] --&amp;gt;|MLX Embedding| F(Vector Search)\n    D --&amp;gt;|Retrieve Relevant Context| G[Prompt Augmentation]\n    G --&amp;gt;|Context + Query| H[Llama-3-8B via MLX]\n    H --&amp;gt; I[Private Local Answer]\n\n    style H fill:#f96,stroke:#333,stroke-width:2px\n    style D fill:#bbf,stroke:#333,stroke-width:2px\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Prerequisites\n&lt;/h2&gt;\n\n&lt;p&gt;Before we dive into the code, ensure you have an Apple Silicon Mac and the following stack installed:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Llama-3-8B&lt;/strong&gt;: We'll use the 4-bit quantized version for speed.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;MLX&lt;/strong&gt;: Apple's native array framework.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;ChromaDB&lt;/strong&gt;: Our lightweight vector database.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;PyMuPDF (fitz)&lt;/strong&gt;: For high-accuracy PDF parsing.\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;pip &lt;span class=\"nb\"&gt;install &lt;/span&gt;mlx-lm chromadb pymupdf sentence-transformers\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 1: Parsing Sensitive PDFs with PyMuPDF\n&lt;/h2&gt;\n\n&lt;p&gt;Medical reports are notoriously messy‚Äîtables, signatures, and weird formatting. We use &lt;code&gt;PyMuPDF&lt;/code&gt; for its speed and reliability in extracting clean text.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;fitz&lt;/span&gt;  &lt;span class=\"c1\"&gt;# PyMuPDF\n&lt;/span&gt;\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;extract_medical_text&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;pdf_path&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n    &lt;span class=\"n\"&gt;doc&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;fitz&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;open&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;pdf_path&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;text&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"\"&lt;/span&gt;\n    &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;page&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"n\"&gt;doc&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n        &lt;span class=\"n\"&gt;text&lt;/span&gt; &lt;span class=\"o\"&gt;+=&lt;/span&gt; &lt;span class=\"n\"&gt;page&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;get_text&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;text&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;# Simple cleaning: remove extra whitespaces\n&lt;/span&gt;    &lt;span class=\"n\"&gt;clean_text&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt; &lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;split&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;clean_text&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;# Usage\n&lt;/span&gt;&lt;span class=\"n\"&gt;raw_data&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;extract_medical_text&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;my_blood_report_2024.pdf&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;Extracted &lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"nf\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;raw_data&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt; characters.&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 2: Vector Embeddings and Local Storage\n&lt;/h2&gt;\n\n&lt;p&gt;To find relevant information (like \"What was my Glucose level?\"), we need to convert text into vectors. We'll store these in &lt;strong&gt;ChromaDB&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;üí° &lt;strong&gt;Pro-Tip&lt;/strong&gt;: For more production-ready examples and advanced RAG patterns, check out the detailed guides on the &lt;a href=\"https://www.wellally.tech/blog\" rel=\"noopener noreferrer\"&gt;WellAlly Tech Blog&lt;/a&gt;, where we dive deep into optimizing local inference.&lt;br&gt;\n&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;chromadb&lt;/span&gt;\n&lt;span class=\"kn\"&gt;from&lt;/span&gt; &lt;span class=\"n\"&gt;chromadb.utils&lt;/span&gt; &lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;embedding_functions&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;# Initialize local ChromaDB\n&lt;/span&gt;&lt;span class=\"n\"&gt;client&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;chromadb&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;PersistentClient&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;path&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;./medical_db&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"c1\"&gt;# Using a local embedding model\n&lt;/span&gt;&lt;span class=\"n\"&gt;emb_fn&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;embedding_functions&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;SentenceTransformerEmbeddingFunction&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;model_name&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;all-MiniLM-L6-v2&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;collection&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;client&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;get_or_create_collection&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;name&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;medical_reports&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;embedding_function&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"n\"&gt;emb_fn&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;add_to_vector_store&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;metadata&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;# Chunking text into 500-character pieces\n&lt;/span&gt;    &lt;span class=\"n\"&gt;chunks&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;+&lt;/span&gt;&lt;span class=\"mi\"&gt;500&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"nf\"&gt;range&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nf\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;text&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"mi\"&gt;500&lt;/span&gt;&lt;span class=\"p\"&gt;)]&lt;/span&gt;\n    &lt;span class=\"n\"&gt;ids&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;id_&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt; &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"nf\"&gt;range&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;chunks&lt;/span&gt;&lt;span class=\"p\"&gt;))]&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;collection&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;add&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"n\"&gt;documents&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"n\"&gt;chunks&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;ids&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"n\"&gt;ids&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadatas&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;metadata&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"nf\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;chunks&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"nf\"&gt;add_to_vector_store&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;raw_data&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;source&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;annual_checkup_2024&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;})&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Step 3: Local Inference with Llama-3 &amp;amp; MLX\n&lt;/h2&gt;\n\n&lt;p&gt;Now for the magic. We use &lt;code&gt;mlx-lm&lt;/code&gt; to load a quantized Llama-3-8B. This allows the model to run comfortably even on a MacBook Air with 16GB of RAM. üöÄ&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"kn\"&gt;from&lt;/span&gt; &lt;span class=\"n\"&gt;mlx_lm&lt;/span&gt; &lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;load&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;generate&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;# Load the model and tokenizer\n&lt;/span&gt;&lt;span class=\"n\"&gt;model&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;tokenizer&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;load&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;mlx-community/Meta-Llama-3-8B-Instruct-4bit&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;query_private_ai&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;user_question&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;# 1. Retrieve context from ChromaDB\n&lt;/span&gt;    &lt;span class=\"n\"&gt;results&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;collection&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;query_texts&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;user_question&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;n_results&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"mi\"&gt;3&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;context&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"se\"&gt;\\n&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;join&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;results&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;documents&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;][&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;# 2. Construct the prompt\n&lt;/span&gt;    &lt;span class=\"n\"&gt;prompt&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;\"\"\"&lt;/span&gt;&lt;span class=\"s\"&gt;\n    You are a private medical assistant. Use the provided medical report context to answer the user&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;s question. \n    If you don&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;t know the answer based on the context, say so. \n    Context: &lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;context&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt;\n    ---\n    Question: &lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;user_question&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt;\n    Answer:\n    &lt;/span&gt;&lt;span class=\"sh\"&gt;\"\"\"&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;# 3. Generate response using MLX\n&lt;/span&gt;    &lt;span class=\"n\"&gt;response&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;generate&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;model&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;tokenizer&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;prompt&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"n\"&gt;prompt&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;verbose&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"bp\"&gt;False&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;max_tokens&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"mi\"&gt;500&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;response&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;# Example Query\n&lt;/span&gt;&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;query_private_ai&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;What are the key concerns in my blood report?&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Taking it Further: The \"Official\" Way\n&lt;/h2&gt;\n\n&lt;p&gt;While this script gets you started, building a production-grade medical AI requires handling multi-modal data (like X-rays) and ensuring rigorous HIPAA-like compliance even on local edge devices. &lt;/p&gt;\n\n&lt;p&gt;The team at &lt;strong&gt;WellAlly&lt;/strong&gt; has been pioneering \"Privacy-First AI\" architectures. If you're interested in scaling this to multiple users or integrating it into a secure healthcare workflow, I highly recommend reading their latest deep-dives on &lt;a href=\"https://www.wellally.tech/blog\" rel=\"noopener noreferrer\"&gt;https://www.wellally.tech/blog&lt;/a&gt;. They cover how to fine-tune Llama-3 specifically for clinical terminology which significantly reduces hallucinations.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Conclusion ü•ë\n&lt;/h2&gt;\n\n&lt;p&gt;You just built a private, high-performance medical RAG system! By combining &lt;strong&gt;Llama-3&lt;/strong&gt;, &lt;strong&gt;MLX&lt;/strong&gt;, and &lt;strong&gt;ChromaDB&lt;/strong&gt;, you‚Äôve achieved:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Zero Data Leakage&lt;/strong&gt;: Your health data never leaves your Mac.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;High Performance&lt;/strong&gt;: MLX makes local LLMs feel snappy.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Intelligence&lt;/strong&gt;: Llama-3 provides reasoning that simple keyword searches can't match.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;What's next?&lt;/strong&gt; üõ†Ô∏è &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Try implementing a \"Table Parser\" for more accurate lab result extraction.&lt;/li&gt;\n&lt;li&gt;Add a Streamlit UI to make it look like a real app.&lt;/li&gt;\n&lt;li&gt;Let me know in the comments: What's your biggest concern with Cloud AI?&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Stay private, stay healthy!&lt;/strong&gt; üíªüõ°Ô∏è&lt;/p&gt;",
    "date": "2026-02-17T01:20:00.000Z",
    "url": "https://dev.to/wellallytech/privacy-first-chat-with-your-medical-reports-locally-using-llama-3-and-mlx-on-mac-3616"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Simulating Blackjack the Hard Way",
    "partialText": "&lt;p&gt;I built a blackjack simulator. That sentence undersells it. What I actually built is a 28,000-line Python framework for simulating card games with an event-driven architecture, immutable state management, and realistic shuffle physics. For blackjack.&lt;/p&gt;\n\n&lt;p&gt;This is what happens when a software engineer gets curious about casino math.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Itch\n&lt;/h2&gt;\n\n&lt;p&gt;It started the way these things always start: I wanted to understand the numbers. Not the hand-wavy \"the house has a 0.5% edge\" stuff you read online, but the actual mechanics. How does basic strategy change when the dealer hits soft 17? What does card counting really buy you? How many riffle shuffles does it take before a deck is actually random?&lt;/p&gt;\n\n&lt;p&gt;I could have read a book. Instead I wrote a simulator. Then I rewrote it. Then I rewrote it again.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Getting the Simulation Right\n&lt;/h2&gt;\n\n&lt;p&gt;The first rule I set for myself was no shortcuts. If you're simulating blackjack to understand blackjack, you can't approximate the parts you find inconvenient. Every card comes from a shoe. Every shuffle follows real physics. Every hand resolves by the actual casino rules: splits, doubles, surrender, insurance, the whole mess.&lt;/p&gt;\n\n&lt;p&gt;The shuffle simulation is where things got interesting. A perfect Fisher-Yates shuffle is trivial to implement, and it produces a uniformly random deck. But casino dealers don't perform perfect shuffles. They do riffle shuffles, and the mathematics of imperfect riffles are well-studied. It takes about seven riffle shuffles to adequately randomize a deck. Fewer than that and there's exploitable structure left in the card order. I implemented three shuffle types with configurable fidelity so I could study exactly how much information survives an imperfect shuffle.&lt;/p&gt;\n\n&lt;p&gt;Card counting was the other rabbit hole. The basic Hi-Lo system is straightforward: low cards add one, high cards subtract one, divide by decks remaining. But professional play deviations are where it gets complicated. The correct play changes based on the true count. Sometimes you should hit a 16 against a dealer 10. Sometimes you shouldn't. The threshold depends on how deep you are into the shoe.&lt;/p&gt;\n\n&lt;p&gt;I implemented all of this because I wanted the numbers to be right.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Architecture Obsession\n&lt;/h2&gt;\n\n&lt;p&gt;The simulation code worked fine as a monolith. I could run thousands of hands and get statistically valid results. But I kept looking at the code and seeing things I wanted to fix.&lt;/p&gt;\n\n&lt;p&gt;The game logic was tangled up with the I/O. Strategy decisions were coupled to hand resolution. State was mutable and scattered across half a dozen objects. It worked, but it was the kind of code that made me uneasy. The kind where adding a new feature meant understanding every other feature first.&lt;/p&gt;\n\n&lt;p&gt;So I did a four-phase rewrite. Event-driven architecture, immutable state with frozen dataclasses, platform adapters to decouple the engine from any specific interface, and async support throughout. The kind of engineering that is completely unjustifiable for a side project and completely satisfying to build.&lt;/p&gt;\n\n&lt;p&gt;The core insight was treating every state change as an event. A card is dealt: that's an event. A player hits: event. The dealer reveals their hole card: event. This makes the game engine a pure state machine. Feed it actions, get back new states. No side effects, no hidden mutations, easy to test, easy to verify.&lt;/p&gt;\n\n&lt;p&gt;It also means you can record an entire game as a sequence of events and replay it later. When my simulation produced a result that looked wrong, I could step through every decision and see exactly where the math diverged from my expectations. Usually the math was right and my expectations were wrong.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  What 350,000 Hands Per Second Tells You\n&lt;/h2&gt;\n\n&lt;p&gt;At this point the simulator can run about 350,000 games per second. That's enough to get statistically meaningful results on almost any question you want to ask.&lt;/p&gt;\n\n&lt;p&gt;Some things I've confirmed that you probably already knew: basic strategy works. Card counting works, barely, under ideal conditions. The Martingale betting system is a reliable way to go broke slowly.&lt;/p&gt;\n\n&lt;p&gt;Some things that surprised me: the variance in blackjack is brutal. You can play perfect basic strategy and lose for hours. The math says you'll come out slightly ahead over thousands of hands, but \"slightly\" is doing a lot of heavy lifting in that sentence. I have a much better intuition now for why card counting requires both a large bankroll and an iron stomach.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Why Build This\n&lt;/h2&gt;\n\n&lt;p&gt;People build side projects for different reasons. Some want to ship a product. Some want to learn a technology. I wanted to understand a system, and building a simulation was the most thorough way I knew to do it.&lt;/p&gt;\n\n&lt;p&gt;The architecture work was its own reward. Not because anyone will ever need an event-driven blackjack engine with immutable state management, but because the patterns transfer. The same separation of concerns that makes a card game testable makes a distributed system debuggable. The same event-driven approach that lets me replay a hand of blackjack is the same approach that lets you replay a production incident.&lt;/p&gt;\n\n&lt;p&gt;The code is on &lt;a href=\"https://github.com/mmichie/cardsharp\" rel=\"noopener noreferrer\"&gt;GitHub&lt;/a&gt; if you want to look at it. Fair warning: it's a side project that kept growing. Twenty-eight thousand lines of Python for a card game. Some projects are just like that.&lt;/p&gt;",
    "date": "2026-02-17T01:16:53.000Z",
    "url": "https://dev.to/influx/simulating-blackjack-the-hard-way-395p"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Dispatch From the Other Side: From Scripts to Software",
    "partialText": "&lt;p&gt;At the start of my career as a security engineer, I built an allow list management system for our web gateway within the security operations center (SOC) I worked in. Beyond just a script, this was a live system that a core security component relied on. Someone once blocked a /3 vs a /32 IP range, and access to a third of the internet broke for all 40,000 employees. I knew the system I created had to prevent something like that from occurring again. The manager of the SOC analysts would have regular discussions with myself and my manager on any issues that arose, which helped me realize the impact my code had on someone else‚Äôs work. That was the first time I felt responsible for software, not just automation.&lt;/p&gt;\n\n&lt;p&gt;This series explores my lessons as I crossed into platform engineering from security engineering. What I might tell my past self, given the chance, and how I now approach problem solving with a software and platform engineer's perspective. If you're a security practitioner wondering what's on the other side, this is for you. If you're a developer who works with security teams, this might help explain why we think the way we do.&lt;/p&gt;\n\n&lt;p&gt;While in the security org, I started to notice that the numbers of vulnerabilities kept growing faster than we could fix them, given how often we patched. As cloud platforms came onto the scene, we also started to produce misconfiguration findings. Hoping to avoid the same outcome there, I took a different approach.&lt;/p&gt;\n\n&lt;p&gt;Rather than creating more findings to track, I identified platform controls that were acceptable to all parties. With stories of public S3 buckets causing data leakage left and right, I implemented a preventative control that disallowed public buckets. This eliminated those types of issues outright for both the development team and the vulnerability management team.&lt;/p&gt;\n\n&lt;p&gt;While the security team does not own and operate all systems in an enterprise, working with one platform or infrastructure team vs 50-100 can greatly reduce remediation time. However, there were a few times where we had to roll back a control as it negatively impacted teams‚Äô ability to operate their own systems. This taught me the value of progressive rollouts, a practice the rest of software engineering already relied on. Similarly, using policy-as-code we could move back to an older version of the policy in minutes.&lt;/p&gt;\n\n&lt;p&gt;Many skillsets in security are more portable than I realized. Conducting security reviews prepared me well for system design discussions and operational troubleshooting when a system might be down. From tracking an attacker's footsteps during incident response, I could debug a running system, stitching together the timeline with logs and traces. &lt;/p&gt;\n\n&lt;p&gt;The most effective controls I've built have been from understanding how development teams work and finding ways to remove risk without increasing friction. While not everyone needs to become a software engineer, understanding the core concepts and ways of working helps find solutions that don't slow teams down. In the next post, we'll explore CI/CD and how to balance effective controls, defaults and exceptions.&lt;/p&gt;",
    "date": "2026-02-17T01:16:09.000Z",
    "url": "https://dev.to/prince_of_pasta/dispatch-from-the-other-side-from-scripts-to-software-2md8"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "No Magic: Running Wasm Modules in Python",
    "partialText": "&lt;p&gt;WebAssembly is a pretty young technology and a promising one, it has many pros (platform independent, lighter than containers) and usage scenarios (browser apps, plugin system, edge computing).&lt;/p&gt;\n\n&lt;p&gt;WASM is designed to be language-agnostic. However, working with it from Python as a host may be not so obvious.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;Basically, WASM application consists of two parts: &lt;strong&gt;host&lt;/strong&gt; and &lt;strong&gt;guest&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Host&lt;/strong&gt; is the environment that runs wasm and controls its execution (e.g. a browser or a runtime like &lt;a href=\"https://docs.wasmtime.dev/\" rel=\"noopener noreferrer\"&gt;wasmtime&lt;/a&gt;).&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Guest&lt;/strong&gt; is the pluggable wasm module, that is built from Rust, C, Wat, Python, or whatever you want. It runs in sandboxed host environment&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fiyd3vd3n3ewsy3r6aila.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fiyd3vd3n3ewsy3r6aila.png\" alt=\"Image of interaction\" width=\"800\" height=\"441\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;To simplify guest &amp;lt;-&amp;gt; host interaction, there is a tool called &lt;a href=\"https://component-model.bytecodealliance.org/design/wit.html\" rel=\"noopener noreferrer\"&gt;Wasm Interface Type&lt;/a&gt; (WIT) - we can just describe interfaces in &lt;code&gt;.wit&lt;/code&gt; files and then generate bindings for both (guest/host) sides and implement logic.&lt;/p&gt;\n\n&lt;p&gt;As of now (february 2026), full automatic host-side binding generation for python &lt;a href=\"https://github.com/bytecodealliance/wasmtime-py/issues/309\" rel=\"noopener noreferrer\"&gt;remains incomplete&lt;/a&gt;.&lt;br&gt;\nHowever, &lt;a href=\"https://bytecodealliance.github.io/wasmtime-py/component/index.html#wasmtime.component\" rel=\"noopener noreferrer\"&gt;wasmtime.component&lt;/a&gt; provides low-level approach like &lt;code&gt;convert_to_c&lt;/code&gt; / &lt;code&gt;convert_from_c&lt;/code&gt; for marshalling types.&lt;/p&gt;\n\n&lt;p&gt;In this article we look how to run wasm modules from python and implement interaction manually (even without &lt;code&gt;wasmtime.component&lt;/code&gt;), using just wasm linear memory. I think it's pretty interesting to look how wasm interacts internally.&lt;/p&gt;\n\n\n\n&lt;p&gt;Ok, let's move next and talk about pluggable modules.&lt;/p&gt;\n\n&lt;p&gt;Guest modules can export / import functions. But function arguments can be passed only as simple numeric types - &lt;code&gt;i32&lt;/code&gt; &lt;code&gt;i64&lt;/code&gt; &lt;code&gt;f32&lt;/code&gt; &lt;code&gt;f64&lt;/code&gt;. &lt;/p&gt;\n\n&lt;p&gt;If a function needs more complex data (like &lt;code&gt;strings&lt;/code&gt;, &lt;code&gt;structs&lt;/code&gt;, &lt;code&gt;vectors&lt;/code&gt;), it must be transferred through &lt;strong&gt;linear memory&lt;/strong&gt;.&lt;/p&gt;\n&lt;h1&gt;\n  \n  \n  wasm memory\n&lt;/h1&gt;\n\n&lt;p&gt;Host &amp;lt;-&amp;gt; guest interaction works through wasm linear memory.&lt;/p&gt;\n\n&lt;p&gt;Both host and guest have full access to wasm instance memory. For example:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Host wants to send data to the instance, it writes the data into the instance‚Äôs memory at some offset.&lt;/li&gt;\n&lt;li&gt;Then the host calls a wasm function, passing an &lt;code&gt;i32&lt;/code&gt; pointer to that data.&lt;/li&gt;\n&lt;li&gt;The wasm code can then read memory from that pointer.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h1&gt;\n  \n  \n  component model\n&lt;/h1&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;em&gt;A little historical note.&lt;/em&gt; &lt;br&gt;\nThe name &lt;strong&gt;WebAssembly&lt;/strong&gt; comes from its origins: it was designed to bringing low-level \"assembly-like\" performance to the &lt;strong&gt;web&lt;/strong&gt; ‚Äî specifically for running code in browsers at near-native speed. It started as a Mozilla project around 2015, became a W3C standard in 2019, and initially targeted browser apps only.&lt;/p&gt;\n\n&lt;p&gt;But WebAssembly quickly outgrew the browser sandbox. To run wasm modules outside browsers, a standard way to access system resources safely was needed. This led to the &lt;a href=\"https://wasi.dev/\" rel=\"noopener noreferrer\"&gt;WebAssembly System Interface (WASI)&lt;/a&gt; ‚Äî a portable, capability-based API layer for wasm modules.&lt;/p&gt;\n\n&lt;p&gt;Then, in January 2024, the Bytecode Alliance released &lt;strong&gt;WASI 0.2&lt;/strong&gt; (also known as Preview 2 / P2), which officially incorporated the &lt;a href=\"https://component-model.bytecodealliance.org/\" rel=\"noopener noreferrer\"&gt;WebAssembly Component Model&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Instead of dealing with raw linear memory pointers and low-level functions, components communicate using structured, language-agnostic types defined in WIT. This enables true interoperability between components written in different languages.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h1&gt;\n  \n  \n  wit\n&lt;/h1&gt;\n\n&lt;p&gt;The &lt;a href=\"https://component-model.bytecodealliance.org/design/wit.html\" rel=\"noopener noreferrer\"&gt;wasm interface type&lt;/a&gt; language is used to define interfaces for interaction between host and guest.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;package xyz:machine;\n\ninterface machine-interface {\n    type machine-id = u64;\n\n    record point {\n        x: u32,\n        y: u32,\n    }\n\n    record run-result {\n        machine-id: machine-id,\n        message: string,\n    }\n\n    get-u32: func() -&amp;gt; u32;\n    get-str: func() -&amp;gt; string;\n    get-vec: func() -&amp;gt; list&amp;lt;u8&amp;gt;;\n    run: func(machine: machine-id, start: point, destination: point) -&amp;gt; run-result;\n    count-symbols: func(s: string) -&amp;gt; u32;\n}\n\nworld machine {\n    export machine-interface;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;With this approach developers can avoid implementing interfaces manually and just generate host / guest parts code with such tools as &lt;code&gt;wit-bindgen&lt;/code&gt;, &lt;code&gt;wasmtime-bindgen&lt;/code&gt; etc&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  the issue with python\n&lt;/h1&gt;\n\n&lt;p&gt;But... Python does not fully support these codegen tools and has only low-level support of wasm interface types.&lt;/p&gt;\n\n&lt;p&gt;This means on python side implementation must be manually implemented, even if &lt;code&gt;wit&lt;/code&gt; is used in module side to simplify module implementation.&lt;/p&gt;\n\n&lt;p&gt;Let's say wasm module is written in rust with wit-bindgen&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  rust side (guest)\n&lt;/h1&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight rust\"&gt;&lt;code&gt;&lt;span class=\"nn\"&gt;wit_bindgen&lt;/span&gt;&lt;span class=\"p\"&gt;::&lt;/span&gt;&lt;span class=\"nd\"&gt;generate!&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n    &lt;span class=\"n\"&gt;path&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"s\"&gt;\"wit\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;world&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"s\"&gt;\"machine\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;});&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;use&lt;/span&gt; &lt;span class=\"k\"&gt;crate&lt;/span&gt;&lt;span class=\"p\"&gt;::&lt;/span&gt;&lt;span class=\"nn\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;::&lt;/span&gt;&lt;span class=\"nn\"&gt;xyz&lt;/span&gt;&lt;span class=\"p\"&gt;::&lt;/span&gt;&lt;span class=\"nn\"&gt;machine&lt;/span&gt;&lt;span class=\"p\"&gt;::&lt;/span&gt;&lt;span class=\"nn\"&gt;machine_interface&lt;/span&gt;&lt;span class=\"p\"&gt;::{&lt;/span&gt;&lt;span class=\"n\"&gt;Guest&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;MachineId&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;Point&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;RunResult&lt;/span&gt;&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;struct&lt;/span&gt; &lt;span class=\"n\"&gt;Machine&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;impl&lt;/span&gt; &lt;span class=\"n\"&gt;Guest&lt;/span&gt; &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;Machine&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fn&lt;/span&gt; &lt;span class=\"nf\"&gt;get_u32&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"k\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;u32&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"mi\"&gt;123&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;fn&lt;/span&gt; &lt;span class=\"nf\"&gt;get_str&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"k\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;String&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"nn\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;::&lt;/span&gt;&lt;span class=\"nf\"&gt;from&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"simple string to return\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;fn&lt;/span&gt; &lt;span class=\"nf\"&gt;get_vec&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"k\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;Vec&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nb\"&gt;u8&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nd\"&gt;vec!&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;5&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;3&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;];&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;fn&lt;/span&gt; &lt;span class=\"nf\"&gt;run&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;machine&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;MachineId&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;start&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;Point&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;destination&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;Point&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;RunResult&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;RunResult&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"n\"&gt;machine_id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;message&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nd\"&gt;format!&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"machine {machine} run from {start:?} to {destination:?}\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;fn&lt;/span&gt; &lt;span class=\"nf\"&gt;count_symbols&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;s&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;u32&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;s&lt;/span&gt;&lt;span class=\"nf\"&gt;.chars&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;&lt;span class=\"nf\"&gt;.count&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"nb\"&gt;u32&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"nd\"&gt;export!&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;Machine&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;And to compile module:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;cargo build &lt;span class=\"nt\"&gt;--target&lt;/span&gt; wasm32-unknown-unknown\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;em&gt;note:&lt;/em&gt; with &lt;code&gt;wasm32-unknown-unknown&lt;/code&gt; target code will be compiled as module. To compile component, use &lt;code&gt;wasm32-wasip2&lt;/code&gt; (Preview 2) or &lt;code&gt;wasm32-wasip3&lt;/code&gt; (Preview 3)&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h1&gt;\n  \n  \n  python side (host)\n&lt;/h1&gt;\n\n&lt;h2&gt;\n  \n  \n  simple argument and return value\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;struct&lt;/span&gt;\n&lt;span class=\"kn\"&gt;from&lt;/span&gt; &lt;span class=\"n\"&gt;wasmtime&lt;/span&gt; &lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;loader&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;Config&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;Engine&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;Store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;Module&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;Linker&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;engine&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Engine&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n&lt;span class=\"n\"&gt;store&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Store&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;engine&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"n\"&gt;linker&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Linker&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;engine&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;wasm_intro&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;Module&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;from_file&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;engine&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;wasm_intro.wasm&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"n\"&gt;instance&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;linker&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;instantiate&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;wasm_intro&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"n\"&gt;exports&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;instance&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"n\"&gt;memory&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;memory&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n\n&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;([&lt;/span&gt;&lt;span class=\"n\"&gt;e&lt;/span&gt; &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;e&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n&lt;span class=\"c1\"&gt;# ['memory', 'xyz:machine/machine-interface#get-u32', 'xyz:machine/machine-interface#get-str', 'cabi_post_xyz:machine/machine-interface#get-str', 'xyz:machine/machine-interface#get-vec', 'cabi_post_xyz:machine/machine-interface#get-vec', 'xyz:machine/machine-interface#run', 'cabi_post_xyz:machine/machine-interface#run', 'xyz:machine/machine-interface#count-symbols', 'cabi_realloc']\n&lt;/span&gt;\n&lt;span class=\"c1\"&gt;# call function\n&lt;/span&gt;&lt;span class=\"n\"&gt;get_u32&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;xyz:machine/machine-interface#get-u32&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;get_u32&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt; &lt;span class=\"c1\"&gt;# 123\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;This was a simple interface,  now let's write host code for functions with more complex  interfaces.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  complex return value (string / vector)\n&lt;/h2&gt;\n\n&lt;p&gt;As you probably noticed before, every &lt;code&gt;xyz:machine/*&lt;/code&gt; function has &lt;code&gt;cabi_post_xyz:machine/*&lt;/code&gt; pair.&lt;br&gt;\nThis &lt;code&gt;cabi_post*&lt;/code&gt; functions must be called to free the memory after a string, vector or another value is handled and no longer needed.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;# string\n&lt;/span&gt;&lt;span class=\"n\"&gt;get_str&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;xyz:machine/machine-interface#get-str&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n&lt;span class=\"n\"&gt;cabi_post_get_str&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;cabi_post_xyz:machine/machine-interface#get-str&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;parse_string&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;wasmtime&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Memory&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;wasmtime&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;str&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n    &lt;span class=\"n\"&gt;STR_SIZE&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;\n    &lt;span class=\"n\"&gt;string_struct&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;read&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;STR_SIZE&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;str_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;str_len&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;struct&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;unpack&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;&amp;lt;II&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;string_struct&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;str_bytes&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;read&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;str_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;str_ptr&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;str_len&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;str_bytes&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;decode&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;str_ptr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;get_str&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;parse_string&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;str_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt; &lt;span class=\"c1\"&gt;# \"simple string to return\"\n&lt;/span&gt;&lt;span class=\"nf\"&gt;cabi_post_get_str&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;str_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n\n&lt;span class=\"c1\"&gt;# vector of u8\n&lt;/span&gt;&lt;span class=\"n\"&gt;get_vec&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;xyz:machine/machine-interface#get-vec&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n&lt;span class=\"n\"&gt;cabi_post_get_vec&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;cabi_post_xyz:machine/machine-interface#get-vec&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;parse_u8_vec&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;wasmtime&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Memory&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"n\"&gt;wasmtime&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;Store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nb\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;]:&lt;/span&gt;\n    &lt;span class=\"n\"&gt;U8_SIZE&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;\n    &lt;span class=\"nb\"&gt;bytes&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;read&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"n\"&gt;data_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;length&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;struct&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;unpack&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;&amp;lt;II&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nb\"&gt;bytes&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;data_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;length&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;next_elem_ptr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;data_ptr&lt;/span&gt;\n    &lt;span class=\"n\"&gt;vec_bytes&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;read&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;data_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;data_ptr&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;length&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;vec_bytes&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;vec_ptr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;get_vec&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;parse_u8_vec&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;vec_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt; &lt;span class=\"c1\"&gt;# [5, 4, 3, 2, 1, 10]\n&lt;/span&gt;&lt;span class=\"nf\"&gt;cabi_post_get_vec&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;vec_ptr&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Note: If the vector contains not u8 values but, for example, structs, remember to account for alignment between elements. According to the &lt;a href=\"https://github.com/WebAssembly/tool-conventions/blob/main/BasicCABI.md\" rel=\"noopener noreferrer\"&gt;CABI&lt;/a&gt;, the alignment of a struct is equal to the alignment of its largest field.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  complex argument\n&lt;/h2&gt;\n\n&lt;p&gt;In order to send complex data, e.g string to wasm module it is required to write data to memory. But where it should be written?&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;wit_bindgen&lt;/code&gt; provides &lt;code&gt;cabi_realloc&lt;/code&gt; function that can be used to allocate memory, and then it returns offset in linear memory. Definition is something like &lt;code&gt;cabi_realloc(old_ptr:i32, old_size:i32, align:i32, new_size:i32) -&amp;gt; i32&lt;/code&gt;&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"n\"&gt;count_symbols&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;xyz:machine/machine-interface#count-symbols&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n&lt;span class=\"n\"&gt;cabi_realloc&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;exports&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;cabi_realloc&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;encoded_str&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;string with symbols (~25)&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;encode&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n&lt;span class=\"n\"&gt;ptr&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;cabi_realloc&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nf\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;encoded_str&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"n\"&gt;memory&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;write&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;encoded_str&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;  &lt;span class=\"c1\"&gt;# write to instance memory\n&lt;/span&gt;&lt;span class=\"n\"&gt;count&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;count_symbols&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;store&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ptr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nf\"&gt;len&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;encoded_str&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;  &lt;span class=\"c1\"&gt;# note ptr is offset of the string in instance memory\n&lt;/span&gt;&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;count&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;  &lt;span class=\"c1\"&gt;# 25\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Notice that there is no need to clean up string data written into instance memory from the host side. When &lt;code&gt;count_symbols&lt;/code&gt; is called we give ownership of this data to wasm module, so it must manage this memory itself and free it when data is no longer needed.&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  conclusion\n&lt;/h1&gt;\n\n&lt;p&gt;That's all. &lt;/p&gt;\n\n&lt;p&gt;Despite the fact that wasm is promising for interaction between different subsystems, so far, tool support for languages other than rust may be quite limited. But as discussed before, some things are easy to do manually.&lt;/p&gt;\n\n&lt;p&gt;Wasm modules seem interesting as a more lightweight replacement of containers, and there are few interesting projects such as &lt;a href=\"https://github.com/spinframework/spin\" rel=\"noopener noreferrer\"&gt;Spin&lt;/a&gt;, &lt;a href=\"https://github.com/wasmCloud/wasmCloud\" rel=\"noopener noreferrer\"&gt;WasmCloud&lt;/a&gt; and others.&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  additional\n&lt;/h1&gt;\n\n&lt;p&gt;There are also a bunch of useful CLI tools:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;a href=\"https://github.com/bytecodealliance/wit-bindgen\" rel=\"noopener noreferrer\"&gt;wit-bindgen&lt;/a&gt; - generates guest bindings from &lt;code&gt;.wit&lt;/code&gt; definitions.&lt;/li&gt;\n&lt;li&gt;\n&lt;a href=\"https://github.com/bytecodealliance/componentize-py\" rel=\"noopener noreferrer\"&gt;componentize-py&lt;/a&gt; is used to package Python code into a component (on the guest-side)&lt;/li&gt;\n&lt;li&gt;\n&lt;a href=\"https://github.com/WebAssembly/wabt\" rel=\"noopener noreferrer\"&gt;wasm-objdump&lt;/a&gt; - inspect wasm binaries. Useful for debugging or understanding module.&lt;/li&gt;\n&lt;li&gt;\n&lt;a href=\"https://github.com/WebAssembly/wabt\" rel=\"noopener noreferrer\"&gt;wasm2wat&lt;/a&gt; - converts a &lt;code&gt;.wasm&lt;/code&gt; binary into human-readable WAT (WebAssembly Text format).&lt;/li&gt;\n&lt;/ul&gt;",
    "date": "2026-02-17T01:09:46.000Z",
    "url": "https://dev.to/grindmachine/no-magic-running-wasm-modules-in-python-11pf"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "X.509 Beyond Trust: Weaponizing Certificate Extensibility Without Breaking TLS",
    "partialText": "&lt;p&gt;This suite is architected to operate entirely within the boundaries of a non‚Äëroot Android userland environment, deliberately exploiting what is permitted rather than attempting privilege escalation. By relying on native Termux packages such as OpenSSL and Python‚Äôs standard SSL stack, it inherits the trust posture of legitimate development tooling. The OpenSSL s_server process runs as a normal user process, binds to high ports, negotiates TLS 1.3 with compliant cipher suites, and presents a syntactically valid X.509 certificate. Because no kernel interaction or restricted APIs are required, the activity blends into expected developer or testing behavior. The abuse lies in repurposing trusted cryptographic plumbing‚Äîcertificate generation, extension fields, and handshake negotiation‚Äîas a covert transport channel inside an otherwise standards‚Äëcompliant workflow.&lt;/p&gt;\n\n&lt;p&gt;The tool further capitalizes on Android‚Äôs application sandbox model. Non‚Äëroot Termux environments are typically assumed to be low‚Äërisk because they lack direct access to protected system partitions. However, within that sandbox, full network stack access, multiprocessing, subprocess invocation, and file system operations remain available. This design chains those allowed capabilities together: dynamic RSA key generation, AES‚ÄëCFB encryption with PBKDF2 derivation, custom OID embedding, OpenSSL TLS service instantiation, local certificate retrieval, and sandboxed execution in a separate process. Each step individually appears legitimate and developer‚Äëoriented; collectively, they create a closed‚Äëloop payload delivery channel that never leaves user space yet leverages native binaries and cryptographic libraries that defenders implicitly trust.&lt;/p&gt;\n\n&lt;p&gt;Most notably, the framework reframes certificate extensibility as a staging vector. X.509 permits non‚Äëcritical, unrecognized extensions by design, and compliant parsers will ignore them unless explicitly handled. By embedding encrypted payload data inside such an extension and retrieving it through a routine TLS handshake, the suite abuses protocol flexibility rather than breaking protocol security. In real‚Äëworld threat analysis, this represents an ‚Äúallowed surface exploitation‚Äù model: no exploit code, no memory corruption, no privilege escalation‚Äîjust systematic repurposing of standards‚Äëcompliant features to move code through a channel that most monitoring stacks treat as inert metadata. In constrained mobile environments where defenders focus on rooting, sideloading, or binary exploitation, this approach demonstrates how much operational capability can be achieved purely by orchestrating what the platform already authorizes.&lt;/p&gt;",
    "date": "2026-02-17T01:05:16.000Z",
    "url": "https://dev.to/michael_s_errington/x509-beyond-trust-weaponizing-certificate-extensibility-without-breaking-tls-2knj"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "The Secret Life of JavaScript: The Async Generator",
    "partialText": "&lt;p&gt;&lt;em&gt;How to handle streams of data with &lt;code&gt;for await...of&lt;/code&gt;.&lt;/em&gt;&lt;/p&gt;\n\n\n\n\n&lt;p&gt;Timothy was rubbing his temples. On his screen was a function that looked like it had been fighting a losing battle.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;getAllUsers&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;url&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;/api/users?page=1&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;allUsers&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[];&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;while &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;url&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nf\"&gt;fetch&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;url&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;json&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// Add this page's users to our big list&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;allUsers&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;push&lt;/span&gt;&lt;span class=\"p\"&gt;(...&lt;/span&gt;&lt;span class=\"nx\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;users&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// Prepare for the next loop... if there is one&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;url&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;nextPage&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt; \n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;allUsers&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;\"I'm trying to download all the user data,\" Timothy explained to Margaret. \"But there are 50,000 users. If I wait for &lt;em&gt;all&lt;/em&gt; the pages to download before I start processing them, the user waits for 20 seconds. It feels... stuck.\"&lt;/p&gt;\n\n&lt;p&gt;Margaret nodded. \"You are treating a &lt;strong&gt;Stream&lt;/strong&gt; like a &lt;strong&gt;Bucket&lt;/strong&gt;,\" she said.&lt;/p&gt;\n\n&lt;p&gt;\"You are trying to collect every single drop of water before you let anyone drink,\" she continued. \"Why not let them drink from the hose?\"&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Hybrid\n&lt;/h2&gt;\n\n&lt;p&gt;Margaret wrote a new syntax on the board. It combined the two most powerful keywords in the language.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt;&lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"nf\"&gt;fetchUsers&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"p\"&gt;...&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;\"&lt;strong&gt;Async&lt;/strong&gt; meets &lt;strong&gt;Generator&lt;/strong&gt;,\" she said. \"The &lt;code&gt;async&lt;/code&gt; allows us to wait for the network. The &lt;code&gt;*&lt;/code&gt; allows us to yield data one piece at a time.\"&lt;/p&gt;\n\n&lt;p&gt;She rewrote Timothy's code, adding a safety net.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;async&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt;&lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"nf\"&gt;fetchUsers&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;url&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;/api/users?page=1&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;while &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;url&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"k\"&gt;try&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nf\"&gt;fetch&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;url&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n            &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;response&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;json&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n            &lt;span class=\"c1\"&gt;// Instead of building a massive array, we deliver this page immediately&lt;/span&gt;\n            &lt;span class=\"k\"&gt;for &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;user&lt;/span&gt; &lt;span class=\"k\"&gt;of&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;users&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n                &lt;span class=\"k\"&gt;yield&lt;/span&gt; &lt;span class=\"nx\"&gt;user&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n            &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n            &lt;span class=\"nx\"&gt;url&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;nextPage&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;catch &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"s2\"&gt;Stream interrupted&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n            &lt;span class=\"k\"&gt;return&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt; &lt;span class=\"c1\"&gt;// Stop the stream safely&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Timothy looked at the code. \"It looks similar,\" he admitted. \"But how do I use it? The data isn't all there yet.\"&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Magic Loop (&lt;code&gt;for await...of&lt;/code&gt;)\n&lt;/h2&gt;\n\n&lt;p&gt;\"This is where the magic happens,\" Margaret said. \"We need a loop that knows how to wait.\"&lt;/p&gt;\n\n&lt;p&gt;She wrote the consumer code:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;userStream&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;fetchUsers&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"k\"&gt;await &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;user&lt;/span&gt; &lt;span class=\"k\"&gt;of&lt;/span&gt; &lt;span class=\"nx\"&gt;userStream&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;log&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"s2\"&gt;Processing:&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;user&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;name&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// This loop automatically PAUSES while the next page downloads!&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Timothy watched the console simulation.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;The loop prints 10 users instantly.&lt;/li&gt;\n&lt;li&gt;The loop &lt;strong&gt;pauses&lt;/strong&gt; (while the network fetches Page 2).&lt;/li&gt;\n&lt;li&gt;The loop wakes up and prints 10 more users.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;\"The pause is invisible,\" Timothy whispered.&lt;/p&gt;\n\n&lt;p&gt;\"Exactly,\" Margaret said. \"The code inside the loop doesn't know it is waiting. It just asks for the next user, and JavaScript handles the pause. You aren't processing a &lt;strong&gt;Memory Snapshot&lt;/strong&gt;; you are processing &lt;strong&gt;Time&lt;/strong&gt;.\"&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Emergency Brake\n&lt;/h2&gt;\n\n&lt;p&gt;\"One last thing,\" Margaret added, lowering her voice to a whisper. \"In the real world, streams can be endless. Sometimes the user navigates away before you are done.\"&lt;/p&gt;\n\n&lt;p&gt;\"What do I do?\"&lt;/p&gt;\n\n&lt;p&gt;\"You use an &lt;strong&gt;AbortController&lt;/strong&gt;,\" she said. \"It allows you to cut the hose. Always design your streams so they can be stopped.\"&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Conclusion\n&lt;/h2&gt;\n\n&lt;p&gt;Timothy deleted his &lt;code&gt;allUsers&lt;/code&gt; array. He didn't need the bucket anymore.&lt;/p&gt;\n\n&lt;p&gt;\"It feels lighter,\" Timothy said. \"I'm not hoarding data.\"&lt;/p&gt;\n\n&lt;p&gt;\"That is the Zen of the Async Generator,\" Margaret smiled. \"Don't carry the weight of the future. Just handle what is in front of you, right now.\"&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;em&gt;Aaron Rose is a software engineer and technology writer at &lt;a href=\"https://www.tech-reader.blog\" rel=\"noopener noreferrer\"&gt;tech-reader.blog&lt;/a&gt; and the author of &lt;a href=\"https://amazon.com/author/aaron.rose\" rel=\"noopener noreferrer\"&gt;Think Like a Genius&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-17T01:04:17.000Z",
    "url": "https://dev.to/aaron_rose_0787cc8b4775a0/the-secret-life-of-javascript-the-async-generator-7hn"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Day 4 ‚Äî I Built a Program That Caught a Reverse Shell",
    "partialText": "&lt;p&gt;Until yesterday, my scripts were observers.&lt;br&gt;\nThey scanned, parsed, and reported.&lt;/p&gt;\n\n&lt;p&gt;Today my computer started &lt;em&gt;watching back&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;Not scanning a target.&lt;br&gt;\nNot running Nmap.&lt;/p&gt;\n\n&lt;p&gt;Watching &lt;strong&gt;itself&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;And that‚Äôs actually what most real cybersecurity tools do.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  The Realization\n&lt;/h2&gt;\n\n&lt;p&gt;I had a simple thought:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Malware rarely announces itself.&lt;br&gt;\nBut it always has to talk to its operator.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;An attacker who compromises a machine needs communication.&lt;br&gt;\nThat communication is called a &lt;strong&gt;Command &amp;amp; Control (C2) callback&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;Reverse shells&lt;br&gt;\nBotnets&lt;br&gt;\nRATs&lt;br&gt;\nBackdoors&lt;/p&gt;\n\n&lt;p&gt;They all share one unavoidable behavior:&lt;/p&gt;\n\n&lt;p&gt;They create an outbound network connection.&lt;/p&gt;\n\n&lt;p&gt;So instead of scanning attackers, I tried something different.&lt;/p&gt;\n\n&lt;p&gt;I decided to monitor my own machine‚Äôs network connections in real time.&lt;/p&gt;\n\n&lt;p&gt;Essentially, I attempted to build a tiny &lt;strong&gt;Host Intrusion Detection System (HIDS)&lt;/strong&gt; using Python.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  The Core Idea\n&lt;/h2&gt;\n\n&lt;p&gt;If an unknown process suddenly connects to an external IP or a suspicious port, that is not normal behavior.&lt;/p&gt;\n\n&lt;p&gt;For example:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;A browser connecting to port 443 ‚Üí normal&lt;/li&gt;\n&lt;li&gt;A PDF reader connecting to port 4444 ‚Üí very suspicious&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;So the job of the program became:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Watch every active connection&lt;/li&gt;\n&lt;li&gt;Identify the process that opened it&lt;/li&gt;\n&lt;li&gt;Check destination IP and port&lt;/li&gt;\n&lt;li&gt;Alert if it looks malicious&lt;/li&gt;\n&lt;/ol&gt;\n\n\n&lt;h2&gt;\n  \n  \n  Technology Used\n&lt;/h2&gt;\n\n&lt;p&gt;I used the Python library:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;psutil&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;This library allows Python to see operating system internals:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;processes&lt;/li&gt;\n&lt;li&gt;memory&lt;/li&gt;\n&lt;li&gt;CPU&lt;/li&gt;\n&lt;li&gt;open ports&lt;/li&gt;\n&lt;li&gt;network sockets&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Basically, Python gained system-level visibility.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  The Program\n&lt;/h2&gt;\n\n&lt;p&gt;The script continuously inspects all TCP/UDP connections and correlates them with running processes.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;psutil&lt;/span&gt;\n&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;time&lt;/span&gt;\n&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;socket&lt;/span&gt;\n&lt;span class=\"kn\"&gt;import&lt;/span&gt; &lt;span class=\"n\"&gt;logging&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;logging&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;basicConfig&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"n\"&gt;filename&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;connection_alerts.log&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;level&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"n\"&gt;logging&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;WARNING&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"nb\"&gt;format&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;%(asctime)s - %(message)s&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;SUSPICIOUS_PORTS&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"mi\"&gt;4444&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;5555&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;6666&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;1337&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;9001&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;12345&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;seen_connections&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;set&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n&lt;span class=\"n\"&gt;connection_times&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{}&lt;/span&gt;\n&lt;span class=\"n\"&gt;ALERT_TIMEOUT&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;resolve_ip&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;ip&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n    &lt;span class=\"k\"&gt;try&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;socket&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;gethostbyaddr&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;ip&lt;/span&gt;&lt;span class=\"p\"&gt;)[&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n    &lt;span class=\"k\"&gt;except&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;ip&lt;/span&gt;\n\n&lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;Starting Network Monitoring&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;while&lt;/span&gt; &lt;span class=\"bp\"&gt;True&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n    &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;conn&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"n\"&gt;psutil&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;net_connections&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;kind&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;inet&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;conn&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;status&lt;/span&gt; &lt;span class=\"o\"&gt;!=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;ESTABLISHED&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n            &lt;span class=\"k\"&gt;continue&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"ow\"&gt;not&lt;/span&gt; &lt;span class=\"n\"&gt;conn&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;raddr&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n            &lt;span class=\"k\"&gt;continue&lt;/span&gt;\n\n        &lt;span class=\"n\"&gt;remote_ip&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;conn&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;raddr&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;ip&lt;/span&gt;\n        &lt;span class=\"n\"&gt;remote_port&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;conn&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;raddr&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;port&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;conn&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;pid&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n            &lt;span class=\"k\"&gt;try&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                &lt;span class=\"n\"&gt;pname&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;psutil&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;Process&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;conn&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;pid&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;name&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n            &lt;span class=\"k\"&gt;except&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                &lt;span class=\"n\"&gt;pname&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;UnknownProcess&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;\n        &lt;span class=\"k\"&gt;else&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n            &lt;span class=\"n\"&gt;pname&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;Kernel/Hidden&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;\n\n        &lt;span class=\"n\"&gt;connection_id&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;pname&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt;-&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;remote_ip&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt;-&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;remote_port&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;\n        &lt;span class=\"n\"&gt;current_time&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;time&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;time&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;# cleanup old alerts\n&lt;/span&gt;        &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;cid&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;connection_times&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n            &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;current_time&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"n\"&gt;connection_times&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;cid&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;ALERT_TIMEOUT&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                &lt;span class=\"n\"&gt;seen_connections&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;discard&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;cid&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n                &lt;span class=\"k\"&gt;del&lt;/span&gt; &lt;span class=\"n\"&gt;connection_times&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;cid&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;remote_port&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"n\"&gt;SUSPICIOUS_PORTS&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n            &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;connection_id&lt;/span&gt; &lt;span class=\"ow\"&gt;not&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"n\"&gt;seen_connections&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                &lt;span class=\"n\"&gt;seen_connections&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;add&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;connection_id&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n                &lt;span class=\"n\"&gt;connection_times&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;connection_id&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;current_time&lt;/span&gt;\n                &lt;span class=\"n\"&gt;msg&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;[ALERT] Suspicious port connection! &lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;pname&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt; -&amp;gt; &lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"nf\"&gt;resolve_ip&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;remote_ip&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt;:&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;remote_port&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;\n                &lt;span class=\"nf\"&gt;print&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;msg&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n                &lt;span class=\"n\"&gt;logging&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;warning&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;msg&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n    &lt;span class=\"n\"&gt;time&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;sleep&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mf\"&gt;0.2&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Problem I Faced (Important Lesson)\n&lt;/h2&gt;\n\n&lt;p&gt;At first, nothing worked.&lt;/p&gt;\n\n&lt;p&gt;I tested using:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;ping google.com\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;No alerts.&lt;/p&gt;\n\n&lt;p&gt;I thought the script was broken.&lt;/p&gt;\n\n&lt;p&gt;It wasn‚Äôt.&lt;/p&gt;\n\n&lt;p&gt;I learned something important:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Ping uses ICMP, not TCP.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;My detector only watches socket connections.&lt;br&gt;\nICMP has no ports and no socket, so it is invisible to this type of monitoring.&lt;/p&gt;\n\n&lt;p&gt;Then I tried &lt;code&gt;curl&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Still nothing.&lt;/p&gt;\n\n&lt;p&gt;The real reason?&lt;/p&gt;\n\n&lt;p&gt;Connections open and close in milliseconds.&lt;br&gt;\nMy script was checking every 5 seconds.&lt;/p&gt;\n\n&lt;p&gt;By the time Python looked, the connection already disappeared.&lt;/p&gt;\n\n&lt;p&gt;This was my first exposure to a real security engineering concept:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Polling is unreliable for security monitoring.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Real EDR products use kernel-level event monitoring for exactly this reason.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  The Breakthrough\n&lt;/h2&gt;\n\n&lt;p&gt;I simulated an attacker using netcat.&lt;/p&gt;\n\n&lt;p&gt;Terminal 1:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;nc -lvnp 4444\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Terminal 2:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;nc 127.0.0.1 4444\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;And immediately:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;[ALERT] Suspicious port connection! nc -&amp;gt; 127.0.0.1:4444\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;My program detected a reverse shell.&lt;/p&gt;\n\n&lt;p&gt;At that moment I understood:&lt;/p&gt;\n\n&lt;p&gt;I wasn‚Äôt writing a script anymore.&lt;/p&gt;\n\n&lt;p&gt;I had created behavior-based detection.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Another Real Problem: Alert Flooding\n&lt;/h2&gt;\n\n&lt;p&gt;The program printed the same alert dozens of times per second.&lt;/p&gt;\n\n&lt;p&gt;Because the connection stayed open.&lt;/p&gt;\n\n&lt;p&gt;This is actually a real SOC issue called:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Alert Fatigue&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;So I implemented alert deduplication and timeout logic to report each incident only once.&lt;/p&gt;\n\n&lt;p&gt;Now the system behaves like a real monitoring tool instead of a spam generator.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What This Taught Me\n&lt;/h2&gt;\n\n&lt;p&gt;This single exercise taught multiple cybersecurity concepts:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Difference between ICMP and TCP monitoring&lt;/li&gt;\n&lt;li&gt;Process to network correlation&lt;/li&gt;\n&lt;li&gt;Reverse shell detection&lt;/li&gt;\n&lt;li&gt;Why EDR tools need kernel visibility&lt;/li&gt;\n&lt;li&gt;Why SIEM systems require alert suppression&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Most importantly:&lt;/p&gt;\n\n&lt;p&gt;Signature-based detection looks for known malware.&lt;/p&gt;\n\n&lt;p&gt;Behavior-based detection looks for &lt;strong&gt;suspicious activity&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;Attackers can change code easily.&lt;br&gt;\nThey cannot operate without communicating.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Final Thought\n&lt;/h2&gt;\n\n&lt;p&gt;I started the day trying to monitor connections.&lt;/p&gt;\n\n&lt;p&gt;I ended the day understanding how modern endpoint protection actually works.&lt;/p&gt;\n\n&lt;p&gt;Instead of asking:&lt;/p&gt;\n\n&lt;p&gt;‚ÄúIs this file malicious?‚Äù&lt;/p&gt;\n\n&lt;p&gt;The better question is:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;‚ÄúIs this behavior normal?‚Äù&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Tomorrow I plan to monitor file modifications and detect ransomware-like activity.&lt;/p&gt;\n\n&lt;p&gt;Because if malware needs communication‚Ä¶&lt;/p&gt;\n\n&lt;p&gt;Ransomware needs to touch files.&lt;/p&gt;",
    "date": "2026-02-17T01:01:45.000Z",
    "url": "https://dev.to/hafiz_shamnad/day-4-i-built-a-program-that-caught-a-reverse-shell-5b0h"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "‚åö Beginner-Friendly Guide 'Binary Watch' - Problem 401 (C++, Python, JavaScript)",
    "partialText": "&lt;p&gt;Ever wondered how digital devices represent time using nothing but ones and zeros? This problem invites you to decode a binary watch, where LEDs represent powers of two for both hours and minutes. It is a fantastic way to practice how we can combine different possibilities to reach a specific target.&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Problem Summary\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;You're given:&lt;/strong&gt;&lt;br&gt;\nAn integer &lt;code&gt;turnedOn&lt;/code&gt;, which represents the total number of LEDs currently glowing on a binary watch.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Your goal:&lt;/strong&gt;&lt;br&gt;\nReturn a list of all possible valid times the watch could be showing. You must ensure hours are between 0 and 11, and minutes are between 0 and 59.&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Intuition\n&lt;/h3&gt;\n\n&lt;p&gt;The watch has 10 LEDs in total: 4 for hours () and 6 for minutes (). Since the total number of possible times is small (only  combinations), we can use a &lt;strong&gt;Backtracking (DFS)&lt;/strong&gt; approach to pick which LEDs to turn on.&lt;/p&gt;\n\n&lt;p&gt;The core logic revolves around iterating through the 10 available LEDs. For each LED, we decide to \"turn it on\" and subtract 1 from our &lt;code&gt;turnedOn&lt;/code&gt; count. We keep track of the current hour and minute values, ensuring they never exceed their respective limits. Once the count reaches zero, we format the resulting time and add it to our list.&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Walkthrough: Understanding the Examples\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Example 1: `turnedOn = 1&lt;/strong&gt;`&lt;br&gt;\nIf only one LED is on, the watch can only represent a single power of two.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;If a &lt;strong&gt;minute&lt;/strong&gt; LED is on: It could be 0:01, 0:02, 0:04, 0:08, 0:16, or 0:32.&lt;/li&gt;\n&lt;li&gt;If an &lt;strong&gt;hour&lt;/strong&gt; LED is on: It could be 1:00, 2:00, 4:00, or 8:00.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Result:&lt;/strong&gt; A list of all 10 individual time stamps.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Example 2: `turnedOn = 9&lt;/strong&gt;`&lt;br&gt;\nThe maximum possible value for hours is 11 (requires 3 LEDs: 8+2+1) and for minutes is 59 (requires 5 LEDs: 32+16+8+2+1).&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Maximum LEDs possible for a valid time: .&lt;/li&gt;\n&lt;li&gt;Since 9 LEDs is more than the maximum possible valid combination, it is impossible.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Result:&lt;/strong&gt; &lt;code&gt;[]&lt;/code&gt; (Empty list).&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  C++ Solution\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight cpp\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;Solution&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n &lt;span class=\"nl\"&gt;public:&lt;/span&gt;\n  &lt;span class=\"n\"&gt;vector&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"n\"&gt;string&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;readBinaryWatch&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"n\"&gt;vector&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"n\"&gt;string&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// Start DFS with turnedOn LEDs remaining, starting at index 0, hour 0, minute 0&lt;/span&gt;\n    &lt;span class=\"n\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n &lt;span class=\"k\"&gt;private&lt;/span&gt;&lt;span class=\"o\"&gt;:&lt;/span&gt;\n  &lt;span class=\"k\"&gt;const&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;};&lt;/span&gt;\n  &lt;span class=\"k\"&gt;const&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;6&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;16&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;32&lt;/span&gt;&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n  &lt;span class=\"kt\"&gt;void&lt;/span&gt; &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;s&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;vector&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"n\"&gt;string&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;turnedOn&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"n\"&gt;string&lt;/span&gt; &lt;span class=\"n\"&gt;time&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;to_string&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"s\"&gt;\":\"&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt; &lt;span class=\"o\"&gt;?&lt;/span&gt; &lt;span class=\"s\"&gt;\"0\"&lt;/span&gt; &lt;span class=\"o\"&gt;:&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;to_string&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n      &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;push_back&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;time&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n      &lt;span class=\"k\"&gt;return&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;s&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt; &lt;span class=\"o\"&gt;++&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"c1\"&gt;// Hour LEDs (indices 0-3)&lt;/span&gt;\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;12&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n          &lt;span class=\"n\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;turnedOn&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n      &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;else&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"c1\"&gt;// Minute LEDs (indices 4-9)&lt;/span&gt;\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n          &lt;span class=\"n\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;turnedOn&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n      &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  Python Solution\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;Solution&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n    &lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;readBinaryWatch&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;self&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nb\"&gt;str&lt;/span&gt;&lt;span class=\"p\"&gt;]:&lt;/span&gt;\n        &lt;span class=\"n\"&gt;ans&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[]&lt;/span&gt;\n        &lt;span class=\"n\"&gt;hours&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n        &lt;span class=\"n\"&gt;minutes&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;16&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;32&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;remaining&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;start_idx&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n            &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;remaining&lt;/span&gt; &lt;span class=\"o\"&gt;==&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                &lt;span class=\"c1\"&gt;# Format: No leading zero for hours, two digits for minutes\n&lt;/span&gt;                &lt;span class=\"n\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;append&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sa\"&gt;f&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;h&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"s\"&gt;:&lt;/span&gt;&lt;span class=\"si\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;m&lt;/span&gt;&lt;span class=\"si\"&gt;:&lt;/span&gt;&lt;span class=\"mi\"&gt;02&lt;/span&gt;&lt;span class=\"n\"&gt;d&lt;/span&gt;&lt;span class=\"si\"&gt;}&lt;/span&gt;&lt;span class=\"sh\"&gt;\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n                &lt;span class=\"k\"&gt;return&lt;/span&gt;\n\n            &lt;span class=\"k\"&gt;for&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"ow\"&gt;in&lt;/span&gt; &lt;span class=\"nf\"&gt;range&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;start_idx&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt;\n                &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;  &lt;span class=\"c1\"&gt;# Hour LEDs\n&lt;/span&gt;                    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;12&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                        &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;remaining&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n                &lt;span class=\"k\"&gt;else&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;  &lt;span class=\"c1\"&gt;# Minute LEDs\n&lt;/span&gt;                    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n                        &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;remaining&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"n\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"n\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt;\n\n        &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;ans&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  JavaScript Solution\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"cm\"&gt;/**\n * @param {number} turnedOn\n * @return {string[]}\n */&lt;/span&gt;\n&lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"nx\"&gt;readBinaryWatch&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;ans&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[];&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;hours&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;];&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;minutes&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;8&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;16&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;32&lt;/span&gt;&lt;span class=\"p\"&gt;];&lt;/span&gt;\n\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;dfs&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;remaining&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;startIdx&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;remaining&lt;/span&gt; &lt;span class=\"o\"&gt;===&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;formattedMin&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt; &lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"s2\"&gt;0&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"nx\"&gt;m&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n            &lt;span class=\"nx\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;push&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"s2\"&gt;:&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"nx\"&gt;formattedMin&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n            &lt;span class=\"k\"&gt;return&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;for &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;startIdx&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt; &lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt; &lt;span class=\"nx\"&gt;i&lt;/span&gt;&lt;span class=\"o\"&gt;++&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"c1\"&gt;// Hour LEDs&lt;/span&gt;\n                &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"nx\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;12&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n                    &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;remaining&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;h&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"nx\"&gt;hours&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;i&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt; &lt;span class=\"nx\"&gt;m&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n                &lt;span class=\"p\"&gt;}&lt;/span&gt;\n            &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;else&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"c1\"&gt;// Minute LEDs&lt;/span&gt;\n                &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"nx\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n                    &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;remaining&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;h&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;m&lt;/span&gt; &lt;span class=\"o\"&gt;+&lt;/span&gt; &lt;span class=\"nx\"&gt;minutes&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;i&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;4&lt;/span&gt;&lt;span class=\"p\"&gt;]);&lt;/span&gt;\n                &lt;span class=\"p\"&gt;}&lt;/span&gt;\n            &lt;span class=\"p\"&gt;}&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n    &lt;span class=\"nf\"&gt;dfs&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;turnedOn&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;ans&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Key Takeaways\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Combinatorial Search:&lt;/strong&gt; Backtracking is the perfect tool when you need to explore combinations of items to reach a fixed sum or count.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;State Management:&lt;/strong&gt; By passing &lt;code&gt;h&lt;/code&gt; (hours) and &lt;code&gt;m&lt;/code&gt; (minutes) through the recursion, we maintain the \"state\" of our watch without needing to undo changes manually.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Constraint Checking:&lt;/strong&gt; Always validate boundaries (hours &amp;lt; 12, minutes &amp;lt; 60) before committing to a recursive path to save computation time.&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Final Thoughts\n&lt;/h3&gt;\n\n&lt;p&gt;This problem is a classic example of how hardware interacts with software logic. While it appears simple, it tests your ability to handle multiple constraints and format data correctly. In the real world, similar bit-manipulation and combinatorial logic are used in embedded systems, low-level driver development, and even when designing efficient network protocols where every bit counts.&lt;/p&gt;",
    "date": "2026-02-17T00:55:57.000Z",
    "url": "https://dev.to/om_shree_0709/beginner-friendly-guide-binary-watch-problem-401-c-python-javascript-11l3"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Building a Desktop AI Chat App for ChatGPT, Claude, Gemini & Ollama",
    "partialText": "&lt;p&gt;Learn how to build an open-source desktop AI chat client that connects multiple AI providers in one application. This technical guide covers Kotlin Compose architecture, streaming responses, RAG implementation, and production patterns.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Problem: Using ChatGPT, Claude, Gemini Means Opening Multiple Apps\n&lt;/h2&gt;\n\n&lt;p&gt;As developers, we've discovered that different AI models excel at different tasks. &lt;a href=\"https://askimo.chat/app/openai/\" rel=\"noopener noreferrer\"&gt;ChatGPT&lt;/a&gt; is great for general conversation and brainstorming. &lt;a href=\"https://askimo.chat/app/claude/\" rel=\"noopener noreferrer\"&gt;Claude&lt;/a&gt; works well for coding questions and technical analysis. &lt;a href=\"https://askimo.chat/app/gemini/\" rel=\"noopener noreferrer\"&gt;Gemini&lt;/a&gt; handles multimodal tasks with images and documents. &lt;a href=\"https://askimo.chat/app/ollama/\" rel=\"noopener noreferrer\"&gt;Ollama&lt;/a&gt; gives you free, unlimited access to open-source models without subscription limits.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;But here's the frustration:&lt;/strong&gt; Each of these requires a different web application, a different account, a different browser tab.&lt;/p&gt;\n\n&lt;p&gt;The modern AI workflow reality:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;ChatGPT web app&lt;/strong&gt; open for general questions&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Claude web app&lt;/strong&gt; open for coding help&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Google AI Studio&lt;/strong&gt; open for multimodal tasks&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Ollama command line&lt;/strong&gt; running locally for experimentation without API costs&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Constant context switching&lt;/strong&gt; between different interfaces, keyboard shortcuts, and UX patterns&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Fragmented conversation history&lt;/strong&gt; - your coding discussion with Claude is separate from your general brainstorming in ChatGPT&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;No unified search&lt;/strong&gt; - can't search across all your AI conversations in one place&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Multiple subscriptions&lt;/strong&gt; - managing different payment plans and free tier limits&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;What if you could have &lt;strong&gt;one desktop application&lt;/strong&gt; that works with ChatGPT, Claude, Gemini, Ollama, and any other AI provider - letting you choose the best model for each task without switching apps?&lt;/p&gt;\n\n&lt;p&gt;That's why we built &lt;strong&gt;&lt;a href=\"https://askimo.chat/app/\" rel=\"noopener noreferrer\"&gt;Askimo&lt;/a&gt;&lt;/strong&gt; - an open-source desktop AI chat client built with Kotlin and Compose for Desktop. You can &lt;a href=\"https://askimo.chat/download/\" rel=\"noopener noreferrer\"&gt;download it for free&lt;/a&gt; for macOS, Windows, and Linux.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Why Desktop? Why Not Another Web App?\n&lt;/h2&gt;\n\n&lt;p&gt;Before diving into the technical implementation, let's address the elephant in the room: &lt;strong&gt;Why build a desktop app in 2026?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Desktop Advantages for AI Chat\n&lt;/h3&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Zero Infrastructure&lt;/strong&gt;: Just download and run. No server to set up, no deployment, no hosting costs. Open the app and start chatting.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Persistent State&lt;/strong&gt;: Desktop apps don't lose state when you close a tab. Chat in up to 20 tabs simultaneously - more than enough for any workflow - and they all stay exactly where you left them.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;True Privacy&lt;/strong&gt;: Local-first architecture means conversations never leave your machine unless you explicitly send them to an AI provider.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Native Performance&lt;/strong&gt;: No browser overhead. Direct access to system resources for faster rendering and lower memory usage (50-300 MB vs 500+ MB for browser tabs).&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Offline Capability&lt;/strong&gt;: Read past conversations, search history, and manage projects - all without internet.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;System Integration&lt;/strong&gt;: Deep OS integration for keyboard shortcuts, native notifications, and file system access.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;h3&gt;\n  \n  \n  Why Kotlin + Compose for Desktop?\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Modern declarative UI&lt;/strong&gt; with Compose's reactive paradigm&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Shared code&lt;/strong&gt; between &lt;a href=\"https://askimo.chat/cli/\" rel=\"noopener noreferrer\"&gt;CLI&lt;/a&gt; and desktop modules&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Coroutines&lt;/strong&gt; for elegant async/concurrent programming&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Type safety&lt;/strong&gt; that prevents entire classes of runtime errors&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Mature ecosystem&lt;/strong&gt; with LangChain4j for AI integration&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Strategic advantage: Code reuse for mobile apps&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Choosing Kotlin and Compose Multiplatform gives us a significant long-term benefit: &lt;strong&gt;when we expand to mobile (iOS/Android), we can reuse 60-80% of our codebase.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;The same business logic that powers the desktop app can power mobile:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Session management&lt;/strong&gt; - Same conversation state management across all platforms&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;AI provider integrations&lt;/strong&gt; - OpenAI, Anthropic, Ollama clients work identically&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Streaming handling&lt;/strong&gt; - The concurrent stream management we built for desktop works on mobile&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Database layer&lt;/strong&gt; - SQLite-based storage runs on all platforms&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Markdown rendering&lt;/strong&gt; - Custom renderer works on iOS and Android without changes&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;RAG pipeline&lt;/strong&gt; - Document processing and embedding logic is platform-agnostic&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Only the UI layer needs platform-specific adaptation - and even there, Compose Multiplatform lets us share UI components with platform-specific tweaks.&lt;br&gt;\n&lt;strong&gt;Compare this to the web app path:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Web ‚Üí Mobile means rebuilding everything in Swift/Kotlin or using slower hybrid frameworks&lt;/li&gt;\n&lt;li&gt;Desktop Electron ‚Üí Mobile means completely separate codebases&lt;/li&gt;\n&lt;li&gt;Native from the start ‚Üí Future mobile apps share the same proven, battle-tested core&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;And this isn't some experimental tech we're betting on - Compose Multiplatform is already battle-tested in production by companies like JetBrains and Netflix. So when we decide to ship mobile apps, we won't be starting from scratch. All the tricky stuff - session management, streaming handlers, RAG pipelines - will already work. We'll just need to adapt the UI.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt; Desktop first, but with mobile in our back pocket for later.&lt;/p&gt;\n&lt;h3&gt;\n  \n  \n  The Trade-offs: More Effort, Better Control\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Let's be honest: building a native desktop app requires significantly more effort than a web app.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;When you build for the web, the browser gives you useful tools for free:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Markdown rendering&lt;/strong&gt; - Just use a library like &lt;code&gt;marked.js&lt;/code&gt; and let the browser's HTML engine handle it&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Syntax highlighting&lt;/strong&gt; - Drop in Prism.js or highlight.js&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Charts and visualizations&lt;/strong&gt; - Chart.js, D3.js, countless options&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;File handling&lt;/strong&gt; - Browser APIs abstract the complexity&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Cross-platform rendering&lt;/strong&gt; - Write once, runs everywhere with the same look&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;For a native desktop app, we had to build all of this ourselves:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;1. Custom Markdown Rendering&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Implemented a CommonMark parser in Kotlin&lt;/li&gt;\n&lt;li&gt;Built custom rendering logic for code blocks, tables, lists&lt;/li&gt;\n&lt;li&gt;Created syntax highlighting integration for 50+ programming languages&lt;/li&gt;\n&lt;li&gt;No browser HTML engine to fall back on&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;2. Platform-Specific Challenges&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;File system access differs on macOS, Windows, and Linux&lt;/li&gt;\n&lt;li&gt;Window management and keyboard shortcuts need OS-specific handling&lt;/li&gt;\n&lt;li&gt;Native menus and notifications require platform adapters&lt;/li&gt;\n&lt;li&gt;Different packaging systems for each OS (DMG, MSI, DEB/RPM)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;3. Custom UI Components&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Built chart rendering using Compose Canvas APIs&lt;/li&gt;\n&lt;li&gt;Implemented custom text editors with syntax highlighting&lt;/li&gt;\n&lt;li&gt;Created scrollable containers with proper touch/mouse handling&lt;/li&gt;\n&lt;li&gt;Designed responsive layouts without CSS flexbox&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;4. Resource Management&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Manual memory management for long-running processes&lt;/li&gt;\n&lt;li&gt;Thread pool sizing for concurrent AI streams&lt;/li&gt;\n&lt;li&gt;Database connection pooling&lt;/li&gt;\n&lt;li&gt;No browser garbage collection to rely on&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;So why go through all this extra effort?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;We believe the benefits are worth it for this specific use case:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;1. Performance &amp;amp; Resource Efficiency&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;50-300 MB memory usage&lt;/strong&gt; vs 500+ MB for equivalent web apps&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;1.5-3 second startup&lt;/strong&gt; vs 5-10 seconds for web-based alternatives&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Direct system access&lt;/strong&gt; - no browser overhead for file operations&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Efficient rendering&lt;/strong&gt; - only what changed, not full DOM diffing&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;2. User Control &amp;amp; Privacy&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Complete local storage&lt;/strong&gt; - users truly own their data&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;No cloud dependencies&lt;/strong&gt; for core functionality&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Encrypted local database&lt;/strong&gt; - conversations never leave the machine (learn more about &lt;a href=\"https://askimo.chat/security/\" rel=\"noopener noreferrer\"&gt;Askimo's security features&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;No telemetry or tracking&lt;/strong&gt; by default - users control everything&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;3. Long-term Strategic Benefits&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Local tool integration&lt;/strong&gt; - direct access to file system, terminal, development tools&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Offline-first&lt;/strong&gt; - full functionality without internet (except AI API calls)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;System integration&lt;/strong&gt; - global keyboard shortcuts, menu bar presence, system notifications&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Future extensibility&lt;/strong&gt; - can integrate with OS-level features (Spotlight search, Quick Look, etc.)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;4. Better UX for AI Workflows&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Instant search&lt;/strong&gt; - local SQLite queries are 10-100x faster than cloud-based search&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Reliable state&lt;/strong&gt; - no session timeouts, no lost tabs, no connection drops&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Multi-tab workflows&lt;/strong&gt; - handle 20+ concurrent conversations without browser memory bloat (see &lt;a href=\"https://askimo.chat/docs/desktop/features/\" rel=\"noopener noreferrer\"&gt;desktop features&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Consistent experience&lt;/strong&gt; - same UI across all platforms, not dependent on browser quirks&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;The web browser is well-suited for content consumption, but for productivity tools handling sensitive data and requiring deep system integration, native apps offer advantages.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;For Askimo specifically, the ability to:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Store thousands of conversations locally with instant search&lt;/li&gt;\n&lt;li&gt;Switch AI providers without page reloads or state loss&lt;/li&gt;\n&lt;li&gt;Work with multiple AI platforms - from cloud services like ChatGPT, Claude, and Gemini to &lt;a href=\"https://askimo.chat/docs/desktop/providers/ollama/\" rel=\"noopener noreferrer\"&gt;local Ollama models&lt;/a&gt;\n&lt;/li&gt;\n&lt;li&gt;Access project files and web content directly for RAG context&lt;/li&gt;\n&lt;li&gt;Work offline for reviewing past conversations&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;...made the extra development effort a worthwhile investment.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Bottom line:&lt;/strong&gt; If you're building a simple content-focused app, choose web. If you're building a productivity tool that needs privacy, performance, and deep system integration, the native desktop path - despite its challenges - delivers better long-term value for users.&lt;/p&gt;\n\n\n&lt;h2&gt;\n  \n  \n  Architecture Overview\n&lt;/h2&gt;\n\n&lt;p&gt;Askimo uses a &lt;strong&gt;provider-agnostic architecture&lt;/strong&gt; that abstracts AI models behind a common interface. Here's the high-level structure:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ     Compose Desktop UI Layer            ‚îÇ\n‚îÇ   (ViewModels + Reactive State)         ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ      Session Management Layer           ‚îÇ\n‚îÇ   (up to 20 tabs, LRU cache)            ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ    Provider Abstraction Layer           ‚îÇ\n‚îÇ   ChatModelFactory&amp;lt;T: ProviderSettings&amp;gt; ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n       ‚îÇ               ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  OpenAI    ‚îÇ   ‚îÇ  Ollama   ‚îÇ  ...\n‚îÇ  Factory   ‚îÇ   ‚îÇ  Factory  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n       ‚îÇ               ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ         LangChain4j Integration         ‚îÇ\n‚îÇ  (Streaming, Memory, RAG, Tools)        ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Core Implementation: Provider Abstraction\n&lt;/h2&gt;\n\n&lt;p&gt;The heart of Askimo's multi-provider support is the &lt;code&gt;ChatModelFactory&lt;/code&gt; interface. This is how we achieve provider independence. You can see all &lt;a href=\"https://askimo.chat/docs/desktop/ai-providers/\" rel=\"noopener noreferrer\"&gt;supported AI providers&lt;/a&gt; and their configuration in the documentation.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  1. ChatModelFactory Interface\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;interface&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatModelFactory&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;T&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ProviderSettings&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// List available models for this provider&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;availableModels&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;T&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Identify which provider this factory creates&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;getProvider&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;ModelProvider&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Default configuration for this provider&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;defaultSettings&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;T&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Create a chat client instance&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;create&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"n\"&gt;sessionId&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;model&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;T&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;retriever&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;executionMode&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ExecutionMode&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;chatMemory&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatMemory&lt;/span&gt;&lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatClient&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Create cheap utility client for classification tasks&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;createUtilityClient&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;T&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatClient&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Key Design Decisions:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Generic type parameter &lt;code&gt;&amp;lt;T: ProviderSettings&amp;gt;&lt;/code&gt;&lt;/strong&gt; - Each factory specifies its own settings type, ensuring type safety at compile time&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;ContentRetriever for RAG&lt;/strong&gt; - Optional parameter enables Retrieval-Augmented Generation for file/project context&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;ChatMemory injection&lt;/strong&gt; - Conversation history managed externally but injected at creation time&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;ExecutionMode awareness&lt;/strong&gt; - Different behavior for CLI vs Desktop (e.g., tools disabled in desktop)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Utility client for background tasks&lt;/strong&gt; - &lt;code&gt;createUtilityClient()&lt;/code&gt; returns a cheap, fast model for tasks that don't need the most powerful AI&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Why createUtilityClient?\n&lt;/h3&gt;\n\n&lt;p&gt;Many AI workflows involve tasks that don't require expensive, state-of-the-art models. Examples include:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Memory summarization:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Condensing old conversation messages into summaries&lt;/li&gt;\n&lt;li&gt;A simple task that GPT-3.5-turbo handles just as well as GPT-4&lt;/li&gt;\n&lt;li&gt;Running hundreds of times during long conversations&lt;/li&gt;\n&lt;li&gt;Using GPT-4 would cost 10-20x more with no quality benefit&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Intent classification:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Deciding \"should we use RAG for this query?\" ‚Üí YES/NO&lt;/li&gt;\n&lt;li&gt;Validating \"is this a question?\" ‚Üí YES/NO&lt;/li&gt;\n&lt;li&gt;Simple binary decisions that don't need advanced reasoning&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;The trade-off:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Cloud providers (OpenAI, Anthropic, Google):&lt;/strong&gt; Use a cheaper model (e.g., GPT-3.5-turbo costs ~$0.001/1K tokens vs GPT-4's ~$0.03/1K tokens)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Local providers (Ollama, LM Studio):&lt;/strong&gt; Use the same model (no API costs, so no benefit to switching)\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Example: OpenAI implementation&lt;/span&gt;\n&lt;span class=\"kd\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;OpenAiChatModelFactory&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatModelFactory&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;OpenAiSettings&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;createUtilityClient&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;OpenAiSettings&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatClient&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// Use GPT-3.5-turbo for cheap background tasks&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nf\"&gt;create&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n            &lt;span class=\"n\"&gt;sessionId&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;model&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"s\"&gt;\"gpt-3.5-turbo\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Cheap model for utility tasks&lt;/span&gt;\n            &lt;span class=\"n\"&gt;settings&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;retriever&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;executionMode&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;ExecutionMode&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;DESKTOP&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;chatMemory&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;\n        &lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Example: Ollama implementation&lt;/span&gt;\n&lt;span class=\"kd\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;OllamaChatModelFactory&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatModelFactory&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;OllamaSettings&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;createUtilityClient&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;OllamaSettings&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatClient&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// Local models have no API cost, use the same model&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nf\"&gt;create&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n            &lt;span class=\"n\"&gt;sessionId&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;model&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;defaultModel&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Same model, no cost difference&lt;/span&gt;\n            &lt;span class=\"n\"&gt;settings&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;settings&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;retriever&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;executionMode&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;ExecutionMode&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;DESKTOP&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;chatMemory&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;null&lt;/span&gt;\n        &lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Real-world impact:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;A user with 100 conversations averaging 200 messages each triggers ~100 summarization calls&lt;/li&gt;\n&lt;li&gt;With GPT-4: ~$6-10 in API costs for background tasks&lt;/li&gt;\n&lt;li&gt;With GPT-3.5-turbo utility client: ~$0.30-0.50 in API costs&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;20x cost reduction&lt;/strong&gt; for the same functionality&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;This pattern keeps the AI experience responsive and affordable without compromising the quality of user-facing responses.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  2. ProviderSettings Interface\n&lt;/h3&gt;\n\n&lt;p&gt;Each provider has its own settings class:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;interface&lt;/span&gt; &lt;span class=\"nc\"&gt;ProviderSettings&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;defaultModel&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Human-readable description (masks sensitive data)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;describe&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Configurable fields for UI&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;getFields&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;SettingField&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Update a field and return new instance (immutable pattern)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;updateField&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;fieldName&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;value&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;ProviderSettings&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Validate settings are ready for use&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;validate&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;Boolean&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Help text when validation fails&lt;/span&gt;\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;getSetupHelpText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;messageResolver&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  3. Example: OpenAI Provider Implementation\n&lt;/h3&gt;\n\n&lt;p&gt;Here's how we implement the &lt;a href=\"https://askimo.chat/docs/desktop/providers/openai/\" rel=\"noopener noreferrer\"&gt;OpenAI/ChatGPT provider&lt;/a&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"nd\"&gt;@Serializable&lt;/span&gt;\n&lt;span class=\"kd\"&gt;data class&lt;/span&gt; &lt;span class=\"nc\"&gt;OpenAiSettings&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"py\"&gt;apiKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;defaultModel&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"s\"&gt;\"gpt-4o\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"py\"&gt;baseUrl&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"s\"&gt;\"https://api.openai.com/v1\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"py\"&gt;presets&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Presets&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Presets&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;Style&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;BALANCED&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ProviderSettings&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nc\"&gt;HasApiKey&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nc\"&gt;HasBaseUrl&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;validate&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;Boolean&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;apiKey&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;isNotBlank&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;getSetupHelpText&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;messageResolver&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"s\"&gt;\"\"\"\n            OpenAI requires an API key to use.\n            1. Get your API key: https://platform.openai.com/api-keys\n            2. Configure it with: :set-param api_key YOUR_KEY\n        \"\"\"&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;trimIndent&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Streaming AI Responses: Managing Multiple Concurrent Conversations\n&lt;/h2&gt;\n\n&lt;p&gt;One of Askimo's key features: &lt;strong&gt;handling up to 20 simultaneous AI conversations&lt;/strong&gt;, each with its own streaming response thread.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  The Challenge\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Each active conversation needs a dedicated thread for streaming AI responses&lt;/li&gt;\n&lt;li&gt;Memory must be bounded to prevent resource exhaustion&lt;/li&gt;\n&lt;li&gt;Inactive sessions should be cached but unloaded from memory&lt;/li&gt;\n&lt;li&gt;Thread-safe state management across concurrent operations&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Our Approach\n&lt;/h3&gt;\n\n&lt;p&gt;We use Kotlin's &lt;strong&gt;StateFlow&lt;/strong&gt; for reactive state management and &lt;strong&gt;Coroutines&lt;/strong&gt; for concurrent streaming:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatViewModel&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;sessionId&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;chatService&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatService&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;_isStreaming&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;MutableStateFlow&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;false&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;isStreaming&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;StateFlow&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;Boolean&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;_isStreaming&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;asStateFlow&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;_messages&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;MutableStateFlow&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;Message&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&amp;gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;emptyList&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;messages&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;StateFlow&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;Message&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;_messages&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;asStateFlow&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;sendMessage&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;content&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;viewModelScope&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;launch&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"n\"&gt;_isStreaming&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;value&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;true&lt;/span&gt;\n\n            &lt;span class=\"k\"&gt;try&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n                &lt;span class=\"n\"&gt;chatService&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;streamResponse&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;content&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n                    &lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"k\"&gt;catch&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"n\"&gt;error&lt;/span&gt; &lt;span class=\"p\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nf\"&gt;handleStreamingError&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt;\n                    &lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;collect&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"n\"&gt;chunk&lt;/span&gt; &lt;span class=\"p\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nf\"&gt;appendToLastMessage&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;chunk&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt;\n            &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;finally&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n                &lt;span class=\"n\"&gt;_isStreaming&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;value&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;false&lt;/span&gt;\n            &lt;span class=\"p\"&gt;}&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Key benefits:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Reactive UI updates&lt;/strong&gt; - Compose automatically recomposes when StateFlow changes&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Thread-safe&lt;/strong&gt; - StateFlow handles concurrent access safely&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Backpressure handling&lt;/strong&gt; - Won't overwhelm UI with rapid updates&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Automatic cleanup&lt;/strong&gt; - Coroutines cancelled when ViewModel disposed&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Session Management\n&lt;/h3&gt;\n\n&lt;p&gt;We maintain up to 20 active sessions in memory with LRU-style eviction:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Sessions only created when first accessed (lazy initialization)&lt;/li&gt;\n&lt;li&gt;Inactive sessions automatically cleaned up when limit reached&lt;/li&gt;\n&lt;li&gt;Active streaming sessions are never evicted&lt;/li&gt;\n&lt;li&gt;Mutex-protected state for thread safety&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;This keeps memory usage bounded (~50-300 MB total) while supporting real-world workflows.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Error Recovery: Preserving Partial AI Responses\n&lt;/h2&gt;\n\n&lt;p&gt;AI APIs can fail at any moment - network issues, rate limits, timeouts. Most chat apps lose everything when this happens. Askimo preserves partial responses.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  The Problem\n&lt;/h3&gt;\n\n&lt;p&gt;When an AI streaming call fails:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;You've already received 500 words of a 1000-word response&lt;/li&gt;\n&lt;li&gt;The API connection drops&lt;/li&gt;\n&lt;li&gt;Standard implementations discard everything&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;h3&gt;\n  \n  \n  Our Solution: Incremental Persistence\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"k\"&gt;suspend&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;handleStreamingError&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Throwable&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// Get the partial content we've accumulated so far&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;partialContent&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;getCurrentAccumulatedContent&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;partialContent&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;isNotEmpty&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// Save what we have&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;partialMessage&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Message&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n            &lt;span class=\"n\"&gt;content&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;partialContent&lt;/span&gt; &lt;span class=\"p\"&gt;+&lt;/span&gt; &lt;span class=\"s\"&gt;\"\\n\\n[Response interrupted: ${error.message}]\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;role&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Role&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;ASSISTANT&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;timestamp&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Clock&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;System&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;now&lt;/span&gt;&lt;span class=\"p\"&gt;(),&lt;/span&gt;\n            &lt;span class=\"n\"&gt;isError&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;true&lt;/span&gt;\n        &lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// Replace the temporary streaming message with saved version&lt;/span&gt;\n        &lt;span class=\"nf\"&gt;replaceTemporaryMessage&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;partialMessage&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// Persist to database immediately&lt;/span&gt;\n        &lt;span class=\"n\"&gt;messageRepository&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;save&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;sessionId&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;partialMessage&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Notify user with non-intrusive error indicator&lt;/span&gt;\n    &lt;span class=\"n\"&gt;eventBus&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;publish&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;StreamingErrorEvent&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;sessionId&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;User Experience:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;‚úÖ Partial responses are &lt;strong&gt;preserved and saved&lt;/strong&gt;\n&lt;/li&gt;\n&lt;li&gt;‚úÖ Clear &lt;strong&gt;visual indication&lt;/strong&gt; that response was interrupted&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Resume capability&lt;/strong&gt; - Users can retry from the partial state&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;No data loss&lt;/strong&gt; - Everything is persisted immediately&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Project-Based Context: RAG for Your Documents\n&lt;/h2&gt;\n\n&lt;p&gt;One useful feature we added: &lt;strong&gt;point it at your documents and ask questions&lt;/strong&gt;. Whether it's code, PDFs, Microsoft Office files, OpenOffice documents, or web pages - Askimo can understand and answer questions about your content. Learn more about &lt;a href=\"https://askimo.chat/docs/desktop/rag/\" rel=\"noopener noreferrer\"&gt;Askimo's RAG capabilities&lt;/a&gt;.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Architecture: Content Retrieval\n&lt;/h3&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// User attaches a project folder or documents&lt;/span&gt;\n&lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;project&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;Project&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"n\"&gt;name&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"s\"&gt;\"my-project\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;knowledgeSources&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;listOf&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"nc\"&gt;FileSystemSource&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/path/to/documents\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;  &lt;span class=\"c1\"&gt;// PDFs, Office docs, text files&lt;/span&gt;\n        &lt;span class=\"nc\"&gt;FileSystemSource&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"/path/to/codebase/src\"&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Source code&lt;/span&gt;\n        &lt;span class=\"nc\"&gt;UrlSource&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s\"&gt;\"https://docs.example.com\"&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Web documentation&lt;/span&gt;\n    &lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// When user sends a message in this project's session:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;retriever&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;createContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;project&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;chatClient&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;factory&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;create&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"n\"&gt;sessionId&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;sessionId&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;model&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"s\"&gt;\"gpt-4o\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;settings&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;openAiSettings&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;retriever&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;retriever&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;  &lt;span class=\"c1\"&gt;// RAG enabled!&lt;/span&gt;\n    &lt;span class=\"n\"&gt;executionMode&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;ExecutionMode&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nc\"&gt;DESKTOP&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"n\"&gt;chatMemory&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;conversationMemory&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  How RAG Works in Askimo\n&lt;/h3&gt;\n\n&lt;p&gt;Askimo supports a wide range of document formats:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Office Documents&lt;/strong&gt;: Microsoft Word (.docx), Excel (.xlsx), PowerPoint (.pptx)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;OpenOffice&lt;/strong&gt;: Writer (.odt), Calc (.ods), Impress (.odp)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;PDFs&lt;/strong&gt;: Extracts text content from PDF files&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Code&lt;/strong&gt;: All programming languages and text-based formats&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Web Pages&lt;/strong&gt;: Crawl and index documentation sites&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;The RAG Pipeline:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Ingestion&lt;/strong&gt;: Documents are parsed, chunked, and embedded when project is created&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Query-time retrieval&lt;/strong&gt;: User's question is embedded and similar chunks retrieved&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Context injection&lt;/strong&gt;: Retrieved chunks are added to the prompt automatically&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Response&lt;/strong&gt;: AI answers using both conversation history AND document context&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;h3&gt;\n  \n  \n  Hybrid Search: JVector + Lucene\n&lt;/h3&gt;\n\n&lt;p&gt;We chose a &lt;strong&gt;hybrid content retriever&lt;/strong&gt; that combines two complementary search strategies:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;1. Vector Search (JVector)&lt;/strong&gt; - Semantic similarity&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Finds content that's conceptually related to the query&lt;/li&gt;\n&lt;li&gt;Example: Query \"error handling\" matches \"exception management\" even without exact words&lt;/li&gt;\n&lt;li&gt;Uses embeddings to capture meaning, not just keywords&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;2. Keyword Search (Lucene)&lt;/strong&gt; - Exact term matching&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Finds content with specific terms, names, or identifiers&lt;/li&gt;\n&lt;li&gt;Example: Query \"UserRepository.findById\" finds exact method references&lt;/li&gt;\n&lt;li&gt;Critical for code, API names, and technical terms&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Why hybrid?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Neither approach alone is sufficient:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Vector-only&lt;/strong&gt;: Misses exact matches (class names, function signatures, specific error codes)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Keyword-only&lt;/strong&gt;: Misses semantic relationships (synonyms, paraphrased concepts, related ideas)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The hybrid retriever combines both using &lt;strong&gt;Reciprocal Rank Fusion (RRF)&lt;/strong&gt; - a proven algorithm that merges ranked lists:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;HybridContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;vectorRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;keywordRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;maxResults&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Int&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;k&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Int&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Standard RRF constant&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ContentRetriever&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;retrieve&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Query&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;Content&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;vectorResults&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;vectorRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;retrieve&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;keywordResults&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;keywordRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;retrieve&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// Merge using Reciprocal Rank Fusion&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nf\"&gt;reciprocalRankFusion&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;vectorResults&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;keywordResults&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n            &lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;take&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;maxResults&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;How RRF works:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;For each document, calculate a fusion score based on its rank in each list:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;RRF_score(doc) = Œ£ 1 / (k + rank_i)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Where:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;code&gt;k = 60&lt;/code&gt; (standard constant that balances the contribution from different retrievers)&lt;/li&gt;\n&lt;li&gt;\n&lt;code&gt;rank_i&lt;/code&gt; is the position of the document in retriever i's results (1st = rank 1, 2nd = rank 2, etc.)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;p&gt;A document ranked &lt;strong&gt;#1 in vector search&lt;/strong&gt; and &lt;strong&gt;#3 in keyword search&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Vector score: 1/(60+1) ‚âà 0.016&lt;/li&gt;\n&lt;li&gt;Keyword score: 1/(60+3) ‚âà 0.016&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Total RRF score: 0.032&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n\n&lt;/li&gt;\n\n&lt;li&gt;\n\n&lt;p&gt;A document ranked &lt;strong&gt;#1 in both&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Vector score: 1/(60+1) ‚âà 0.016&lt;/li&gt;\n&lt;li&gt;Keyword score: 1/(60+1) ‚âà 0.016&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Total RRF score: 0.032&lt;/strong&gt; (same as above!)&lt;/li&gt;\n&lt;/ul&gt;\n\n\n&lt;/li&gt;\n\n&lt;li&gt;\n\n&lt;p&gt;A document ranked &lt;strong&gt;#1 in vector&lt;/strong&gt; but &lt;strong&gt;not found in keyword&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Vector score: 1/(60+1) ‚âà 0.016&lt;/li&gt;\n&lt;li&gt;Keyword score: 0&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Total RRF score: 0.016&lt;/strong&gt; (lower than documents found in both)&lt;/li&gt;\n&lt;/ul&gt;\n\n\n&lt;/li&gt;\n\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Why RRF is better than weighted averaging:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Rank-based, not score-based&lt;/strong&gt;: Different retrievers produce incomparable scores. RRF only cares about relative ranking.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Robust to failures&lt;/strong&gt;: If one retriever fails, we gracefully fall back to the other&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Rewards consensus&lt;/strong&gt;: Documents appearing in both lists naturally get higher scores&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Well-researched&lt;/strong&gt;: RRF is a proven algorithm used in information retrieval research&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;Real-world impact:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Asks \"how to fix null pointer\" ‚Üí finds both \"NullPointerException\" (keyword) and \"defensive null checks\" (semantic)&lt;/li&gt;\n&lt;li&gt;Asks about \"database queries\" ‚Üí finds both \"SQL\" (keyword) and \"data access patterns\" (semantic)&lt;/li&gt;\n&lt;li&gt;More accurate retrieval = better AI answers grounded in your actual documents&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Implementation uses LangChain4j's RAG components:&lt;/strong&gt;&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;createContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;project&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Project&lt;/span&gt;&lt;span class=\"p\"&gt;):&lt;/span&gt; &lt;span class=\"nc\"&gt;ContentRetriever&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;embeddingStore&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;InMemoryEmbeddingStore&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;TextSegment&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;()&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;embeddingModel&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;createEmbeddingModel&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Index all knowledge sources&lt;/span&gt;\n    &lt;span class=\"n\"&gt;project&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;knowledgeSources&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;forEach&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"n\"&gt;source&lt;/span&gt; &lt;span class=\"p\"&gt;-&amp;gt;&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;documents&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;loadDocuments&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;source&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;segments&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nc\"&gt;DocumentSplitters&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;recursive&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"mi\"&gt;500&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"mi\"&gt;50&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;split&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;documents&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"n\"&gt;embeddingStore&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;addAll&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;segments&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;embeddingModel&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;embedAll&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;segments&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nc\"&gt;EmbeddingStoreContentRetriever&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"n\"&gt;embeddingStore&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;embeddingStore&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;embeddingModel&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;embeddingModel&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;maxResults&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;5&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;minScore&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"mf\"&gt;0.7&lt;/span&gt;\n    &lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Memory Management: Token-Aware Conversation History\n&lt;/h2&gt;\n\n&lt;h3&gt;\n  \n  \n  The Token Problem\n&lt;/h3&gt;\n\n&lt;p&gt;Here's something many users don't realize: &lt;strong&gt;Every time you send a message to an AI model, the entire conversation history goes with it.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;When you ask ChatGPT or Claude a question, the API call looks like this:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight json\"&gt;&lt;code&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"w\"&gt;\n  &lt;/span&gt;&lt;span class=\"nl\"&gt;\"messages\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"w\"&gt;\n    &lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nl\"&gt;\"role\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"system\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"nl\"&gt;\"content\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"You are a helpful assistant\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt;&lt;span class=\"w\"&gt;\n    &lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nl\"&gt;\"role\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"user\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"nl\"&gt;\"content\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"What is Python?\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt;&lt;span class=\"w\"&gt;\n    &lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nl\"&gt;\"role\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"assistant\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"nl\"&gt;\"content\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"Python is a programming language...\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt;&lt;span class=\"w\"&gt;\n    &lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nl\"&gt;\"role\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"user\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"nl\"&gt;\"content\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"How do I install it?\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt;&lt;span class=\"w\"&gt;\n    &lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nl\"&gt;\"role\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"assistant\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"nl\"&gt;\"content\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"You can install Python by...\"&lt;/span&gt;&lt;span class=\"p\"&gt;},&lt;/span&gt;&lt;span class=\"w\"&gt;\n    &lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nl\"&gt;\"role\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"user\"&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"nl\"&gt;\"content\"&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;&lt;span class=\"w\"&gt; &lt;/span&gt;&lt;span class=\"s2\"&gt;\"Show me a hello world example\"&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"w\"&gt;\n  &lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt;&lt;span class=\"w\"&gt;\n&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"w\"&gt;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Notice the pattern? &lt;strong&gt;Every previous message is sent again.&lt;/strong&gt; This is how AI models maintain context - they don't actually \"remember\" your conversation. Each request is stateless, so you must resend the entire history for the model to understand what you're talking about.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The consequences:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;strong&gt;Token consumption grows quadratically&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Message 1: ~100 tokens sent&lt;/li&gt;\n&lt;li&gt;Message 10: ~1,000 tokens sent (all previous messages)&lt;/li&gt;\n&lt;li&gt;Message 50: ~5,000+ tokens sent&lt;/li&gt;\n&lt;li&gt;Message 100: ~10,000+ tokens sent (approaching model limits!)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;API costs increase&lt;/strong&gt;: You pay for every token sent, so longer conversations get exponentially more expensive&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Context limits&lt;/strong&gt;: Most models have token limits (4K-128K depending on the model). Once you hit the limit, you can't continue the conversation without removing history&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Performance degradation&lt;/strong&gt;: Larger context windows slow down response times&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;Askimo's solution:&lt;/strong&gt; Auto-summarize old messages while keeping recent ones to maintain conversational flow.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Token-Aware Memory with Intelligent Summarization\n&lt;/h3&gt;\n\n&lt;p&gt;The key insight: &lt;strong&gt;You don't need the entire history, just enough context.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Most conversations follow a natural pattern - the most recent exchanges are what matter for understanding the current question. Earlier messages provide background context, but you rarely need word-for-word accuracy from 50 messages ago. What you need is:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Recent messages in full&lt;/strong&gt; - The last 50-60% of conversation for immediate context and continuity&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Historical overview&lt;/strong&gt; - A structured summary of earlier messages capturing key facts, decisions, and topics&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;System instructions preserved&lt;/strong&gt; - Original prompts and setup never discarded&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Think of it like a work meeting - you don't replay the entire 2-hour discussion. You recap the key decisions from the first hour, then dive into the details of recent conversation.&lt;/p&gt;\n\n&lt;p&gt;Askimo's approach:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Summarize old messages&lt;/strong&gt; - Condense the oldest 45% into a structured summary with key facts and topics&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Keep recent messages intact&lt;/strong&gt; - Preserve the remaining 55% for immediate conversational context&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Never touch system messages&lt;/strong&gt; - Instructions are always preserved&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Run asynchronously&lt;/strong&gt; - Doesn't block user interaction\n&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight kotlin\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;TokenAwareSummarizingMemory&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;appContext&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;AppContext&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;sessionId&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;summarizationThreshold&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Double&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"mf\"&gt;0.6&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Trigger at 60% of max tokens&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatMemory&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Maximum tokens: 40% of model's context window (dynamically calculated)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;private&lt;/span&gt; &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;maxTokens&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Int&lt;/span&gt;\n        &lt;span class=\"k\"&gt;get&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;ModelContextSizeCache&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"k\"&gt;get&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;currentModel&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;*&lt;/span&gt; &lt;span class=\"mf\"&gt;0.4&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;toInt&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;add&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;message&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;ChatMessage&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"n\"&gt;messages&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;add&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;message&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"nf\"&gt;persistToDatabase&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;totalTokens&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;estimateTotalTokens&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;threshold&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;maxTokens&lt;/span&gt; &lt;span class=\"p\"&gt;*&lt;/span&gt; &lt;span class=\"n\"&gt;summarizationThreshold&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;toInt&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;\n\n        &lt;span class=\"k\"&gt;if&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;totalTokens&lt;/span&gt; &lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;threshold&lt;/span&gt; &lt;span class=\"p\"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=\"p\"&gt;!&lt;/span&gt;&lt;span class=\"n\"&gt;summarizationInProgress&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"nf\"&gt;triggerAsyncSummarization&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt;  &lt;span class=\"c1\"&gt;// Non-blocking&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n    &lt;span class=\"k\"&gt;override&lt;/span&gt; &lt;span class=\"k\"&gt;fun&lt;/span&gt; &lt;span class=\"nf\"&gt;messages&lt;/span&gt;&lt;span class=\"p\"&gt;():&lt;/span&gt; &lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;ChatMessage&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;buildList&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// Structured summary as system message (if exists)&lt;/span&gt;\n        &lt;span class=\"n\"&gt;structuredSummary&lt;/span&gt;&lt;span class=\"o\"&gt;?.&lt;/span&gt;&lt;span class=\"nf\"&gt;let&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nf\"&gt;add&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nc\"&gt;SystemMessage&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;from&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;it&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// Recent conversation messages&lt;/span&gt;\n        &lt;span class=\"n\"&gt;messages&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;forEach&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nf\"&gt;add&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;it&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;toChatMessage&lt;/span&gt;&lt;span class=\"p\"&gt;())&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Structured summary format&lt;/span&gt;\n&lt;span class=\"nd\"&gt;@Serializable&lt;/span&gt;\n&lt;span class=\"kd\"&gt;data class&lt;/span&gt; &lt;span class=\"nc\"&gt;ConversationSummary&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;keyFacts&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;Map&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;,&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;mainTopics&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;List&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nc\"&gt;String&lt;/span&gt;&lt;span class=\"p\"&gt;&amp;gt;,&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;val&lt;/span&gt; &lt;span class=\"py\"&gt;recentContext&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nc\"&gt;String&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;What this achieves:&lt;/strong&gt;&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Before (100 messages, ~15,000 tokens):\n[Message 1] [Message 2] ... [Message 98] [Message 99] [Message 100]\n‚ùå Exceeds token limit, API call fails\n\nAfter summarization (~10,000 tokens):\n[Summary of messages 1-45] [Message 46] ... [Message 99] [Message 100]\n‚úÖ Under token limit, context preserved, conversation continues smoothly\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;&lt;strong&gt;Implementation details:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Summarizes the oldest &lt;strong&gt;45% of conversation messages&lt;/strong&gt; when token threshold (60% of max) is reached&lt;/li&gt;\n&lt;li&gt;System messages (instructions) are &lt;strong&gt;never summarized or removed&lt;/strong&gt; - they're preserved indefinitely&lt;/li&gt;\n&lt;li&gt;Runs &lt;strong&gt;asynchronously&lt;/strong&gt; so it doesn't block the user's interaction&lt;/li&gt;\n&lt;li&gt;Falls back to &lt;strong&gt;extractive summary&lt;/strong&gt; if AI-powered summarization fails&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Real-world example:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Imagine a 100-message conversation about building a React app that hits the token limit:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Messages 1-45&lt;/strong&gt;: Initial planning, architecture decisions, setup questions, debugging&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Messages 46-100&lt;/strong&gt;: Recent implementation and current discussion&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Without summarization:&lt;/strong&gt; All 100 messages sent = ~15,000 tokens ‚ùå Exceeds limit&lt;br&gt;\n&lt;strong&gt;With summarization:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Structured summary of messages 1-45: ~800 tokens&lt;/li&gt;\n&lt;li&gt;Messages 46-100 (55 messages): ~8,250 tokens&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Total: ~9,050 tokens&lt;/strong&gt; (~40% reduction, under the limit ‚úÖ)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Why keep the majority of recent messages intact?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;The AI needs &lt;strong&gt;immediate context&lt;/strong&gt; to understand:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;What you discussed in the last 50+ messages&lt;/li&gt;\n&lt;li&gt;The current flow and direction of conversation&lt;/li&gt;\n&lt;li&gt;Recent code examples, error messages, or specific questions&lt;/li&gt;\n&lt;li&gt;Continuity between related topics&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;A structured summary with key facts like \"User is building a React app with TypeScript, discussed routing and API integration\" provides useful background context. But the AI needs the actual recent messages to understand nuanced questions like:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\"So should I use try-catch or error boundaries?\" (referring to your error handling discussion 10 messages ago)&lt;/li&gt;\n&lt;li&gt;\"Can you show me the implementation for the second approach?\" (referring to two options discussed recently)&lt;/li&gt;\n&lt;li&gt;\"What was that library you mentioned earlier?\" (needs the actual message where the library was named)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;The 45/55 split&lt;/strong&gt; strikes the right balance:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;45% oldest messages&lt;/strong&gt; ‚Üí Summarized into key facts and topics (compressed ~95%)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;55% recent messages&lt;/strong&gt; ‚Üí Kept verbatim for full conversational context&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;System messages&lt;/strong&gt; ‚Üí Always preserved (these are instructions, not conversation)&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;This approach ensures the AI has both:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;\n&lt;strong&gt;Condensed historical context&lt;/strong&gt; - What the conversation has been about overall&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Full recent detail&lt;/strong&gt; - The nuanced back-and-forth needed to continue naturally&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;Benefits:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;30-50% token reduction&lt;/strong&gt; - Meaningful API cost savings over time&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Unlimited conversations&lt;/strong&gt; - Never hit token limits, chat forever&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Structured summaries&lt;/strong&gt; - AI extracts key facts and topics, not just truncation&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Transparent to users&lt;/strong&gt; - Happens asynchronously in the background&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Robust fallback&lt;/strong&gt; - If AI summarization fails, uses extractive summary&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Dynamic limits&lt;/strong&gt; - Automatically adjusts based on model's context window (40% allocation)&lt;/li&gt;\n&lt;li&gt;‚úÖ &lt;strong&gt;Smart preservation&lt;/strong&gt; - System messages (instructions) are never removed&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Why this matters:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;No manual intervention&lt;/strong&gt; - Summarization happens transparently when 60% threshold is reached&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Cost optimization&lt;/strong&gt; - Reducing 30-50% of tokens adds up over hundreds of conversations&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Better context quality&lt;/strong&gt; - Structured summaries preserve key facts and topics, removing conversational noise&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Persistence&lt;/strong&gt; - Memory is saved to database, survives app restarts&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Async operation&lt;/strong&gt; - 60-second timeout ensures it doesn't block user interaction&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Performance Insights: Managing Multiple AI Platforms in One Desktop App\n&lt;/h2&gt;\n\n&lt;p&gt;Building a desktop app that manages multiple concurrent AI conversations taught us important lessons about resource management. Here's what we learned about the performance trade-offs:&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Memory Usage Patterns\n&lt;/h3&gt;\n\n&lt;p&gt;A typical desktop AI chat application's memory footprint consists of:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Base application layer (~50 MB)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;JVM runtime overhead&lt;/li&gt;\n&lt;li&gt;Compose Desktop UI framework&lt;/li&gt;\n&lt;li&gt;Core application state&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Per-session overhead (~2-5 MB each)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Each conversation needs its own ViewModel instance&lt;/li&gt;\n&lt;li&gt;State management (messages list, streaming state, settings)&lt;/li&gt;\n&lt;li&gt;With 20 concurrent sessions: ~40-100 MB additional&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Conversation history caching (~5-10 MB per 100 messages)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Messages are kept in memory for active sessions&lt;/li&gt;\n&lt;li&gt;Lazy loading from SQLite for inactive sessions&lt;/li&gt;\n&lt;li&gt;A power user with 20 tabs √ó 100 messages each ‚âà 100-200 MB&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;RAG embedding stores (varies by project size)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Small project (500 files): ~50 MB&lt;/li&gt;\n&lt;li&gt;Medium project (5,000 files): ~200-500 MB&lt;/li&gt;\n&lt;li&gt;Large project (20,000+ files): 1+ GB&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Total memory range: 50-300 MB&lt;/strong&gt; for typical usage (excluding large RAG projects and AI model memory).&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Why These Numbers Matter\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Compared to web-based alternatives:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Web apps in browser tabs: 200-500 MB &lt;strong&gt;per tab&lt;/strong&gt; (browser overhead included)&lt;/li&gt;\n&lt;li&gt;Our approach: 2-5 MB per session (no browser overhead)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Trade-off&lt;/strong&gt;: We had to build custom rendering, but gained 10-100x better per-session memory efficiency&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Startup time trade-offs:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Cold start: 1.5-3 seconds (loading JVM + Compose Desktop)&lt;/li&gt;\n&lt;li&gt;Web apps: ~1 second initial load, but 3-5 seconds for full interactivity&lt;/li&gt;\n&lt;li&gt;Electron alternatives: 5-10 seconds (loading Chromium)&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Learning&lt;/strong&gt;: Desktop app initialization is competitive once you account for full interactivity&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Database Performance\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;SQLite for local message storage:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Write latency: &amp;lt;10ms per message (includes indexing)&lt;/li&gt;\n&lt;li&gt;Full-text search: &amp;lt;50ms across 10,000+ messages&lt;/li&gt;\n&lt;li&gt;No network round-trip delays like cloud-based alternatives&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Why local-first matters:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Zero API latency for message retrieval&lt;/li&gt;\n&lt;li&gt;Works fully offline for history browsing&lt;/li&gt;\n&lt;li&gt;No sync conflicts or version issues&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Concurrency Limits\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Why we cap at 20 concurrent sessions:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Each streaming session holds an open HTTP connection&lt;/li&gt;\n&lt;li&gt;Memory grows linearly with active sessions&lt;/li&gt;\n&lt;li&gt;UI remains responsive up to ~30 tabs, but 20 is a comfortable limit&lt;/li&gt;\n&lt;li&gt;Real-world usage: Most users have 3-8 active conversations&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;The lesson:&lt;/strong&gt; Hard limits prevent resource exhaustion. Better to cap explicitly than let the system degrade unpredictably.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Rendering Performance\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;Compose Desktop maintains 60 FPS&lt;/strong&gt; because:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Only re-renders changed UI components (reactive architecture)&lt;/li&gt;\n&lt;li&gt;Streaming updates are throttled to prevent overwhelming the UI thread&lt;/li&gt;\n&lt;li&gt;Message virtualization for long conversation lists&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Trade-off we made:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Custom markdown renderer required significant effort&lt;/li&gt;\n&lt;li&gt;But we gained full control over rendering performance and caching&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Key Takeaways for Desktop AI Application Development\n&lt;/h2&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Memory management is crucial&lt;/strong&gt; - With multiple concurrent sessions, every MB counts. Lazy loading and LRU eviction prevented unbounded growth.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Local-first architecture pays off&lt;/strong&gt; - SQLite message storage gives us instant search and offline access without cloud sync complexity.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Async everywhere&lt;/strong&gt; - Kotlin coroutines made concurrent streaming manageable. Every blocking operation runs in a background dispatcher.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Cap resources explicitly&lt;/strong&gt; - 20 concurrent sessions is a reasonable limit that prevents degradation while supporting real workflows.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Desktop overhead is acceptable&lt;/strong&gt; - The 1.5-3s startup time and 50MB base memory are worthwhile for the privacy, performance, and offline benefits.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Try It Yourself\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;strong&gt;Askimo is open source (AGPLv3) and available now:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;üåê &lt;strong&gt;Website&lt;/strong&gt;: &lt;a href=\"https://askimo.chat\" rel=\"noopener noreferrer\"&gt;https://askimo.chat&lt;/a&gt;\n&lt;/li&gt;\n&lt;li&gt;üíª &lt;strong&gt;GitHub&lt;/strong&gt;: &lt;a href=\"https://github.com/haiphucnguyen/askimo\" rel=\"noopener noreferrer\"&gt;github.com/haiphucnguyen/askimo&lt;/a&gt;\n&lt;/li&gt;\n&lt;li&gt;üì• &lt;strong&gt;Download&lt;/strong&gt;: &lt;a href=\"https://askimo.chat/download/\" rel=\"noopener noreferrer\"&gt;Get installers for macOS, Windows, Linux&lt;/a&gt;\n&lt;/li&gt;\n&lt;li&gt;üìñ &lt;strong&gt;Docs&lt;/strong&gt;: &lt;a href=\"https://askimo.chat/docs/\" rel=\"noopener noreferrer\"&gt;Complete documentation and setup guides&lt;/a&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Related resources:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;a href=\"https://askimo.chat/docs/desktop/installation/\" rel=\"noopener noreferrer\"&gt;Installation guides&lt;/a&gt; for &lt;a href=\"https://askimo.chat/docs/desktop/installation/macos/\" rel=\"noopener noreferrer\"&gt;macOS&lt;/a&gt;, &lt;a href=\"https://askimo.chat/docs/desktop/installation/windows/\" rel=\"noopener noreferrer\"&gt;Windows&lt;/a&gt;, and &lt;a href=\"https://askimo.chat/docs/desktop/installation/linux/\" rel=\"noopener noreferrer\"&gt;Linux&lt;/a&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  What's Next?\n&lt;/h2&gt;\n\n&lt;p&gt;We're actively developing:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Voice input/output&lt;/strong&gt; - Hands-free conversations with speech-to-text and text-to-speech support&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Plugin system&lt;/strong&gt; - Extensible architecture for custom integrations:\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Custom RAG material sources&lt;/strong&gt; - Integrate with Confluence, Notion, Google Drive, databases, or any data source&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;MCP (Model Context Protocol) integrations&lt;/strong&gt; - Connect AI models to external tools and services&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Custom AI providers&lt;/strong&gt; - Add support for new AI services without modifying core code&lt;/li&gt;\n&lt;/ul&gt;\n\n\n&lt;/li&gt;\n\n&lt;li&gt;\n\n&lt;strong&gt;Team features&lt;/strong&gt; - Share prompts, custom directives, and RAG projects across your organization&lt;/li&gt;\n\n&lt;li&gt;\n\n&lt;strong&gt;Mobile companion app&lt;/strong&gt; - iOS and Android apps using Kotlin Multiplatform to reuse 60-80% of desktop codebase&lt;/li&gt;\n\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;strong&gt;Want to contribute?&lt;/strong&gt; Check out our &lt;a href=\"https://github.com/haiphucnguyen/askimo/blob/main/CONTRIBUTING.md\" rel=\"noopener noreferrer\"&gt;CONTRIBUTING.md&lt;/a&gt; - we welcome PRs for new providers, features, and bug fixes!&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;Found this helpful?&lt;/strong&gt; ‚≠ê &lt;a href=\"https://github.com/haiphucnguyen/askimo\" rel=\"noopener noreferrer\"&gt;Star Askimo on GitHub&lt;/a&gt; and try it for your own AI workflows!&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;em&gt;This article showcases production patterns from &lt;a href=\"https://askimo.chat\" rel=\"noopener noreferrer\"&gt;Askimo&lt;/a&gt;, an AGPLv3-licensed desktop AI chat application built with Kotlin and Compose for Desktop. All code examples are simplified from the actual implementation available on GitHub.&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-17T00:54:28.000Z",
    "url": "https://dev.to/nguyen_phuchai_b01cae130/building-a-desktop-ai-chat-app-for-chatgpt-claude-gemini-ollama-1abh"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "Ï†ÑÏ≤¥",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Horns of the dilemma - C++ & Python binding or Julia - implementation of strategy design pattern in Julia...",
    "partialText": "&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fvwae8zlo8r98ec8mjc0s.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fvwae8zlo8r98ec8mjc0s.png\" alt=\"CPP-Python or Julia\" width=\"800\" height=\"800\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Aah‚Ä¶ I am at the crossroads - tried-and-true marriage (C++/Python) or solo act (Julia).&lt;/p&gt;\n\n&lt;p&gt;For the past few months, I delved into many tools that act as a glue between C++ and Python, like nanobind, pybind11, SWIG, Boost.Python, etc. All of these looked good. This is the industry-wise power couple for performance and ease of use.&lt;/p&gt;\n\n&lt;p&gt;Yesterday, while trying to understand why so many top-level AI scientists are leaving bigtech, I got a clue about scientific AI and Julia, the programming language especially made for this field.&lt;/p&gt;\n\n&lt;p&gt;Yes, I am not talking about LLM - because I am sure AI ‚â† the next word suggestion. There is a vast field in AI to cover vis-√†-vis Scientific AI and simulation. In fields like climate modeling, drug discovery, or fluid dynamics, we aren't just predicting tokens; we are constrained by the laws of physics.&lt;/p&gt;\n\n&lt;p&gt;This is where Julia has carved out a unique, dominant niche through a movement called SciML.&lt;/p&gt;\n\n&lt;p&gt;While Python and C++ can do this, Julia has structural advantages that make it the \"lab equipment\" of choice for this decade.&lt;/p&gt;\n\n&lt;p&gt;To train an AI, you need gradients (derivatives). In Python, you can only differentiate through code written in specific frameworks like PyTorch or JAX. In Julia, the entire language is essentially differentiable. You can take the derivative of a complex simulation, a CAD model, or a custom physics engine without rewriting it in a \"tensor\" format.&lt;/p&gt;\n\n&lt;p&gt;Remember, scientific models are often written by scientists, not software engineers.&lt;/p&gt;\n\n&lt;p&gt;The Old Way: A scientist writes a model in Python; it‚Äôs too slow for the Supercomputer, so a software engineer rewrites it in C++.&lt;/p&gt;\n\n&lt;p&gt;The Julia Way: The scientist writes high-level code that is automatically compiled to LLVM (machine code). The prototype is the production code.&lt;/p&gt;\n\n&lt;p&gt;Some important use cases for Julia‚Ä¶&lt;/p&gt;\n\n&lt;p&gt;Climate Modeling: The CliMA project (MIT/Caltech) is rebuilding global climate models in Julia to better integrate satellite data with fluid dynamics.&lt;/p&gt;\n\n&lt;p&gt;Pharmaceuticals: Pumas is a Julia-based tool used for \"quantitative pharmacology\" to predict how drugs move through the body.&lt;/p&gt;\n\n&lt;p&gt;Aerospace: Organizations like NASA use Julia for trajectory optimization because it handles the massive matrix math of orbital mechanics at C++ speeds&lt;/p&gt;\n\n&lt;p&gt;Julia isn't a \"Python killer\" for building a website or a simple chatbot. But for Scientific AI‚Äîwhere you need to solve a partial differential equation while training a transformer‚Äîit is currently the only language that doesn't make you choose between your sanity (Python) and your performance (C++).&lt;/p&gt;\n\n&lt;p&gt;So‚Ä¶ here we go‚Ä¶ my exploration of Julia has begun today. The way I learn new software languages - I am doing the same thing for Julia - using Julia to implement the Strategy Pattern.&lt;/p&gt;\n\n&lt;p&gt;Here is the source code of the Strategy Pattern developed using Julia.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;abstract type JourneyToTheAirport end\n\nstruct Bus &amp;lt;: JourneyToTheAirport end\nstruct Metro &amp;lt;: JourneyToTheAirport end\nstruct Auto &amp;lt;: JourneyToTheAirport end\n\ngotoairport(::Bus)   = println(\"üöå Journey by bus... hope there's no traffic!\")\ngotoairport(::Metro) = println(\"üöá Journey by metro... fast and efficient.\")\ngotoairport(::Auto)  = println(\"üõ∫ Journey by auto... hold on tight!\")\n\n# 1. Create a mapping of strings to Type Constructors\nchoices = Dict(\n    \"bus\"   =&amp;gt; Bus(),\n    \"metro\" =&amp;gt; Metro(),\n    \"auto\"  =&amp;gt; Auto()\n)\n\nfunction run_app()\n    println(\"How do you want to get to the airport? (bus, metro, auto):\")\n\n    # 2. Get user input and clean it up (lowercase and strip whitespace)\n    user_input = lowercase(strip(readline()))\n\n    # 3. Look up the strategy in our dictionary\n    if haskey(choices, user_input)\n        strategy = choices[user_input]\n        gotoairport(strategy)\n    else\n        println(\"‚ùå Sorry, '$user_input' is not a valid transport option.\")\n    end\nend\n\nrun_app()\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Enjoy‚Ä¶&lt;/p&gt;",
    "date": "2026-02-17T00:54:23.000Z",
    "url": "https://dev.to/sommukhopadhyay/horns-of-the-dilemma-c-python-binding-or-julia-implementation-of-strategy-design-pattern-in-3h72"
  }
]