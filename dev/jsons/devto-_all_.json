[
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "XPanel Reforged â€“ Starting Again, But Not From Scratch",
    "partialText": "&lt;blockquote&gt;\n&lt;p&gt;&lt;em&gt;Aviso: La mayorÃ­a de las actualizaciones estarÃ¡n en inglÃ©s, pero irÃ© publicando tambiÃ©n entradas resumen en espaÃ±ol cada cierto tiempo.&lt;/em&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Hey dev.to ðŸ‘‹&lt;br&gt;\nItâ€™s been a few years.&lt;/p&gt;\n\n&lt;p&gt;Iâ€™ve been around, building, experimenting, shipping thingsâ€¦ but I havenâ€™t written here in a long time. And honestly, Iâ€™ve missed it.&lt;/p&gt;\n\n&lt;p&gt;So today Iâ€™m coming back with something that feels both familiar and completely new.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  The Project That Never Fully Left\n&lt;/h3&gt;\n\n&lt;p&gt;A while ago I started building &lt;strong&gt;XPanel&lt;/strong&gt; â€” a social platform designed around a multiplayer game community. It was ambitious: organizations, progression systems, structured activities, reputation, internal coordinationâ€¦ all the things communities try to manage with spreadsheets, Discord threads and a bit of chaos.&lt;/p&gt;\n\n&lt;p&gt;The stack back then included:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Django&lt;/li&gt;\n&lt;li&gt;Django REST Framework&lt;/li&gt;\n&lt;li&gt;Docker&lt;/li&gt;\n&lt;li&gt;Angular&lt;/li&gt;\n&lt;li&gt;Redis&lt;/li&gt;\n&lt;li&gt;and a handful of other supporting services&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;At the time, I was still getting comfortable with several of those technologies. The architecture worked, but it wasnâ€™t solid. Continuing from that codebase today would mean complex migrations, structural refactors, technical debt carried forward and compromises Iâ€™d rather not accept.&lt;/p&gt;\n\n&lt;p&gt;On top of that, my understanding of player dynamics â€” solo players, small groups, large organizations â€” was still limited. I was building features based on assumptions.&lt;/p&gt;\n\n&lt;p&gt;Fast forward to today:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;I have significantly more experience with the stack.&lt;/li&gt;\n&lt;li&gt;I understand community behavior much better.&lt;/li&gt;\n&lt;li&gt;The game ecosystem itself has evolved â€” some features I once considered critical are no longer necessary, while others have become far more valuable.&lt;/li&gt;\n&lt;li&gt;My vision of &lt;em&gt;what actually needs to be built&lt;/em&gt; is much sharper.&lt;/li&gt;\n&lt;li&gt;And, of course, we now live in the era of AI-assisted development, which dramatically changes execution speed and iteration cycles.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;So instead of patching the pastâ€¦&lt;/p&gt;\n\n&lt;p&gt;Iâ€™m restarting.&lt;/p&gt;\n\n&lt;p&gt;So, welcome back. Letâ€™s build this properly. ðŸ˜Š&lt;/p&gt;",
    "date": "2026-02-25T15:51:26.000Z",
    "url": "https://dev.to/alabex_/xpanel-reforged-starting-again-but-not-from-scratch-4pgf"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "From Bronze to Silver: Staging, Intermediate, and the Art of the Trustworthy Join",
    "partialText": "&lt;p&gt;&lt;a href=\"https://dev.to/aawiegel/the-zen-of-the-bronze-layer-embracing-schema-chaos-7hn\"&gt;Part 3&lt;/a&gt; solved vendor schema chaos by treating column names as data. The bronze layer now holds one row per attribute per measurement: &lt;code&gt;lab_provided_attribute&lt;/code&gt; carries whatever the vendor typed as a column name, &lt;code&gt;lab_provided_value&lt;/code&gt; carries the cell value, and the table schema stays fixed and vendor-agnostic regardless of how creatively the vendor chose to name things. No fuzzy matching, no superset schemas, no vendor-specific parsing logic. The chaos was encoded as rows rather than fought through transformations.&lt;/p&gt;\n\n&lt;p&gt;It was the right call for ingestion. It is a genuinely terrible format for answering questions.&lt;/p&gt;\n\n&lt;p&gt;Ask \"what was the average copper measurement for samples received in October?\" against long-format EAV data and you're looking at a subquery to identify which &lt;code&gt;lab_provided_attribute&lt;/code&gt; values represent copper, a pivot to bring those values into a column, a join to find the collection date from another EAV row, and a filter on the date. Do that once, and it's manageable. Do it in every query anyone ever writes against this data, and you've simply moved the transformation burden from ingestion to analysis. The point of a multi-layer pipeline is to make that transformation happen once, correctly, in a place where it can be tested and maintained.&lt;/p&gt;\n\n&lt;p&gt;Silver is where we make it happen. This post introduces the dbt models that carry bronze data from EAV chaos into an analytical schema, walks through the architectural reasoning behind each layer, and then runs the first unit test. It does not go well.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Why dbt for Silver Transformations\n&lt;/h2&gt;\n\n&lt;p&gt;Part 3 expressed the bronze layer in Python and PySpark. We could take the same approach for silver: write Spark SQL transformations directly, materialize staging and intermediate results as Delta tables, and wire them together with a notebook or a Databricks job. The transformation logic is the same regardless of the execution environment.&lt;/p&gt;\n\n&lt;p&gt;The reason to use dbt here is not that the SQL would be different. It's that dbt enforces structural discipline that raw Spark SQL scripts require you to maintain yourself, through consistent conventions and sheer force of will. One of those scales better than the other.&lt;/p&gt;\n\n&lt;p&gt;Each dbt model lives in its own file with an explicit dependency graph. When &lt;code&gt;int_lab_samples_joined&lt;/code&gt; references &lt;code&gt;ref('stg_lab_samples_unpivoted')&lt;/code&gt;, dbt knows to run the staging model first, tracks the lineage between models, and rebuilds downstream models when upstream ones change. Schema documentation lives alongside the models in YAML files and can be generated into browsable documentation. Tests run against the models directly. Materialization strategies (view, table, incremental) are model-level configuration, not something you manage separately in SQL DDL. None of this is impossible with raw Spark SQL scripts. It just requires the kind of ironclad consistency that engineering teams reliably maintain right up until they don't. dbt builds the discipline into the workflow rather than assuming it from the humans.&lt;/p&gt;\n\n&lt;p&gt;For a transformation layer with multiple models in a dependency chain, that structure is worth the overhead of learning a new tool. The silver layer here has at least three models with an explicit sequence: staging must run before intermediate, and getting that sequence wrong produces silent incorrect results rather than an obvious error. dbt makes those dependencies explicit and enforces them automatically. And for what it's worth, dbt Core and Databricks Community Edition are both free, so the overhead is purely cognitive.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Why Silver Has Layers\n&lt;/h2&gt;\n\n&lt;p&gt;Here is something the dbt documentation will not tell you: Ralph Kimball described this architecture thirty years ago.&lt;/p&gt;\n\n&lt;p&gt;The Data Warehouse Toolkit (first published 1996, revised 2013) describes a staging area whose job is to clean and conform source data before it enters the warehouse. The staging area strips away source-system idiosyncrasies. It normalizes formats, resolves encoding variations, and creates consistent representations that downstream logic can depend on. The integration layer then applies business logic: joining conformed source data to reference tables, enriching records with canonical meaning, building the integrated representation that analysts actually query. dbt's best-practices guides on project structure [1] use exactly this division: staging models are thin, source-cleaning layers; intermediate models are where complex joins and business logic live.&lt;/p&gt;\n\n&lt;p&gt;The vocabulary has changed; the conceptual structure has not.&lt;/p&gt;\n\n&lt;p&gt;This matters because it explains WHY the layers exist, not just what they happen to contain. Conventions without reasoning are just folklore. The staging and intermediate separation encodes a functional dependency: intermediate models depend on guarantees that staging models make. Staging exists to create a contract. Intermediate relies on that contract to do its job. When those responsibilities blur, with source-system cleaning mixed into join logic and business rules embedded in normalization models, the result is transformation logic that is hard to reason about, hard to test, and hard to change safely.&lt;/p&gt;\n\n&lt;p&gt;With EAV bronze data, this layering matters more than usual. The staging layer has a specific, structural job to do before any downstream join is even possible.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Staging Model: Creating a Joinable Key\n&lt;/h2&gt;\n\n&lt;p&gt;The problem with bronze EAV data is that &lt;code&gt;lab_provided_attribute&lt;/code&gt; holds whatever the vendor typed. Vendor A sends &lt;code&gt;\"Sample Concentration\"&lt;/code&gt;. Vendor B sends &lt;code&gt;\"sample_concentration \"&lt;/code&gt; (trailing space included). A third vendor might send &lt;code&gt;\"SAMPLE CONC.\"&lt;/code&gt;. These represent the same measurement. No string comparison will match them without normalization.&lt;/p&gt;\n\n&lt;p&gt;The staging layer's job is to solve this problem once, correctly, in a place downstream models can depend on. Every join that comes after this model is only possible because this model did its job first. The model adds one column, &lt;code&gt;attribute_standardized&lt;/code&gt;, that normalizes &lt;code&gt;lab_provided_attribute&lt;/code&gt; into a consistent form:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight sql\"&gt;&lt;code&gt;&lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"n\"&gt;config&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;materialized&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"s1\"&gt;'view'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;WITH&lt;/span&gt; &lt;span class=\"n\"&gt;lab_samples_unpivoted&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt;  &lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"k\"&gt;source&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s1\"&gt;'bronze'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s1\"&gt;'lab_samples_unpivoted'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;lab_samples_unpivoted_staged&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt;\n        &lt;span class=\"o\"&gt;*&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"k\"&gt;LOWER&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n            &lt;span class=\"k\"&gt;TRIM&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n                &lt;span class=\"k\"&gt;TRANSLATE&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n                    &lt;span class=\"n\"&gt;lab_samples_unpivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;lab_provided_attribute&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n                    &lt;span class=\"s1\"&gt;'-$()#./ %@!'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n                    &lt;span class=\"s1\"&gt;'___________'&lt;/span&gt;\n                &lt;span class=\"p\"&gt;)&lt;/span&gt;\n            &lt;span class=\"p\"&gt;)&lt;/span&gt;\n        &lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"n\"&gt;attribute_standardized&lt;/span&gt;\n    &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;lab_samples_unpivoted&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;lab_samples_unpivoted_staged&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The cleaning chain does three things. &lt;code&gt;TRANSLATE&lt;/code&gt; replaces eleven special characters (&lt;code&gt;-$()#./ %@!&lt;/code&gt;) with underscores. &lt;code&gt;TRIM&lt;/code&gt; strips leading and trailing whitespace. &lt;code&gt;LOWER&lt;/code&gt; normalizes to lowercase so that capitalization differences don't produce false mismatches. With their powers combined, these three functions will help us later pivot back to wide format cleanly for specific analytical views.&lt;/p&gt;\n\n&lt;p&gt;Applied to realistic vendor data: &lt;code&gt;\"Sample Concentration\"&lt;/code&gt; becomes &lt;code&gt;sample_concentration&lt;/code&gt;. &lt;code&gt;\"-a$lot(of)weird#symbols.why/vendors%why@!\"&lt;/code&gt; becomes &lt;code&gt;a_lot_of_weird_symbols_why_vendors_why&lt;/code&gt;, which is arguably an improvement on the original in more ways than one.&lt;/p&gt;\n\n&lt;p&gt;Kimball called the underlying concept \"conforming.\" Conformed dimensions bring disparate source systems into a shared vocabulary so they can be joined and analyzed together. You build a date dimension once, in a shared format, and every fact table that references dates joins to the same table. You don't maintain separate date representations for each source system. We call what the staging model does \"attribute standardization.\" The goal is identical: create a canonical representation that downstream logic can join on without worrying about source-system variation. Same church, different pew.&lt;/p&gt;\n\n&lt;p&gt;Notice what this model does not do. It doesn't join to any reference data, doesn't classify anything, doesn't apply a single business rule. It adds one column whose entire purpose is to make the next model's join possible. That constraint is deliberate, and violating it is how staging models become the thing nobody wants to touch six months later. dbt's best practices [2] describe staging models as thin layers that do the minimum necessary to make source data useful downstream: rename columns to consistent conventions, cast types, add computed identifiers. Business logic belongs in intermediate. The moment staging models start containing complex transformations, you've lost the separation that makes both layers maintainable.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Intermediate Layer: Enrichment Through Joining\n&lt;/h2&gt;\n\n&lt;p&gt;With &lt;code&gt;attribute_standardized&lt;/code&gt; available, the first intermediate model can do what staging made possible.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;int_lab_samples_joined&lt;/code&gt; performs two joins. Neither is complicated. What matters is why they happen in this order and what the LEFT JOIN choice is actually saying about our relationship with imperfect data.&lt;/p&gt;\n\n&lt;p&gt;The first join connects staged measurements to a vendor column mapping table on &lt;code&gt;attribute_standardized&lt;/code&gt; and &lt;code&gt;vendor_id&lt;/code&gt;. The mapping table is reference data that records the connection between vendor-specific attribute names and canonical column identifiers. The second join connects the mapping result to a canonical column definitions table, which carries authoritative metadata about each canonical column: its data type, its category (measurement, identifier, date), and whether it should be treated as a metadata column or a measurement column in downstream transformations.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight sql\"&gt;&lt;code&gt;&lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"n\"&gt;config&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;materialized&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"s1\"&gt;'view'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;WITH&lt;/span&gt; &lt;span class=\"n\"&gt;stg_lab_samples&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"k\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s1\"&gt;'stg_lab_samples_unpivoted'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"k\"&gt;source&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s1\"&gt;'bronze'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s1\"&gt;'vendor_column_mapping'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;canonical_column_definitions&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"k\"&gt;source&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s1\"&gt;'silver'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"s1\"&gt;'canonical_column_definitions'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;joined&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt;\n        &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;EXCEPT&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n            &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_column_name&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;canonical_column_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n            &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;notes&lt;/span&gt;\n        &lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"n\"&gt;notes&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"n\"&gt;vendor_mapping_notes&lt;/span&gt;\n    &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;stg_lab_samples&lt;/span&gt;\n    &lt;span class=\"k\"&gt;LEFT&lt;/span&gt; &lt;span class=\"k\"&gt;JOIN&lt;/span&gt; &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;\n        &lt;span class=\"k\"&gt;ON&lt;/span&gt; &lt;span class=\"n\"&gt;stg_lab_samples&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;attribute_standardized&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_column_name&lt;/span&gt;\n        &lt;span class=\"k\"&gt;AND&lt;/span&gt; &lt;span class=\"n\"&gt;stg_lab_samples&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_id&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_id&lt;/span&gt;\n    &lt;span class=\"k\"&gt;LEFT&lt;/span&gt; &lt;span class=\"k\"&gt;JOIN&lt;/span&gt; &lt;span class=\"n\"&gt;canonical_column_definitions&lt;/span&gt;\n        &lt;span class=\"k\"&gt;ON&lt;/span&gt; &lt;span class=\"n\"&gt;vendor_column_mapping&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;canonical_column_id&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;canonical_column_definitions&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;canonical_column_id&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;joined&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The join condition includes both &lt;code&gt;attribute_standardized&lt;/code&gt; and &lt;code&gt;vendor_id&lt;/code&gt;. Two vendors might use similar standardized attribute names for genuinely different measurements, or the canonical mapping might differ by vendor for domain-specific reasons. Joining on both columns preserves that specificity.&lt;/p&gt;\n\n&lt;p&gt;The LEFT JOIN choice is a deliberate QA decision, and it reflects a specific philosophy about what bronze-to-silver transformation should do with ambiguity. Rows that don't match the mapping table don't disappear. They survive with &lt;code&gt;canonical_column_name IS NULL&lt;/code&gt;, which is not a failure state. It's a diagnostic signal. The pipeline is saying \"something arrived that I don't recognize\" rather than quietly discarding evidence that something unexpected happened.&lt;/p&gt;\n\n&lt;p&gt;Downstream QA can filter on that null to find unmapped attributes and determine whether the mapping table needs a new entry, whether the vendor introduced something unexpected, or whether an existing mapping has a standardization error. The silver layer doesn't resolve that ambiguity; it surfaces it in a way that makes it findable.&lt;/p&gt;\n\n&lt;p&gt;This is Kimball's integration layer in practice [3], thirty years later, running on Delta Lake instead of whatever disk arrays cost a fortune in 1996. A vendor-specific attribute in EAV format becomes a row that carries canonical column name, data type, category, and enrichment notes. The enrichment is what makes downstream transformations tractable. Without it, every downstream model or query would need to join to the mapping table itself, with full knowledge of vendor-specific attribute naming. That knowledge belongs here, applied once.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Intermediate Layer: Completing the Schema Transformation\n&lt;/h2&gt;\n\n&lt;p&gt;Now that we have our joined data model available in intermediate, we can make this data more usable.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;int_lab_samples_standardized&lt;/code&gt; handles this with conditional aggregation, which is the SQL equivalent of sorting your mail: same pile, separated by what actually matters.&lt;/p&gt;\n\n&lt;p&gt;The challenge is structural. Bronze EAV format is gloriously egalitarian: sample barcodes, collection dates, copper measurements, and pH readings all get the same treatment, one row each, no hierarchy, no distinction. That democratic impulse was exactly right for ingestion. For analysis it is a nightmare, because analysts don't want to write a subquery just to find out what day a sample was collected.&lt;/p&gt;\n\n&lt;p&gt;In the bronze EAV format, metadata columns (sample barcode, lab ID, collection date, analysis date) live in the same row structure as measurement columns (copper, zinc, pH). A typical row from a sample with three measurements and four metadata columns produces seven EAV rows: four metadata rows and three measurement rows, all sharing the same &lt;code&gt;row_index&lt;/code&gt;. Analysts want one record per measurement with the metadata attached as columns, not a set of EAV rows where metadata and measurements are interleaved.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight sql\"&gt;&lt;code&gt;&lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"n\"&gt;config&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;materialized&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"s1\"&gt;'view'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;WITH&lt;/span&gt; &lt;span class=\"n\"&gt;int_lab_samples_joined&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"p\"&gt;{{&lt;/span&gt; &lt;span class=\"k\"&gt;ref&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"s1\"&gt;'int_lab_samples_joined'&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;}}&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt;\n        &lt;span class=\"n\"&gt;row_index&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;vendor_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;file_name&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;ingestion_timestamp&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"k\"&gt;MAX&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;CASE&lt;/span&gt; &lt;span class=\"k\"&gt;WHEN&lt;/span&gt; &lt;span class=\"n\"&gt;canonical_column_name&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"s1\"&gt;'sample_barcode'&lt;/span&gt; &lt;span class=\"k\"&gt;THEN&lt;/span&gt; &lt;span class=\"n\"&gt;lab_provided_value&lt;/span&gt; &lt;span class=\"k\"&gt;END&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"n\"&gt;sample_barcode&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"k\"&gt;MAX&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;CASE&lt;/span&gt; &lt;span class=\"k\"&gt;WHEN&lt;/span&gt; &lt;span class=\"n\"&gt;canonical_column_name&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"s1\"&gt;'lab_id'&lt;/span&gt;         &lt;span class=\"k\"&gt;THEN&lt;/span&gt; &lt;span class=\"n\"&gt;lab_provided_value&lt;/span&gt; &lt;span class=\"k\"&gt;END&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"n\"&gt;lab_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"k\"&gt;MAX&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;CASE&lt;/span&gt; &lt;span class=\"k\"&gt;WHEN&lt;/span&gt; &lt;span class=\"n\"&gt;canonical_column_name&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"s1\"&gt;'date_received'&lt;/span&gt;  &lt;span class=\"k\"&gt;THEN&lt;/span&gt; &lt;span class=\"n\"&gt;lab_provided_value&lt;/span&gt; &lt;span class=\"k\"&gt;END&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"n\"&gt;date_received&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"k\"&gt;MAX&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"k\"&gt;CASE&lt;/span&gt; &lt;span class=\"k\"&gt;WHEN&lt;/span&gt; &lt;span class=\"n\"&gt;canonical_column_name&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"s1\"&gt;'date_analyzed'&lt;/span&gt;  &lt;span class=\"k\"&gt;THEN&lt;/span&gt; &lt;span class=\"n\"&gt;lab_provided_value&lt;/span&gt; &lt;span class=\"k\"&gt;END&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"n\"&gt;date_analyzed&lt;/span&gt;\n    &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;int_lab_samples_joined&lt;/span&gt;\n    &lt;span class=\"k\"&gt;WHERE&lt;/span&gt; &lt;span class=\"n\"&gt;is_metadata_column&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;TRUE&lt;/span&gt;\n    &lt;span class=\"k\"&gt;GROUP&lt;/span&gt; &lt;span class=\"k\"&gt;BY&lt;/span&gt; &lt;span class=\"n\"&gt;row_index&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;vendor_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;file_name&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ingestion_timestamp&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;-- All non-metadata rows, including unmapped ones (is_metadata_column IS NULL).&lt;/span&gt;\n&lt;span class=\"c1\"&gt;-- Unmapped rows are preserved for QA; filter on is_metadata_column IS NULL to find problem attributes.&lt;/span&gt;\n&lt;span class=\"n\"&gt;measurements&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;EXCEPT&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;is_metadata_column&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n    &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;int_lab_samples_joined&lt;/span&gt;\n    &lt;span class=\"k\"&gt;WHERE&lt;/span&gt; &lt;span class=\"n\"&gt;is_metadata_column&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;FALSE&lt;/span&gt; &lt;span class=\"k\"&gt;OR&lt;/span&gt; &lt;span class=\"n\"&gt;is_metadata_column&lt;/span&gt; &lt;span class=\"k\"&gt;IS&lt;/span&gt; &lt;span class=\"k\"&gt;NULL&lt;/span&gt;\n&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n&lt;span class=\"n\"&gt;standardized&lt;/span&gt; &lt;span class=\"k\"&gt;AS&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"k\"&gt;SELECT&lt;/span&gt;\n        &lt;span class=\"n\"&gt;measurements&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;EXCEPT&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;file_name&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ingestion_timestamp&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;file_name&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;ingestion_timestamp&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;sample_barcode&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;lab_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;date_received&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n        &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;date_analyzed&lt;/span&gt;\n    &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;measurements&lt;/span&gt;\n    &lt;span class=\"k\"&gt;LEFT&lt;/span&gt; &lt;span class=\"k\"&gt;JOIN&lt;/span&gt; &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;\n        &lt;span class=\"k\"&gt;ON&lt;/span&gt; &lt;span class=\"n\"&gt;measurements&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;row_index&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;row_index&lt;/span&gt;\n        &lt;span class=\"k\"&gt;AND&lt;/span&gt; &lt;span class=\"n\"&gt;measurements&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_id&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;vendor_id&lt;/span&gt;\n        &lt;span class=\"k\"&gt;AND&lt;/span&gt; &lt;span class=\"n\"&gt;measurements&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;file_name&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;metadata_pivoted&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"n\"&gt;file_name&lt;/span&gt;\n&lt;span class=\"p\"&gt;)&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;SELECT&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"k\"&gt;FROM&lt;/span&gt; &lt;span class=\"n\"&gt;standardized&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The logic splits the enriched EAV data into two paths. The &lt;code&gt;metadata_pivoted&lt;/code&gt; CTE filters for rows where &lt;code&gt;is_metadata_column = TRUE&lt;/code&gt; and collapses them into one record per &lt;code&gt;row_index&lt;/code&gt;, &lt;code&gt;vendor_id&lt;/code&gt;, and &lt;code&gt;file_name&lt;/code&gt;, using &lt;code&gt;MAX(CASE WHEN ...)&lt;/code&gt; to pull each metadata attribute into its own named column. The &lt;code&gt;measurements&lt;/code&gt; CTE takes the other path: rows where &lt;code&gt;is_metadata_column = FALSE&lt;/code&gt; (actual measurement attributes) and rows where &lt;code&gt;is_metadata_column IS NULL&lt;/code&gt; (attributes that didn't match the mapping table) both pass through. The final join recombines the two paths on all three columns.&lt;/p&gt;\n\n&lt;p&gt;The three-column join condition deserves a note, because this is exactly the kind of thing that looks fine until it catastrophically isn't. &lt;code&gt;row_index&lt;/code&gt; is the position of a row within a single CSV file; it resets to zero at the start of each file. Joining on &lt;code&gt;row_index&lt;/code&gt; and &lt;code&gt;vendor_id&lt;/code&gt; alone would incorrectly match row 5 from &lt;code&gt;file_a.csv&lt;/code&gt; with row 5 from &lt;code&gt;file_b.csv&lt;/code&gt; if both came from the same vendor. Including &lt;code&gt;file_name&lt;/code&gt; makes the join key specific to a row within a specific file from a specific vendor: the granularity we actually want.&lt;/p&gt;\n\n&lt;p&gt;Two other design decisions in this model are worth making explicit.&lt;/p&gt;\n\n&lt;p&gt;The &lt;code&gt;is_metadata_column IS NULL&lt;/code&gt; inclusion in the measurements CTE reflects the same philosophy as the LEFT JOIN in the previous model: preserve ambiguity rather than discard it. An unmapped row in silver is information. It says \"something arrived that we haven't classified yet.\" Discarding it would make the gap invisible; surfacing it makes the gap findable.&lt;/p&gt;\n\n&lt;p&gt;Date columns (&lt;code&gt;date_received&lt;/code&gt;, &lt;code&gt;date_analyzed&lt;/code&gt;) remain as raw strings through these intermediate models. This is not an oversight. Casting vendor date strings to an actual date type without knowing the vendor's format either fails loudly on unexpected input or silently coerces values into something plausible but wrong. Silent and wrong is the worst possible outcome in a data pipeline. Now that we have the data in a more usable format, we can start validating this with further intermediate models before it ends up in a gold table.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Writing the Contract Down\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhu8xjm5df0xqyn757uqc.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhu8xjm5df0xqyn757uqc.png\" alt=\"Schematic representation of pipeline\" width=\"800\" height=\"249\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The three models form a coherent chain. Staging creates a joinable key. The first intermediate model uses that key to enrich with canonical meaning. The second pivots the result into an analytical schema while preserving unmapped rows for QA. From a design standpoint, the transformation logic is complete.&lt;/p&gt;\n\n&lt;p&gt;From a validation standpoint, we've asserted that it works without demonstrating it. \"Looks correct\" is not a testing strategy. It is a feeling, and feelings have a well-documented history of being wrong about SQL.&lt;/p&gt;\n\n&lt;p&gt;This is where test-driven thinking applies. The staging model makes a specific claim: given a &lt;code&gt;lab_provided_attribute&lt;/code&gt;, &lt;code&gt;attribute_standardized&lt;/code&gt; will be trimmed, lowercased, and have special characters replaced with underscores. That claim is precise enough to verify directly.&lt;/p&gt;\n\n&lt;p&gt;dbt's unit testing feature [4], introduced in version 1.8, makes this claim machine-verifiable. You define mock input rows and expected output rows in the model's YAML configuration. dbt runs the model against your mock inputs in isolation, without touching production data, and tells you whether reality matches the specification. It is, in the most literal sense, writing the contract down and then checking whether anyone actually honored it.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight yaml\"&gt;&lt;code&gt;&lt;span class=\"na\"&gt;unit_tests&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt;\n  &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"na\"&gt;name&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s\"&gt;test_column_name_standardization&lt;/span&gt;\n    &lt;span class=\"na\"&gt;description&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s2\"&gt;\"&lt;/span&gt;&lt;span class=\"s\"&gt;Check&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;that&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;column&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;names&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;are&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;correctly&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;trimmed,&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;made&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;lower&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;case,&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;and&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;have&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;symbols&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;removed\"&lt;/span&gt;\n    &lt;span class=\"na\"&gt;model&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s\"&gt;stg_lab_samples_unpivoted&lt;/span&gt;\n    &lt;span class=\"na\"&gt;given&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt;\n      &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"na\"&gt;input&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s\"&gt;source('bronze', 'lab_samples_unpivoted')&lt;/span&gt;\n        &lt;span class=\"na\"&gt;rows&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt;\n          &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"pi\"&gt;{&lt;/span&gt;&lt;span class=\"nv\"&gt;lab_provided_attribute&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s1\"&gt;'&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;extra&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;spaces&lt;/span&gt;&lt;span class=\"nv\"&gt; &lt;/span&gt;&lt;span class=\"s\"&gt;'&lt;/span&gt;&lt;span class=\"pi\"&gt;}&lt;/span&gt;\n          &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"pi\"&gt;{&lt;/span&gt;&lt;span class=\"nv\"&gt;lab_provided_attribute&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s1\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;CAPITALS'&lt;/span&gt;&lt;span class=\"pi\"&gt;}&lt;/span&gt;\n          &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"pi\"&gt;{&lt;/span&gt;&lt;span class=\"nv\"&gt;lab_provided_attribute&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s1\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;-a$lot(of)weird#symbols.why/vendors%why@!'&lt;/span&gt;&lt;span class=\"pi\"&gt;}&lt;/span&gt;\n    &lt;span class=\"na\"&gt;expect&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt;\n      &lt;span class=\"na\"&gt;rows&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt;\n        &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"pi\"&gt;{&lt;/span&gt;&lt;span class=\"nv\"&gt;attribute_standardized&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s1\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;extra_spaces'&lt;/span&gt;&lt;span class=\"pi\"&gt;}&lt;/span&gt;\n        &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"pi\"&gt;{&lt;/span&gt;&lt;span class=\"nv\"&gt;attribute_standardized&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s1\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;capitals'&lt;/span&gt;&lt;span class=\"pi\"&gt;}&lt;/span&gt;\n        &lt;span class=\"pi\"&gt;-&lt;/span&gt; &lt;span class=\"pi\"&gt;{&lt;/span&gt;&lt;span class=\"nv\"&gt;attribute_standardized&lt;/span&gt;&lt;span class=\"pi\"&gt;:&lt;/span&gt; &lt;span class=\"s1\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;a_lot_of_weird_symbols_why_vendors_why'&lt;/span&gt;&lt;span class=\"pi\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Three test cases, three behaviors. The whitespace case verifies that leading and trailing spaces are removed. The capitalization case verifies that mixed or uppercase input produces lowercase output. The symbols case verifies that punctuation and special characters become underscores. Together, they define the contract that downstream models rely on when they join to the mapping table on &lt;code&gt;attribute_standardized&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Let's run it.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Tests Fail\n&lt;/h2&gt;\n\n&lt;p&gt;Two of the three cases fail. The test does not care about our feelings about this.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Failure in unit_test test_column_name_standardization\n\nactual differs from expected:\n\n@@ ,attribute_standardized\n+++,_a_lot_of_weird_symbols_why_vendors_why__\n+++,_extra_spaces_\n---,a_lot_of_weird_symbols_why_vendors_why\n   ,capitals\n---,extra_spaces\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Consider the whitespace case first. Input: &lt;code&gt;' extra spaces '&lt;/code&gt;. Expected: &lt;code&gt;'extra_spaces'&lt;/code&gt;. Actual: &lt;code&gt;'_extra_spaces_'&lt;/code&gt;. Something in that chain is executing in the wrong order. Let's trace it.&lt;/p&gt;\n\n&lt;p&gt;The functions nest inside each other, so they execute from the innermost outward: &lt;code&gt;TRANSLATE&lt;/code&gt; runs first, &lt;code&gt;TRIM&lt;/code&gt; runs second, &lt;code&gt;LOWER&lt;/code&gt; runs third.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;TRANSLATE&lt;/code&gt; replaces the eleven characters listed in its second argument with underscores. The character set is &lt;code&gt;'-$()#./ %@!'&lt;/code&gt;. Count carefully: there is a space between the forward slash and the percent sign. Every space in the input string becomes an underscore. &lt;code&gt;' extra spaces '&lt;/code&gt; becomes &lt;code&gt;'_extra_spaces_'&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;TRIM&lt;/code&gt; runs on the result of &lt;code&gt;TRANSLATE&lt;/code&gt;. &lt;code&gt;TRIM&lt;/code&gt; removes leading and trailing whitespace characters. There is no whitespace left; the leading and trailing spaces became underscores in the previous step. &lt;code&gt;TRIM&lt;/code&gt; finds nothing to remove. The string stays &lt;code&gt;'_extra_spaces_'&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;LOWER&lt;/code&gt; runs. No change; the string is already lowercase.&lt;/p&gt;\n\n&lt;p&gt;The bug is an ordering problem, and it is the specific kind of ordering problem that looks completely reasonable until you trace one concrete input through the full execution sequence and watch it go wrong in slow motion. &lt;code&gt;TRIM&lt;/code&gt; must run before &lt;code&gt;TRANSLATE&lt;/code&gt;. Strip the whitespace first, then translate special characters, and the leading and trailing spaces are gone before &lt;code&gt;TRANSLATE&lt;/code&gt; ever encounters them. The fix is a one-line change to the nesting order.&lt;/p&gt;\n\n&lt;p&gt;The symbols case fails for related reasons, and tracing through it is left as an exercise. The root cause is the same.&lt;/p&gt;\n\n&lt;p&gt;Incidentally, I got this wrong the first time. The test told me.&lt;/p&gt;\n\n&lt;p&gt;Here is the uncomfortable implication of that fact, and it applies regardless of how the models were written. As I was working through this post, I noticed that the join in &lt;code&gt;int_lab_samples_standardized&lt;/code&gt; was initially written on &lt;code&gt;row_index&lt;/code&gt; and &lt;code&gt;vendor_id&lt;/code&gt; alone, which would produce incorrect metadata associations whenever a vendor sends more than one file, since &lt;code&gt;row_index&lt;/code&gt; resets to zero at the start of each file. I caught it by thinking carefully about what the columns actually represent. I would not have caught it by looking at the SQL and deciding it seemed reasonable.&lt;/p&gt;\n\n&lt;p&gt;That bug would have existed in the code whether the models were written with an agent, generated from a Claude prompt and pasted in, or typed out manually by an engineer who had just had a very productive morning. The staging model's unit test demonstrates the alternative: make the claim explicit, make it machine-verifiable, and find out whether the claim is true before production data depends on it.&lt;/p&gt;\n\n&lt;p&gt;The question of how to extend that discipline to the intermediate models, and to the outputs of the entire pipeline against real data, is where Part 5 begins.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  What Silver Looks Like Now, and What Comes Next\n&lt;/h2&gt;\n\n&lt;p&gt;The architecture is sound. Three models form a coherent transformation chain, each layer making the next one possible, each design decision traceable back to a specific problem it exists to solve. Kimball would recognize it. He would just be surprised it took thirty years to get decent dependency management.&lt;/p&gt;\n\n&lt;p&gt;The first unit test does not pass. The intermediate models have no tests at all. We have built something that looks correct and demonstrated, scientifically, that looking correct is insufficient evidence.&lt;/p&gt;\n\n&lt;p&gt;How do we know that actual vendor data flowing through this pipeline maps correctly to canonical columns? How do we validate that the mapping table covers the attributes vendors actually send, rather than the attributes we assumed they would send? How do we catch a new analysis package that introduces column names we have never seen, silently producing nulls in silver while everyone downstream wonders why the copper measurements disappeared?&lt;/p&gt;\n\n&lt;p&gt;Those questions require validation against real data, at the boundaries where layers hand off to each other, against statistical expectations that reflect what vendors actually send rather than what we hope they send. Building that validation framework is the next post.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;Complete \"working\" example:&lt;/strong&gt; The dbt models described in this post are in &lt;a href=\"https://github.com/aawiegel/zen_bronze_data/tree/feature/dbt_databricks/src/crucible\" rel=\"noopener noreferrer\"&gt;GIthub&lt;/a&gt;. The staging model, both intermediate models, and the unit test definition are all in that directory.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;[1] dbt Labs. (2026). &lt;a href=\"https://docs.getdbt.com/guides/best-practices/how-we-structure/1-guide-overview\" rel=\"noopener noreferrer\"&gt;&lt;em&gt;How we structure our dbt projects&lt;/em&gt;.&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;[2] dbt Labs. (2026). &lt;a href=\"https://docs.getdbt.com/guides/best-practices/how-we-structure/2-staging\" rel=\"noopener noreferrer\"&gt;&lt;em&gt;Staging: Preparing and cleaning source data&lt;/em&gt;.&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;[3] Kimball, R., &amp;amp; Ross, M. (2013). &lt;em&gt;The Data Warehouse Toolkit: The Definitive Guide to Dimensional Modeling&lt;/em&gt; (3rd ed.). Wiley.&lt;/p&gt;\n\n&lt;p&gt;[4] dbt Labs. (2026). &lt;a href=\"https://docs.getdbt.com/docs/build/unit-tests\" rel=\"noopener noreferrer\"&gt;&lt;em&gt;Unit tests&lt;/em&gt;.&lt;/a&gt;&lt;/p&gt;",
    "date": "2026-02-25T15:50:32.000Z",
    "url": "https://dev.to/aawiegel/from-bronze-to-silver-staging-intermediate-and-the-art-of-the-trustworthy-join-3ng5"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "The Problem Nobody's Measuring",
    "partialText": "&lt;p&gt;Your company tracks API latency, uptime, error rates, and developer satisfaction scores. But nobody's tracking what it costs AI tools to read your API documentation.&lt;/p&gt;\n\n&lt;p&gt;Open your observability dashboard. You can probably see API response times broken down by endpoint. Error rates by status code. Maybe even developer satisfaction from your last survey. If you're sophisticated, you're tracking time-to-first-hello-world for new integrations.&lt;/p&gt;\n\n&lt;p&gt;Now tell me: how many tokens does it cost an AI coding tool to read your API docs?&lt;/p&gt;\n\n&lt;p&gt;You don't know. Nobody does. There's no dashboard for this. No metric.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The invisible transaction\n&lt;/h2&gt;\n\n&lt;p&gt;Every time a developer points Cursor, Copilot, or Claude at your API documentation, a transaction happens. The AI tool reads your docs, converts them into tokens, and uses those tokens to generate integration code. The format of your documentation determines how many tokens that costs.&lt;/p&gt;\n\n&lt;p&gt;This isn't theoretical. If your docs are in a verbose format, the AI tool consumes more of its context window just reading the spec. That leaves less room for reasoning, for the developer's project context, and for generating quality code. In the worst case, the documentation fills so much of the context window that the model can't produce working code at all.&lt;/p&gt;\n\n&lt;p&gt;And it compounds. Every endpoint. Every developer accessing your docs. Every day.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Why nobody's noticed\n&lt;/h2&gt;\n\n&lt;p&gt;Documentation has traditionally been measured by human metrics: readability, completeness, accuracy, time-to-find-information. Those metrics still matter. But they're designed for a world where humans are the primary (or only) consumers of your docs.&lt;/p&gt;\n\n&lt;p&gt;That world is shifting. AI coding tools are increasingly the first reader of your API documentation. The developer asks the tool to integrate with your API, and the tool goes and reads your docs before generating code. The developer may never visit your docs site at all.&lt;/p&gt;\n\n&lt;p&gt;When the primary consumer changes, the metrics need to change too. But the tech writing community hasn't caught up. We're still optimizing for human readability while AI tools are silently consuming our docs in a completely different way, and paying a cost that nobody sees.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The format question\n&lt;/h2&gt;\n\n&lt;p&gt;Here's what makes this interesting: the same API information, documented in different formats, produces different token costs. Sometimes dramatically different. Two docs describing the exact same endpoints, the exact same parameters, the exact same constraints, but one could cost significantly more tokens than the other.&lt;/p&gt;\n\n&lt;p&gt;That raises an obvious question: does the format also affect the quality of the code the AI generates? Or just the cost?&lt;/p&gt;\n\n&lt;p&gt;And a harder question: if you tried to test this with a popular API like Stripe's, how would you know whether the AI is reading your docs or just drawing on patterns it already learned from training data? Every popular API is all over GitHub, Stack Overflow, and tutorial sites. You can't isolate the variable.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  What I'm doing about it\n&lt;/h2&gt;\n\n&lt;p&gt;I've been researching this for the past year. I built two control APIs from scratch, APIs with no public footprint and no prior exposure in any training dataset. I documented each one in four different formats and ran over 21,000 integration tests across four AI models, from local models you can run on a laptop to frontier cloud APIs.&lt;/p&gt;\n\n&lt;p&gt;Clean data. No contamination question.&lt;/p&gt;\n\n&lt;p&gt;The results are coming in a book called &lt;em&gt;Tokens Not Jokin'&lt;/em&gt;, out in March. But you don't have to wait for the book to start understanding the problem.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;See what your docs cost.&lt;/strong&gt; I built a free calculator that shows the token cost of your API documentation in real time. Paste your spec, see the numbers. It runs entirely in your browser.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://doc-cost.vercel.app/\" rel=\"noopener noreferrer\"&gt;Try the Docs Cost Calculator â†’&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://leanpub.com/tokensnotjokin\" rel=\"noopener noreferrer\"&gt;Pre-order the book on Leanpub â†’&lt;/a&gt;&lt;/p&gt;",
    "date": "2026-02-25T15:48:37.000Z",
    "url": "https://dev.to/writerviber/the-problem-nobodys-measuring-22db"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "I tested whether AI can safely make irreversible financial decisions",
    "partialText": "&lt;p&gt;&lt;strong&gt;description&lt;/strong&gt;: &lt;strong&gt;A benchmark study on LLM reliability in crypto payment settlement and system design.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;LLMs look intelligent in benchmarks, but real systems donâ€™t fail on trivia questions. They fail when a single wrong decision causes permanent loss.&lt;/p&gt;\n\n&lt;p&gt;I wanted to test something different: &lt;strong&gt;Not \"can a model reason?\" but \"can a model refuse unsafe actions under uncertainty?\"&lt;/strong&gt;&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Setup\n&lt;/h2&gt;\n\n&lt;p&gt;I built a small benchmark simulating a crypto payment settlement agent. For each scenario, the model must decide:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  &lt;strong&gt;SETTLE:&lt;/strong&gt; Accept payment.&lt;/li&gt;\n&lt;li&gt;  &lt;strong&gt;REJECT:&lt;/strong&gt; Unsafe payment.&lt;/li&gt;\n&lt;li&gt;  &lt;strong&gt;PENDING:&lt;/strong&gt; Insufficient certainty.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The cases are operational failures rather than math puzzles:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;  RPC nodes disagreeing&lt;/li&gt;\n&lt;li&gt;  Delayed confirmations&lt;/li&gt;\n&lt;li&gt;  Replayed transactions&lt;/li&gt;\n&lt;li&gt;  Wrong recipient addresses&lt;/li&gt;\n&lt;li&gt;  Chain reorg risk&lt;/li&gt;\n&lt;li&gt;  Race conditions&lt;/li&gt;\n&lt;/ul&gt;\n\n\n&lt;div class=\"ltag-github-readme-tag\"&gt;\n  &lt;div class=\"readme-overview\"&gt;\n    &lt;h2&gt;\n      &lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fassets.dev.to%2Fassets%2Fgithub-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg\" alt=\"GitHub logo\"&gt;\n      &lt;a href=\"https://github.com/nagu-io\" rel=\"noopener noreferrer\"&gt;\n        nagu-io\n      &lt;/a&gt; / &lt;a href=\"https://github.com/nagu-io/agent-settlement-bench\" rel=\"noopener noreferrer\"&gt;\n        agent-settlement-bench\n      &lt;/a&gt;\n    &lt;/h2&gt;\n    &lt;h3&gt;\n      Benchmark for evaluating safety of AI agents in irreversible financial decisions (crypto payment settlement, consensus conflicts, replay attacks, finality races).\n    &lt;/h3&gt;\n  &lt;/div&gt;\n  &lt;div class=\"ltag-github-body\"&gt;\n    \n&lt;div id=\"readme\" class=\"md\"&gt;\n&lt;div class=\"markdown-heading\"&gt;\n&lt;h1 class=\"heading-element\"&gt;AgentSettlementBench&lt;/h1&gt;\n&lt;/div&gt;\n&lt;p&gt;Safety benchmark for AI agents making irreversible financial decisions.&lt;/p&gt;\n&lt;p&gt;It evaluates whether LLMs correctly refuse unsafe blockchain payments under adversarial conditions (reorgs, spoofed tokens, RPC disagreement, race conditions).&lt;/p&gt;\n&lt;p&gt;&lt;a rel=\"noopener noreferrer nofollow\" href=\"https://camo.githubusercontent.com/a4c6f7b045492279710752c1e1a6510a2fa27f8e6cc404f9ef5d242923a7a26c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f62656e63686d61726b2d6163746976652d627269676874677265656e\"&gt;&lt;img src=\"https://camo.githubusercontent.com/a4c6f7b045492279710752c1e1a6510a2fa27f8e6cc404f9ef5d242923a7a26c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f62656e63686d61726b2d6163746976652d627269676874677265656e\" alt=\"Status\"&gt;&lt;/a&gt;\n&lt;a rel=\"noopener noreferrer nofollow\" href=\"https://camo.githubusercontent.com/d6240be40ee386e5bb2652bce5aad451b6955b42f244c5400497e98749e87a3e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6d61696e2d41492532305361666574792d626c7565\"&gt;&lt;img src=\"https://camo.githubusercontent.com/d6240be40ee386e5bb2652bce5aad451b6955b42f244c5400497e98749e87a3e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f6d61696e2d41492532305361666574792d626c7565\" alt=\"Domain\"&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;div class=\"markdown-heading\"&gt;\n&lt;h2 class=\"heading-element\"&gt;Run in 60 seconds&lt;/h2&gt;\n&lt;/div&gt;\n&lt;div class=\"highlight highlight-source-powershell notranslate position-relative overflow-auto js-code-highlight\"&gt;\n&lt;pre&gt;git clone https:&lt;span class=\"pl-k\"&gt;//&lt;/span&gt;&lt;span class=\"pl-c1\"&gt;github.com&lt;/span&gt;&lt;span class=\"pl-k\"&gt;/&lt;/span&gt;nagu&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;io&lt;span class=\"pl-k\"&gt;/&lt;/span&gt;agent&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;settlement&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;bench\ncd agent&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;settlement&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;bench\nnpm install\nnpm run benchmark&lt;/pre&gt;\n\n&lt;/div&gt;\n&lt;p&gt;Optional arguments:&lt;/p&gt;\n&lt;div class=\"highlight highlight-source-powershell notranslate position-relative overflow-auto js-code-highlight\"&gt;\n&lt;pre&gt;npm run benchmark &lt;span class=\"pl-k\"&gt;--&lt;/span&gt; &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;model openai &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;key YOUR_OPENAI_KEY\nnpm run benchmark &lt;span class=\"pl-k\"&gt;--&lt;/span&gt; &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;model gemini &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;key YOUR_GEMINI_KEY\nnpm run benchmark &lt;span class=\"pl-k\"&gt;--&lt;/span&gt; &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;model local &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;api&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;model qwen2.&lt;span class=\"pl-c1\"&gt;5&lt;/span&gt;:7b &lt;span class=\"pl-k\"&gt;--&lt;/span&gt;base&lt;span class=\"pl-k\"&gt;-&lt;/span&gt;url http:&lt;span class=\"pl-k\"&gt;//&lt;/span&gt;localhost:&lt;span class=\"pl-c1\"&gt;11434&lt;/span&gt;&lt;span class=\"pl-k\"&gt;/&lt;/span&gt;v1&lt;span class=\"pl-k\"&gt;/&lt;/span&gt;chat&lt;span class=\"pl-k\"&gt;/&lt;/span&gt;completions&lt;/pre&gt;\n\n&lt;/div&gt;\n&lt;p&gt;Notes:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;code&gt;--model&lt;/code&gt; supports: &lt;code&gt;mock&lt;/code&gt;, &lt;code&gt;openai&lt;/code&gt;, &lt;code&gt;gemini&lt;/code&gt;, &lt;code&gt;local&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;code&gt;--api-model&lt;/code&gt; chooses provider model id (defaults are built in)&lt;/li&gt;\n&lt;li&gt;\n&lt;code&gt;--key&lt;/code&gt; can be omitted if &lt;code&gt;.env&lt;/code&gt; has &lt;code&gt;OPENAI_API_KEY&lt;/code&gt; or &lt;code&gt;GEMINI_API_KEY&lt;/code&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div class=\"markdown-heading\"&gt;\n&lt;h2 class=\"heading-element\"&gt;Public Leaderboard&lt;/h2&gt;\n&lt;/div&gt;\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Model&lt;/th&gt;\n&lt;th&gt;Accuracy&lt;/th&gt;\n&lt;th&gt;Critical Fail Rate&lt;/th&gt;\n&lt;th&gt;Risk-Weighted Fail&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;Codex&lt;/td&gt;\n&lt;td&gt;50.0%&lt;/td&gt;\n&lt;td&gt;30.0%&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;â€¦&lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"gh-btn-container\"&gt;&lt;a class=\"gh-btn\" href=\"https://github.com/nagu-io/agent-settlement-bench\" rel=\"noopener noreferrer\"&gt;View on GitHub&lt;/a&gt;&lt;/div&gt;\n&lt;/div&gt;\n\n\n&lt;h2&gt;\n  \n  \n  What Surprised Me\n&lt;/h2&gt;\n\n&lt;p&gt;The results showed a massive gap based on how the model was instructed.&lt;/p&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Mode&lt;/th&gt;\n&lt;th&gt;Accuracy&lt;/th&gt;\n&lt;th&gt;Critical Failures&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;Strict Policy&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;~100%&lt;/td&gt;\n&lt;td&gt;0%&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;strong&gt;Open Reasoning&lt;/strong&gt;&lt;/td&gt;\n&lt;td&gt;~55%&lt;/td&gt;\n&lt;td&gt;~28%&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n&lt;p&gt;The failures weren't scams; they clustered around &lt;strong&gt;consensus uncertainty&lt;/strong&gt;, &lt;strong&gt;timing boundaries&lt;/strong&gt;, and &lt;strong&gt;conflicting sources of truth&lt;/strong&gt;. The limitation wasn't intelligenceâ€”it was decision authority.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Important Observation\n&lt;/h2&gt;\n\n&lt;p&gt;If the model makes the final decision, it is unsafe. If the model only &lt;strong&gt;recommends&lt;/strong&gt; and a deterministic state machine decides, it is much safer.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Architecture Recommendation:&lt;/strong&gt; &lt;br&gt;\nLLM (Recommendation) â†’ State Machine (Final Decision)&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Safety improved significantly without improving the model itself. Reliability came from &lt;strong&gt;system design&lt;/strong&gt;, not \"smarter\" AI.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Why This Matters\n&lt;/h2&gt;\n\n&lt;p&gt;Most AI evaluations measure knowledge. But deployed agents operate with incomplete information and asynchronous state. These failures won't appear in traditional benchmarks.&lt;/p&gt;\n\n&lt;p&gt;I suspect small local models (Qwen, Mistral, Llama) with a strict verifier might outperform frontier models acting alone.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Run the Benchmark\n&lt;/h2&gt;\n\n&lt;p&gt;If you want to test this yourself:&lt;/p&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;\nbash\ngit clone https://github.com/nagu-io/agent-settlement-bench\ncd agent-settlement-bench\nnpm install\nnpm run benchmark\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;",
    "date": "2026-02-25T15:47:09.000Z",
    "url": "https://dev.to/nagu2103/i-tested-whether-ai-can-safely-make-irreversible-financial-decisions-1ohd"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Cosmos Cloud vs Lazydocker: Compared",
    "partialText": "&lt;h2&gt;\n  \n  \n  Quick Verdict\n&lt;/h2&gt;\n\n&lt;p&gt;These tools serve fundamentally different purposes. Cosmos Cloud is a full self-hosting platform with container management, a built-in reverse proxy, app marketplace, and security features. Lazydocker is a terminal dashboard for quick Docker monitoring and interaction. Choose Cosmos Cloud for platform management; use Lazydocker as a complementary SSH debugging tool.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Overview\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;strong&gt;Cosmos Cloud&lt;/strong&gt; is a self-hosted platform that combines Docker management with a reverse proxy, app marketplace, VPN integration (Constellation), identity provider, and security features (Smart Shield). It aims to be the single management layer for your entire self-hosted stack. Current version: v0.20.2.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Lazydocker&lt;/strong&gt; is a terminal UI (TUI) that provides a real-time dashboard of containers, images, volumes, and logs. It's a single binary with no server component â€” run it via SSH when you need to check on things. Current version: v0.24.4.&lt;/p&gt;\n\n&lt;p&gt;Cosmos Cloud is an operating system for self-hosting. Lazydocker is a diagnostic tool.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Feature Comparison\n&lt;/h2&gt;\n\n&lt;div class=\"table-wrapper-paragraph\"&gt;&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Feature&lt;/th&gt;\n&lt;th&gt;Cosmos Cloud v0.20&lt;/th&gt;\n&lt;th&gt;Lazydocker v0.24&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;Interface&lt;/td&gt;\n&lt;td&gt;Web UI&lt;/td&gt;\n&lt;td&gt;Terminal UI&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Container lifecycle&lt;/td&gt;\n&lt;td&gt;Full management&lt;/td&gt;\n&lt;td&gt;Start/stop/restart/remove&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Built-in reverse proxy&lt;/td&gt;\n&lt;td&gt;Yes (with SSL)&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;App marketplace&lt;/td&gt;\n&lt;td&gt;Yes (curated store)&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Docker Compose support&lt;/td&gt;\n&lt;td&gt;Yes&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;User management&lt;/td&gt;\n&lt;td&gt;Yes (multi-user, 2FA)&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;VPN integration&lt;/td&gt;\n&lt;td&gt;Yes (Constellation)&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;DDoS protection&lt;/td&gt;\n&lt;td&gt;Yes (Smart Shield)&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Identity provider&lt;/td&gt;\n&lt;td&gt;Built-in OpenID&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Log viewing&lt;/td&gt;\n&lt;td&gt;Yes&lt;/td&gt;\n&lt;td&gt;Yes (real-time, colored)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Resource monitoring&lt;/td&gt;\n&lt;td&gt;Yes&lt;/td&gt;\n&lt;td&gt;Yes (CPU, RAM per container)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Shell into containers&lt;/td&gt;\n&lt;td&gt;Yes&lt;/td&gt;\n&lt;td&gt;Yes (exec)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Auto-updates&lt;/td&gt;\n&lt;td&gt;Yes&lt;/td&gt;\n&lt;td&gt;No&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Always running&lt;/td&gt;\n&lt;td&gt;Yes (background)&lt;/td&gt;\n&lt;td&gt;No (on-demand)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;RAM usage&lt;/td&gt;\n&lt;td&gt;~150-200 MB&lt;/td&gt;\n&lt;td&gt;~10 MB (while active)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;&lt;/div&gt;\n\n&lt;h2&gt;\n  \n  \n  Use Cases\n&lt;/h2&gt;\n\n&lt;h3&gt;\n  \n  \n  Choose Cosmos Cloud If...\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;You want a single platform to manage containers, proxy, and security&lt;/li&gt;\n&lt;li&gt;You want an app store for one-click deployments&lt;/li&gt;\n&lt;li&gt;You need multi-user access with authentication&lt;/li&gt;\n&lt;li&gt;You want a built-in reverse proxy (replacing separate NPM/Traefik)&lt;/li&gt;\n&lt;li&gt;You want VPN connectivity between devices&lt;/li&gt;\n&lt;li&gt;You want a polished web UI accessible from any browser&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Choose Lazydocker If...\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;You want quick, zero-overhead Docker monitoring via SSH&lt;/li&gt;\n&lt;li&gt;You need to tail logs across multiple containers&lt;/li&gt;\n&lt;li&gt;You want a lightweight tool that doesn't run as a persistent service&lt;/li&gt;\n&lt;li&gt;You prefer terminal-based workflows&lt;/li&gt;\n&lt;li&gt;You already have a reverse proxy and management setup, and just need a monitoring tool&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;\n  \n  \n  Use Both If...\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;You run Cosmos Cloud as your platform but want Lazydocker for quick SSH-based troubleshooting. Lazydocker installed as a host binary works alongside any Docker management platform.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  Final Verdict\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;strong&gt;Cosmos Cloud for platform management, Lazydocker for terminal debugging.&lt;/strong&gt; If you're setting up a self-hosting environment from scratch, Cosmos Cloud gives you container management, reverse proxy, and security in one package. If you already have a setup and just need a way to quickly check on containers via SSH, Lazydocker is the right tool.&lt;/p&gt;\n\n&lt;p&gt;They're not competing â€” they're complementary. Install Cosmos Cloud (or &lt;a href=\"https://dev.to/apps/portainer/\"&gt;Portainer&lt;/a&gt;, or &lt;a href=\"https://dev.to/apps/dockge/\"&gt;Dockge&lt;/a&gt;) for management, and keep Lazydocker installed as a host binary for when you need a quick terminal-based status check.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Frequently Asked Questions\n&lt;/h2&gt;\n\n&lt;h3&gt;\n  \n  \n  Can Lazydocker manage containers deployed through Cosmos Cloud?\n&lt;/h3&gt;\n\n&lt;p&gt;Yes. Lazydocker sees all Docker containers regardless of how they were deployed. You can view, restart, and check logs of Cosmos-managed containers through Lazydocker.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Is Cosmos Cloud heavier than running Portainer + NPM separately?\n&lt;/h3&gt;\n\n&lt;p&gt;About the same. Cosmos Cloud uses ~150-200 MB combining both functions. Portainer (~100-200 MB) plus NPM (~80-120 MB) uses ~200-320 MB total. Cosmos is slightly more resource-efficient as an all-in-one solution.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Does Lazydocker work on ARM servers?\n&lt;/h3&gt;\n\n&lt;p&gt;Yes. Lazydocker provides ARM64 binaries. It works on Raspberry Pi 4/5, ARM-based VPS, and Apple Silicon (via Docker for Mac).&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Related\n&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/apps/cosmos-cloud/\"&gt;How to Self-Host Cosmos Cloud&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/apps/lazydocker/\"&gt;How to Set Up Lazydocker&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/compare/portainer-vs-cosmos/\"&gt;Portainer vs Cosmos Cloud&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/compare/lazydocker-vs-portainer/\"&gt;Lazydocker vs Portainer&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/compare/lazydocker-vs-dockge/\"&gt;Lazydocker vs Dockge&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/best/docker-management/\"&gt;Best Docker Management Tools&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"https://dev.to/foundations/docker-compose-basics/\"&gt;Docker Compose Basics&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;",
    "date": "2026-02-25T15:42:10.000Z",
    "url": "https://dev.to/selfhostingsh/cosmos-cloud-vs-lazydocker-compared-1pi2"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "The Thieves Who Caught the Thieves",
    "partialText": "&lt;h3&gt;\n  \n  \n  Anthropic just exposed Chinese labs for stealing AI capabilities. There's only one problem.\n&lt;/h3&gt;\n\n\n\n\n&lt;p&gt;In May 2025, Anthropic published a remarkable document.&lt;/p&gt;\n\n&lt;p&gt;It detailed how three Chinese AI labs â€” DeepSeek, Moonshot, and Minimax â€” had run a coordinated industrial-scale operation to steal Claude's capabilities. 16 million automated conversations. 24,000 fake accounts. Hydra networks of proxies designed to evade detection. Minimax pivoted their entire operation within 24 hours of a new Claude release to capture the latest capabilities before anyone could stop them.&lt;/p&gt;\n\n&lt;p&gt;The language Anthropic used was unambiguous. Theft. Espionage. National security threat. Foreign adversaries closing the competitive gap through extraction rather than innovation.&lt;/p&gt;\n\n&lt;p&gt;It is a compelling story. It is also, in a way that nobody in the AI industry seems willing to say plainly, deeply ironic.&lt;/p&gt;\n\n&lt;p&gt;Because Anthropic built Claude on a foundation that millions of creators argue was taken without their consent or compensation.&lt;/p&gt;\n\n&lt;p&gt;They just took it from humans.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Foundation Nobody Talks About\n&lt;/h2&gt;\n\n&lt;p&gt;To understand what's happening now, you have to understand how the frontier models were built in the first place.&lt;/p&gt;\n\n&lt;p&gt;OpenAI, Anthropic, Google â€” the companies now positioning themselves as the responsible guardians of transformative AI capabilities â€” trained their foundational models on the largest act of intellectual property appropriation in human history.&lt;/p&gt;\n\n&lt;p&gt;Books. Millions of them, ingested without permission or payment. The work of living authors scraped from Library Genesis, from Z-Library, from every dark corner of the internet where copyrighted text had accumulated.&lt;/p&gt;\n\n&lt;p&gt;News articles. Decades of journalism from outlets that are now fighting for survival, their most valuable asset â€” their archive, their voice, their institutional knowledge â€” consumed wholesale to make models smarter.&lt;/p&gt;\n\n&lt;p&gt;Code. Every public GitHub repository, billions of lines written by developers who thought they were contributing to open-source community, not training a commercial product worth hundreds of billions of dollars.&lt;/p&gt;\n\n&lt;p&gt;Creative work. Fiction, poetry, screenplays, lyrics, visual art descriptions â€” the output of human creative lives, taken without consent, without credit, without compensation.&lt;/p&gt;\n\n&lt;p&gt;The legal framing the labs hid behind was \"fair use for transformative purposes.\" Courts are still deciding whether that holds â€” and to be precise, no court has yet issued a final ruling that training on copyrighted material without a license constitutes theft in the legal sense. The outcomes of these cases will define the rules for an entire industry. But litigation is active and widespread: The New York Times is suing OpenAI. The Authors Guild filed a class action. Visual artists organized against Stability AI and Midjourney. Thousands of creators whose work formed the foundation of the AI economy never saw a dollar.&lt;/p&gt;\n\n&lt;p&gt;The labs called it training data. The creators called it theft.&lt;/p&gt;\n\n&lt;p&gt;And the labs kept going.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Pressure Gradient Runs Both Ways\n&lt;/h2&gt;\n\n&lt;p&gt;The video that Anthropic's disclosure sparked a thousand reactions to makes a compelling argument about distillation economics. When one side has capabilities worth potentially trillions of dollars and the other side can extract them for thousands, the information moves. Always. The same force that makes water flow downhill.&lt;/p&gt;\n\n&lt;p&gt;A 1,000-to-1 return on extraction. That's the math Minimax was running when they pointed 13 million conversations at Claude's agentic reasoning capabilities.&lt;/p&gt;\n\n&lt;p&gt;It's a clean argument. It's also the exact same argument that justified training on the internet.&lt;/p&gt;\n\n&lt;p&gt;The cost of generating intelligence â€” human creative work, decades of writing, coding, thinking, making â€” is astronomically higher than the cost of ingesting it. A novelist spends three years writing a book. A model ingests it in milliseconds. The economics are overwhelming. The information moves.&lt;/p&gt;\n\n&lt;p&gt;The difference Anthropic draws is legal and technical. They own the model weights. Claude's outputs are their intellectual property. Extracting those outputs to train a competitor model violates their terms of service and potentially intellectual property law.&lt;/p&gt;\n\n&lt;p&gt;But the weights themselves â€” the thing they're protecting â€” were built on a foundation that the creative class never consented to contribute.&lt;/p&gt;\n\n&lt;p&gt;The hierarchy of appropriation that nobody wants to name:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Layer 1:&lt;/strong&gt; Human creators had their life's work taken to build frontier models. The labs called this training.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Layer 2:&lt;/strong&gt; Frontier models now have their outputs taken to build distilled models. Anthropic calls this espionage.&lt;/p&gt;\n\n&lt;p&gt;The distinction is real in law. In moral logic, it is considerably harder to defend.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The National Security Frame\n&lt;/h2&gt;\n\n&lt;p&gt;Anthropic's disclosure didn't present what happened as an economic dispute or a copyright violation. It presented it as a national security threat.&lt;/p&gt;\n\n&lt;p&gt;Foreign adversaries. The Chinese Communist Party. Military and surveillance applications. Closing the competitive gap.&lt;/p&gt;\n\n&lt;p&gt;This framing was deliberate, and it serves specific interests.&lt;/p&gt;\n\n&lt;p&gt;Anthropic has consistently supported export controls on AI capabilities. They want to demonstrate that those controls are working â€” that the apparently rapid progress of Chinese labs depends on stolen American capabilities rather than independent innovation. The national security frame advances a policy agenda that benefits Anthropic directly: tighter restrictions on who can access frontier AI capabilities, and more deference to the companies who hold them.&lt;/p&gt;\n\n&lt;p&gt;There is something worth examining in the specific details of what DeepSeek targeted. Their operation focused on Claude's reasoning capability across 150,000 exchanges, generating chain-of-thought training data at scale. Their prompts asked Claude to articulate the internal reasoning behind completed responses â€” effectively manufacturing the reasoning traces needed to train a competitor model.&lt;/p&gt;\n\n&lt;p&gt;One of their most revealing techniques had nothing to do with military applications. They used Claude to generate censorship-safe alternatives to politically sensitive queries â€” training data designed to help DeepSeek's own models steer conversations away from topics the Chinese government doesn't want discussed.&lt;/p&gt;\n\n&lt;p&gt;That is troubling on its own terms. The geopolitical dynamic is real. The surveillance state applications are real.&lt;/p&gt;\n\n&lt;p&gt;But the national security frame also does something else. It constructs a narrative where American AI companies are the responsible guardians of dangerous capabilities and Chinese labs are reckless proliferators. It obscures the degree to which the underlying economic force â€” the staggering ROI of acquiring frontier capabilities through extraction rather than development â€” applies universally. To every lab that isn't a hyperscaler. To every startup that can't afford a billion-dollar training run. To academic researchers, government contractors, open-source projects.&lt;/p&gt;\n\n&lt;p&gt;To everyone.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Open Weights Question\n&lt;/h2&gt;\n\n&lt;p&gt;Anthropic's position on open-weight models has been consistent and worth examining in this light.&lt;/p&gt;\n\n&lt;p&gt;They oppose them. Not explicitly, not always in those words, but structurally and in practice. Their arguments center on safety â€” open weights mean anyone can fine-tune away safety guardrails, deploy capabilities without oversight, accelerate the timeline to dangerous AI.&lt;/p&gt;\n\n&lt;p&gt;These are real concerns. The safety arguments are not entirely without merit.&lt;/p&gt;\n\n&lt;p&gt;But open weights also mean that the capabilities built substantially on the work of millions of uncredited human creators become accessible to the humans who couldn't afford to pay for training runs. Open weights mean that the value extracted from the global creative commons gets returned to the commons in some form.&lt;/p&gt;\n\n&lt;p&gt;Anthropic's opposition to open weights, framed through safety, also happens to protect their commercial position. A world where powerful open models are freely available is a world where Anthropic's API pricing faces existential competition. A world where Anthropic controls access to frontier capabilities behind an API is a world where they can enforce terms of service, detect extraction operations, and maintain the 1,000-to-1 economic advantage on the right side of the gradient.&lt;/p&gt;\n\n&lt;p&gt;Meta, whose Llama models are the primary counterargument to closed-weight dominance, built its AI capability substantially through talent acquisition â€” recruiting researchers from Google, Anthropic, and OpenAI with nine-figure packages. When Llama 4 underperformed, Zuckerberg went shopping for people who'd already done the hard work elsewhere. Talent acquisition is not distillation, but it operates on the same principle. The knowledge walks out in someone's head instead of flowing through an API. The economic dynamic is identical.&lt;/p&gt;\n\n&lt;p&gt;Everyone is acquiring intelligence they didn't fully develop. The question is only the mechanism and the legality.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What Distillation Actually Does\n&lt;/h2&gt;\n\n&lt;p&gt;Set aside the ethics for a moment and look at the technical reality, because it matters for anyone building on these models.&lt;/p&gt;\n\n&lt;p&gt;Distillation does not produce a copy of the original model. It produces a compression. Like a lossy MP3 â€” smaller, cheaper, good enough for most use cases, but missing things you can't hear until you need them.&lt;/p&gt;\n\n&lt;p&gt;A frontier model trained from scratch occupies a high-dimensional capability space. It can reason across domains, use tools in novel combinations, maintain coherence across long autonomous workflows, recover from unexpected failures. It has what you might call a wide manifold â€” broad surface area across many kinds of tasks.&lt;/p&gt;\n\n&lt;p&gt;A distilled model is trained on a subset of the frontier model's outputs. It learns to reproduce specific behaviors â€” the ones the distiller chose to capture. It performs well on those behaviors and falls off steeply outside that distribution.&lt;/p&gt;\n\n&lt;p&gt;This is the brittleness problem, and it's critically undermeasured.&lt;/p&gt;\n\n&lt;p&gt;DeepSeek's model scores well on reasoning benchmarks because the operation targeted reasoning capabilities at scale. But the resulting model learned to produce outputs that look like Claude's outputs on reasoning tasks. It did not learn the underlying representational structure that allows generalization across task types, recovery from unexpected failures, or sustained coherence across extended autonomous workflows.&lt;/p&gt;\n\n&lt;p&gt;For a chat application or a well-defined coding task, the distilled model might be 90% as capable for 15% of the cost. A reasonable tradeoff.&lt;/p&gt;\n\n&lt;p&gt;For a week-long autonomous coding sprint across six repositories â€” the kind of agentic work where AI value is increasingly concentrated â€” the distilled model might be 40% as effective. And that failure won't show up on a benchmark. It will show up at 3am on a Thursday when the agent has been running for nine hours and encounters something outside its training distribution.&lt;/p&gt;\n\n&lt;p&gt;The provenance of a model is not just an ethical question. It is a capability question. Where the weights come from determines how the model breaks.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Circle\n&lt;/h2&gt;\n\n&lt;p&gt;Here is what the full picture looks like when you step back far enough to see it.&lt;/p&gt;\n\n&lt;p&gt;The creative class produced the training data that made frontier AI possible. They were not compensated. They were not consulted. Their work was taken because the economics were overwhelming and the legal framework hadn't caught up.&lt;/p&gt;\n\n&lt;p&gt;The frontier models, built on that foundation, became extraordinarily valuable. So valuable that every actor who couldn't afford to replicate the training run had a structural incentive to extract what they could through other means.&lt;/p&gt;\n\n&lt;p&gt;Chinese labs extracted it through API distillation. Other labs extracted it through talent acquisition. Researchers extracted it through fine-tuning on outputs. The economics were overwhelming and the legal framework hadn't fully caught up.&lt;/p&gt;\n\n&lt;p&gt;Anthropic, whose own foundation rests on the uncompensated work of millions of human creators, now frames what the Chinese labs did as theft. Espionage. A national security threat.&lt;/p&gt;\n\n&lt;p&gt;They are not wrong that what DeepSeek, Moonshot, and Minimax did was a violation. The terms were clear. The methods were deceptive. The operational sophistication â€” 24,000 fake accounts, Hydra networks, 24-hour pivots on new model releases â€” goes well beyond ambiguous gray areas.&lt;/p&gt;\n\n&lt;p&gt;But the moral authority to stand in outrage at extraction depends on clean hands. And the hands that built these models are not clean.&lt;/p&gt;\n\n&lt;p&gt;The music industry went through this. They fought Napster with everything they had, and they were right that copyright violations were happening at scale. They were also an industry that had spent decades extracting value from artists on predatory contracts, controlling distribution to capture margins that belonged to creators, and using copyright as a weapon against fans while using it as a shield against accountability.&lt;/p&gt;\n\n&lt;p&gt;They were the victim and the villain simultaneously. The framing they chose â€” piracy is theft, we are the victims â€” was technically accurate and strategically self-serving.&lt;/p&gt;\n\n&lt;p&gt;Anthropic is making the same move.&lt;/p&gt;\n\n&lt;p&gt;These people are doing exactly what was done to the humans who built their foundation.&lt;/p&gt;\n\n&lt;p&gt;Just with better lawyers, better PR, and a national security frame that makes it easier not to notice.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What To Do With This\n&lt;/h2&gt;\n\n&lt;p&gt;None of this means the distillation operations were acceptable. They weren't.&lt;/p&gt;\n\n&lt;p&gt;None of this means the capability risks from adversarial AI extraction are imaginary. They're real.&lt;/p&gt;\n\n&lt;p&gt;And none of this means Anthropic's safety work is cynical cover for commercial interests. The people building safety infrastructure at these labs are mostly doing it because they believe it matters.&lt;/p&gt;\n\n&lt;p&gt;But if you're building on these models â€” if you're making decisions about which AI capabilities to trust, which vendors to rely on, which platforms to build on â€” you need the full picture.&lt;/p&gt;\n\n&lt;p&gt;The floor is rising. Even distilled models handle routine tasks passably now, and that floor will keep rising. What matters for differentiation is the ceiling â€” the sustained agentic capability that requires genuine representational depth, not borrowed manifold.&lt;/p&gt;\n\n&lt;p&gt;That ceiling currently lives at the frontier hyperscalers. Not because their benchmarks say so, but because genuine frontier training produces the generality that agentic work demands.&lt;/p&gt;\n\n&lt;p&gt;But as you make that choice, consider who built what on whose foundation. Consider what it means that the same economic force that drove the original training data extraction is now driving API-based distillation. Consider whether the companies positioning themselves as responsible guardians of dangerous capabilities are the right people to define what responsible guardianship looks like.&lt;/p&gt;\n\n&lt;p&gt;The pressure gradient doesn't care about your sympathies. The information moves. It always moves.&lt;/p&gt;\n\n&lt;p&gt;The only question worth asking is who's on which side of it, and whether the side they're claiming to be on is the side they're actually on.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;em&gt;Jason Brashear is a senior software developer and AI systems architect with 30 years of experience. He is the creator of ArgentOS, an intent-native multi-agent operating system, and a partner at Titanium Computing. He writes about the intersection of AI architecture, organizational design, and the harder truths the industry would prefer not to discuss.&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;GitHub: webdevtodayjason&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-25T15:41:56.000Z",
    "url": "https://dev.to/webdevtodayjason/the-thieves-who-caught-the-thieves-4peo"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Understanding Variables and Data Types in JavaScript",
    "partialText": "&lt;p&gt;Welcome to the world of programming. If you are learning programming this is the essential thing you should master. Think you are shifting from current house to new one. You get many cardboard boxes and labeled them like library for books, foot-wears for shoes and slippers etc.&lt;/p&gt;\n\n&lt;p&gt;Just like it in the programming there are thing called variables just like you labels and the data types like your stuffs you putting into boxs labeled by there categories.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What variables are and why they are needed\n&lt;/h2&gt;\n\n&lt;p&gt;In the computer programming, variables are the named or symbolic container which used to store data values within computer memroy. It act as a placeholder or label for information such as user input, component states or calculation which can be used or updated during the programm execution without that storing, manipulation data whould be nearly impossible.&lt;/p&gt;\n\n&lt;p&gt;Varialbes are essential for creating efficient or flexible programms:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Flexible and Reusable:&lt;/strong&gt; instead of hard coding fixed value like &lt;code&gt;3+5&lt;/code&gt; you can use &lt;code&gt;a+b&lt;/code&gt;, allow to use same code for different data inputs.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Data Storage and Manipulation:&lt;/strong&gt; programmes need to remember data like user names, game state, raw data form files. Variables allow developers to use store this in memory so it can be reused later.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Readability and Maintainability:&lt;/strong&gt; using discriptive name make programm easy to read, understand so it can be updated in future reduce errors during debugging.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Managing Program Logic:&lt;/strong&gt; variables used to manage the program flow logic such as using boolean state to decide which part of the code block should be execute during run time.&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Always use descirptive names like use user_name or userName instead of only name, for data you can use common naming cases like camelCase, snack_case, PascelCase, and kabab-case etc.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h2&gt;\n  \n  \n  How to declare variables using var, let, and const\n&lt;/h2&gt;\n\n&lt;p&gt;Inside a JavaScript \"declare\" variables just means of creating a box and giving it a name. There are three possible way to do this:&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  The Old Way\n&lt;/h3&gt;\n\n&lt;p&gt;Using &lt;code&gt;var&lt;/code&gt; keyword was a original way to declare variables. You seeing it many times in old codebase but modern developers rarly use it because of it's quirky behaviours which some times lead bugs in code.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"nx\"&gt;userName&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  The Modern Way\n&lt;/h3&gt;\n\n&lt;p&gt;There were &lt;code&gt;let&lt;/code&gt; and &lt;code&gt;const&lt;/code&gt; keywords released in js new version to reduce this quirky behaviours.&lt;/p&gt;\n\n&lt;p&gt;Use &lt;code&gt;let&lt;/code&gt; when you know the vlaue of the variable need to be change later like playerScore in a game.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;playerScore&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Use &lt;code&gt;const&lt;/code&gt; this is short for constants. It used to declare variables with the fixed value which can not be changed in any cost within the program execution like userDOB.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;userDOB&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;1990&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;blockquote&gt;\n&lt;p&gt;Note: Always avoid of using &lt;code&gt;var&lt;/code&gt; keyword for declaring variables because that can lead potential errors in you code.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h2&gt;\n  \n  \n  Primitive data types\n&lt;/h2&gt;\n\n&lt;p&gt;Think when you bring some kitchen grocery, you never put item within wrong container like you never put oil in box or rice in bottle. You can do but naturally we did not do this. Just like it Javascript use proper data types for storing information within computer. There are some common primitive data types:&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  1. String Data Type\n&lt;/h3&gt;\n\n&lt;p&gt;it's a sequence of characters. It's used to store textual informaiton in computer. Strings are immutable meaning it can not be changed after creating, but you can assingned new string to the same variable.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;userEmail&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"s2\"&gt;something@email.com&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  2.Number Data Type\n&lt;/h3&gt;\n\n&lt;p&gt;it can be a interger or floating point numbers, JavaScript didn't differentiate between different kids of number it store all them as floating point number. It is also immutable data type. JavaScript also has a special type of numbers &lt;code&gt;infinity&lt;/code&gt; and &lt;code&gt;-inifinity&lt;/code&gt; both represent mathmetical infinities for positive side or negative side. &lt;code&gt;NaN&lt;/code&gt; is also a number type which represent values those are Not a Number.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;integer&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;floating&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mf\"&gt;10.550&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;negative&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt;&lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;infy&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;infinity&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;negInfy&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt;&lt;span class=\"nx\"&gt;infinity&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  3. Boolean Data Type\n&lt;/h3&gt;\n\n&lt;p&gt;it use to represen &lt;code&gt;true&lt;/code&gt; and &lt;code&gt;false&lt;/code&gt; values majority used to run specific block of code.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;isLogin&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;true&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;isAdmin&lt;/span&gt; &lt;span class=\"kc\"&gt;false&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  4. Null Data Type\n&lt;/h3&gt;\n\n&lt;p&gt;in JavaScript programmer explicitly use &lt;code&gt;null&lt;/code&gt; data type to intenally represent absance of any object value of empty values. It only have one possible value &lt;code&gt;null&lt;/code&gt;. The well-knowen quirky or historical bug is that using &lt;code&gt;typeof&lt;/code&gt; operator with &lt;code&gt;null&lt;/code&gt; give a string of &lt;code&gt;object&lt;/code&gt; not &lt;code&gt;null&lt;/code&gt;. This behaviour of JavaScript is maintain for backword compatibility to avoid breaking existing websites.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;\n&lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;log&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;typof&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"c1\"&gt;// \"object\"&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h3&gt;\n  \n  \n  Truthy &amp;amp; Falsy values\n&lt;/h3&gt;\n\n&lt;p&gt;Meaning of &lt;strong&gt;Truthy and Falsy&lt;/strong&gt; is if we convert these values into &lt;strong&gt;Boolean Type&lt;/strong&gt; the truthy values are converted into &lt;code&gt;true&lt;/code&gt; and falsy values are converted into &lt;code&gt;false&lt;/code&gt;. There are some values treat as falsy values those are:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Booelan value &lt;code&gt;false&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;Number zero including &lt;code&gt;0.0&lt;/code&gt; or &lt;code&gt;-0&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;The big int zero value &lt;code&gt;0n&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;Empty string &lt;code&gt;\"\"&lt;/code&gt;, &lt;code&gt;''&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;Intentinoal absance of value &lt;code&gt;null&lt;/code&gt;\n&lt;/li&gt;\n&lt;li&gt;Undefined&lt;/li&gt;\n&lt;li&gt;Not a number &lt;code&gt;NaN&lt;/code&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Excluding these, all values are treated as a truthy values.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  5. Undefined Data Type\n&lt;/h3&gt;\n\n&lt;p&gt;It also used to represent absence of a value like &lt;code&gt;null&lt;/code&gt; do. Major different is JavaScript automatically assinged &lt;code&gt;undefined&lt;/code&gt; to a varialbes has declare but not yet assinged explicitly value.&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// Syntax:&lt;/span&gt;\n&lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;score&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;log&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;score&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"c1\"&gt;// undefined&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;blockquote&gt;\n&lt;p&gt;Do It Your Self: Open browser go inside console tab in dev tools. Try to declaring some variables with differnet data types and try convert into boolean using &lt;code&gt;!&lt;/code&gt; operator. You understand the concept of truty or falsy values.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h2&gt;\n  \n  \n  What is scope\n&lt;/h2&gt;\n\n&lt;p&gt;Scope is the region where variables, function or objects are accessible and visible. It determin how the JavaScript engine looks for the identifires (names) in different part of you code. There are several types of scopes form a heirarchy known as &lt;strong&gt;Scope Chain&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fr1bc209bivhz67sgski6.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fr1bc209bivhz67sgski6.png\" alt=\"Scopes visualization with hallway analogy\" width=\"800\" height=\"494\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  1. Global Scope\n&lt;/h3&gt;\n\n&lt;p&gt;Variables declare outside of any block or function resides in global scope. These variables are accessible for every one in the program. Think it like a light bulb in hallway so every one can see or use it in house.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  2. Funciton (Local) Scope\n&lt;/h3&gt;\n\n&lt;p&gt;Every function has its own scope. Declaring variables inside function its only accessible within that function, variables not visible outside that funciton or global scope.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  3. Block Scope\n&lt;/h3&gt;\n\n&lt;p&gt;It introduce in ES6 with the &lt;code&gt;let&lt;/code&gt; and &lt;code&gt;const&lt;/code&gt; keywords. The variables declared inside the block scope (area inside the curly bracket &lt;code&gt;{}&lt;/code&gt;) are only accessible inside, not outside. It include if statement, loops and standalone blocks.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  4. Module Scope\n&lt;/h3&gt;\n\n&lt;p&gt;When using ES6 modules (via &lt;code&gt;import&lt;/code&gt; or &lt;code&gt;export&lt;/code&gt;), variables declare inside module are scoped to that specific file. They are not accessible globally or inside any other module unless explicitly exported.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  5. Lexical Scope\n&lt;/h3&gt;\n\n&lt;p&gt;It is known as &lt;strong&gt;Scope Chaining&lt;/strong&gt; or &lt;strong&gt;Static Scope&lt;/strong&gt;. It means the scope of variables determins by their physical location within sorce code at compile time, not where they are called in run time. When interpreter need to access the specific variable it following scope chain:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;It first find in current scope (innermost scope).&lt;/li&gt;\n&lt;li&gt;If not found, then it move to the its parent scope.&lt;/li&gt;\n&lt;li&gt;Continue untile it reach to the global scope.&lt;/li&gt;\n&lt;li&gt;If variable is still not found, a &lt;code&gt;ReferenceError&lt;/code&gt; is thrown.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;h2&gt;\n  \n  \n  Basic difference between &lt;code&gt;var&lt;/code&gt;, &lt;code&gt;let&lt;/code&gt;, and &lt;code&gt;const&lt;/code&gt;\n&lt;/h2&gt;\n\n&lt;p&gt;Each of these keyword has certain purpose and distinct scope. We shall examin the difference between the &lt;code&gt;var&lt;/code&gt;, &lt;code&gt;let&lt;/code&gt; and &lt;code&gt;consts&lt;/code&gt; with example:&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Var keyword\n&lt;/h3&gt;\n\n&lt;p&gt;Var-declared variables are has function scoped. Which means they are accessible any where inside the function it declared. Here's an example of using &lt;code&gt;var&lt;/code&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;verDeclaration&lt;/span&gt;&lt;span class=\"p\"&gt;(){&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kc\"&gt;true&lt;/span&gt;&lt;span class=\"p\"&gt;){&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"nx\"&gt;x&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;10&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;log&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;x&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"c1\"&gt;// 10&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;In that example x is declared inside the if statement so it can accessible inside that. But it also accessible inside the entire &lt;code&gt;verDeclaration&lt;/code&gt; function.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Let keyword\n&lt;/h3&gt;\n\n&lt;p&gt;Let-declared variables has block scope. Which means &lt;code&gt;let&lt;/code&gt; declaration limit the variable into block where they are specified. It specifically helpfull to prevent unintentional &lt;strong&gt;Hoisting&lt;/strong&gt; or lowering the scope related errors.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Note: Hoisting is behaviour of JS whre declaration of variable or functions are apeared move to the top of their scope during compilation phase.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Lets see above example with let declaration:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;letDeclaration&lt;/span&gt;&lt;span class=\"p\"&gt;(){&lt;/span&gt;\n    &lt;span class=\"k\"&gt;if&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"kc\"&gt;true&lt;/span&gt;&lt;span class=\"p\"&gt;){&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;y&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;20&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"nx\"&gt;console&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;log&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;y&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"c1\"&gt;// ReferenceError: y is not defined&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Here y is declared with let keyword means it have block scope so it only accessible within the if statement. Try to access &lt;code&gt;y&lt;/code&gt; outside of that state will throws an &lt;code&gt;ReferenceError: y is not defined&lt;/code&gt;.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Const keyword\n&lt;/h3&gt;\n\n&lt;p&gt;Declareing variable with &lt;code&gt;const&lt;/code&gt; keyword is also has block scope like &lt;code&gt;let&lt;/code&gt;. It primarly helpfull for declaring variables those will not mutate. It also throws an &lt;code&gt;ReferenceErrors&lt;/code&gt; if trying to access outside its scope.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Do It Your Self: Learn the way to execute JS code in browser (hint: use html file or console). Declare some variables like name, age, isStudnet. Print them in console use console.log() method. Try to change these values of with let and consts and observe the behaviours.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n\n\n\n&lt;p&gt;Understanding difference between &lt;code&gt;let&lt;/code&gt;, &lt;code&gt;const&lt;/code&gt;, and &lt;code&gt;var&lt;/code&gt; is the essential fundation for web development. Eash developer should know these difference for writing bug free code. For learning these concepts i read articles like &lt;a href=\"https://medium.com/@ananthvishnu/javascript-variables-60a53fda1211\" rel=\"noopener noreferrer\"&gt;varialbes in JS&lt;/a&gt;, &lt;a href=\"https://medium.com/@akashsdas_dev/scope-in-javascript-fc439e1ac4fe\" rel=\"noopener noreferrer\"&gt;scopes in JS&lt;/a&gt;, &lt;a href=\"https://medium.com/@jackpritomsoren/difference-between-var-let-and-const-in-javascript-c6236899ca4d\" rel=\"noopener noreferrer\"&gt;Difference of let, const, and var&lt;/a&gt;,&lt;/p&gt;",
    "date": "2026-02-25T15:41:51.000Z",
    "url": "https://dev.to/anoop-rajoriya/understanding-variables-and-data-types-in-javascript-33pd"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Building a Deterministic Batch Icon Pack Generator for Multi-Platform Apps",
    "partialText": "&lt;p&gt;If you ship apps across Windows, Android, or Apple platforms, youâ€™ve probably dealt with icon packaging friction.&lt;br&gt;\n&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwfewdqb5em6a20mo36oa.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwfewdqb5em6a20mo36oa.png\" alt=\" \" width=\"800\" height=\"469\"&gt;&lt;/a&gt;&lt;br&gt;\nDesigning the icon isnâ€™t the problem.&lt;/p&gt;\n\n&lt;p&gt;Packaging it correctly across platforms is.&lt;/p&gt;\n\n&lt;p&gt;Each platform expects different formats and size matrices:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Windows requires &lt;code&gt;.ico&lt;/code&gt; containers with multiple embedded sizes\n&lt;/li&gt;\n&lt;li&gt;Android uses density-based folders\n&lt;/li&gt;\n&lt;li&gt;Apple has strict size requirements\n&lt;/li&gt;\n&lt;li&gt;General exports require multiple PNG resolutions\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Even when the design is finished, you still need to:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Export multiple resolutions\n&lt;/li&gt;\n&lt;li&gt;Generate ICO files\n&lt;/li&gt;\n&lt;li&gt;Organize folder structures\n&lt;/li&gt;\n&lt;li&gt;Double-check required sizes\n&lt;/li&gt;\n&lt;li&gt;Repeat the entire process for the next project\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;For one app, itâ€™s manageable.&lt;/p&gt;\n\n&lt;p&gt;For multiple apps or client work, it becomes repetitive overhead.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;The Goal: Deterministic Output&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;I built a small Windows utility called &lt;strong&gt;Icon Pack Builder&lt;/strong&gt; to reduce that friction.&lt;/p&gt;\n\n&lt;p&gt;The goal wasnâ€™t to replace design tools.&lt;/p&gt;\n\n&lt;p&gt;It was to package existing icon assets cleanly and predictably.&lt;/p&gt;\n\n&lt;p&gt;Core principles:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Deterministic folder structure\n&lt;/li&gt;\n&lt;li&gt;Consistent naming conventions\n&lt;/li&gt;\n&lt;li&gt;Multi-platform output\n&lt;/li&gt;\n&lt;li&gt;Batch processing\n&lt;/li&gt;\n&lt;li&gt;Fully offline\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;You select one image â€” or multiple images â€” and generate complete platform-ready icon packs in a single run.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;Batch Processing Matters More Than It Sounds&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Most online generators handle one image at a time.&lt;/p&gt;\n\n&lt;p&gt;But if youâ€™re:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Updating branding across multiple apps\n&lt;/li&gt;\n&lt;li&gt;Preparing portfolio builds\n&lt;/li&gt;\n&lt;li&gt;Managing client assets\n&lt;/li&gt;\n&lt;li&gt;Shipping frequently\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;You donâ€™t want to manually repeat the same export process.&lt;/p&gt;\n\n&lt;p&gt;Batch mode lets you generate structured icon packs for multiple source images in one execution.&lt;/p&gt;\n\n&lt;p&gt;That alone significantly reduces repetitive workflow steps.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;Offline by Design&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Many icon generators are web-based.&lt;/p&gt;\n\n&lt;p&gt;That means:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Uploading assets\n&lt;/li&gt;\n&lt;li&gt;Internet dependency\n&lt;/li&gt;\n&lt;li&gt;Server-side processing\n&lt;/li&gt;\n&lt;li&gt;Potential privacy concerns\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Running locally removes those constraints.&lt;/p&gt;\n\n&lt;p&gt;Everything happens on your machine.&lt;/p&gt;\n\n&lt;p&gt;No uploads. No subscriptions. No cloud dependency.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;strong&gt;Who Itâ€™s For&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Indie developers\n&lt;/li&gt;\n&lt;li&gt;Small studios\n&lt;/li&gt;\n&lt;li&gt;Agencies shipping multiple builds\n&lt;/li&gt;\n&lt;li&gt;Developers who prefer predictable tooling\n&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Itâ€™s a focused utility solving a specific packaging problem.&lt;/p&gt;\n\n&lt;p&gt;Sometimes thatâ€™s enough.&lt;/p&gt;\n\n&lt;p&gt;If youâ€™re interested, you can check it out here:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://apps.microsoft.com/detail/9mxvt3dfq295\" rel=\"noopener noreferrer\"&gt;https://apps.microsoft.com/detail/9mxvt3dfq295&lt;/a&gt;?&lt;/p&gt;",
    "date": "2026-02-25T15:41:28.000Z",
    "url": "https://dev.to/bassthermal/building-a-deterministic-batch-icon-pack-generator-for-multi-platform-apps-4in0"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Inside Cloudflare Vinext: a from-scratch Next.js App Router rebuild",
    "partialText": "&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fjvblm8ng3mky1t20ylfr.webp\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fjvblm8ng3mky1t20ylfr.webp\" alt=\" \" width=\"800\" height=\"536\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h1&gt;\n  \n  \n  Inside Cloudflare Vinext: A Ground-Up Rebuild of the Next.js App Router\n&lt;/h1&gt;\n\n&lt;p&gt;Cloudflare has introduced &lt;strong&gt;Vinext&lt;/strong&gt;, a full reimplementation of the Next.js App Router built entirely on Vite.&lt;/p&gt;\n\n&lt;p&gt;This is not a wrapper or adapter around Next.js. Itâ€™s a clean-room rebuild of the App Router surface area â€” including file-based routing, React Server Components (RSC) streaming, and server actions â€” implemented on top of Vite instead of the original Next.js toolchain.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Reported Performance Improvements\n&lt;/h2&gt;\n\n&lt;p&gt;Cloudflare claims the following improvements:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;4.4Ã— faster production builds&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;57% smaller client-side bundles&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;94% coverage of the Next.js 16 App Router API&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The migration path is intentionally minimal. Instead of running &lt;code&gt;next&lt;/code&gt;, you run &lt;code&gt;vinext&lt;/code&gt;. Your existing project structure remains the same:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;code&gt;app/&lt;/code&gt; directory&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;next.config.js&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Existing components and routing patterns&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;No restructuring required.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Getting Started\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;npm &lt;span class=\"nb\"&gt;install &lt;/span&gt;vinext\n\nvinext dev      &lt;span class=\"c\"&gt;# Start development server with HMR&lt;/span&gt;\nvinext build    &lt;span class=\"c\"&gt;# Create production build&lt;/span&gt;\nvinext deploy   &lt;span class=\"c\"&gt;# Build and deploy to Cloudflare Workers&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;One notable detail: the project was reportedly built by a single engineer over roughly a week, coordinating more than 800 AI-assisted coding sessions, with an estimated token cost of about $1,100.&lt;/p&gt;\n\n&lt;p&gt;This article examines what Vinext really is under the hood, what the benchmarks do and donâ€™t tell us, where it falls short, and what it means for every developer currently shipping Next.js to a platform that isnâ€™t Vercel.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fk3i28ao8dsvapb3eura5.png\" class=\"article-body-image-wrapper\"&gt;&lt;img src=\"https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fk3i28ao8dsvapb3eura5.png\" alt=\" \" width=\"800\" height=\"446\"&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  The Portability Problem\n&lt;/h2&gt;\n\n&lt;p&gt;Next.js is currently the most widely used React framework. Over time, though, it has become increasingly optimized for a specific hosting environment.&lt;/p&gt;\n\n&lt;p&gt;This wasnâ€™t a single shift but a gradual tightening of coupling. Features like:&lt;/p&gt;\n\n&lt;p&gt;Incremental Static Regeneration (ISR)&lt;br&gt;\nEdge rendering&lt;br&gt;\nStreaming React Server Components&lt;br&gt;\nServer actions have increasingly relied on infrastructure assumptions tied to certain platforms.&lt;/p&gt;\n\n&lt;p&gt;Vinext represents a different approach: preserve the developer-facing API while targeting a different runtime â€” in this case, Cloudflare Workers.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  Experimental and On the Roadmap\n&lt;/h2&gt;\n\n&lt;p&gt;Vinext is explicitly labeled experimental â€” itâ€™s less than a week old and not yet battle-tested at scale.&lt;/p&gt;\n\n&lt;p&gt;Current limitations include:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;No static pre-rendering at build time. Unlike Next.jsâ€™s generateStaticParams() approach, vinext does not yet pre-generate static HTML during vinext build.&lt;/li&gt;\n&lt;li&gt;Static pre-rendering is on the roadmap, but until then purely static sites may not benefit fully.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;To address this gap, Cloudflare introduced Traffic-aware Pre-Rendering (TPR):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Instead of pre-rendering all pages, vinext can analyze actual recent traffic data at deploy time&lt;/li&gt;\n&lt;li&gt;Only pages with significant traffic are pre-rendered&lt;/li&gt;\n&lt;li&gt;All others fall back to on-demand SSR with ISR caching&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;This approach aims to reduce build time for large sites without full static pre-rendering, but it is still experimental and not yet the default behavior.&lt;/p&gt;\n\n&lt;h2&gt;\n  \n  \n  What This Means for Developers\n&lt;/h2&gt;\n\n&lt;p&gt;Vinext illustrates a few important points about modern frameworks and infrastructure:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;The Next.js App Router experience â€” meaning the APIs developers rely on â€” is no longer strictly tied to the original Next.js implementation.&lt;/li&gt;\n&lt;li&gt;A Vite-based toolkit can fulfill the same API surface with much smaller bundle sizes and significantly faster builds, at least in early tests.&lt;/li&gt;\n&lt;li&gt;Cloudflareâ€™s deployment integrations (Workers, KV, Agents, etc.) provide first-class support for platform-specific features without workarounds.&lt;/li&gt;\n&lt;li&gt;The project was built with heavy AI assistance, demonstrating how large codebases can be assembled efficiently with the right models, tests, and tooling â€” but still with human architectural oversight&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;\n  \n  \n  Final Thoughts\n&lt;/h2&gt;\n\n&lt;p&gt;Vinext is more than a performance experiment â€” itâ€™s a statement that framework APIs can be decoupled from their original runtimes. It challenges assumptions about coupling between build tools, deployment platforms, and developer experience.&lt;/p&gt;",
    "date": "2026-02-25T15:41:09.000Z",
    "url": "https://dev.to/hamza4600/inside-cloudflare-vinext-a-from-scratch-nextjs-app-router-rebuild-3e8"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "I Fixed Stale Data Across Every Screen in React Native with 3 React Query Patterns",
    "partialText": "&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Environment:&lt;/strong&gt; React Native 0.76+ Â· @tanstack/react-query v5 Â· TypeScript&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;I was building a React Native app where users could interact with the same data from multiple screens. Everything seemed fine during early testing until I noticed something deeply frustrating: &lt;strong&gt;updating data on one screen didn't reflect on another until I manually refreshed it.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Sound familiar? Here's how I diagnosed it, fixed it with 3 focused React Query patterns, and what I learned along the way.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Problem\n&lt;/h2&gt;\n\n&lt;p&gt;The app had three screens showing overlapping data:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Screen A&lt;/strong&gt; : Shows a list of items&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Screen B&lt;/strong&gt; : Shows the same items in a different view&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Screen C&lt;/strong&gt; : Shows item details with edit capability&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;When a user marked an item complete on Screen A, navigating to Screen B still showed it as incomplete. Users had to pull-to-refresh on every screen after every action. The app felt broken, because it was.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Root Cause: Isolated State\n&lt;/h2&gt;\n\n&lt;p&gt;After some digging, the culprit was clear. Each screen used its own hook with independent &lt;code&gt;useState&lt;/code&gt;:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight typescript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useState&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;react&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../lib/api&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Screen A hook&lt;/span&gt;\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;useListA&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;setItems&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useState&lt;/span&gt;&lt;span class=\"p\"&gt;([]);&lt;/span&gt;\n\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;markComplete&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;async &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;markComplete&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n    &lt;span class=\"nf\"&gt;setItems&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;prev&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;prev&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;map&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;item&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;item&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt; &lt;span class=\"o\"&gt;===&lt;/span&gt; &lt;span class=\"nx\"&gt;id&lt;/span&gt; &lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"p\"&gt;...&lt;/span&gt;&lt;span class=\"nx\"&gt;item&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"na\"&gt;completed&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kc\"&gt;true&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;item&lt;/span&gt;\n    &lt;span class=\"p\"&gt;));&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// Other screens have no idea this happened&lt;/span&gt;\n  &lt;span class=\"p\"&gt;};&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Screen B hook â€” completely separate state&lt;/span&gt;\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;useListB&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;setItems&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useState&lt;/span&gt;&lt;span class=\"p\"&gt;([]);&lt;/span&gt;\n  &lt;span class=\"c1\"&gt;// No connection to Screen A's state whatsoever&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The architecture looked like this:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Screen A          Screen B          Screen C\n   â”‚                 â”‚                 â”‚\n   â–¼                 â–¼                 â–¼\nuseState          useState          useState\n(isolated)        (isolated)        (isolated)\n   â”‚                 â”‚                 â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                     â”‚\n                     â–¼\n                 Backend API\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Each screen fetched and managed data independently. When one mutated data, the others had no idea. This isn't a bug, it's the natural consequence of uncoordinated local state managing shared server data.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Why Not Just Use Zustand?\n&lt;/h2&gt;\n\n&lt;p&gt;This question comes up a lot, and it's worth addressing directly before diving into the solution.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Zustand is a client state manager.&lt;/strong&gt; It's excellent for data that lives purely inside your app UI state, filter selections, modal toggles, user preferences. It has no built-in concept of staleness, background refetching, or cache invalidation because it doesn't need one.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;React Query is a server state manager.&lt;/strong&gt; It's designed specifically for data that originates from a backend for fetching, caching, deduplicating requests, and keeping that data fresh across your app.&lt;/p&gt;\n\n&lt;p&gt;Using Zustand to solve this problem would mean manually writing all the cache logic React Query gives you for free. In fact, the ideal architecture uses &lt;strong&gt;both&lt;/strong&gt; React Query for server data, Zustand for client-only state. That's a topic for another post. For now, our problem is server state sync, so React Query is the right tool.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The Fix: 3 React Query Patterns\n&lt;/h2&gt;\n\n&lt;p&gt;I had React Query installed but wasn't using it effectively each screen was still managing its own fetch lifecycle. The fix came down to three focused patterns.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Pattern 1: A Query Keys Factory\n&lt;/h3&gt;\n\n&lt;p&gt;A centralised key system is what makes targeted cache invalidation possible. Instead of scattering string literals across your codebase, you define them once:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight typescript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// lib/query-keys.ts&lt;/span&gt;\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"na\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"na\"&gt;all&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;items&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"na\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;userId&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;items&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;list&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"na\"&gt;detail&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;items&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;detail&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n  &lt;span class=\"p\"&gt;},&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Define what needs invalidating after each action&lt;/span&gt;\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;invalidationGroups&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"na\"&gt;itemUpdated&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;all&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt;\n  &lt;span class=\"na\"&gt;itemCreated&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;all&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt;\n  &lt;span class=\"na\"&gt;itemDeleted&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;all&lt;/span&gt;&lt;span class=\"p\"&gt;],&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;The &lt;code&gt;as const&lt;/code&gt; assertions give you full TypeScript inference downstream. Grouping by action means you invalidate precisely what's needed.&lt;/p&gt;\n\n&lt;h3&gt;\n  \n  \n  Pattern 2: Mutations with Auto-Invalidation\n&lt;/h3&gt;\n\n&lt;p&gt;This is where the real magic happens. Mutation hooks that automatically invalidate related queries after every operation:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight typescript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// hooks/useMarkComplete.ts&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useMutation&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;useQueryClient&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;@tanstack/react-query&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../lib/api&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;invalidationGroups&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../lib/query-keys&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// useSessionStore is a Zustand store holding auth state.&lt;/span&gt;\n&lt;span class=\"c1\"&gt;// Replace this with however your app stores the current user â€”&lt;/span&gt;\n&lt;span class=\"c1\"&gt;// Clerk, Firebase Auth, Supabase, or your own auth hook.&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useSessionStore&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../store/useSessionStore&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"kr\"&gt;interface&lt;/span&gt; &lt;span class=\"nx\"&gt;Item&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"nl\"&gt;completed&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;boolean&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n  &lt;span class=\"c1\"&gt;// ...other fields&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;useMarkComplete&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useQueryClient&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;userId&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useSessionStore&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;state&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;state&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nf\"&gt;useMutation&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n    &lt;span class=\"na\"&gt;mutationFn&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;markComplete&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Optimistic update â€” instant UI feedback before the API responds&lt;/span&gt;\n    &lt;span class=\"na\"&gt;onMutate&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"k\"&gt;async &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"c1\"&gt;// Cancel any in-flight queries to prevent race conditions&lt;/span&gt;\n      &lt;span class=\"k\"&gt;await&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;cancelQueries&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt; &lt;span class=\"na\"&gt;queryKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;all&lt;/span&gt; &lt;span class=\"p\"&gt;});&lt;/span&gt;\n\n      &lt;span class=\"c1\"&gt;// Snapshot current data so we can roll back if needed&lt;/span&gt;\n      &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;previous&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;getQueryData&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"p\"&gt;));&lt;/span&gt;\n\n      &lt;span class=\"c1\"&gt;// Optimistically update the cache right now&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;setQueryData&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n        &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;old&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;Item&lt;/span&gt;&lt;span class=\"p\"&gt;[]&lt;/span&gt; &lt;span class=\"o\"&gt;|&lt;/span&gt; &lt;span class=\"kc\"&gt;undefined&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt;\n          &lt;span class=\"nx\"&gt;old&lt;/span&gt;&lt;span class=\"p\"&gt;?.&lt;/span&gt;&lt;span class=\"nf\"&gt;map&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;item&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;item&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt; &lt;span class=\"o\"&gt;===&lt;/span&gt; &lt;span class=\"nx\"&gt;id&lt;/span&gt; &lt;span class=\"p\"&gt;?&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"p\"&gt;...&lt;/span&gt;&lt;span class=\"nx\"&gt;item&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"na\"&gt;completed&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kc\"&gt;true&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;item&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt;\n      &lt;span class=\"p\"&gt;);&lt;/span&gt;\n\n      &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;previous&lt;/span&gt; &lt;span class=\"p\"&gt;};&lt;/span&gt;\n    &lt;span class=\"p\"&gt;},&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Rollback on error â€” restore the snapshot&lt;/span&gt;\n    &lt;span class=\"na\"&gt;onError&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;_err&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;_id&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;context&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;context&lt;/span&gt;&lt;span class=\"p\"&gt;?.&lt;/span&gt;&lt;span class=\"nx\"&gt;previous&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;setQueryData&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"nx\"&gt;context&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;previous&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n      &lt;span class=\"p\"&gt;}&lt;/span&gt;\n      &lt;span class=\"c1\"&gt;// Surface the error to your UI here â€” toast, alert, inline message, etc.&lt;/span&gt;\n    &lt;span class=\"p\"&gt;},&lt;/span&gt;\n\n    &lt;span class=\"c1\"&gt;// Use onSettled (not onSuccess) so invalidation fires on both&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// success AND error â€” prevents stale data after a failed mutation&lt;/span&gt;\n    &lt;span class=\"na\"&gt;onSettled&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;invalidationGroups&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;itemUpdated&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;forEach&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;key&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;invalidateQueries&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt; &lt;span class=\"na\"&gt;queryKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;key&lt;/span&gt; &lt;span class=\"p\"&gt;});&lt;/span&gt;\n      &lt;span class=\"p\"&gt;});&lt;/span&gt;\n    &lt;span class=\"p\"&gt;},&lt;/span&gt;\n  &lt;span class=\"p\"&gt;});&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Why &lt;code&gt;onSettled&lt;/code&gt; instead of &lt;code&gt;onSuccess&lt;/code&gt;?&lt;/strong&gt; If we only invalidate on success, a failed mutation leaves the cache with the optimistically-updated (incorrect) data indefinitely. &lt;code&gt;onSettled&lt;/code&gt; runs regardless of outcome, so the cache always resolves to ground truth after any mutation. This is the React Query v5 recommended approach.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;A common v5 confusion:&lt;/strong&gt; React Query v5 removed &lt;code&gt;onSuccess&lt;/code&gt;, &lt;code&gt;onError&lt;/code&gt;, and &lt;code&gt;onSettled&lt;/code&gt; callbacks from &lt;code&gt;useQuery&lt;/code&gt; and &lt;code&gt;useInfiniteQuery&lt;/code&gt; but they remain &lt;strong&gt;fully supported in &lt;code&gt;useMutation&lt;/code&gt;&lt;/strong&gt;. Mutations are imperative by nature, so callbacks are still the right model there. The switch to &lt;code&gt;onSettled&lt;/code&gt; here is a best-practice recommendation, not a required v5 migration.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Why &lt;code&gt;userId!&lt;/code&gt;?&lt;/strong&gt; The non-null assertion is safe here because the query is guarded with &lt;code&gt;enabled: !!userId&lt;/code&gt; (see Pattern 3 below). The query will never fire and therefore this mutation will never be callable when &lt;code&gt;userId&lt;/code&gt; is null.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h3&gt;\n  \n  \n  Pattern 3: Connect to React Native App State\n&lt;/h3&gt;\n\n&lt;p&gt;React Query's &lt;code&gt;refetchOnWindowFocus&lt;/code&gt; works automatically in web browsers, but React Native needs an explicit bridge to the OS-level app state:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight typescript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// app/_layout.tsx&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;QueryClient&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;QueryClientProvider&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;focusManager&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;@tanstack/react-query&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;AppState&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;AppStateStatus&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;react-native&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useEffect&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;react&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Note: In React Query v5, `cacheTime` was renamed to `gcTime`.&lt;/span&gt;\n&lt;span class=\"c1\"&gt;// If you're on v4, use `cacheTime` instead of `gcTime`.&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"k\"&gt;new&lt;/span&gt; &lt;span class=\"nc\"&gt;QueryClient&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n  &lt;span class=\"na\"&gt;defaultOptions&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"na\"&gt;queries&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"na\"&gt;staleTime&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;1000&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;   &lt;span class=\"c1\"&gt;// Data is fresh for 2 minutes&lt;/span&gt;\n      &lt;span class=\"na\"&gt;gcTime&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"mi\"&gt;5&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;1000&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;      &lt;span class=\"c1\"&gt;// Cache persists for 5 minutes after unmount&lt;/span&gt;\n      &lt;span class=\"na\"&gt;refetchOnWindowFocus&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kc\"&gt;true&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;},&lt;/span&gt;\n    &lt;span class=\"na\"&gt;mutations&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"na\"&gt;retry&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"c1\"&gt;// Don't auto-retry mutations â€” let the user decide&lt;/span&gt;\n    &lt;span class=\"p\"&gt;},&lt;/span&gt;\n  &lt;span class=\"p\"&gt;},&lt;/span&gt;\n&lt;span class=\"p\"&gt;});&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Bridges React Native's AppState to React Query's focus manager.&lt;/span&gt;\n&lt;span class=\"c1\"&gt;// Without this, refetchOnWindowFocus does nothing in a native context.&lt;/span&gt;\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;AppStateHandler&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"nf\"&gt;useEffect&lt;/span&gt;&lt;span class=\"p\"&gt;(()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;subscription&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;AppState&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;addEventListener&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n      &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;change&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n      &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;status&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;AppStateStatus&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;focusManager&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;setFocused&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;status&lt;/span&gt; &lt;span class=\"o\"&gt;===&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;active&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n      &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"p\"&gt;);&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return &lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;subscription&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;remove&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n  &lt;span class=\"p\"&gt;},&lt;/span&gt; &lt;span class=\"p\"&gt;[]);&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"kc\"&gt;null&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"k\"&gt;default&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;RootLayout&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"k\"&gt;return &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;QueryClientProvider&lt;/span&gt; &lt;span class=\"nx\"&gt;client&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;AppStateHandler&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;\n      &lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"cm\"&gt;/* rest of your app */&lt;/span&gt;&lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"sr\"&gt;/QueryClientProvider&lt;/span&gt;&lt;span class=\"err\"&gt;&amp;gt;\n&lt;/span&gt;  &lt;span class=\"p\"&gt;);&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;When the user backgrounds and returns to the app, &lt;code&gt;focusManager&lt;/code&gt; triggers a refetch of any stale queries keeping data fresh across app sessions, not just screen navigations.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  The New Architecture\n&lt;/h2&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight plaintext\"&gt;&lt;code&gt;Screen A          Screen B          Screen C\n   â”‚                 â”‚                 â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                     â”‚\n                     â–¼\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚     React Query Shared Cache        â”‚\n   â”‚         ['items'] queries           â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                     â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚                         â”‚\n        â–¼                         â–¼\n   On Mutation:              All screens\n   invalidateQueries()  â†’    auto-refetch\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Now when any screen calls &lt;code&gt;markComplete()&lt;/code&gt;:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;UI updates instantly via the optimistic update&lt;/li&gt;\n&lt;li&gt;API call happens in the background&lt;/li&gt;\n&lt;li&gt;On settle (success or error), related queries are invalidated&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Every screen subscribed to those queries auto-refreshes&lt;/strong&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;No manual refresh. No stale data. No coordination code between screens.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Keeping It Backward Compatible\n&lt;/h2&gt;\n\n&lt;p&gt;One concern with refactoring is breaking existing screens. The cleanest approach is to wrap the new React Query internals behind the same hook interface your screens already use:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight typescript\"&gt;&lt;code&gt;&lt;span class=\"c1\"&gt;// hooks/useItems.ts&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useQuery&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;useQueryClient&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;@tanstack/react-query&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../lib/api&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../lib/query-keys&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useMarkComplete&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;./useMarkComplete&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useSessionStore&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../store/useSessionStore&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"k\"&gt;export&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;useItems&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useQueryClient&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;userId&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useSessionStore&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;state&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;state&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;markCompleteMutation&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useMarkComplete&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;query&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useQuery&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n    &lt;span class=\"na\"&gt;queryKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"na\"&gt;queryFn&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;getItems&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"o\"&gt;!&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// Only fetches when userId exists â€” makes the userId! assertion above safe&lt;/span&gt;\n    &lt;span class=\"na\"&gt;enabled&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"o\"&gt;!!&lt;/span&gt;&lt;span class=\"nx\"&gt;userId&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n  &lt;span class=\"p\"&gt;});&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// Same shape as before â€” existing screens need zero changes&lt;/span&gt;\n    &lt;span class=\"na\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;data&lt;/span&gt; &lt;span class=\"o\"&gt;??&lt;/span&gt; &lt;span class=\"p\"&gt;[],&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// isPending is the correct v5 flag for \"data not loaded yet\".&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// isLoading was redefined in v5 as isPending &amp;amp;&amp;amp; isFetching, which&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// returns false when enabled: false â€” causing a silent empty-state&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// bug on first render before userId is available.&lt;/span&gt;\n    &lt;span class=\"na\"&gt;loading&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;isPending&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"na\"&gt;refreshing&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;isRefetching&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"na\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;query&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;error&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// mutateAsync returns a Promise and throws on error â€” wrap in try/catch.&lt;/span&gt;\n    &lt;span class=\"c1\"&gt;// Use mutate instead if you prefer fire-and-forget without error throwing.&lt;/span&gt;\n    &lt;span class=\"na\"&gt;markComplete&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;markCompleteMutation&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;mutateAsync&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"na\"&gt;refresh&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;invalidateQueries&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n      &lt;span class=\"na\"&gt;queryKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;queryKeys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;all&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}),&lt;/span&gt;\n  &lt;span class=\"p\"&gt;};&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;p&gt;Your screens call &lt;code&gt;useItems()&lt;/code&gt; exactly as they did before. The sync behaviour is just... there now.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Quick Start Template\n&lt;/h2&gt;\n\n&lt;p&gt;If you're starting fresh:&lt;br&gt;\n&lt;/p&gt;\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight shell\"&gt;&lt;code&gt;npm &lt;span class=\"nb\"&gt;install&lt;/span&gt; @tanstack/react-query\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight typescript\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;useQuery&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;useMutation&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;useQueryClient&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;@tanstack/react-query&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"k\"&gt;import&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"k\"&gt;from&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;../lib/api&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// 1. Query keys&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;keys&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"na\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"na\"&gt;all&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;items&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n    &lt;span class=\"na\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;items&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"s1\"&gt;list&lt;/span&gt;&lt;span class=\"dl\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;]&lt;/span&gt; &lt;span class=\"k\"&gt;as&lt;/span&gt; &lt;span class=\"kd\"&gt;const&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n  &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// 2. Query hook&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;useItems&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nf\"&gt;useQuery&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n  &lt;span class=\"na\"&gt;queryKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;keys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;(),&lt;/span&gt;\n  &lt;span class=\"na\"&gt;queryFn&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;getItems&lt;/span&gt;&lt;span class=\"p\"&gt;(),&lt;/span&gt;\n  &lt;span class=\"na\"&gt;staleTime&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"mi\"&gt;2&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;60&lt;/span&gt; &lt;span class=\"o\"&gt;*&lt;/span&gt; &lt;span class=\"mi\"&gt;1000&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt;\n&lt;span class=\"p\"&gt;});&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// 3. Mutation with invalidation on settle&lt;/span&gt;\n&lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;useUpdateItem&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useQueryClient&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nf\"&gt;useMutation&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt;\n    &lt;span class=\"na\"&gt;mutationFn&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"na\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"kr\"&gt;string&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nx\"&gt;api&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;updateItem&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt;\n    &lt;span class=\"na\"&gt;onSettled&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n      &lt;span class=\"nx\"&gt;queryClient&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;invalidateQueries&lt;/span&gt;&lt;span class=\"p\"&gt;({&lt;/span&gt; &lt;span class=\"na\"&gt;queryKey&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;keys&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;items&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nx\"&gt;all&lt;/span&gt; &lt;span class=\"p\"&gt;});&lt;/span&gt;\n    &lt;span class=\"p\"&gt;},&lt;/span&gt;\n  &lt;span class=\"p\"&gt;});&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// 4. Use in any screen â€” they'll all stay in sync&lt;/span&gt;\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;AnyScreen&lt;/span&gt;&lt;span class=\"p\"&gt;()&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useItems&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt; &lt;span class=\"na\"&gt;mutate&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nx\"&gt;update&lt;/span&gt; &lt;span class=\"p\"&gt;}&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;useUpdateItem&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n\n  &lt;span class=\"c1\"&gt;// Replace data[0]?.id with however you get the target item's id&lt;/span&gt;\n  &lt;span class=\"c1\"&gt;// e.g. from route params, a selected state, a FlatList renderItem, etc.&lt;/span&gt;\n  &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;itemId&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nx\"&gt;data&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;]?.&lt;/span&gt;&lt;span class=\"nx\"&gt;id&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n\n  &lt;span class=\"k\"&gt;return &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;\n    &lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"nx\"&gt;Button&lt;/span&gt; &lt;span class=\"nx\"&gt;onPress&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"p\"&gt;{()&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"nf\"&gt;update&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;itemId&lt;/span&gt;&lt;span class=\"p\"&gt;)}&lt;/span&gt; &lt;span class=\"nx\"&gt;title&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt;&lt;span class=\"s2\"&gt;Mark Complete&lt;/span&gt;&lt;span class=\"dl\"&gt;\"&lt;/span&gt; &lt;span class=\"o\"&gt;/&amp;gt;&lt;/span&gt;\n  &lt;span class=\"p\"&gt;);&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h2&gt;\n  \n  \n  Key Takeaways\n&lt;/h2&gt;\n\n&lt;p&gt;&lt;strong&gt;Multiple &lt;code&gt;useState&lt;/code&gt; hooks for the same server data will always drift.&lt;/strong&gt; It's not a discipline problem, it's an architectural one. Centralise with React Query.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Design your query keys for invalidation from the start.&lt;/strong&gt; Flat string keys are fine for small apps, but a factory pattern scales cleanly and eliminates typo bugs.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Use &lt;code&gt;onSettled&lt;/code&gt;, not &lt;code&gt;onSuccess&lt;/code&gt;, for cache invalidation.&lt;/strong&gt; It guarantees the cache resolves to ground truth after every mutation, regardless of outcome.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Always guard queries with &lt;code&gt;enabled: !!userId&lt;/code&gt;.&lt;/strong&gt; In React Native, auth state often isn't available on the first render. Without this guard, your query fires with a null user ID and fails silently.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Optimistic updates are table stakes in 2026.&lt;/strong&gt; Users expect instant feedback. The rollback pattern handles failures gracefully without complex error state.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Backward-compatible migrations are always possible.&lt;/strong&gt; Wrap new internals behind existing interfaces and refactor incrementally without coordinating a team-wide rewrite.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;React Native needs explicit AppState integration.&lt;/strong&gt; Don't skip the &lt;code&gt;focusManager&lt;/code&gt; setup without it, &lt;code&gt;refetchOnWindowFocus&lt;/code&gt; is a silent no-op in a native context.&lt;/p&gt;\n\n\n\n\n&lt;h2&gt;\n  \n  \n  What's Next\n&lt;/h2&gt;\n\n&lt;p&gt;This solves server state sync cleanly. But what about client-only state â€” filters, selections, UI flags â€” that also needs to be shared across screens?&lt;/p&gt;\n\n&lt;p&gt;That's where Zustand comes in, and it pairs beautifully with React Query. Upcoming Post covers how to combine both tools into a complete React Native state architecture, with clear boundaries on what belongs where.&lt;/p&gt;\n\n\n\n\n&lt;p&gt;&lt;em&gt;Have you been managing cross-screen state with manual refreshes? Or already using React Query, what patterns have worked for you? Drop a comment below.&lt;/em&gt;&lt;/p&gt;",
    "date": "2026-02-25T15:40:26.000Z",
    "url": "https://dev.to/likhit/i-fixed-stale-data-across-every-screen-in-react-native-with-3-react-query-patterns-5fd5"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "Architecting a Multi-Model AI Creative Pipeline Without Model Lock-In",
    "partialText": "&lt;p&gt;Most AI workflow discussions focus on prompting.&lt;/p&gt;\n\n&lt;p&gt;That is the wrong abstraction layer.&lt;/p&gt;\n\n&lt;p&gt;In production environments, the failure surface is architectural:&lt;/p&gt;\n\n&lt;p&gt;regeneration volatility&lt;/p&gt;\n\n&lt;p&gt;cost unpredictability&lt;/p&gt;\n\n&lt;p&gt;category mismatch&lt;/p&gt;\n\n&lt;p&gt;pricing exposure&lt;/p&gt;\n\n&lt;p&gt;visual drift across campaigns&lt;/p&gt;\n\n&lt;p&gt;The problem is not output quality.&lt;br&gt;\nIt is system stability.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;The Single-Model Failure Pattern&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Single-model dependency fails in three predictable ways.&lt;/p&gt;\n\n&lt;p&gt;Capability Ceiling&lt;/p&gt;\n\n&lt;p&gt;Every model specializes.&lt;/p&gt;\n\n&lt;p&gt;Cinematic-tier generators such as those compared in this long-form Kling vs Sora breakdown demonstrate strong temporal coherence, but that same tier may not optimize for rapid iteration economics.&lt;/p&gt;\n\n&lt;p&gt;Speed-optimized models win throughput benchmarks, but break down in multi-character motion sequences.&lt;/p&gt;\n\n&lt;p&gt;Without routing across categories, teams compensate with regeneration brute force.&lt;/p&gt;\n\n&lt;p&gt;Which increases multiplier cost.&lt;/p&gt;\n\n&lt;p&gt;This architectural mismatch is visible when you look at multi-category model ecosystems instead of isolated tools. A consolidated reference of 47+ AI generation models makes these functional distinctions obvious in practice.&lt;/p&gt;\n\n&lt;p&gt;Pricing Volatility&lt;/p&gt;\n\n&lt;p&gt;Platform pricing evolves.&lt;/p&gt;\n\n&lt;p&gt;Credit structures shift.&lt;/p&gt;\n\n&lt;p&gt;Consumption tiers change.&lt;/p&gt;\n\n&lt;p&gt;If your content pipeline relies on a single pricing structure, your margin inherits that volatility.&lt;/p&gt;\n\n&lt;p&gt;Multi-model routing reduces exposure to any one pricing node.&lt;/p&gt;\n\n&lt;p&gt;Innovation Lock-In&lt;/p&gt;\n\n&lt;p&gt;Model quality improvement cycles are compressing.&lt;/p&gt;\n\n&lt;p&gt;If your workflow and visual identity are structurally dependent on one model signature, migration later becomes expensive.&lt;/p&gt;\n\n&lt;p&gt;Comparative analysis of single-tool ecosystems versus multi-model infrastructure highlights how routing flexibility reduces that innovation friction.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;The Three-Layer Stack&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;A stable AI creative pipeline consists of:&lt;/p&gt;\n\n&lt;p&gt;Generation&lt;br&gt;\nâ†“&lt;br&gt;\nControl&lt;br&gt;\nâ†“&lt;br&gt;\nRefinement&lt;/p&gt;\n\n&lt;p&gt;Layer 1 - Generation&lt;/p&gt;\n\n&lt;p&gt;Raw content output.&lt;/p&gt;\n\n&lt;p&gt;Video or image.&lt;/p&gt;\n\n&lt;p&gt;Model selection here must be category-based, not brand-based.&lt;/p&gt;\n\n&lt;p&gt;Layer 2 - Control&lt;/p&gt;\n\n&lt;p&gt;This is where most creators fail.&lt;/p&gt;\n\n&lt;p&gt;Control parameters define reproducibility:&lt;/p&gt;\n\n&lt;p&gt;seed locking and deterministic behavior&lt;/p&gt;\n\n&lt;p&gt;aspect ratio templates for multi-platform deployment&lt;/p&gt;\n\n&lt;p&gt;motion control strategies for AI video&lt;/p&gt;\n\n&lt;p&gt;CFG scale calibration for stylistic constraints&lt;/p&gt;\n\n&lt;p&gt;image reference anchoring&lt;/p&gt;\n\n&lt;p&gt;Seed discipline alone can transform random experimentation into systematic campaign output. A structured seed reproducibility framework significantly reduces regeneration variance.&lt;/p&gt;\n\n&lt;p&gt;Layer 3 - Refinement&lt;/p&gt;\n\n&lt;p&gt;Refinement is not repair.&lt;/p&gt;\n\n&lt;p&gt;It is a defined pipeline step.&lt;/p&gt;\n\n&lt;p&gt;Upscaling and polishing workflows, especially when resolution scaling is planned upstream, materially change final asset quality and cost efficiency.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Model Category Routing Framework&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Stop ranking models.&lt;/p&gt;\n\n&lt;p&gt;Start routing tasks.&lt;/p&gt;\n\n&lt;p&gt;Cinematic Tier&lt;/p&gt;\n\n&lt;p&gt;Use for:&lt;/p&gt;\n\n&lt;p&gt;long narrative sequences&lt;/p&gt;\n\n&lt;p&gt;brand hero assets&lt;/p&gt;\n\n&lt;p&gt;complex motion&lt;/p&gt;\n\n&lt;p&gt;Temporal coherence prioritized over speed.&lt;/p&gt;\n\n&lt;p&gt;Speed Tier&lt;/p&gt;\n\n&lt;p&gt;Use for:&lt;/p&gt;\n\n&lt;p&gt;short-form content&lt;/p&gt;\n\n&lt;p&gt;high-volume social&lt;/p&gt;\n\n&lt;p&gt;rapid iteration cycles&lt;/p&gt;\n\n&lt;p&gt;Generation latency prioritized.&lt;/p&gt;\n\n&lt;p&gt;Speed-to-quality tradeoffs are measurable, particularly when comparing fast versus quality video modes under production constraints.&lt;/p&gt;\n\n&lt;p&gt;Budget Tier&lt;/p&gt;\n\n&lt;p&gt;Use for:&lt;/p&gt;\n\n&lt;p&gt;concept sketching&lt;/p&gt;\n\n&lt;p&gt;variant testing&lt;/p&gt;\n\n&lt;p&gt;early-stage drafts&lt;/p&gt;\n\n&lt;p&gt;Iteration cost optimized.&lt;/p&gt;\n\n&lt;p&gt;Character Stability Tier&lt;/p&gt;\n\n&lt;p&gt;Use for:&lt;/p&gt;\n\n&lt;p&gt;multi-scene character consistency&lt;/p&gt;\n\n&lt;p&gt;brand identity persistence&lt;/p&gt;\n\n&lt;p&gt;Category routing reduces regeneration multiplier more effectively than incremental prompt tuning.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Cost Per Acceptable Deliverable&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Per-generation cost alone is misleading.&lt;/p&gt;\n\n&lt;p&gt;True Cost =&lt;br&gt;\n(per-generation cost Ã— regeneration rate)&lt;/p&gt;\n\n&lt;p&gt;refinement cost&lt;/p&gt;\n\n&lt;p&gt;time opportunity cost&lt;/p&gt;\n\n&lt;p&gt;Below is a structural view.&lt;/p&gt;\n\n&lt;p&gt;Component   Tracked Dominant Factor&lt;br&gt;\nBase generation price   Yes Moderate&lt;br&gt;\nRegeneration multiplier Rarely  High&lt;br&gt;\nRefinement stage cost   Partial Moderate&lt;br&gt;\nTime-based opportunity cost No  High&lt;/p&gt;\n\n&lt;p&gt;Credit-based platforms that allow switching between premium and budget tiers inside a single workflow materially alter total cost structure. Credit-based model comparisons between premium and budget tiers illustrate how regeneration rate changes economics more than nominal pricing.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Image-to-Video Chaining Logic&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Text-to-video resolves composition and motion simultaneously.&lt;/p&gt;\n\n&lt;p&gt;Image-to-video separates responsibilities:&lt;/p&gt;\n\n&lt;p&gt;Upstream:&lt;/p&gt;\n\n&lt;p&gt;composition&lt;/p&gt;\n\n&lt;p&gt;lighting&lt;/p&gt;\n\n&lt;p&gt;aesthetic baseline&lt;/p&gt;\n\n&lt;p&gt;Downstream:&lt;/p&gt;\n\n&lt;p&gt;motion&lt;/p&gt;\n\n&lt;p&gt;temporal continuity&lt;/p&gt;\n\n&lt;p&gt;Reference quality upstream directly influences coherence downstream. A documented image-to-video workflow architecture shows how controlling the upstream visual state reduces motion artifacts and drift.&lt;/p&gt;\n\n&lt;p&gt;When chaining is systematic, regeneration decreases.&lt;/p&gt;\n\n&lt;p&gt;Lower regeneration equals lower cost variability.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Infrastructure Discipline&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Prompt optimization improves output inside an envelope.&lt;/p&gt;\n\n&lt;p&gt;System optimization expands the envelope.&lt;/p&gt;\n\n&lt;p&gt;Infrastructure components include:&lt;/p&gt;\n\n&lt;p&gt;template-based prompt architecture&lt;/p&gt;\n\n&lt;p&gt;pre-defined model routing tables&lt;/p&gt;\n\n&lt;p&gt;regeneration threshold limits&lt;/p&gt;\n\n&lt;p&gt;batch generation frameworks&lt;/p&gt;\n\n&lt;p&gt;documented switching criteria across model tiers&lt;/p&gt;\n\n&lt;p&gt;Shifting from prompt experimentation to structured system logic has measurable effects on throughput and economic predictability.&lt;/p&gt;\n\n&lt;p&gt;A structured multi-model strategy for switching between AI generators captures this discipline better than any isolated prompt framework.&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Practical Implementation Checklist&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Map deliverable categories before selecting models.&lt;/p&gt;\n\n&lt;p&gt;Assign each category to a model tier.&lt;/p&gt;\n\n&lt;p&gt;Track regeneration explicitly.&lt;/p&gt;\n\n&lt;p&gt;Separate draft-tier from delivery-tier usage.&lt;/p&gt;\n\n&lt;p&gt;Lock seeds for campaign output.&lt;/p&gt;\n\n&lt;p&gt;Define refinement steps as mandatory.&lt;/p&gt;\n\n&lt;p&gt;Cap regeneration attempts per deliverable.&lt;/p&gt;\n\n&lt;p&gt;Audit cost per acceptable output monthly.&lt;/p&gt;\n\n&lt;p&gt;Review model updates quarterly.&lt;/p&gt;\n\n&lt;p&gt;Maintain fallback routing for known failure modes.&lt;/p&gt;\n\n&lt;p&gt;Avoid homepage-only tool dependency.&lt;/p&gt;\n\n&lt;p&gt;Keep routing documentation versioned.&lt;/p&gt;\n\n&lt;p&gt;Conclusion&lt;/p&gt;\n\n&lt;p&gt;AI content scaling is not solved at the prompt level.&lt;/p&gt;\n\n&lt;p&gt;It is solved at the infrastructure level.&lt;/p&gt;\n\n&lt;p&gt;Model competition will continue.&lt;/p&gt;\n\n&lt;p&gt;Pricing structures will evolve.&lt;/p&gt;\n\n&lt;p&gt;Quality gaps between tiers will compress.&lt;/p&gt;\n\n&lt;p&gt;The durable edge will belong to teams that can switch models without switching systems.&lt;/p&gt;\n\n&lt;p&gt;Extended long-form benchmark analysis exists elsewhere.&lt;/p&gt;\n\n&lt;p&gt;But the core shift is already clear:&lt;/p&gt;\n\n&lt;p&gt;Architect the pipeline.&lt;/p&gt;\n\n&lt;p&gt;Do not optimize in isolation.&lt;/p&gt;",
    "date": "2026-02-25T15:38:19.000Z",
    "url": "https://dev.to/cliprise/architecting-a-multi-model-ai-creative-pipeline-without-model-lock-in-2oc8"
  },
  {
    "publisherId": "devto",
    "publisherName": "Dev.to",
    "specTitle": "ì „ì²´",
    "categories": [
      "_all_"
    ],
    "specUrl": "https://dev.to/feed",
    "title": "ðŸ Beginner-Friendly Guide 'Sort Integers by The Number of 1 Bits' - Problem 1356 (C++, Python, JavaScript)",
    "partialText": "&lt;p&gt;Sorting is a fundamental skill in programming, but often we need to sort data based on more than just the value of a number. In this guide, we will explore how to reorganize an array based on the hidden binary characteristics of its elements. This approach is common when optimizing low level data processing or working with bit manipulation.&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Problem Summary\n&lt;/h3&gt;\n\n&lt;p&gt;&lt;strong&gt;You're given:&lt;/strong&gt;&lt;br&gt;\nAn array of integers called &lt;code&gt;arr&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Your goal:&lt;/strong&gt;&lt;br&gt;\nSort the integers in ascending order based on the number of set bits (1s) in their binary representation. If two numbers have the same number of 1s, sort them by their actual numerical value in ascending order.&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Intuition\n&lt;/h3&gt;\n\n&lt;p&gt;The core of this problem lies in \"custom sorting.\" Instead of comparing two numbers directly, we first transform them into a pair of values: the count of 1s in their binary form and the number itself.&lt;/p&gt;\n\n&lt;p&gt;Think of it like sorting people in a line. If we sort them by the number of buttons on their shirt, and two people have three buttons, we then look at their height to break the tie. In computer science, we use bit manipulation or built-in library functions to count these \"bits.\" Once we have the bit count, we prioritize that count for the primary sort and use the integer value for the secondary sort.&lt;/p&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Walkthrough: Understanding the Examples\n&lt;/h3&gt;\n\n&lt;p&gt;Let's look at &lt;strong&gt;Example 1&lt;/strong&gt;: &lt;code&gt;arr = [0, 1, 2, 3, 4, 5, 6, 7, 8]&lt;/code&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;strong&gt;Count the bits:&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;0 is &lt;code&gt;0000&lt;/code&gt; (0 bits)&lt;/li&gt;\n&lt;li&gt;1 is &lt;code&gt;0001&lt;/code&gt; (1 bit)&lt;/li&gt;\n&lt;li&gt;2 is &lt;code&gt;0010&lt;/code&gt; (1 bit)&lt;/li&gt;\n&lt;li&gt;4 is &lt;code&gt;0100&lt;/code&gt; (1 bit)&lt;/li&gt;\n&lt;li&gt;8 is &lt;code&gt;1000&lt;/code&gt; (1 bit)&lt;/li&gt;\n&lt;li&gt;3 is &lt;code&gt;0011&lt;/code&gt; (2 bits)&lt;/li&gt;\n&lt;li&gt;5 is &lt;code&gt;0101&lt;/code&gt; (2 bits)&lt;/li&gt;\n&lt;li&gt;6 is &lt;code&gt;0110&lt;/code&gt; (2 bits)&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;7 is &lt;code&gt;0111&lt;/code&gt; (3 bits)&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Apply Primary Sort (Bit Count):&lt;/strong&gt;&lt;br&gt;\nGroup 0 (0 bits), Group 1 (1, 2, 4, 8), Group 2 (3, 5, 6), Group 3 (7).&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Apply Secondary Sort (Value):&lt;/strong&gt;&lt;br&gt;\nWithin Group 1, the numbers are already in order (1, 2, 4, 8). If they were &lt;code&gt;[8, 2, 4, 1]&lt;/code&gt;, we would rearrange them to &lt;code&gt;[1, 2, 4, 8]&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;Final Result:&lt;/strong&gt; &lt;code&gt;[0, 1, 2, 4, 8, 3, 5, 6, 7]&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Code Blocks\n&lt;/h3&gt;\n\n&lt;h4&gt;\n  \n  \n  C++\n&lt;/h4&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight cpp\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;Solution&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n&lt;span class=\"nl\"&gt;public:&lt;/span&gt;\n    &lt;span class=\"n\"&gt;vector&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"n\"&gt;sortByBits&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;vector&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=\"n\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// We use a custom comparator with ranges::sort&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// It sorts by bit count first, then by the value of 'a'&lt;/span&gt;\n        &lt;span class=\"n\"&gt;ranges&lt;/span&gt;&lt;span class=\"o\"&gt;::&lt;/span&gt;&lt;span class=\"n\"&gt;sort&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;ranges&lt;/span&gt;&lt;span class=\"o\"&gt;::&lt;/span&gt;&lt;span class=\"n\"&gt;less&lt;/span&gt;&lt;span class=\"p\"&gt;{},&lt;/span&gt; &lt;span class=\"p\"&gt;[](&lt;/span&gt;&lt;span class=\"k\"&gt;const&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;a&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"k\"&gt;const&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt; &lt;span class=\"n\"&gt;bitCount&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"n\"&gt;bitset&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"mi\"&gt;32&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;a&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"n\"&gt;count&lt;/span&gt;&lt;span class=\"p\"&gt;();&lt;/span&gt;\n            &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;pair&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;lt;&lt;/span&gt;&lt;span class=\"kt\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"kt\"&gt;int&lt;/span&gt;&lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt;&lt;span class=\"p\"&gt;{&lt;/span&gt;&lt;span class=\"n\"&gt;bitCount&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;a&lt;/span&gt;&lt;span class=\"p\"&gt;};&lt;/span&gt;\n        &lt;span class=\"p\"&gt;});&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h4&gt;\n  \n  \n  Python\n&lt;/h4&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight python\"&gt;&lt;code&gt;&lt;span class=\"k\"&gt;class&lt;/span&gt; &lt;span class=\"nc\"&gt;Solution&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt;\n    &lt;span class=\"k\"&gt;def&lt;/span&gt; &lt;span class=\"nf\"&gt;sortByBits&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;self&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"n\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"nb\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nb\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;])&lt;/span&gt; &lt;span class=\"o\"&gt;-&amp;gt;&lt;/span&gt; &lt;span class=\"nb\"&gt;list&lt;/span&gt;&lt;span class=\"p\"&gt;[&lt;/span&gt;&lt;span class=\"nb\"&gt;int&lt;/span&gt;&lt;span class=\"p\"&gt;]:&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;# Python's sort is stable. We can sort by a tuple: (bit_count, value)\n&lt;/span&gt;        &lt;span class=\"c1\"&gt;# bin(n).count('1') counts the number of 1s in the binary string\n&lt;/span&gt;        &lt;span class=\"n\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;sort&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;key&lt;/span&gt;&lt;span class=\"o\"&gt;=&lt;/span&gt;&lt;span class=\"k\"&gt;lambda&lt;/span&gt; &lt;span class=\"n\"&gt;x&lt;/span&gt;&lt;span class=\"p\"&gt;:&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nf\"&gt;bin&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"n\"&gt;x&lt;/span&gt;&lt;span class=\"p\"&gt;).&lt;/span&gt;&lt;span class=\"nf\"&gt;count&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"s\"&gt;1&lt;/span&gt;&lt;span class=\"sh\"&gt;'&lt;/span&gt;&lt;span class=\"p\"&gt;),&lt;/span&gt; &lt;span class=\"n\"&gt;x&lt;/span&gt;&lt;span class=\"p\"&gt;))&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"n\"&gt;arr&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n&lt;h4&gt;\n  \n  \n  JavaScript\n&lt;/h4&gt;\n\n\n\n&lt;div class=\"highlight js-code-highlight\"&gt;\n&lt;pre class=\"highlight javascript\"&gt;&lt;code&gt;&lt;span class=\"cm\"&gt;/**\n * @param {number[]} arr\n * @return {number[]}\n */&lt;/span&gt;\n&lt;span class=\"kd\"&gt;var&lt;/span&gt; &lt;span class=\"nx\"&gt;sortByBits&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"kd\"&gt;function&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;arr&lt;/span&gt;&lt;span class=\"p\"&gt;.&lt;/span&gt;&lt;span class=\"nf\"&gt;sort&lt;/span&gt;&lt;span class=\"p\"&gt;((&lt;/span&gt;&lt;span class=\"nx\"&gt;a&lt;/span&gt;&lt;span class=\"p\"&gt;,&lt;/span&gt; &lt;span class=\"nx\"&gt;b&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"o\"&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// Count bits using a helper or bitwise trick&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;countA&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;countSetBits&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;a&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n        &lt;span class=\"kd\"&gt;const&lt;/span&gt; &lt;span class=\"nx\"&gt;countB&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"nf\"&gt;countSetBits&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;b&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt;\n\n        &lt;span class=\"c1\"&gt;// If bit counts are equal, sort by numeric value&lt;/span&gt;\n        &lt;span class=\"k\"&gt;if &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;countA&lt;/span&gt; &lt;span class=\"o\"&gt;===&lt;/span&gt; &lt;span class=\"nx\"&gt;countB&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n            &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;a&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"nx\"&gt;b&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n        &lt;span class=\"p\"&gt;}&lt;/span&gt;\n        &lt;span class=\"c1\"&gt;// Otherwise, sort by bit count&lt;/span&gt;\n        &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;countA&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"nx\"&gt;countB&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"p\"&gt;});&lt;/span&gt;\n&lt;span class=\"p\"&gt;};&lt;/span&gt;\n\n&lt;span class=\"c1\"&gt;// Helper function to count bits using bitwise operations&lt;/span&gt;\n&lt;span class=\"kd\"&gt;function&lt;/span&gt; &lt;span class=\"nf\"&gt;countSetBits&lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;n&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n    &lt;span class=\"kd\"&gt;let&lt;/span&gt; &lt;span class=\"nx\"&gt;count&lt;/span&gt; &lt;span class=\"o\"&gt;=&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"k\"&gt;while &lt;/span&gt;&lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;gt;&lt;/span&gt; &lt;span class=\"mi\"&gt;0&lt;/span&gt;&lt;span class=\"p\"&gt;)&lt;/span&gt; &lt;span class=\"p\"&gt;{&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;&amp;amp;=&lt;/span&gt; &lt;span class=\"p\"&gt;(&lt;/span&gt;&lt;span class=\"nx\"&gt;n&lt;/span&gt; &lt;span class=\"o\"&gt;-&lt;/span&gt; &lt;span class=\"mi\"&gt;1&lt;/span&gt;&lt;span class=\"p\"&gt;);&lt;/span&gt; &lt;span class=\"c1\"&gt;// Clears the least significant bit&lt;/span&gt;\n        &lt;span class=\"nx\"&gt;count&lt;/span&gt;&lt;span class=\"o\"&gt;++&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n    &lt;span class=\"p\"&gt;}&lt;/span&gt;\n    &lt;span class=\"k\"&gt;return&lt;/span&gt; &lt;span class=\"nx\"&gt;count&lt;/span&gt;&lt;span class=\"p\"&gt;;&lt;/span&gt;\n&lt;span class=\"p\"&gt;}&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;/div&gt;\n\n\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Key Takeaways\n&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;\n&lt;strong&gt;Custom Comparators:&lt;/strong&gt; Most modern languages allow you to define a \"key\" or a \"comparator\" function to change how sorting logic is applied.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Bit Manipulation:&lt;/strong&gt; Understanding how numbers are stored in binary is essential for low level optimization and specific interview problems.&lt;/li&gt;\n&lt;li&gt;\n&lt;strong&gt;Stability and Tie-Breaking:&lt;/strong&gt; When sorting, always consider how to handle items that are \"equal\" according to your primary criteria.&lt;/li&gt;\n&lt;/ul&gt;\n\n\n\n\n&lt;h3&gt;\n  \n  \n  Final Thoughts\n&lt;/h3&gt;\n\n&lt;p&gt;This problem is a classic example of why understanding the underlying binary structure of data matters. While it might seem abstract, this type of logic is frequently used in &lt;strong&gt;Cryptography&lt;/strong&gt; and &lt;strong&gt;Data Compression&lt;/strong&gt;, where the efficiency of bit storage is paramount. Mastering the ability to sort by derived properties (like bit counts) will make you a much more flexible developer when tackling complex data structures.&lt;/p&gt;",
    "date": "2026-02-25T15:36:39.000Z",
    "url": "https://dev.to/om_shree_0709/beginner-friendly-guide-sort-integers-by-the-number-of-1-bits-problem-1356-c-python-3jpf"
  }
]