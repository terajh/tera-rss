[
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "I threw thousands of files at Astro and you won't believe what happened next...",
    "partialText": "<p>Ok, forgive me for the <em>incredibly</em> over the top title there. Yes, it's clickbait, but I'm also tired after a <em>very</em> long week and feeling a little crazy, so just go with me here a bit, I promise it will be worth it. I was curious how well <a href=\"https://astro.build/\">Astro</a> could handle a large amount of data and I thought - what happens if I threw this blog (well, the Markdown files) at it and tried to render out a site? Here's what I did wrong and what eventually worked (better than I expected).</p>\n<h2 id=\"round-one\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#round-one\">Round One</a></h2>\n<p>I began by creating a soft link locally from my blog's repo of <code>posts</code> to the <code>src/pages/posts</code> of a new Astro site. My blog currently has <a href=\"https://www.raymondcamden.com/stats\">6742</a> posts (all high quality I assure you). Each one looks like so:</p>\n<pre><code>---\nlayout: post\ntitle: &quot;Creating Reddit Summaries with URL Context and Gemini&quot;\ndate: &quot;2026-02-09T18:00:00&quot;\ncategories: [&quot;development&quot;]\ntags: [&quot;python&quot;,&quot;generative ai&quot;]\nbanner_image: /images/banners/cat_on_papers2.jpg\npermalink: /2026/02/09/creating-reddit-summaries-with-url-context-and-gemini\ndescription: Using Gemini APIs to create a summary of a subreddit.\n---\n\nInteresting content no one will probably read here...\n</code></pre>\n<p>In my Astro site's <code>index.astro</code> page, I tried this first:</p>\n<pre><code class=\"language-js\">const allPosts = Object.values(import.meta.glob('./posts/**/*.md', { eager: true }));\n</code></pre>\n<p>And immediately ran into an issue with the <code>layout</code> front matter. Astro parses this and expects to find a <code>post</code> component in the same directory. My &quot;fix&quot; was to... remove the symbolic link and make a real copy and then use multi-file search and replace to just delete the line.</p>\n<p>That worked... but was incredibly slow. I'd say it took about 70 or so seconds for each load.</p>\n<p>This was... obviously... the wrong approach.</p>\n<h2 id=\"round-two---the-right-approach\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#round-two---the-right-approach\">Round Two - The Right Approach</a></h2>\n<p>The solution was simple - use <a href=\"https://docs.astro.build/en/guides/content-collections/\">content collections</a>. This involved moving my content out of the <code>src/pages</code> directory and creating a file, <code>src/content.config.js</code> to define the collection:</p>\n<pre><code class=\"language-js\">import { defineCollection } from 'astro:content';\n\nimport { glob, file } from 'astro/loaders';\n\n\nconst blog = defineCollection({ \n    loader: glob({pattern:&quot;**/*.md&quot;,base:&quot;./posts&quot;})\n });\n\nexport const collections = { blog  };\n</code></pre>\n<p>You an see where I define my <code>blog</code> collection using a glob pattern and a base directory. That's literally it. This still took a few seconds to load, but was cached and future reloads were zippy zippy.</p>\n<h2 id=\"but-wait...-there's-more\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#but-wait...-there's-more\">But wait... there's more</a></h2>\n<p>With this working, I began building out a few pages just to see things in action. First, a home page that shows ten recent posts with excepts:</p>\n<pre><code class=\"language-html\">---\nimport BaseLayout from '../layouts/BaseLayout.astro';\nimport { formatDate, excerpt } from &quot;../utils/formatters.js&quot;\n\nimport { getCollection } from 'astro:content';\n\nconst posts = await getCollection('blog');\nconst sortedPosts  = posts.sort((a, b) =&gt; {\n\treturn new Date(b.data.date)-new Date(a.data.date);\n}).slice(0,10);\n\n---\n\n&lt;BaseLayout pageTitle=&quot;Blog&quot;&gt;\n\n\t{ sortedPosts.map((post:any) =&gt; \n\t&lt;div&gt;\n\t\t&lt;h3&gt;&lt;a href={ `/posts/${post.id}` }&gt;{post.data.title}&lt;/a&gt;&lt;/h3&gt;\n\t\t&lt;p&gt;&lt;i&gt;Published { formatDate(post.data.date)}&lt;/i&gt;&lt;/p&gt;\n\t\t&lt;p set:html={ excerpt(post.rendered.html)}&gt;&lt;/p&gt;\n\t&lt;/div&gt;\n\t)}\n\t&lt;p&gt;\n\t\t&lt;a href=&quot;all.html&quot;&gt;Every Post Ever&lt;/a&gt;\n\t&lt;/p&gt;\n&lt;/BaseLayout&gt;\n</code></pre>\n<p>I think the import bits here are on top. You can see I need to sort my posts and I do so such that the most recent posts are on top. (In theory this sort would be faster if I pre-processed the string based dates into Date objects once, but the demo was working so fast now I didn't bother.)</p>\n<p>Now note the the link. To make this work, I created a new file, <code>src/pages/posts/[...id].astro</code>. The rest parameter in the filename (<code>...id</code>) is important. I'll explain after sharing the file contents:</p>\n<pre><code class=\"language-html\">---\nimport BaseLayout from '../../layouts/BaseLayout.astro';\n\nimport { getCollection, render } from 'astro:content';\n\nexport async function getStaticPaths() {\n  const posts = await getCollection('blog');\n\n  return posts.map(post =&gt; ({\n    params:{ id: post.id },\n    props: { post },\n  }));\n\n}\n\nconst { post } = Astro.props;\nconst { Content } = await render(post);\n---\n\n&lt;BaseLayout pageTitle={post.data.title}&gt;\n  &lt;Content /&gt;\n&lt;/BaseLayout&gt;\n</code></pre>\n<p>My <code>id</code> values are coming from the permalink of my blog posts and look like so: <code>permalink: /2026/02/09/creating-reddit-summaries-with-url-context-and-gemini</code>. Notice the forward slashes? This was throwing errors in Astro when I originally named my file <code>[id].astro</code>. The rest parameter version fixed that immediately.</p>\n<p>That's almost the last issue. With this in place, I could browse a few blog posts and see how they looked. I noticed something odd though. I had a header with three dots in it:</p>\n<pre><code>## Temporal is Coming...\n</code></pre>\n<p>And when rendered out, it turned into trash. I went to Gemini, asked about it, and it turned out to be an issue with Astro's Markdown processor considering the three dots a Unicode ellipsis character. My app didn't have a &quot;real&quot; HTML layout at this point (I added <code>BaseLayout</code> later) and was missing:</p>\n<pre><code class=\"language-html\">&lt;meta charset=&quot;utf-8&quot; /&gt;\n</code></pre>\n<p>As soon as that was added, it rendered just fine!</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/02/ab1.jpg\" loading=\"lazy\" alt=\"Blog home page\" class=\"imgborder imgcenter\">\n</p>\n<p>And how well did it perform when building? At near seven thousand pages, <code>npm run build</code> took...</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/02/ab2.jpg\" loading=\"lazy\" alt=\"Pause for effect\" class=\"imgborder imgcenter\">\n</p>\n<p>8 seconds. That's pretty dang good I'd say.</p>\n<p>So, if you want to try this yourself, you can find the source here: <a href=\"https://github.com/cfjedimaster/astro-tests/tree/main/rayblog\">https://github.com/cfjedimaster/astro-tests/tree/main/rayblog</a></p>\n<p>Note! I thought it was a bit of a waste to check in <em>all</em> of my blog posts in this repo so I filtered it down to the last three years. If you want to recreate that I did (and heck, you can probably make it quicker, if you do, drop me a line!), you can clone my posts here: <a href=\"https://github.com/cfjedimaster/raymondcamden2023\">https://github.com/cfjedimaster/raymondcamden2023</a></p>\n<p>Photo by <a href=\"https://unsplash.com/@jeremythomasphoto?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Jeremy Thomas</a> on <a href=\"https://unsplash.com/photos/the-stars-and-galaxy-as-seen-from-rocky-mountain-national-park-4dpAqfTbvKA?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a></p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/02/13/i-threw-thousands-of-files-at-astro-and-you-wont-believe-what-happened-next"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Creating Reddit Summaries with URL Context and Gemini",
    "partialText": "<p>A while ago, the <a href=\"https://ai.google.dev/gemini-api/docs\">Gemini API</a> added a feature to help work with URL content, <a href=\"https://ai.google.dev/gemini-api/docs/url-context\">URL Context</a>. Previously you had to fetch and download the HTML of the page and pass it to the API. This feature allows Gemini to request content (with limits) from public web pages. I thought it would be interesting to test this against Reddit. In the past I've made use of Reddit's APIs, but as they've pretty much destroyed access to those APIs, I thought this could be a good work around. Here's a simple demo I built.</p>\n<p>My demo parses the <a href=\"https://www.reddit.com/r/astrojs\">Astro</a> subreddit, specifically the <code>new</code> feed, and asks for a summary of items that seem to require a developer's help, as well as items that may be critical of Astro.</p>\n<p>I began with my imports and loading in my key from the environment:</p>\n<pre><code class=\"language-python\">import os\nfrom google import genai\nfrom google.genai import types\n\nclient = genai.Client(\n    api_key=os.environ.get(&quot;GEMINI_API_KEY&quot;),\n)\nmodel = &quot;gemini-flash-latest&quot;\n</code></pre>\n<p>Next, I built a method for my prompt:</p>\n<pre><code class=\"language-python\">def summarize():\n\n    contents = [\n        types.Content(\n            role=&quot;user&quot;,\n            parts=[\n                types.Part.from_text(text=&quot;&quot;&quot;Look at this page in Reddit (https://www.reddit.com/r/astrojs/new/) and scan the titles of the most recent posts to see if anything needs a developer to respond or is overly critical of Astro. When reporting on threads, always include the URL to the thread.&quot;&quot;&quot;),\n            ],\n        ),\n    ]\n    tools = [\n        types.Tool(url_context=types.UrlContext()),\n    ]\n    generate_content_config = types.GenerateContentConfig(\n        thinking_config=types.ThinkingConfig(\n            thinking_budget=0,\n        ),\n        tools=tools,\n    )\n\n    response = client.models.generate_content(\n        model=model,\n        contents=contents,\n        config=generate_content_config,\n    )\n\n    return response.text\n</code></pre>\n<p>The prompt is basically what I stated above, and in theory, you could make this method much more generic, taking in a subreddit by name and changing the company name. But the real important bit is the <code>tools</code> section which enables URL content. It's basically like an &quot;internet pass&quot; to allow Gemini to hit the URL (or URLs) specified and add it to the prompt. It may be obvious but just in case, yes, the size of the web page will impact the total number of tokens in the prompt.</p>\n<p>The result of this is pretty good. Here's an example from the current set of new posts.</p>\n<iframe src=\"https://static.raymondcamden.com/images/2026/02/report.pdf\" loading=\"lazy\" width=\"100%\" height=\"400px\"></iframe>\n<p>Ok, that's fine, but I really prefer to have a set format to my output. Typically this is easy - switch to structured output and supply a JSON schema, but oddly that feature is disabled when using URL Context. Turns out there's a simple enough solution - just build another prompt!</p>\n<p>Here's the second method I added to my script:</p>\n<pre><code class=\"language-python\">def turn_to_json(input):\n\n    contents = [\n        types.Content(\n            role=&quot;user&quot;,\n            parts=[\n                types.Part.from_text(text=f&quot;&quot;&quot;\nI used a previous prompt to parse a URL and provide a report on issues that need a developer, and issues that reflect on the technology.\n\nThat prompt made use of URL tools and the SDK does not allow you to create structured output. So I want you to take the output and return it in my designed JSON format. Here is the previous output, in Markdown:\n                                     \n{input}                                     \n&quot;&quot;&quot;),\n            ],\n        ),\n    ]\n    generate_content_config = types.GenerateContentConfig(\n        thinking_config=types.ThinkingConfig(\n            thinking_budget=0,\n        ),\n        response_mime_type=&quot;application/json&quot;,\n        response_schema=genai.types.Schema(\n            type = genai.types.Type.OBJECT,\n            required = [&quot;posts&quot;],\n            properties = {\n                &quot;posts&quot;: genai.types.Schema(\n                    type = genai.types.Type.ARRAY,\n                    items = genai.types.Schema(\n                        type = genai.types.Type.OBJECT,\n                        required = [&quot;title&quot;, &quot;reason&quot;, &quot;url&quot;],\n                        properties = {\n                            &quot;title&quot;: genai.types.Schema(\n                                type = genai.types.Type.STRING,\n                            ),\n                            &quot;reason&quot;: genai.types.Schema(\n                                type = genai.types.Type.STRING,\n                            ),\n                            &quot;url&quot;: genai.types.Schema(\n                                type = genai.types.Type.STRING,\n                            ),\n                        },\n                    ),\n                ),\n            },\n        ),\n    )\n\n    response = client.models.generate_content(\n        model=model,\n        contents=contents,\n        config=generate_content_config,\n    )\n\n    return response.text\n</code></pre>\n<p>The prompt lets Gemini know that I had a previous prompt and couldn't get structured output. I then specify I <em>want</em> structured output, pass in the result from the previous call, and use a specific JSON schema in the call to get my precise response back.</p>\n<p>The final part of the script simply calls the methods:</p>\n<pre><code class=\"language-python\">if __name__ == &quot;__main__&quot;:\n    summary = summarize()\n    json = turn_to_json(summary)\n    print(json)\n</code></pre>\n<p>Here's the result (and as a quick note, I ran my script a few times between creating a PDF export of the initial response and now so if you see any differences, that's why):</p>\n<pre><code class=\"language-json\">{\n  &quot;posts&quot;: [\n    {\n      &quot;title&quot;: &quot;Next.js or Astro for scroll-driven, motion-heavy websites? (leaving Gatsby)&quot;,\n      &quot;reason&quot;: &quot;The user is asking for long-term production experience advice on which framework (Next.js or Astro) is better for complex, motion-heavy websites, especially when integrating with a headless CMS. This requires input from experienced Astro developers.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qp6a28/nextjs_or_astro_for_scrolldriven_motionheavy/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;Astro Managed Hosting? (for my customer)&quot;,\n      &quot;reason&quot;: &quot;The user is specifically looking for a \\&quot;managed hosting\\&quot; service for an Astro SSR site (similar to WordPress managed hosting) that will automatically handle Astro updates and service restarts. This is a question for developers who might know of a niche hosting provider or for a hosting provider's developer to potentially address a market gap.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qpar5l/astro_managed_hosting_for_my_customer/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;How do you all render rich text from Payload CMS's lexical?&quot;,\n      &quot;reason&quot;: &quot;The user is looking for a common or best-practice solution for rendering rich text and blocks from Payload CMS's lexical editor, noting that the official Astro docs lack an example. This needs a practical code-based answer from developers who have solved this integration.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qof39g/how_do_you_all_render_rich_text_from_payload_cmss/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;4 vulnerabilities (2 moderate, 2 high) from upgrading wrangler in Astro&quot;,\n      &quot;reason&quot;: &quot;The user is asking about the seriousness and the best fix for security vulnerabilities flagged by npm audit after upgrading wrangler in an Astro + Cloudflare project. This is a direct request for technical assistance/clarification on security.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qmx8p7/4_vulnerabilities_2_moderate_2_high_from_upgrading/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;Help regarding Astro.js + FastAPI&quot;,\n      &quot;reason&quot;: &quot;The user is struggling to deploy a combined Astro.js and FastAPI application to Vercel, running into routing issues. They need assistance with the specific configuration for Vercel, the Astro adapter, and the vercel.json file.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qk880f/help_regarding_astrojs_fastapi/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;Experimental Content Security Policy (CSP)&quot;,\n      &quot;reason&quot;: &quot;The user is running into issues with Astro's experimental CSP feature not covering all script/style hashes and is asking for tips from others who have successfully implemented it in production. This is a request for developer-level configuration guidance.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qip31d/experimental_content_security_policy_csp/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;How do UI libraries work with islands?&quot;,\n      &quot;reason&quot;: &quot;The user is struggling with how to use a consistent UI library across both static .astro components and hydrated components (like a React island). This is a fundamental architectural question about best practices in an Astro Islands setup and requires a technical answer.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qhb4n3/how_do_ui_libraries_work_with_islands/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;Are Astro Templates worth it?&quot;,\n      &quot;reason&quot;: &quot;The user reports a \\&quot;very sour taste\\&quot; after purchasing a paid template that hasn't been updated since 2022, causing them to abandon it. This is a criticism of the template ecosystem's quality control and longevity.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qp66w2/are_astro_templates_worth_it/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;Anyone else feel burned out with all these Astro integrated CMS solutions?&quot;,\n      &quot;reason&quot;: &quot;The user expresses burnout and frustration, stating that the market is \\&quot;missing a clear solution\\&quot; for a CMS that nails key fundamentals like good markdown integration, image/asset preview inside MDX, and intuitive component integration. This is a direct criticism of the current state of the Astro CMS ecosystem.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qj5k6z/anyone_else_feel_burned_out_with_all_these_astro/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;High TTFB and execution latency on Astro SSR routes despite fast app code ( vercel hosted )&quot;,\n      &quot;reason&quot;: &quot;The user is seeing intermittent and high Time to First Byte (TTFB) and execution latency spikes (3-7s) on their Astro SSR admin routes hosted on Vercel, despite the app code being fast. This is a serious performance criticism of the SSR implementation/Vercel adapter under real-world load.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qi98t5/high_ttfb_and_execution_latency_on_astro_ssr/&quot;\n    },\n    {\n      &quot;title&quot;: &quot;What's the point of Astro's i18n internationalization features?&quot;,\n      &quot;reason&quot;: &quot;The user criticizes Astro's i18n features, stating they expected something more dynamic but have to \\&quot;manually create the folders and route files for each locale,\\&quot; \\&quot;manually load the translation files,\\&quot; and that the built-in utilities are confusing and broken for things like translated URLs and language switching.&quot;,\n      &quot;url&quot;: &quot;https://www.reddit.com/r/astrojs/comments/1qk3rwi/whats_the_point_of_astros_i18n_internationalization/&quot;\n    }\n  ]\n}\n</code></pre>\n<p>That's pretty much it. The URL Context tool works as advertised, which is good, but it's kinda weird it Gemini can't map the results to a structured form. That being said, I dig the idea of using a second prompt to improve the results of an initial prompt, and it's something I'll consider in the future as well.</p>\n<p>You can find the complete script here: <a href=\"https://github.com/cfjedimaster/ai-testingzone/tree/main/reddit_summary\">https://github.com/cfjedimaster/ai-testingzone/tree/main/reddit_summary</a></p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/02/09/creating-reddit-summaries-with-url-context-and-gemini"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Links For You (2/8/26)",
    "partialText": "<p>Happy Superb Owl Day! As my team didn't even get close to the playoffs, I'll be rooting for the Seahawks, but even more so, hoping for a fun game. Tomorrow I head out to Vegas for my first offsite with Webflow, and the first in-person company event I've been too since Auth0 nearly a decade ago. I'm looking forward to meeting my teammates in person and meeting new people. Now - to the links!</p>\n<h2 id=\"adding-touch-to-powershell\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#adding-touch-to-powershell\">Adding Touch to PowerShell</a></h2>\n<p>A few months back, I traded in my Windows laptop (it was having horrible hardware issues) and moved back to Mac. I've gone back and forth over the years, and even when I was on Windows for my personal machine, my work laptop was usually a Mac, but I've decided to go back to Mac for my personal machine ... at least for a while. That being said, one of the aspects of Windows I wanted to get into more, but never got around to it, was scripting in PowerShell. I knew it had a <em>lot</em> of power and flexibility, but I spent most my time in WSL so I didn't really dig into it.</p>\n<p>This post by <a href=\"https://cassidoo.co/\">Cassidy Williams</a> demonstrates a simple example of this, rebuilding the <a href=\"https://cassidoo.co/post/touch-on-ps/?utm_source=cassidoo&amp;utm_medium=email&amp;utm_campaign=happiness-is-a-choice-that-requires-effort-at\">touch command for PowerShell</a>. On the offhand chance you don't know what touch does, it simply creates a new blank file with the name you specify, so <code>touch cats.txt</code> will create the file <code>cats.txt</code> in your current directory. Apparently, Windows has a command like this already, <code>ni</code>, but Cassidy wanted to use the same function in multiple OSes.</p>\n<h2 id=\"invokers-on-the-web\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#invokers-on-the-web\">Invokers on the Web</a></h2>\n<p>Next up is a look at <a href=\"https://pawelgrzybek.com/more-invoker-commands-and-more-reasons-not-to-use-javascript-please/\">invoker commands</a> by <a href=\"https://pawelgrzybek.com/\">Pawel Grzybak</a>. Invoker commands let you bind HTML elements to actions without needing JavaScript, and are available across all modern browsers (even <strike>IE</strike>Safari). You can extend the built-in invoker support with JavaScript as well.</p>\n<h2 id=\"state-of-javascript-results\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#state-of-javascript-results\">State of JavaScript Results</a></h2>\n<p>Last up are the results from the annual <a href=\"https://2025.stateofjs.com/en-US\">State of JavaScript</a> survey. This is a <em>wide</em> ranging survey of the JavaScript, and greater web, ecosystem. It's quite a bit of data and worth your time checking out.</p>\n<h2 id=\"just-for-fun\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#just-for-fun\">Just For Fun</a></h2>\n<p>Usually I reserve the &quot;fun&quot; link for music videos, but this was just too good to pass up. My buddy <a href=\"https://recursive.codes/\">Todd Sharp</a> discovered this a few days ago and it's a fascinating look at the history of the Japanese mail system. Trust me, it is <em>absolutely</em> cooler than it sounds, and a quick read at that. Enjoy!</p>\n<p><a href=\"https://www.japanhousela.com/articles/more-than-mail-culture-history-japanese-postal-system-post-office-box-service-symbol-logo/\">More than Mail | The Culture and History of the Japanese Postal System</a></p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/02/08/links-for-you-2826"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Building a Bluesky Sentiment Dashboard with Alpine and Chrome AI",
    "partialText": "<p>Good morning, programs! Today I'm sharing yet another example of Chrome's <a href=\"https://developer.chrome.com/docs/ai/built-in\">on-device AI</a> features, this time to demonstrate a &quot;Bluesky Sentiment Dashboard&quot;. In other words, a tool that lets you enter terms and then get a report on the average sentiment for posts using that word. I actually did this before (and yes, I forgot until about a minute ago) last year using Transformers.js: <a href=\"https://www.raymondcamden.com/2025/01/03/building-a-bluesky-ai-sentiment-analysis-dashboard\">Building a Bluesky AI Sentiment Analysis Dashboard</a>. I also built this for Twitter, before it went down the toilet, killed off API access, etc. etc., but I can't seem to find it in my archives so maybe I'm hallucinating. That being said, earlier this week I thought I'd try building this because honestly I had forgotten about my previous demo, but it gave me a chance to play more with Chrome's AI tooling. Interesting enough, in that post from last year I mentioned possibly adding <a href=\"https://shoelace.style/\">Shoelace</a> for UI which I actually did for <em>this</em> demo... so not a total waste of time, right? Let's get into it!</p>\n<h2 id=\"bluesky's-search-api\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bluesky's-search-api\">Bluesky's Search API</a></h2>\n<p>So one big change from the previous post is that the public, unauthenticated search endpoint at https://public.api.bsky.app/xrpc/app.bsky.feed.searchPosts now returns a 403. You can't use it. I believe this was done to stop scrapers which is a bummer, but oddly, the <em>authenticated</em> endpoint at https://api.bsky.app/xrpc/app.bsky.feed.searchPosts works just fine, even without authentication. So for example, this will search for me: <a href=\"https://api.bsky.app/xrpc/app.bsky.feed.searchPosts?q=Raymond+Camden\">https://api.bsky.app/xrpc/app.bsky.feed.searchPosts?q=Raymond+Camden</a></p>\n<p>My trust in this is absolutely not 100%, but that's enough to build a demo, right? For my dashboard I decided on:</p>\n<ul>\n<li><a href=\"https://alpinejs.dev/\">Alpine.js</a> - I almost always try to go vanilla for web demos, but when I'm building something a bit complex, I love Alpine for what it provides and how little it impacts the &quot;weight&quot; of my application.</li>\n<li><a href=\"https://shoelace.style/\">Shoelace</a> - This is a UI library of web components that I've used before and dig. It's been replaced with <a href=\"https://webawesome.com/\">Web Awesome</a> but I haven't yet made the move to it yet.</li>\n<li>And as always mentioned, Chrome AI, specifically the <a href=\"https://developer.chrome.com/docs/ai/prompt-api\">Prompt API</a></li>\n</ul>\n<p>Here's a screen shot of it in action:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/02/bs1.jpg\" loading=\"lazy\" alt=\"dashboard screenshot showing results for terms: moon, biden, trump, cats\" class=\"imgborder imgcenter\">\n</p>\n<p>Ok, let's get to it!</p>\n<h2 id=\"the-html\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-html\">The HTML</a></h2>\n<p>I'm not going to share <em>all</em> of the HTML here (don't worry, I'll link to the repo at the end), but instead focus on the main app where Alpine comes into play. I've got a top level header that handles informing the user of when work is being done as well as handling the ability to add a keyword:</p>\n<pre><code class=\"language-html\">&lt;header class=&quot;header&quot;&gt;\n&lt;h1 class=&quot;header__title&quot;&gt;Bluesky Sentiment Dashboard&lt;/h1&gt;\n&lt;span x-text=&quot;running ? 'Searching and Analyzing...' : ''&quot;&gt;&lt;/span&gt;\n&lt;sl-button variant=&quot;primary&quot; @click=&quot;showAddTerm&quot;&gt;Add Term&lt;/sl-button&gt;\n&lt;/header&gt;\n</code></pre>\n<p>My report content is a set of cards, each reporting on sentiment as well the total number of posts and the earliest and most latest result:</p>\n<pre><code class=\"language-html\">&lt;template x-for=&quot;card in cards&quot; :key=&quot;card.term&quot;&gt;\n&lt;sl-card class=&quot;card-header&quot; :class=&quot;{'bad': card.sentiment &lt; -0.5, 'good': card.sentiment &gt; 0.5}&quot;&gt;\n    &lt;div slot=&quot;header&quot;&gt;\n    &lt;span x-text=&quot;card.term&quot;&gt;&lt;/span&gt;\n    &lt;sl-icon-button name=&quot;trash&quot; label=&quot;Delet Term&quot; title=&quot;Delete Term&quot; @click=&quot;deleteTerm(card.term)&quot;&gt;&lt;/sl-icon-button&gt;\n    &lt;/div&gt;\n    &lt;p&gt;\n    Sentiment: &lt;span x-text=&quot;card.sentiment&quot;&gt;&lt;/span&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n    Total: &lt;span x-text=&quot;card.total&quot;&gt;&lt;/span&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n    Latest: &lt;span x-text=&quot;formatDate(card.latest)&quot;&gt;&lt;/span&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n    Earliest: &lt;span x-text=&quot;formatDate(card.earliest)&quot;&gt;&lt;/span&gt;\n    &lt;/p&gt;\n&lt;/sl-card&gt;\n&lt;/template&gt;\n</code></pre>\n<p>You can also see where I'm conditionally adding in a <code>bad</code> or <code>good</code> class based on sentiment, and seeing it in front of me I think I'd rather have that in data so the HTML could be simpler. I'll probably address that later this week so that's an FYI if you read this in the future.</p>\n<p>Next, I've got a dialog for adding a term:</p>\n<pre><code class=\"language-html\">&lt;sl-dialog label=&quot;Add Term&quot; @closed=&quot;resetForm&quot; x-ref=&quot;addTermDialog&quot;&gt;\n&lt;p&gt;\n&lt;sl-input x-model=&quot;term&quot; placeholder=&quot;Enter a term&quot; x-model=&quot;term&quot;&gt;&lt;/sl-input&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;sl-button variant=&quot;primary&quot; @click=&quot;addTerm&quot;&gt;Add&lt;/sl-button&gt;\n&lt;sl-button variant=&quot;secondary&quot; @click=&quot;resetForm&quot;&gt;Cancel&lt;/sl-button&gt;\n&lt;/p&gt;\n&lt;/sl-dialog&gt;\n</code></pre>\n<p>That's it, except for one special dialog I'll mention in a sec. Ok, on to the JavaScript.</p>\n<h2 id=\"the-javascript\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-javascript\">The JavaScript</a></h2>\n<p>Alright, as with the HTML, I'm not going to share every single line, but focus on the important bits. First, let's talk about Chrome's Prompt API. As I've mentioned in previous posts, this API is still behind a flag in the browser (it's GA for extensions), so checking for it requires a few things. I've wrapped it like so:</p>\n<pre><code class=\"language-js\">async function canDoAI() {\n    if(!window.LanguageModel) return false;\n    return (await LanguageModel.availability()) !== 'unavailable';\n}\n</code></pre>\n<p>Now, the <code>availability()</code> method can return a few different things:</p>\n<ul>\n<li>unavailable - nothing you can do, period</li>\n<li>available - golden!</li>\n<li>downloading/downloadable - it needs to download, or is currently doing so</li>\n</ul>\n<p>If the model is not available but can be downloaded, you <em>must</em> wait for &quot;user interaction&quot; before starting that process. This can be checked with <code>navigator.userActivation.isActive</code>. Basically, any click is enough, but to handle this, my logic does this:</p>\n<pre><code class=\"language-js\">let available = await LanguageModel.availability();\nif(available === 'downloadable') {\n    // we need to show a modal so they can click to confirm, and navigator.userActivation.isActive will be true\n    this.$refs.dlDialog.show();\n} else {\n    await this.makeSession();\n}\n</code></pre>\n<p>That <code>dlDialog</code> is another modal in the HTML that basically warns the user about the download. When you close this dialog, this event fires:</p>\n<pre><code class=\"language-js\">async closeWarningDialog() {\n    this.$refs.dlDialog.hide();\n    this.makeSession();\n},\n</code></pre>\n<p>Which handles the firing the method to make my model instance. I do <em>not</em> provide UI feedback about the download process in this demo, but I usually do, so I'll probably update that soon as well. That being said, here is <code>makeSession</code>:</p>\n<pre><code class=\"language-js\">async makeSession() {\n    console.log('Making session');\n\n    this.session = await LanguageModel.create({\n        initialPrompts: [\n            {role:'system', content:'You rate the overall sentiment of a set of social media posts, separated by ---. Analzye them all and average out the sentiment, giving it a score from -1 to 1 with -1 being the most negative, and 1 being the most positive.'}\n        ]\n    });\n            \n},\n</code></pre>\n<p>Whew. Ok, that's the AI <em>setup</em> phase. As for the actual searches, I make use of <code>localStorage</code> to save a JSON-encoded array of strings. This is checked on startup, and whenever you add or a delete a term, I persist it. The actual &quot;search and report&quot; is done in the heartbeat method:</p>\n<pre><code class=\"language-js\">async heartBeat() {\n    if(this.running) return;\n    this.running = true;\n    console.log('Heartbeat, current terms: ', this.terms, new Date().toISOString(), navigator.userActivation.isActive);\n    // I don't like this - need to change logic to - remove cards for terms that don't exist anymore\n    this.cards = [];\n    /*\n    for each term:\n        i call BS API to get terms, i filter down to just the text, but also \n        want the total # i got, and the datetime of the most recent and earliest \n\n        I then ask Chrome to perform a sentiment analysis on the text, from -1 to 1 \n        I then render cards \n\n    */\n    for(let term of this.terms) {\n        console.log('Analyzing term: ', term);\n        let results = await searchBS(term);\n        console.log('Results: ', results);\n        // create a block of text from the posts\n        let text = results.posts.map(p =&gt; p.record.text).join('\\n---\\n');\n        let sentiment = await this.session.prompt(text, {responseConstraint:SCHEMA});\n        console.log('Sentiment: ', sentiment);\n        this.cards.push({\n            term: term,\n            sentiment: sentiment,\n            total: results.total,\n            latest: results.latest,\n            earliest: results.earliest\n        });\n    }\n    this.running = false;\n},\n</code></pre>\n<p>You can see the basic loop over the terms. Each term is sent to the Bluesky API:</p>\n<pre><code class=\"language-js\">async function searchBS(term) {\n    let req = await fetch(`https://api.bsky.app/xrpc/app.bsky.feed.searchPosts?q=${encodeURIComponent(term)}s&amp;limit=50&amp;sort=latest`);\n\tlet d = await req.json();\n    return {\n        posts: d.posts, \n        total: d.posts.length,\n        latest: d.posts[0].record.createdAt,\n        earliest: d.posts[d.posts.length - 1].record.createdAt\n    };\n}\n</code></pre>\n<p>And then the text is smooshed (technical term) together and passed to the model. <code>SCHEMA</code> is a JSON schema used to shape the results:</p>\n<pre><code class=\"language-js\">const SCHEMA = {\n    title:&quot;Sentiment&quot;,\n    description:&quot;A rating of the sentiment (bad versus good) of input text. Very bad is rated at -1, very good at 1.&quot;,\n    type:&quot;number&quot;, \t\n    minimum:-1,\n    maximum:1\n};\n</code></pre>\n<p>Lastly, I update <code>this.cards</code> which is an Alpine variable and is what was used in the HTML above to render out a bunch of Shoelace Card elements. Whew.</p>\n<h2 id=\"try-it!\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#try-it!\">Try It!</a></h2>\n<p>If you've got the Prompt API enabled, you can try this yourself here: <a href=\"https://cfjedimaster.github.io/webdemos/bs_sentiment/\">https://cfjedimaster.github.io/webdemos/bs_sentiment/</a>. (And I'm just noticing - along with providing download feedback - I need to show an alert for unsupported browsers... version 2!). You can check out the complete code for the app here: <a href=\"https://github.com/cfjedimaster/webdemos/tree/master/bs_sentiment\">https://github.com/cfjedimaster/webdemos/tree/master/bs_sentiment</a></p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/02/05/building-a-bluesky-sentiment-dashboard-with-alpine-and-chrome-ai"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Building an RSS Aggregator with Astro",
    "partialText": "<p>This weekend I had some fun building a little Astro site for RSS aggregation. It works by the individual user defining a set of feeds they care about and works with a server-side Astro route to handle getting and parsing the feeds. Here's a quick example. On hitting the site, it notices you haven't defined any feeds and prompts you to do so:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/02/rss1.jpg\" loading=\"lazy\" alt=\"initial display of app, prompting for you to add a feed\" class=\"imgborder imgcenter\">\n</p>\n<p>Clicking &quot;Manage Feeds&quot; opens up a dialog (my first time using one with native web platform tech!) where you can add and delete RSS feeds:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/02/rss2.jpg\" loading=\"lazy\" alt=\"dialog to add and delete feeds\" class=\"imgborder imgcenter\">\n</p>\n<p>After you have some specified, the app then calls server-side to fetch and parse the feeds. Items are mixed together and returned sorted by date:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/02/rss3.jpg\" loading=\"lazy\" alt=\"display of items\" class=\"imgborder imgcenter\">\n</p>\n<p>Not too shabby looking, either. That's thanks to the simple addition of <a href=\"https://simplecss.org/\">Simple.css</a>. Let's take a look at the code.</p>\n<h2 id=\"the-app\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-app\">The App</a></h2>\n<p>The entire application really comes down to two routes. The first being just the home page, which is pretty slim:</p>\n<pre><code class=\"language-html\">---\nimport BaseLayout from '../layouts/BaseLayout.astro';\n---\n\n&lt;BaseLayout pageTitle=&quot;Your Feeds&quot;&gt;\n\n\t&lt;div id=&quot;content&quot;&gt;\n\t\n\t&lt;/div&gt;\n\n\t&lt;dialog id=&quot;manageFeedsDialog&quot;&gt;\n\t\t&lt;button autofocus style=&quot;float: right;margin-bottom: 15px&quot;&gt;Close&lt;/button&gt;\n\t\t&lt;table id=&quot;feedsTableDialog&quot;&gt;\n\t\t\t&lt;thead&gt;\n\t\t\t\t&lt;tr&gt;\n\t\t\t\t\t&lt;th&gt;Feed URL&lt;/th&gt;\n\t\t\t\t\t&lt;th&gt;Actions&lt;/th&gt;\n\t\t\t\t&lt;/tr&gt;\n\t\t\t&lt;/thead&gt;\n\t\t\t&lt;tbody&gt;\n\t\t\t&lt;/tbody&gt;\n\t\t&lt;/table&gt;\n\n\t\t&lt;p&gt;\n\t\t\t&lt;input type=&quot;url&quot; id=&quot;feedUrl&quot; placeholder=&quot;Enter Feed URL&quot; /&gt;\n\t\t\t&lt;button id=&quot;addFeedButton&quot;&gt;Add Feed&lt;/button&gt;\n\t\t&lt;/p&gt;\n\t&lt;/dialog&gt;\n\n\t&lt;script src=&quot;/app.js&quot; is:inline&gt;&lt;/script&gt;\n\n&lt;/BaseLayout&gt;\n</code></pre>\n<p>The <code>&lt;BaseLayout&gt;</code> wrapper just sets up HTML wrapper that would be useful if I had more than one page to be displayed, but even with one such page, I like having the abstraction. Note that the <code>dialog</code> element is hidden when initially viewing the page, it only shows up when the <code>Manage Feeds</code> button is clicked. For completeness, here it is in <code>BaseLayout.astro</code>:</p>\n<pre><code class=\"language-html\">---\nimport '../css/app.css';\n\nconst { pageTitle } = Astro.props;\n---\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;{pageTitle}&lt;/title&gt; \n    \n    &lt;meta name=&quot;generator&quot; content={Astro.generator} /&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.simplecss.org/simple.min.css&quot;&gt;\n&lt;/head&gt;\n\n&lt;body class=&quot;line-numbers&quot;&gt;\n\n    &lt;header&gt;\n    &lt;h1&gt;RSS Aggregator&lt;/h1&gt;\n    &lt;/header&gt;\n\n    &lt;main&gt;\n        &lt;h2&gt;{pageTitle}&lt;/h2&gt;\n    &lt;slot/&gt;\n    &lt;/main&gt;\n\n    &lt;footer&gt;\n    \t&lt;button id=&quot;showDialogButton&quot;&gt;Manage Feeds&lt;/button&gt;\n    &lt;/footer&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The fun part comes in the JavaScript. I begin by declaring a few global variables, and setting up the code I want to run when the page loads:</p>\n<pre><code class=\"language-js\">let feeds = [];\nlet $content, $dialog, $showDialogBtn, $closeDialogBtn, $addFeedBtn, $feedUrl, $feedTableDialog;\n\ndocument.addEventListener('DOMContentLoaded', async () =&gt; {\n\n    $content = document.querySelector('#content');\n    $feedTableDialog = document.querySelector('#feedsTableDialog tbody');\n    $showDialogBtn = document.querySelector('#showDialogButton');\n    $dialog = document.querySelector('#manageFeedsDialog');\n    $closeDialogBtn = document.querySelector('#manageFeedsDialog button');\n    $addFeedBtn = document.querySelector('#addFeedButton');\n    $feedUrl = document.querySelector('#feedUrl');\n\n    $showDialogBtn.addEventListener(&quot;click&quot;, async () =&gt; {\n        // before we show the dialog, get our feeds and render to table\n        await renderFeedsDialog();\n        $dialog.showModal();\n    });\n\n    $closeDialogBtn.addEventListener(&quot;click&quot;, () =&gt; {\n        loadFeedItems();\n        $dialog.close();\n    });\n\n    $addFeedBtn.addEventListener(&quot;click&quot;, async () =&gt; {\n\n        if($feedUrl.checkValidity() === false) {\n            $feedUrl.reportValidity();\n            return;\n        }\n\n        const feedUrl = $feedUrl.value;\n        if (feedUrl) {\n            console.log(`Adding feed: ${feedUrl}`);\n            let feeds = await getFeeds();\n            feeds.push(feedUrl);\n            window.localStorage.setItem('feeds', JSON.stringify(feeds));\n            await renderFeedsDialog();\n            $feedUrl.value = '';\n        }\n    });\n\n    loadFeedItems();\n});\n</code></pre>\n<p>You can see there the event logic to handle showing the dialog as well as the handler for adding a RSS field. As you can see, I'm using <code>window.localStorage</code> for storage which means you can leave and come back, and the application will know what feeds you care about. I've got a simple wrapper to get them as well:</p>\n<pre><code class=\"language-js\">async function getFeeds() {\n    let f = window.localStorage.getItem('feeds');\n    if (f) {\n        return JSON.parse(f);\n    } else {\n        return [];\n    }\n}\n</code></pre>\n<p>Now one quick note. <code>LocalStorage</code> is not asynchronous, it's blocking, but I built my function with the idea that in the future, I could switch to IndexDB or another solution entirely. That may be overkill now, but it doesn't hurt anything.</p>\n<p>Here's how I handle rendering the feeds in the dialog, as well as deletions:</p>\n<pre><code class=\"language-js\">async function renderFeedsDialog() {\n    let feeds = await getFeeds();\n    let content = '';\n    feeds.forEach(f =&gt; {\n        content += `&lt;tr&gt;&lt;td&gt;${f}&lt;/td&gt;&lt;td&gt;&lt;button onclick=&quot;deleteFeed('${f}')&quot;&gt;Delete&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;`;\n    })\n    $feedTableDialog.innerHTML = content;\n}\n\nasync function deleteFeed(feedUrl) {\n    let feeds = await getFeeds();\n    feeds = feeds.filter(f =&gt; f !== feedUrl);\n    window.localStorage.setItem('feeds', JSON.stringify(feeds));\n    await renderFeedsDialog();\n}\n</code></pre>\n<p>Next up is the code that calls for feed items and handles rendering them:</p>\n<pre><code class=\"language-js\">async function loadFeedItems() {\n    console.log('Loading feed items...');\n    let feeds = await getFeeds();\n\n    if(feeds.length === 0) {\n        $content.innerHTML = '&lt;p&gt;No feeds available. Please add some feeds using the button below!&lt;/p&gt;';\n        return;\n    }\n    \n    $content.innerHTML = '&lt;i&gt;Loading feed items...&lt;/i&gt;';\n    let qs = new URLSearchParams({\n        feeds\n    }).toString();\n\n    let items = await fetch(`/loaditems?${qs}`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json'\n        }        \n    });\n    let data = await items.json();\n    console.log('Fetched feed items', data.length);\n    let result = '';\n    data.forEach(item =&gt; {\n        result += `&lt;div class=&quot;feedItem&quot;&gt;\n            &lt;h3&gt;&lt;a href=&quot;${item.link}&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;${item.title}&lt;/a&gt;&lt;/h3&gt;\n            &lt;p&gt;${snippet(item.content)}&lt;/p&gt;\n            &lt;p&gt;&lt;em&gt;From: ${item.feedTitle} | Published: ${new Date(item.pubDate).toLocaleString()}&lt;/em&gt;&lt;/p&gt;\n        &lt;/div&gt;`;\n    });\n    $content.innerHTML = result;\n}\n</code></pre>\n<p>This is pretty vanilla network calling with <code>fetch</code>, although I'll note that I had some qualms about using the query string. There <em>are</em> limits to how long that could be, and in theory, I should switch to a <code>POST</code> probably.</p>\n<p>The last bit of client-side code is <code>snippet</code>, which handles the content of the feed item:</p>\n<pre><code class=\"language-js\">/*\nI clean the content from parsing to remove HTML and reduce size\n*/\nfunction snippet(content) {\n    content = content.replace(/(&lt;([^&gt;]+)&gt;)/gi, &quot;&quot;); // remove HTML tags\n    const maxLength = 200;\n    if (content.length &lt;= maxLength) {\n        return content;\n    } else {\n        return content.substring(0, maxLength) + '...';\n    }\n}\n</code></pre>\n<p>I should probably move that <code>maxLength</code> up top. I'll do so. Eventually.</p>\n<h2 id=\"fetching-rss-items\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#fetching-rss-items\">Fetching RSS Items</a></h2>\n<p>Now for the fun part, fetching RSS items. For this, I made use of the <a href=\"https://www.npmjs.com/package/rss-parser\">rss-parser</a> Node package. The logic is relatively simple - given a call to the route with a list of RSS urls, fetch them, parse them, sort them by date, and return, but as an added wrinkle, I made use of <a href=\"https://docs.netlify.com/build/data-and-storage/netlify-blobs/\">Netlify Blobs</a> for easy caching. Here's the server-side route I built named <code>loaditems.js</code>:</p>\n<pre><code class=\"language-js\">import Parser from 'rss-parser';\nimport { getStore } from &quot;@netlify/blobs&quot;;\n\nconst TTL = 1000 * 60 * 60; // 1 hour cache \n\nexport async function GET({ request }) {\n\n    const store = getStore('rssagg-store');\n    const url = new URL(request.url);\n    const feeds = url.searchParams.get('feeds').split(',');\n    const parser = new Parser();\n    console.log('Feeds requested:', feeds);\n    let items = [];\n\n    let reqs = [];\n    for (const feedUrl of feeds) {\n        // first, do we have this in cache?\n        const cacheKey = `feedcache-${encodeURIComponent(feedUrl)}`;\n        let cached = await store.get(cacheKey);\n        if(cached) {\n            cached = JSON.parse(cached);\n            // check age\n            const now = Date.now();\n            if(now - cached.timestamp &lt; TTL) {\n                console.log(`Using cached feed for ${feedUrl}`);\n                items.push(...cached.items);\n            } else {\n                console.log(`Cache expired for ${feedUrl}, fetching new data.`);\n                reqs.push(parser.parseURL(feedUrl));\n            }\n        } else {\n            console.log(`No cache for ${feedUrl}, fetching data.`);\n            reqs.push(parser.parseURL(feedUrl));\n        }\n\n    }\n\n    const results = await Promise.allSettled(reqs);\n    for (const result of results) {\n        if (result.status === 'fulfilled') {\n            const feed = result.value;\n            console.log(`Fetched feed: ${feed.title} with ${feed.items.length} items.`);\n            let newItems = [];\n            feed.items.forEach(item =&gt; {\n                /*\n                will use content as a grab all for different fields\n                for example, netlify had summary, not content\n                */\n                let content = item.contentSnippet || item.summary || item.content || '';\n                newItems.push({\n                    title: item.title,\n                    link: item.link,\n                    content: content,\n                    pubDate: item.pubDate,\n                    feedTitle: feed.title\n                });\n            });\n\n            items.push(...newItems);\n\n            // cache the feed\n            const cacheKey = `feedcache-${encodeURIComponent(feed.feedUrl)}`;\n            console.log(`Caching feed data for ${feed.feedUrl}`);\n            await store.setJSON(cacheKey, {\n                timestamp: Date.now(),\n                items: newItems\n            });\n        } else {\n            console.error('Error fetching/parsing feed:', result.reason);\n        }\n    }\n\n    // now sort items by pubDate descending\n    items.sort((a, b) =&gt; new Date(b.pubDate) - new Date(a.pubDate));\n\n    return new Response(JSON.stringify(items), {\n        status: 200,\n        headers: {\n        &quot;Content-Type&quot;: &quot;application/json&quot;,\n        },\n    });\n}\n</code></pre>\n<p>The cache is based on the RSS URL so in theory, if two users come in requesting the same feed, they all get the benefit of the cache. I cache for one hour, which frankly could be a lot more. I blog <em>a lot</em> and even I don't usually have more than 2 or 3 a week, so feel free to tweak this as you see fit if you play with the code.</p>\n<h2 id=\"check-it-out!\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#check-it-out!\">Check It Out!</a></h2>\n<p>Ok, if you want to try this out yourself, head over to <a href=\"https://astrorssagg.netlify.app/\">https://astrorssagg.netlify.app/</a> and try adding a few feeds. Let me know how it works for you. The complete code of the application may be found here: <a href=\"https://github.com/cfjedimaster/astro-tests/tree/main/rssagg\">https://github.com/cfjedimaster/astro-tests/tree/main/rssagg</a></p>\n<h2 id=\"but-wait...\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#but-wait...\">But Wait...</a></h2>\n<p>Ok, that's all I have to say about the application, and in theory, you can stop reading now, but I <strong>really</strong> want to comment on something. The DX (developer experience) of using Astro on Netlify is incredible. Like, I was in shock at how things &quot;just worked&quot;. Multiple times I was <em>certain</em> I was going to hit a roadblock, need to configure and tweak something, and honestly, that never happened. Here's what I found.</p>\n<p>The first thing I did was add the <a href=\"https://docs.netlify.com/build/frameworks/framework-setup-guides/astro/\">Netlify adapter</a>, which comes down to:</p>\n<pre><code>npx astro add netlify\n</code></pre>\n<p>By itself, that was enough, but I wanted my server-side RSS parser to run on the server, which means I had to changeone line in <code>astro.config.js</code>. By default, the <code>defineConfig</code> looks like this after adding the adapter:</p>\n<pre><code class=\"language-js\">export default defineConfig({\n  adapter: netlify()\n});\n</code></pre>\n<p>I added the <code>output</code> parameter:</p>\n<pre><code class=\"language-js\">export default defineConfig({\n  output: 'server',\n  adapter: netlify()\n});\n</code></pre>\n<p>That was it, literally. I'm pretty sure I could have specified <code>server</code> output just for my one route, but this was the quick and dirty solution. I was sure I'd have to rewrite my code into a Netlify Function, but nope, it just worked.</p>\n<p>Speaking of just working, blob support also just worked. Honestly I'm not even 100% sure I know how. In production, I know it automatically picks up on the right environment settings to associate the blobs with the site. Locally, I've got no clue. It's definitely a <em>different</em> store, not the production one, but again, it just plain worked.</p>\n<p>I just want to give a huge shout out to the Astro team, and Netlify, for making this so freaking pleasant!</p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/02/02/building-an-rss-aggregator-with-astro"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Interrogate Your PDFs with Chrome AI",
    "partialText": "<p>Yesterday I <a href=\"https://www.raymondcamden.com/2026/01/28/summarizing-pdfs-with-on-device-ai\">blogged</a> about using <a href=\"https://mozilla.github.io/pdf.js/\">PDF.js</a> and Chrome's <a href=\"https://developer.chrome.com/docs/ai/built-in\">on-device AI</a> to create summaries of PDF documents, all within the browser, for free. In that post I mentioned it would be possible to build a Q and A system so users could ask questions about the document, and like a dog with a bone, I couldn't let it go. Last I built not one, but two demos of this. Check it out.</p>\n<h2 id=\"version-one\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#version-one\">Version One</a></h2>\n<p>Before I begin, note that this version makes use of the <a href=\"https://developer.chrome.com/docs/ai/prompt-api\">Prompt API</a>, which is still behind a flag in Chrome. For this demo to work for you, you would need the latest Chrome and the right flags enabled. The Prompt API is available in extensions without the flag and it wouldn't surprise me if this requirement is removed in the next few months. Than again, I don't speak for Google so take that with a Greenland-sized grain of salt.</p>\n<p>If you remember, I shared the code <a href=\"https://www.raymondcamden.com/2026/01/28/summarizing-pdfs-with-on-device-ai\">yesterday</a> that parsed a PDF and grabbed the text, so today I'll focus on the changes to allow for questions.</p>\n<p>First, the HTML now includes a text box. I hide this in CSS until a PDF is selected and parsed.</p>\n<pre><code class=\"language-html\">&lt;h2&gt;PDF Q &amp; A&lt;/h2&gt;\n&lt;p&gt;\nSelect a PDF and then ask questions. \n&lt;input type=&quot;file&quot; id=&quot;pdf-upload&quot; accept=&quot;.pdf&quot; /&gt;\n&lt;/p&gt;\n&lt;div id=&quot;chatArea&quot;&gt;\n\t&lt;input id=&quot;question&quot;&gt; &lt;button id=&quot;ask&quot;&gt;Ask about the PDF&lt;/button&gt;\n\t&lt;div id=&quot;response&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>In the JavaScript, I once again use feature detection:</p>\n<pre><code class=\"language-js\">async function canDoIt() {\n\tif(!window.LanguageModel) return false;\n\treturn (await LanguageModel.availability()) !== 'unavailable';\n}\n\n// in my DOMContentLoaded event handler:\n\n// do an early check\nlet weCanDoIt = await canDoIt();\nif(!weCanDoIt) {\n    alert(&quot;Sorry, this browser can't use the Prompt API.&quot;);\n    return;\n}\n</code></pre>\n<p>After the user has selected a PDF and the text is parsed, I then run <code>enableChat</code>:</p>\n<pre><code class=\"language-js\">async function enableChat(text,title) {\n\t$chatArea.style.display = 'block';\n\tlet session = await LanguageModel.create({\n\t\tinitialPrompts: [\n\t\t\t{role:'system', content:`You answer questions about a PDF document. You only answer questions about the document. If the user tries to ask about something else, tell them you cannot answer it. Here is the text of the document:\\n\\n${text}`}\n\t\t]\n\t});\n\t\n\t$ask.addEventListener('click', async () =&gt; {\n\t\t$response.innerHTML = '';\n\t\tlet q = $question.value.trim();\n\t\tif(q === '') return;\n\t\tconsole.log(`ask about ${q}`);\n\t\t$response.innerHTML = '&lt;i&gt;working...&lt;/i&gt;';\n\t\tlet response = await session.prompt(q);\n\t\tconsole.log(`response: ${response}`);\n\t\t$response.innerHTML = marked.parse(response);\n\t});\n}\n</code></pre>\n<p>Note in the system instruction I tell the model to stick to the PDF, so if the user does something cute like, &quot;why are cats better than dogs&quot;, the system will direct them back to the document. I had to put two statements about this in the system information as one didn't seem to be good enough.</p>\n<p>I'll include the demo below, but assuming most of you won't be able to run it, here's a few examples using an incredibly boring Adobe security document.</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/pdf2.jpg\" loading=\"lazy\" alt=\"result of asking what the document is about\" class=\"imgborder imgcenter\">\n</p>\n<p>That's pretty much the same as the summary, so let's try something specific:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/pdf3.jpg\" loading=\"lazy\" alt=\"result of asking about security levels\" class=\"imgborder imgcenter\">\n</p>\n<p>And finally, here's what happens if I try to go off topic:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/pdf4.jpg\" loading=\"lazy\" alt=\"result of asking about black holes\" class=\"imgborder imgcenter\">\n</p>\n<p>As a reminder, you can't use beefy PDFs in this demo, and unlike yesterday's post, I didn't add a good error handler for that. Sorry!</p>\n<p class=\"codepen\" data-height=\"500\" data-theme-id=\"dark\" data-default-tab=\"result\" data-slug-hash=\"vEKpzRZ\" data-pen-title=\"Chrome AI, PDF.js - QA\" data-preview=\"true\" data-user=\"cfjedimaster\" style=\"height: 500px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\">\n      <span>See the Pen <a href=\"https://codepen.io/cfjedimaster/pen/vEKpzRZ\">\n  Chrome AI, PDF.js - QA</a> by Raymond Camden (<a href=\"https://codepen.io/cfjedimaster\">@cfjedimaster</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n      </p>\n      <script async src=\"https://public.codepenassets.com/embed/index.js\"></script>\n<h2 id=\"version-two\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#version-two\">Version Two</a></h2>\n<p>I was pretty happy with the initial version, but I was curious if the on-device model could handle creating references to the document?</p>\n<p>I began by keeping the page text in an array instead of one big string:</p>\n<pre><code class=\"language-js\">let fullText = [];\n\nfor (let i = 1; i &lt;= pdf.numPages; i++) {\n    const page = await pdf.getPage(i);\n\n    const textContent = await page.getTextContent();\n\n    // Note: 'item.str' is the raw string. 'item.hasEOL' can be used for formatting.\n    const pageText = textContent.items.map(item =&gt; item.str).join(' ');\n\n    fullText.push(pageText);\n}\n</code></pre>\n<p>Then I modified by <code>enableChat</code> a few ways. First, I created a new block of text that marked the pages:</p>\n<pre><code class=\"language-js\">let pagedText = '';\ntextArr.forEach((t,x) =&gt; {\n    pagedText += `\n    \nPage ${x+1}:\n${t}\n\n`;\n});\n</code></pre>\n<p>I think this could be better, perhaps with a <code>---</code> around the page content. Next I modified the system prompt:</p>\n<pre><code class=\"language-js\">let session = await LanguageModel.create({\n    initialPrompts: [\n        {role:'system', content:`You answer questions about a PDF document. You only answer questions about the document. If the user tries to ask about something else, tell them you cannot answer it. The text is split into pages marked by: &quot;Page X:&quot;, where X represents the page number. When you answer questions, always give a reference to the page where you found your answer. Here is the text of the document:\\n\\n${pagedText}`}\n    ]\n});\n</code></pre>\n<p>Oddly, this wasn't enough. I'd ask a question, but wouldn't get references. However, if I <em>asked</em> for references, I did. So the final change was to prefix each user prompt as well:</p>\n<pre><code class=\"language-js\">let response = await session.prompt(`When answering this question, try to include the page number: ${q}`);\n</code></pre>\n<p>This seemed to do it:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/pdf5.jpg\" loading=\"lazy\" alt=\"result of adding page references\" class=\"imgborder imgcenter\">\n</p>\n<p>This is not always accurate. For example, when I asked: &quot;what can you tell me about adobe confidential data?&quot;, which is covered in detail on page 3, the result focused on page 2. The confidential data classification is <em>introduced</em> on page 2, but is covered more in depth on page 3. Maybe improving the page formatting in the prompt would help here, but I'm happy with this demo so far. (If you want a copy of the PDF I tested with, you can find it <a href=\"https://github.com/cfjedimaster/ai-testingzone/blob/main/pdf_test/adobe_security_properly_ocr.pdf\">here</a>.)</p>\n<p class=\"codepen\" data-height=\"500\" data-theme-id=\"dark\" data-default-tab=\"result\" data-slug-hash=\"PwzEdxe\" data-pen-title=\"Chrome AI, PDF.js - QA\" data-preview=\"true\" data-user=\"cfjedimaster\" style=\"height: 500px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;padding-bottom: 10px;\">\n      <span>See the Pen <a href=\"https://codepen.io/cfjedimaster/pen/PwzEdxe\">\n  Chrome AI, PDF.js - QA</a> by Raymond Camden (<a href=\"https://codepen.io/cfjedimaster\">@cfjedimaster</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n      </p>\n      <script async src=\"https://public.codepenassets.com/embed/index.js\"></script>\n<br>\nAs I said yesterday, give these demos a spin and let me know what you think!",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/01/29/interrogate-your-pdfs-with-chrome-ai"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Summarizing PDFs with On-Device AI",
    "partialText": "<p>You can take the man out of the PDFs, but you can't take the PDFs out of the man. Ok, I'm not sure that exactly makes sense, but with a couple years in me of working with PDFs, I find myself using them quite often with my AI demos. For today, I'm going to demonstrate something that's been on my mind in a while - doing summarizing of PDFs completely in the browser, with Chrome's <a href=\"https://developer.chrome.com/docs/ai/built-in\">on-device AI</a>. Unlike the Prompt API, summarization has been released since Chrome 138, so most likely those of you on Chrome can run these demos without problem. (You can see more about the AI API <a href=\"https://developer.chrome.com/docs/ai/built-in-apis\">statuses</a> if you're curious.)</p>\n<h2 id=\"getting-pdf-text---client-side\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getting-pdf-text---client-side\">Getting PDF Text - Client-Side</a></h2>\n<p>There's plenty of options for getting PDF text on the server-side, either via open source libraries or APIs. For this demo I made use of <a href=\"https://mozilla.github.io/pdf.js/\">PDF.js</a>. This is an open source library sponsored by Mozilla that's been around for a while. It supports parsing and rendering PDFs, but for my use-case, I just needed to parse it. The code for that part is actually really simple, once I used Google Gemini to help me with it.</p>\n<p>First I added the library CDN: https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js</p>\n<p>Next, I followed the advice from Gemini to specify a worker source for performance reasons:</p>\n<pre><code class=\"language-js\">pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';\n</code></pre>\n<p>This was suggested by Gemini, but I did followup research and confirmed this makes sense.</p>\n<p>For the actual PDF parsing, I based it on an file input change event, like so:</p>\n<pre><code class=\"language-js\">document.querySelector('#pdf-upload').addEventListener('change', async (e) =&gt; {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const arrayBuffer = await file.arrayBuffer();\n\n    const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;\n\n    let fullText = '';\n\n    for (let i = 1; i &lt;= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n\n        const textContent = await page.getTextContent();\n\n        // Note: 'item.str' is the raw string. 'item.hasEOL' can be used for formatting.\n        const pageText = textContent.items.map(item =&gt; item.str).join(' ');\n\n        fullText += pageText;\n    }\n\n});\n</code></pre>\n<p>That's pretty much it, and in my testing, this worked <em>really</em> fast, like surprisingly fast. Note that you can get more than just the text of course. My final code gets the title as well so I can render that. Check the <a href=\"https://mozilla.github.io/pdf.js/getting_started/\">PDF.js docs</a> for a full understanding of everything possible.</p>\n<h2 id=\"the-demo\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-demo\">The Demo</a></h2>\n<p>Ok, so given that I can get the PDF text easily enough, it was now time to use the <a href=\"https://developer.chrome.com/docs/ai/summarizer-api\">Summarizer API</a>. I've blogged about Chrome AI <em>many</em> times now but as a reminder, the process generally looks like so:</p>\n<ul>\n<li>First do feature detection to see if the API is available at all.</li>\n<li>Then see if the API is available, this can return <code>unavailable</code>, which means the device isn't able to use the API for a few different reasons, <code>available</code> which means it is good to go, or <code>downloadable</code> which means the model will be downloaded. This can take some time and you should let the user know.</li>\n<li>Finally, make an instance of the model. Once you have that, you can run <code>summarize()</code> and Bob's your uncle.</li>\n</ul>\n<p>First, my demo has a bit of HTML, both for the input field and a place to provide output:</p>\n<pre><code class=\"language-html\">&lt;h2&gt;PDF Summarization&lt;/h2&gt;\n&lt;p&gt;\nSelect a PDF and Chrome AI will be used to summarize it. \n&lt;input type=&quot;file&quot; id=&quot;pdf-upload&quot; accept=&quot;.pdf&quot; /&gt;\n&lt;/p&gt;\n&lt;div id=&quot;output&quot;&gt;&lt;/div&gt;\n</code></pre>\n<p>Now, the JavaScript:</p>\n<pre><code class=\"language-js\">pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';\n\ndocument.addEventListener('DOMContentLoaded', init, false);\n\nlet $output;\n\nasync function init() {\n\t\n\t// do an early check\n\tif('Summarizer' in window) {\n\t\t// You can haz summary\n\t\tlet available = (await window.Summarizer.availability());\n\t\tconsole.log('available?', available);\n\t\tif (available === 'unavailable') {\n\t\t\t// The Summarizer API isn't usable.\n\t\t\talert(&quot;Sorry, this demo will not work for you.&quot;);\n\t\t\treturn;\n\t\t}\n\t}\n\n\t$output = document.querySelector('#output');\n\t\n\tdocument.querySelector('#pdf-upload').addEventListener('change', async (e) =&gt; {\n\t\t$output.innerHTML = '';\n\t\tconst file = e.target.files[0];\n\t\tif (!file) return;\n\n\t\tconst arrayBuffer = await file.arrayBuffer();\n\n\t\tconst pdf = await pdfjsLib.getDocument(arrayBuffer).promise;\n\n\t\tlet fullText = '';\n\n\t\tfor (let i = 1; i &lt;= pdf.numPages; i++) {\n\t\t\tconst page = await pdf.getPage(i);\n\n\t\t\tconst textContent = await page.getTextContent();\n\n\t\t\t// Note: 'item.str' is the raw string. 'item.hasEOL' can be used for formatting.\n\t\t\tconst pageText = textContent.items.map(item =&gt; item.str).join(' ');\n\n\t\t\tfullText += pageText;\n\t\t}\n\n\t\tconst meta = await pdf.getMetadata();\n\t\tconsole.log('meta?', meta);\n\t\tdoSummary(fullText, meta.info.Title || 'No Title Found');\n\n\t});\n\n}\n\nasync function doSummary(text, title) {\n\t\t$output.innerHTML = &quot;&lt;i&gt;PDF text extracted, working on the summary.&quot;;\n\n\t\tsummarizer = await window.Summarizer.create({\n\t\t\t\tmonitor(m) {\n\t\t\t \t\tm.addEventListener(&quot;downloadprogress&quot;, e =&gt; {\n\t\t\t\t\t\tconsole.log(`Downloaded ${e.loaded * 100}%`);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\twhy this? the download event _always_ runs at\n\t\t\t\t\t\tleast once, so this prevents the msg showing up\n\t\t\t\t\t\twhen its already done. I've seen it report 0 and 1\n\t\t\t\t\t\tin this case, so we skip both\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif(e.loaded === 0 || e.loaded === 1) return;\n\t\t\t\t\t\t$output.innerHTML = `Downloading the Summary model, currently at ${Math.floor(e.loaded * 100)}%`;\n\t\t\t\t});\n\t\t\t}\n\t});\n\n\ttry {\n\t\tlet summary = await summarizer.summarize(text);\n\t\t$output.innerHTML = `&lt;h3&gt;Summary for ${title}&lt;/h3&gt;${marked.parse(summary)}`;\n\t}catch(e) {\n\t\tif(e.name === 'QuotaExceededError') {\n\t\t\t$output.innerHTML = 'Unfortunately this PDF was too large!';\n\t\t} else {\n\t\t\t$output.innerHTML = `Some other error was thrown: ${e}`;\n\t\t}\n\t\tconsole.log(e);\n\t}\n\t\n}\n</code></pre>\n<p>The first half is what I've already covered - getting the text of a PDF file. The only difference is that I added a call to get the metadata of the PDF so I could possibly render the title as well.</p>\n<p>The second half, <code>doSummary</code>, is where the AI work is done. I create the summary object (using default values, the API actually supports multiple <a href=\"https://developer.chrome.com/docs/ai/summarizer-api#api-functions\">different styles</a> of summarization) and then attempt to summarize.</p>\n<p>Now - here comes the biggest issue. Right now the model can't summarize large PDFs. You can see I'm handling that with a specific <code>catch</code> handler that makes this clear. There is <em>absolutely</em> a way around this! One classic way is to do summaries of summaries. Given that PDF.js returns text in pages, I could keep an array of pages, and then do batches of summaries, let's say 10 pages at a time. 10 is a guess and given that a PDF page may have a lot or a little text, it's really something you would need to test and see what works best. For this demo though I kept it simple - just report an error.</p>\n<p>You can play with this below, but if you're curious as to the results, here's a few test results. First, I tried a PDF version of my <a href=\"https://www.raymondcamden.com/resume.html\">resume</a> (note that I've not updated it yet to include Webflow, will do that soon!).</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/pdf1.jpg\" loading=\"lazy\" alt=\"results of parsing my resume\" class=\"imgborder imgcenter\">\n</p>\n<p>That's pretty darn accurate I'd say. Want to try it yourself? Check it out below:</p>\n<p class=\"codepen\" data-height=\"500\" data-theme-id=\"dark\" data-default-tab=\"result\" data-slug-hash=\"ogLpGBE\" data-pen-title=\"Test PDF.js for Text / Summary\" data-user=\"cfjedimaster\" style=\"height: 500px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\">\n      <span>See the Pen <a href=\"https://codepen.io/cfjedimaster/pen/ogLpGBE\">\n  Test PDF.js for Text / Summary</a> by Raymond Camden (<a href=\"https://codepen.io/cfjedimaster\">@cfjedimaster</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n      </p>\n      <script async src=\"https://public.codepenassets.com/embed/index.js\"></script>\n<h2 id=\"more-features-and-examples\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#more-features-and-examples\">More Features and Examples</a></h2>\n<p>This example just focused on the Summary API, but you could absolutely try other APIs as well. For example, the Prompt API would let you literally ask questions of the PDF (and I may build this), something that I believe Acrobat charges for. (Ahem, no shade being thrown, honest. Mostly.) You could also do language detection and translation.</p>\n<p>My buddy on the Chrome team Thomas Steiner has some great examples of this: <a href=\"https://chrome.dev/web-ai-demos/document-translator/\">https://chrome.dev/web-ai-demos/document-translator/</a></p>\n<p>Let me know what you think!</p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/01/28/summarizing-pdfs-with-on-device-ai"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Links For You (1/25/26)",
    "partialText": "<p>I write this in the midst of a huge ice event - which thankfully isn't so bad here in south Louisiana. We're very cold and rainy, but no real ice yet, which is good. The worst is coming in later tonight and the schools have already shut down, but thankfully I work at home so there's no need to get on the roads. Today is also the 26th birthday of my eldest child, which makes the age ranges of my little army (8 kids total) go from 10 to 26. Wow.</p>\n<h2 id=\"temporal-is-coming...\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#temporal-is-coming...\">Temporal is Coming...</a></h2>\n<p>Ok, most likely you've seen this across your feeds already, I swear I saw it at least ten times, but <a href=\"https://piccalil.li/blog/date-is-out-and-temporal-is-in/\">&quot;Date is out, Temporal is in&quot;</a> is a great introduction to the new date hotness in JavaScript, the Temporal API.</p>\n<p>According to MDN, the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Temporal#browser_compatibility\">support is good</a> so I imagine I'll be using this soon myself.</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/issohot.jpg\" loading=\"lazy\" alt=\"Temporal is so hot right now\" class=\"imgborder imgcenter\">\n</p>\n<h2 id=\"the-personal-site-is-back!\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-personal-site-is-back!\">The Personal Site is Back!</a></h2>\n<p>Or at least that's what I hear. Personally, I miss seeing all the cute, weird, personal web pages from the old days, so any effort to help promote this trend is a good thing in my book. <a href=\"https://personalsit.es/\">Personalsit.es</a> is a collection of personal web sites and a quick way to hop to a <a href=\"https://personalsit.es/random\">random</a> one. Anyone can submit a PR to add your own. (I did!)</p>\n<h2 id=\"free-apis-to-get-your-hack-on\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#free-apis-to-get-your-hack-on\">Free APIs to Get Your Hack On</a></h2>\n<p>This isn't new, but I love a good API, and what's better than one good API? How about near 500 of them! <a href=\"https://www.freepublicapis.com/\">Free Public APIs</a> is exactly what it sounds like, a collection of free APIs. Building simple API wrappers are a <em>great</em> way to learn a new language. Sadly though there are only <a href=\"https://www.freepublicapis.com/tags/search/cats?query=cats\">three cat APIs</a> - someone fix that please!</p>\n<h2 id=\"just-for-fun\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#just-for-fun\">Just For Fun</a></h2>\n<p>Another music discovery for me, hemlocke springs is an American singer and songwriter who just started being active in the music scene over the past few years. She's got a great sound, and while this is the only track I've tried so far, I'm looking forward to listening to more from her.</p>\n<lite-youtube videoid=\"tDA2qMV2KmA\" style=\"background-image: url('https://i.ytimg.com/vi/tDA2qMV2KmA/hqdefault.jpg');\">\n  <a href=\"https://youtube.com/watch?v=tDA2qMV2KmA\" class=\"lty-playbtn\" title=\"Play Video\">\n    <span class=\"lyt-visually-hidden\">Play Video</span>\n  </a>\n</lite-youtube>\n<script defer src=\"https://cdnjs.cloudflare.com/ajax/libs/lite-youtube-embed/0.3.2/lite-yt-embed.js\"></script>\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/lite-youtube-embed/0.3.2/lite-yt-embed.css\" integrity=\"sha512-utq8YFW0J2abvPCECXM0zfICnIVpbEpW4lI5gl01cdJu+Ct3W6GQMszVITXMtBLJunnaTp6bbzk5pheKX2XuXQ==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n<p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/01/25/links-for-you-12526"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Building a UI for Gemini File Stores",
    "partialText": "<p>Back in November of last year I wrote up a blog post talking about a new (at the time) Google Gemini feature, File Stores: <a href=\"https://www.raymondcamden.com/2025/11/17/gemini-file-search-file-stores-for-easy-rag\">&quot;Gemini File Search and File Stores for Easy RAG&quot;</a>. In that post I discussed what it was, how it worked, and built up a simple example. You should definitely read that post first, but if you want the TLDR, here ya go:</p>\n<p><a href=\"https://ai.google.dev/gemini-api/docs/file-search\">File Stores</a> (referred to as &quot;File Search&quot;) expands on Gemini's previous ability to work on files in a temporary fashion by allowing you to create a permanent &quot;store&quot; of folders. You can use this for RAG systems and use flexible metadata filter for complex queries.</p>\n<p>This feature has been out for a few months now and I've wanted to play with it more, but found myself facing an issue - I'm lazy. Ok, not lazy, I just wasn't looking forward to the &quot;setup&quot; work to a) create the store once and b) populate the store before I could c) do GenAI powered searches against it. To be clear, this isn't an issue with the APIs, it's just the work you need to do ahead of time. It occurred to me that Google should provide a simple web-based tool for this, maybe not for production use, but for proofs of concepts and such. Since there isn't one (at least that I know of), I decided to build one.</p>\n<h2 id=\"the-gemini-file-stores-app\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-gemini-file-stores-app\">The Gemini File Stores App</a></h2>\n<p>My application is a simple Python Flask web app meant to be run locally with your Gemini API key defined in an environment variable. On starting up, you're presented with a list of your stores:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/fs1.jpg\" loading=\"lazy\" alt=\"screenshot of the file store listing\" class=\"imgborder imgcenter\">\n</p>\n<p>Clicking on View gives you a detailed listing of files, along with a chance to delete or upload new files:</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/fs2.jpg\" loading=\"lazy\" alt=\"screenshot of one file store\" class=\"imgborder imgcenter\">\n</p>\n<p>The search interface lets you pick a store, enter a query, and supply optional filtering. As I mentioned, the Gemini API here is pretty powerful. You could imagine a set of product diagrams that are categorized by type tied to a search interface that lets you select a product type before you ask questions.</p>\n<p>\n<img src=\"https://static.raymondcamden.com/images/2026/01/fs3.jpg\" loading=\"lazy\" alt=\"screenshot of search plus result\" class=\"imgborder imgcenter\">\n</p>\n<p>As I mentioned, the idea is that this is a local application. You download the bits <a href=\"https://github.com/cfjedimaster/ai-testingzone/tree/main/stores_ui\">here</a> (note, this isn't a stand alone repo, it's part of a bigger one - if this takes off I'll move it), copy your Gemini API key to the environment as <code>GEMINI_API_KEY</code>, install the dependencies (I don't have a requirements.txt file yet - will add one soon), and run it with <code>flask run</code>.</p>\n<h2 id=\"how-was-it-built%3F\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#how-was-it-built%3F\">How Was It Built?</a></h2>\n<p>Ok, so this is the interesting part, at least to me. I started off using Visual Studio Code's built-in AI agent to create mock UI files, you can find them here: <a href=\"https://github.com/cfjedimaster/ai-testingzone/tree/main/stores_ui/mockui\">https://github.com/cfjedimaster/ai-testingzone/tree/main/stores_ui/mockui</a>. This worked fine, but I realized I'd rather use Gemini to build a Gemini app so I then switched to Gemini's AI chat in Visual Studio Code and started doing my real work there. I absolulutely did <strong>not</strong> vibe code the whole thing. I absolutely <strong>did</strong> use AI to generate things bit by bit, which I then tweaked and tested, and iterated. This felt much safer than trying to do the whole thing at once.</p>\n<p>Here was my first prompt:</p>\n<pre><code>this folder is for a new application that will work with Google Gemini \nFile Stores. The mockui folder contains my mocks for how I invision \nthe application being built out. I want you to create a new Flask \napplication. The application will require a GEMINI_API_KEY set in a \n.env file, ie the application runs assuming a valid key. For now, \njust build the first page that shows a list of existing stores \nfor the account. When building, put all Gemini related calls \nin it's own Python class.\n</code></pre>\n<p>And later prompts were small bits here and there, basically handling the simple stuff I didn't need to write by hand. For the most part this just worked, although at times it hallucinated Gemini Python SDK methods that didn't actually exist. This is where I appreciated the fact I was doing things in small chunks - it made it easier to confirm, test, modify, and move on.</p>\n<p>Here's an example from later in the process:</p>\n<pre><code>modify app.py, a Flask app, to add a new route called storesearch. \nThis route will be called by front end JavaScript and should look \nfor 3 parameters - store, prompt, and metadataFilter. these args \nare passed to the search_store method in gemini_service.py. \nthe results are returned in json\n</code></pre>\n<p>I <em>really</em> dug this approach. I let the AI agent the more rote, boring aspects and I focused on getting the UI/UX just right. This AI thing might have a future. Maybe.</p>\n<p>Anyway, let me know if this is useful!</p>\n<p>Photo by <a href=\"https://unsplash.com/@omar_hassan?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Omar Hassan</a> on <a href=\"https://unsplash.com/photos/text-9YBh_HSfplc?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a></p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/01/22/building-a-ui-for-gemini-file-stores"
  },
  {
    "publisherId": "raymondcamden",
    "publisherName": "Raymond Camden",
    "specTitle": "JS/JAMstack",
    "categories": [
      "frontend"
    ],
    "specUrl": "https://www.raymondcamden.com/feed.xml",
    "title": "Using Chrome AI to Rewrite Monstrous JSON",
    "partialText": "<p>Happy Saturday folks, and while this is a topic I've covered many times here, I was bored and wanting to write some code, so I whipped up a quick demo. One of my favorite uses of AI is to take abstract data and write a human readable form of it. Now to be clear, this is not something you need AI for. Given that you know the shape of your data, you can create your own summary using hard-coded rules about what values to show, how to present them, and so forth. What I like about the Gen AI use-case for this is the amount of randomness and creativity you get in the responses. In the past I've done this with weather forecasts and chart data, but today I thought I'd try something different - monsters.</p>\n<p>A lot of Dungeons and Dragons content is available, legally even, online in API and JSON formats. The <a href=\"https://www.dnd5eapi.co/\">D&amp;D 5e API</a> includes information on all aspects of the game, from classes to spells to monsters. While the API is handy, I knew I wanted the raw data as is so I headed over to the <a href=\"https://github.com/5e-bits/5e-srd-api\">repo</a> and grabbed the raw <a href=\"https://github.com/5e-bits/5e-database/blob/main/src/2014/5e-SRD-Monsters.json\">monsters json file</a>. This JSON file contains information on every known monster. Here's an example, an you can see it is quite extensive (I won't be offended if you just skim this):</p>\n<textarea style=\"width:100%; height: 300px\">{\n    \"index\": \"unicorn\",\n    \"name\": \"Unicorn\",\n    \"size\": \"Large\",\n    \"type\": \"celestial\",\n    \"alignment\": \"lawful good\",\n    \"armor_class\": [\n      {\n        \"type\": \"dex\",\n        \"value\": 12\n      }\n    ],\n    \"hit_points\": 67,\n    \"hit_dice\": \"9d10\",\n    \"hit_points_roll\": \"9d10+18\",\n    \"speed\": {\n      \"walk\": \"50 ft.\"\n    },\n    \"strength\": 18,\n    \"dexterity\": 14,\n    \"constitution\": 15,\n    \"intelligence\": 11,\n    \"wisdom\": 17,\n    \"charisma\": 16,\n    \"proficiencies\": [],\n    \"damage_vulnerabilities\": [],\n    \"damage_resistances\": [],\n    \"damage_immunities\": [\n      \"poison\"\n    ],\n    \"condition_immunities\": [\n      {\n        \"index\": \"charmed\",\n        \"name\": \"Charmed\",\n        \"url\": \"/api/2014/conditions/charmed\"\n      },\n      {\n        \"index\": \"paralyzed\",\n        \"name\": \"Paralyzed\",\n        \"url\": \"/api/2014/conditions/paralyzed\"\n      },\n      {\n        \"index\": \"poisoned\",\n        \"name\": \"Poisoned\",\n        \"url\": \"/api/2014/conditions/poisoned\"\n      }\n    ],\n    \"senses\": {\n      \"darkvision\": \"60 ft.\",\n      \"passive_perception\": 13\n    },\n    \"languages\": \"Celestial, Elvish, Sylvan, telepathy 60 ft.\",\n    \"challenge_rating\": 5,\n    \"proficiency_bonus\": 3,\n    \"xp\": 1800,\n    \"special_abilities\": [\n      {\n        \"name\": \"Charge\",\n        \"desc\": \"If the unicorn moves at least 20 ft. straight toward a target and then hits it with a horn attack on the same turn, the target takes an extra 9 (2d8) piercing damage. If the target is a creature, it must succeed on a DC 15 Strength saving throw or be knocked prone.\"\n      },\n      {\n        \"name\": \"Innate Spellcasting\",\n        \"desc\": \"The unicorn's innate spellcasting ability is Charisma (spell save DC 14). The unicorn can innately cast the following spells, requiring no components:\\n\\nAt will: detect evil and good, druidcraft, pass without trace\\n1/day each: calm emotions, dispel evil and good, entangle\",\n        \"spellcasting\": {\n          \"ability\": {\n            \"index\": \"cha\",\n            \"name\": \"CHA\",\n            \"url\": \"/api/2014/ability-scores/cha\"\n          },\n          \"dc\": 14,\n          \"components_required\": [],\n          \"spells\": [\n            {\n              \"name\": \"Detect Evil and Good\",\n              \"level\": 1,\n              \"url\": \"/api/2014/spells/detect-evil-and-good\",\n              \"usage\": {\n                \"type\": \"at will\"\n              }\n            },\n            {\n              \"name\": \"Druidcraft\",\n              \"level\": 0,\n              \"url\": \"/api/2014/spells/druidcraft\",\n              \"usage\": {\n                \"type\": \"at will\"\n              }\n            },\n            {\n              \"name\": \"Pass Without Trace\",\n              \"level\": 2,\n              \"url\": \"/api/2014/spells/pass-without-trace\",\n              \"usage\": {\n                \"type\": \"at will\"\n              }\n            },\n            {\n              \"name\": \"Calm Emotions\",\n              \"level\": 2,\n              \"url\": \"/api/2014/spells/calm-emotions\",\n              \"usage\": {\n                \"type\": \"per day\",\n                \"times\": 1\n              }\n            },\n            {\n              \"name\": \"Dispel Evil and Good\",\n              \"level\": 5,\n              \"url\": \"/api/2014/spells/dispel-evil-and-good\",\n              \"usage\": {\n                \"type\": \"per day\",\n                \"times\": 1\n              }\n            },\n            {\n              \"name\": \"Entangle\",\n              \"level\": 1,\n              \"url\": \"/api/2014/spells/entangle\",\n              \"usage\": {\n                \"type\": \"per day\",\n                \"times\": 1\n              }\n            }\n          ]\n        }\n      },\n      {\n        \"name\": \"Magic Resistance\",\n        \"desc\": \"The unicorn has advantage on saving throws against spells and other magical effects.\"\n      },\n      {\n        \"name\": \"Magic Weapons\",\n        \"desc\": \"The unicorn's weapon attacks are magical.\"\n      }\n    ],\n    \"actions\": [\n      {\n        \"name\": \"Multiattack\",\n        \"multiattack_type\": \"actions\",\n        \"desc\": \"The unicorn makes two attacks: one with its hooves and one with its horn.\",\n        \"actions\": [\n          {\n            \"action_name\": \"Hooves\",\n            \"count\": 1,\n            \"type\": \"melee\"\n          },\n          {\n            \"action_name\": \"Horn\",\n            \"count\": 1,\n            \"type\": \"melee\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Hooves\",\n        \"desc\": \"Melee Weapon Attack: +7 to hit, reach 5 ft., one target. Hit: 11 (2d6 + 4) bludgeoning damage.\",\n        \"attack_bonus\": 7,\n        \"damage\": [\n          {\n            \"damage_type\": {\n              \"index\": \"bludgeoning\",\n              \"name\": \"Bludgeoning\",\n              \"url\": \"/api/2014/damage-types/bludgeoning\"\n            },\n            \"damage_dice\": \"2d6+4\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Horn\",\n        \"desc\": \"Melee Weapon Attack: +7 to hit, reach 5 ft., one target. Hit: 8 (1d8 + 4) piercing damage.\",\n        \"attack_bonus\": 7,\n        \"damage\": [\n          {\n            \"damage_type\": {\n              \"index\": \"piercing\",\n              \"name\": \"Piercing\",\n              \"url\": \"/api/2014/damage-types/piercing\"\n            },\n            \"damage_dice\": \"1d8+4\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Healing Touch\",\n        \"desc\": \"The unicorn touches another creature with its horn. The target magically regains 11 (2d8 + 2) hit points. In addition, the touch removes all diseases and neutralizes all poisons afflicting the target.\",\n        \"usage\": {\n          \"type\": \"per day\",\n          \"times\": 3\n        }\n      },\n      {\n        \"name\": \"Teleport\",\n        \"desc\": \"The unicorn magically teleports itself and up to three willing creatures it can see within 5 ft. of it, along with any equipment they are wearing or carrying, to a location the unicorn is familiar with, up to 1 mile away.\",\n        \"usage\": {\n          \"type\": \"per day\",\n          \"times\": 1\n        }\n      }\n    ],\n    \"legendary_actions\": [\n      {\n        \"name\": \"Hooves\",\n        \"desc\": \"The unicorn makes one attack with its hooves.\"\n      },\n      {\n        \"name\": \"Shimmering Shield (Costs 2 Actions)\",\n        \"desc\": \"The unicorn creates a shimmering, magical field around itself or another creature it can see within 60 ft. of it. The target gains a +2 bonus to AC until the end of the unicorn's next turn.\"\n      },\n      {\n        \"name\": \"Heal Self (Costs 3 Actions)\",\n        \"desc\": \"The unicorn magically regains 11 (2d8 + 2) hit points.\"\n      }\n    ],\n    \"image\": \"/api/images/monsters/unicorn.png\",\n    \"url\": \"/api/2014/monsters/unicorn\"\n}\n</textarea>\n<p>Ok, so given this, I built a little demo of turning this into something a bit more manageable.</p>\n<h2 id=\"the-demo\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#the-demo\">The Demo</a></h2>\n<p>My demo is pretty straight-forward. I'm going to load in the big JSON file (it's a bit over a meg so not <em>too</em> bad, but I would consider client-side storage in a real app) and then let the user click a button to:</p>\n<p>a) select a random monster and display the raw JSON\nb) use <a href=\"https://developer.chrome.com/docs/ai/built-in\">Chrome AI</a> to turn this into a paragraph of text.</p>\n<p>At the time I'm writing this, the <a href=\"https://developer.chrome.com/docs/ai/prompt-api\">Prompt API</a> is still behind a flag, so even if you're on Chrome, you'll need to either enable the flag or... just wait. ;) I'm going to include examples at the end, so don't fret.</p>\n<p>Alright, so the HTML first:</p>\n<pre><code class=\"language-html\">&lt;h2&gt;D&amp;amp;D Monster to Text&lt;/h2&gt;\n&lt;p&gt;\n\tThis CodePen demonstrates using Chrome AI to rewrite JSON describing content into a paragraph of text for easier consumption. In this case the JSON describes a D&amp;amp;D monster. (JSON source from &lt;a href=&quot;https://github.com/5e-bits/5e-database/blob/main/src/2014/5e-SRD-Monsters.json&quot;&gt;5e-bits&lt;/a&gt; on Github.)\n&lt;/p&gt;\n&lt;div class=&quot;twocol&quot;&gt;\n\t&lt;div&gt;\n\t\t&lt;textarea id=&quot;input&quot;&gt;&lt;/textarea&gt;\n\t&lt;p&gt;\n\t\t&lt;button disabled id=&quot;runBtn&quot;&gt;New Random Monster&lt;/button&gt;\n\t&lt;/p&gt;\n\t&lt;/div&gt;\n\t&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Nothing too fancy here, just a textarea for the JSON and an empty div for the result. Do note the button that kicks off the process.</p>\n<p>Now let's look at the JavaScript:</p>\n<pre><code class=\"language-js\">const MONSTERS_JSON = 'https://assets.codepen.io/74045/5e-SRD-Monsters.json';\nlet monsters;\n\ndocument.addEventListener('DOMContentLoaded', init, false);\n\nlet $input, $runBtn, $result;\nlet session;\n\nasync function init() {\n\n\tif(!('LanguageModel' in window)) {\n\t\talert('Sorry, but you can\\'t use this demo.');\n\t\treturn;\n\t}\n\n\tlet available = (await window.LanguageModel.availability());\n\n\tif (available === 'unavailable') {\n\t\talert('Sorry, but you can\\'t use this demo.');\n\t\treturn;\n\t}\n\n\tlet dataReq = await fetch(MONSTERS_JSON);\n\tmonsters = await dataReq.json();\n\t$result = document.querySelector('#result');\n\t$runBtn = document.querySelector('#runBtn');\n\t$input = document.querySelector('#input');\n\n\n\t$runBtn.addEventListener('click', runPrompt, false);\n\t$runBtn.disabled = false;\n}\n\nasync function runPrompt() {\n\t\n\t// first, get a random monster\n\tlet monster = monsters[getRandomIntInclusive(0,monsters.length-1)];\n\t\n\t$input.value = JSON.stringify(monster,null,'\\t');\n\t$result.innerHTML = '&lt;i&gt;Working...&lt;/i&gt;';\n\t\n\tif(!session) {\n\t\tsession = await window.LanguageModel.create({\n\t\t\tinitialPrompts: [\n\t\t\t\t{ role: 'system', content: 'Given a JSON description of an Dungeons and Dragon monster, turn the raw JSON into a paragraph of 4-5 sentences that describes the monster at a high level.' },\t\t\t\n\t\t\t],\n\t\t\tmonitor(m) {\n\t\t\t\tm.addEventListener(&quot;downloadprogress&quot;, e =&gt; {\n\t\t\t\t\tconsole.log(`Downloaded ${e.loaded * 100}%`);\n\t\t\t\t\t/*\n                    why this? the download event _always_ runs at\n                    least once, so this prevents the msg showing up\n                    when its already done. I've seen it report 0 and 1\n                    in this case, so we skip both\n                    */\n\t\t\t\t\tif(e.loaded === 0 || e.loaded === 1) return;\n\t\t\t\t\t$result.innerHTML = `Downloading, currently at ${Math.floor(e.loaded * 100)}%`;\n\t\t\t\t});\n\t\t\t}\t\t\t\n\t\t});\n\t}\n\n\t$runBtn.disabled = true;\n\t\n\t// thanks to Thomas Steiner!\n\t// not sure if we need to clone though...\n\tlet thisSession = await session.clone();\n\tlet result = await thisSession.prompt($input.value);\n\t$result.innerHTML = result + `&lt;p&gt;&lt;img src=&quot;https://www.dnd5eapi.co${monster.image}&quot;&gt;&lt;/p&gt;`;\n\t$runBtn.disabled = false;\n}\n\nfunction getRandomIntInclusive(min, max) { \n\tmin = Math.ceil(min); \n\tmax = Math.floor(max); \n\treturn Math.floor(Math.random() * (max - min + 1) + min);  \n}\n</code></pre>\n<p>So outside of variable declarations and stuff, the initial part of the code does the feature detection required and aborts if anything isn't going to work. As a reminder, <em>generally</em> I'm recommending Chrome's AI tools in progressive enhancement cases. This demo is an exception as it won't do <em>anything</em> without the feature. I could absolutely fall back to a static simple description instead.</p>\n<p>When the button is clicked, I grab one random item, add the JSON to the textarea, and then begin my AI usage. My session sets up a system instruction that clearly defines what it is doing:</p>\n<pre><code>Given a JSON description of an Dungeons and Dragon monster, turn the raw \nJSON into a paragraph of 4-5 sentences that describes the monster at a \nhigh level.\n</code></pre>\n<p>Which then leaves the prompt to simply taking the JSON and working on it:</p>\n<pre><code class=\"language-js\">let result = await thisSession.prompt($input.value);\n</code></pre>\n<p>I then display the result, and as I noticed the API supported images, I go ahead and render it as well.</p>\n<h2 id=\"examples\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#examples\">Examples</a></h2>\n<p>Ok, so given that most of you probably <em>can't</em> run it, here are a few examples. First up, a lovely ancient-blue dragon. Here's the JSON:</p>\n<textarea style=\"width:100%; height: 300px\">{\n\t\"index\": \"ancient-blue-dragon\",\n\t\"name\": \"Ancient Blue Dragon\",\n\t\"size\": \"Gargantuan\",\n\t\"type\": \"dragon\",\n\t\"alignment\": \"lawful evil\",\n\t\"armor_class\": [\n\t\t{\n\t\t\t\"type\": \"natural\",\n\t\t\t\"value\": 22\n\t\t}\n\t],\n\t\"hit_points\": 481,\n\t\"hit_dice\": \"26d20\",\n\t\"hit_points_roll\": \"26d20+208\",\n\t\"speed\": {\n\t\t\"walk\": \"40 ft.\",\n\t\t\"burrow\": \"40 ft.\",\n\t\t\"fly\": \"80 ft.\"\n\t},\n\t\"strength\": 29,\n\t\"dexterity\": 10,\n\t\"constitution\": 27,\n\t\"intelligence\": 18,\n\t\"wisdom\": 17,\n\t\"charisma\": 21,\n\t\"proficiencies\": [\n\t\t{\n\t\t\t\"value\": 7,\n\t\t\t\"proficiency\": {\n\t\t\t\t\"index\": \"saving-throw-dex\",\n\t\t\t\t\"name\": \"Saving Throw: DEX\",\n\t\t\t\t\"url\": \"/api/2014/proficiencies/saving-throw-dex\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"value\": 15,\n\t\t\t\"proficiency\": {\n\t\t\t\t\"index\": \"saving-throw-con\",\n\t\t\t\t\"name\": \"Saving Throw: CON\",\n\t\t\t\t\"url\": \"/api/2014/proficiencies/saving-throw-con\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"value\": 10,\n\t\t\t\"proficiency\": {\n\t\t\t\t\"index\": \"saving-throw-wis\",\n\t\t\t\t\"name\": \"Saving Throw: WIS\",\n\t\t\t\t\"url\": \"/api/2014/proficiencies/saving-throw-wis\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"value\": 12,\n\t\t\t\"proficiency\": {\n\t\t\t\t\"index\": \"saving-throw-cha\",\n\t\t\t\t\"name\": \"Saving Throw: CHA\",\n\t\t\t\t\"url\": \"/api/2014/proficiencies/saving-throw-cha\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"value\": 17,\n\t\t\t\"proficiency\": {\n\t\t\t\t\"index\": \"skill-perception\",\n\t\t\t\t\"name\": \"Skill: Perception\",\n\t\t\t\t\"url\": \"/api/2014/proficiencies/skill-perception\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"value\": 7,\n\t\t\t\"proficiency\": {\n\t\t\t\t\"index\": \"skill-stealth\",\n\t\t\t\t\"name\": \"Skill: Stealth\",\n\t\t\t\t\"url\": \"/api/2014/proficiencies/skill-stealth\"\n\t\t\t}\n\t\t}\n\t],\n\t\"damage_vulnerabilities\": [],\n\t\"damage_resistances\": [],\n\t\"damage_immunities\": [\n\t\t\"lightning\"\n\t],\n\t\"condition_immunities\": [],\n\t\"senses\": {\n\t\t\"blindsight\": \"60 ft.\",\n\t\t\"darkvision\": \"120 ft.\",\n\t\t\"passive_perception\": 27\n\t},\n\t\"languages\": \"Common, Draconic\",\n\t\"challenge_rating\": 23,\n\t\"proficiency_bonus\": 7,\n\t\"xp\": 50000,\n\t\"special_abilities\": [\n\t\t{\n\t\t\t\"name\": \"Legendary Resistance\",\n\t\t\t\"desc\": \"If the dragon fails a saving throw, it can choose to succeed instead.\",\n\t\t\t\"usage\": {\n\t\t\t\t\"type\": \"per day\",\n\t\t\t\t\"times\": 3\n\t\t\t}\n\t\t}\n\t],\n\t\"actions\": [\n\t\t{\n\t\t\t\"name\": \"Multiattack\",\n\t\t\t\"multiattack_type\": \"actions\",\n\t\t\t\"desc\": \"The dragon can use its Frightful Presence. It then makes three attacks: one with its bite and two with its claws.\",\n\t\t\t\"actions\": [\n\t\t\t\t{\n\t\t\t\t\t\"action_name\": \"Frightful Presence\",\n\t\t\t\t\t\"count\": 1,\n\t\t\t\t\t\"type\": \"ability\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"action_name\": \"Bite\",\n\t\t\t\t\t\"count\": 1,\n\t\t\t\t\t\"type\": \"melee\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"action_name\": \"Claw\",\n\t\t\t\t\t\"count\": 2,\n\t\t\t\t\t\"type\": \"melee\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Bite\",\n\t\t\t\"desc\": \"Melee Weapon Attack: +16 to hit, reach 15 ft., one target. Hit: 20 (2d10 + 9) piercing damage plus 11 (2d10) lightning damage.\",\n\t\t\t\"attack_bonus\": 16,\n\t\t\t\"damage\": [\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"piercing\",\n\t\t\t\t\t\t\"name\": \"Piercing\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/piercing\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"2d10+9\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"lightning\",\n\t\t\t\t\t\t\"name\": \"Lightning\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/lightning\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"2d10\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Claw\",\n\t\t\t\"desc\": \"Melee Weapon Attack: +16 to hit, reach 10 ft., one target. Hit: 16 (2d6 + 9) slashing damage.\",\n\t\t\t\"attack_bonus\": 16,\n\t\t\t\"damage\": [\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"slashing\",\n\t\t\t\t\t\t\"name\": \"Slashing\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/slashing\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"2d6+9\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Tail\",\n\t\t\t\"desc\": \"Melee Weapon Attack: +16 to hit, reach 20 ft., one target. Hit: 18 (2d8 + 9) bludgeoning damage.\",\n\t\t\t\"attack_bonus\": 16,\n\t\t\t\"damage\": [\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"bludgeoning\",\n\t\t\t\t\t\t\"name\": \"Bludgeoning\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/bludgeoning\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"2d8+9\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Frightful Presence\",\n\t\t\t\"desc\": \"Each creature of the dragon's choice that is within 120 feet of the dragon and aware of it must succeed on a DC 20 Wisdom saving throw or become frightened for 1 minute. A creature can repeat the saving throw at the end of each of its turns, ending the effect on itself on a success. If a creature's saving throw is successful or the effect ends for it, the creature is immune to the dragon's Frightful Presence for the next 24 hours.\",\n\t\t\t\"dc\": {\n\t\t\t\t\"dc_type\": {\n\t\t\t\t\t\"index\": \"wis\",\n\t\t\t\t\t\"name\": \"WIS\",\n\t\t\t\t\t\"url\": \"/api/2014/ability-scores/wis\"\n\t\t\t\t},\n\t\t\t\t\"dc_value\": 20,\n\t\t\t\t\"success_type\": \"none\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Lightning Breath\",\n\t\t\t\"desc\": \"The dragon exhales lightning in a 120-foot line that is 10 feet wide. Each creature in that line must make a DC 23 Dexterity saving throw, taking 88 (16d10) lightning damage on a failed save, or half as much damage on a successful one.\",\n\t\t\t\"usage\": {\n\t\t\t\t\"type\": \"recharge on roll\",\n\t\t\t\t\"dice\": \"1d6\",\n\t\t\t\t\"min_value\": 5\n\t\t\t},\n\t\t\t\"dc\": {\n\t\t\t\t\"dc_type\": {\n\t\t\t\t\t\"index\": \"dex\",\n\t\t\t\t\t\"name\": \"DEX\",\n\t\t\t\t\t\"url\": \"/api/2014/ability-scores/dex\"\n\t\t\t\t},\n\t\t\t\t\"dc_value\": 23,\n\t\t\t\t\"success_type\": \"half\"\n\t\t\t},\n\t\t\t\"damage\": [\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"lightning\",\n\t\t\t\t\t\t\"name\": \"Lightning\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/lightning\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"16d10\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"legendary_actions\": [\n\t\t{\n\t\t\t\"name\": \"Detect\",\n\t\t\t\"desc\": \"The dragon makes a Wisdom (Perception) check.\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Tail Attack\",\n\t\t\t\"desc\": \"The dragon makes a tail attack.\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Wing Attack (Costs 2 Actions)\",\n\t\t\t\"desc\": \"The dragon beats its wings. Each creature within 15 ft. of the dragon must succeed on a DC 24 Dexterity saving throw or take 16 (2d6 + 9) bludgeoning damage and be knocked prone. The dragon can then fly up to half its flying speed.\",\n\t\t\t\"dc\": {\n\t\t\t\t\"dc_type\": {\n\t\t\t\t\t\"index\": \"dex\",\n\t\t\t\t\t\"name\": \"DEX\",\n\t\t\t\t\t\"url\": \"/api/2014/ability-scores/dex\"\n\t\t\t\t},\n\t\t\t\t\"dc_value\": 24,\n\t\t\t\t\"success_type\": \"none\"\n\t\t\t},\n\t\t\t\"damage\": [\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"bludgeoning\",\n\t\t\t\t\t\t\"name\": \"Bludgeoning\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/bludgeoning\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"2d6+9\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"image\": \"/api/images/monsters/ancient-blue-dragon.png\",\n\t\"url\": \"/api/2014/monsters/ancient-blue-dragon\"\n}\n</textarea>\n<p>And here's how Chrome AI described it:</p>\n<p>The Ancient Blue Dragon is a gargantuan lawful evil creature known for its immense power and cunning. Possessing a formidable armor class and a massive hit point total of 481, it is a terrifying foe to encounter. This dragon boasts impressive physical capabilities, including a powerful bite, razor-sharp claws, and a devastating lightning breath attack, complemented by legendary resistance to damage. With a challenge rating of 23, it is a truly epic monster, capable of wreaking havoc and instilling fear in all who cross its path, and its innate abilities allow it to control the battlefield with Frightful Presence.</p>\n<img src=\"https://www.dnd5eapi.co/api/images/monsters/ancient-blue-dragon.png\" loading=\"lazy\" style=\"max-width:500px\">\n<p>And how about something on the completely other side of the fence... a pony.</p>\n<textarea style=\"width:100%; height: 300px\">\n{\n\t\"index\": \"pony\",\n\t\"name\": \"Pony\",\n\t\"size\": \"Medium\",\n\t\"type\": \"beast\",\n\t\"alignment\": \"unaligned\",\n\t\"armor_class\": [\n\t\t{\n\t\t\t\"type\": \"dex\",\n\t\t\t\"value\": 10\n\t\t}\n\t],\n\t\"hit_points\": 11,\n\t\"hit_dice\": \"2d8\",\n\t\"hit_points_roll\": \"2d8+2\",\n\t\"speed\": {\n\t\t\"walk\": \"40 ft.\"\n\t},\n\t\"strength\": 15,\n\t\"dexterity\": 10,\n\t\"constitution\": 13,\n\t\"intelligence\": 2,\n\t\"wisdom\": 11,\n\t\"charisma\": 7,\n\t\"proficiencies\": [],\n\t\"damage_vulnerabilities\": [],\n\t\"damage_resistances\": [],\n\t\"damage_immunities\": [],\n\t\"condition_immunities\": [],\n\t\"senses\": {\n\t\t\"passive_perception\": 10\n\t},\n\t\"languages\": \"\",\n\t\"challenge_rating\": 0.125,\n\t\"proficiency_bonus\": 2,\n\t\"xp\": 25,\n\t\"actions\": [\n\t\t{\n\t\t\t\"name\": \"Hooves\",\n\t\t\t\"desc\": \"Melee Weapon Attack: +4 to hit, reach 5 ft., one target. Hit: 7 (2d4 + 2) bludgeoning damage.\",\n\t\t\t\"attack_bonus\": 4,\n\t\t\t\"damage\": [\n\t\t\t\t{\n\t\t\t\t\t\"damage_type\": {\n\t\t\t\t\t\t\"index\": \"bludgeoning\",\n\t\t\t\t\t\t\"name\": \"Bludgeoning\",\n\t\t\t\t\t\t\"url\": \"/api/2014/damage-types/bludgeoning\"\n\t\t\t\t\t},\n\t\t\t\t\t\"damage_dice\": \"2d4+2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"image\": \"/api/images/monsters/pony.png\",\n\t\"url\": \"/api/2014/monsters/pony\"\n}\n</textarea>\n<p>The Pony is a medium-sized beast with an unaligned nature. It possesses a decent strength score of 15 and a speed of 40 feet, making it relatively agile. It has a Challenge Rating of 0.125, suggesting it poses a minor threat. The Pony primarily attacks with its hooves, dealing bludgeoning damage. It has a passive perception of 10, allowing it to notice things around it.</p>\n<img src=\"https://www.dnd5eapi.co/api/images/monsters/pony.png\" loading=\"lazy\" style=\"max-width:500px\">\n<h2 id=\"try-it-yourself\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#try-it-yourself\">Try it Yourself</a></h2>\n<p>If you want to try it yourself, or see all of the code, you can see the embed below:</p>\n<p class=\"codepen\" data-height=\"500\" data-theme-id=\"dark\" data-default-tab=\"html,result\" data-slug-hash=\"qENrxOE\" data-pen-title=\"DD Monster to Text\" data-user=\"cfjedimaster\" style=\"height: 500px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\">\n      <span>See the Pen <a href=\"https://codepen.io/cfjedimaster/pen/qENrxOE\">\n  DD Monster to Text</a> by Raymond Camden (<a href=\"https://codepen.io/cfjedimaster\">@cfjedimaster</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n      </p>\n      <script async src=\"https://public.codepenassets.com/embed/index.js\"></script>\n<p>Photo by <a href=\"https://unsplash.com/@procopiopi?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Omar:. Lopez-Rincon</a> on <a href=\"https://unsplash.com/photos/a-cartoon-vampire-with-pointy-ears-and-a-bow-tie-1CSyvXoeO98?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a></p>",
    "date": "2026-02-16T02:00:48.453Z",
    "url": "https://www.raymondcamden.com/2026/01/17/using-chrome-ai-to-rewrite-monstrous-json"
  }
]